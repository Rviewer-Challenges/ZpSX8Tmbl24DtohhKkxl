(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{"AEu/":function(e,t,a){"use strict";a.r(t),a.d(t,"ConversationHiddenRepliesScreen",(function(){return M}));var n=a("ERkP"),r=a.n(n),o=a("es0u"),c=a("8Lfv"),i=a("G6rE"),s=a("rxPX"),l=a("0KEI");const d=(e,t)=>t.match.params.statusId,u=(e,t)=>t.match.params.screenName,m=(e,t)=>"PUSH"===t.history.action;var p=Object(s.a)().propsFromState((()=>({screenName:u,statusId:d,isForwardNavigation:m,loggedInUser:i.e.selectLoggedInUser}))).adjustStateProps((e=>{const{loggedInUser:t,...a}=e;return{loggedInScreenName:t?t.screen_name:void 0,...a}})).propsFromActions((()=>({createLocalApiErrorHandler:Object(l.createLocalApiErrorHandlerWithContextFactory)("HIDDEN_REPLIES_PAGE"),clearTimelineCache:e=>Object(c.a)(e)}))).withAnalytics({page:"tweet",section:"moderated_replies"}),h=a("QIgh"),g=a("8UdT"),b=a("IcAo"),y=a("VrCx"),f=a("xWpm"),E=({withUnhideReply:e})=>Object(b.a)({},h.b,{[g.c.Tweet]:{handlers:{[y.a.Tweet]:Object(f.f)({createAdditionalProps:()=>({withUnhideReply:e}),displayBlocked:!0,divider:{top:!0,bottom:!0}})}}}),_=a("WU0f"),w=a("zTrU"),v=a("yoO3"),C=a("fTQJ"),I=a("VS6U"),P=a("t62R"),T=a("FIs5"),S=a("WjvF"),x=a("3XMw"),O=a.n(x);const k=O.a.d806aa1a,L=O.a.d80c77dc,j=O.a.ef939f4b,A=O.a.efb9a9e0,D=r.a.createElement(O.a.I18NFormatMessage,{$i18n:"c9927419"},r.a.createElement(P.b,{link:"https://help.twitter.com/using-twitter/mentions-and-replies#hidden-reply"},O.a.b20c41ff)),B=()=>r.a.createElement(T.a,{header:A,imageVariants:Object(S.b)(S.a.Turtle),message:D});class M extends r.a.Component{constructor(e){super(e),this._getMemoizedModule=Object(w.a)((e=>Object(_.a)(e))),this._getModule=()=>{const{statusId:e}=this.props;return this._getMemoizedModule(e)},this._clearTimelineCache()}render(){const{history:e,loggedInScreenName:t,screenName:a,statusId:n}=this.props;return a&&n?r.a.createElement(v.a,null,r.a.createElement(I.a,{backLocation:`/${a.toLowerCase()}/status/${n}`,history:e,primaryContent:this._renderPrimaryContent(),sidebarContent:r.a.createElement(o.a,null),subtitle:a===t?L:j({screenName:a}),title:k})):null}_renderPrimaryContent(){const{loggedInScreenName:e,screenName:t}=this.props;return r.a.createElement(C.a,{entryConfiguration:E({withUnhideReply:t===e}),module:this._getModule(),renderEmptyState:B,title:k})}_clearTimelineCache(e=this._getModule()){const{clearTimelineCache:t,createLocalApiErrorHandler:a,isForwardNavigation:n}=this.props;n&&t(e).catch(a({}))}}t.default=p(M)},JiIh:function(e,t,a){"use strict";var n=a("ERkP"),r=a.n(n),o=a("0GBF");t.a=e=>r.a.createElement(o.a,e)},aH1V:function(e,t,a){"use strict";a.r(t),a.d(t,"QuickPromoteScreen",(function(){return to}));a("kYxP"),a("MvUL"),a("Qavd"),a("849X");var n=a("ERkP"),r=a.n(n);function o(e){throw new Error("Not reachable section reached!")}var c=a("97Jx"),i=a.n(c),s=a("RqPI"),l=a("rxPX"),d=a("0KEI"),u=a("S3l+");const m=e=>e.quickPromote.budget.dailyBudget,p=e=>e.quickPromote.budget.durationDays,h=e=>e.quickPromote.budget.errorMessage,g=e=>e.quickPromote.budget.availableBudgets||(e=>{throw new Error(e)})("No budgets found"),b=e=>e.quickPromote.budget.currency||"USD",y=(e,t)=>{var a,n;const r=Object(u.n)(e);return null==(a=e.ads.typeahead.forecastAudience[r])||null==(n=a.result)?void 0:n.estimatedImpressions};var f=Object(l.a)().propsFromState((()=>({dailyBudget:m,durationDays:p,availableBudgets:g,lang:s.q,currency:b,audience:y,errorMessage:h}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(d.createLocalApiErrorHandlerWithContextFactory)("QUICK_PROMOTE_BUDGET_SELECT_SCREEN"),setDailyBudget:u.D,setBudgetDuration:u.y,fetchForecastedAudienceIfNeeded:u.h,setBudgetErrorMessage:u.z}))).withAnalytics({page:"quick_promote"}),E=a("MWbm"),_=a("t62R"),w=a("rHpw");const v=({children:e,description:t,descriptionDir:a,descriptionTestID:n,label:o,withBottomBorder:c=!0})=>r.a.createElement(E.a,{style:[C.descriptionItem,c?C.bottomBorder:void 0]},!!o&&r.a.createElement(_.b,{weight:"bold"},o),!!t&&r.a.createElement(E.a,{style:C.descriptionContainer},r.a.createElement(_.b,{color:"gray700",dir:a,size:"subtext2",style:C.descriptionContainer,testID:n},t)),e),C=w.a.create((e=>({descriptionItem:{backgroundColor:e.colors.cellBackground,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},descriptionContainer:{marginTop:e.spaces.space2},bottomBorder:{borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.colors.borderColor}})));var I=a("E6XO"),P=a("WM1P"),T=a("FGLp");const S=e=>{Object(T.a)((()=>{const t=I.e(),a=()=>{t.resume()},n=()=>{t.pause()};return window.addEventListener("focus",a),window.addEventListener("blur",n),()=>{I.c(`${P.a}:dwell:${e}`,t.end()),window.removeEventListener("focus",a),window.removeEventListener("blur",n)}}))},x=({screenType:e})=>(S(e),null);var O=a("Gpeq"),k=a("tevE");const L=({primaryLabel:e,subtitle:t,title:a})=>r.a.createElement(E.a,{style:[j.bottomBorder,j.titleContainer]},r.a.createElement(_.b,{accessibilityLevel:1,accessibilityRole:"heading",align:"center",size:"headline1",weight:"heavy"},a),!!e&&r.a.createElement(E.a,{style:j.primaryLabelContainer},r.a.createElement(_.b,{align:"center",color:"primary",size:"title4"},e)),r.a.createElement(E.a,{style:j.subtitleContainer},r.a.createElement(k.a,{align:"center",color:"gray700"},t))),j=w.a.create((e=>({titleContainer:{paddingVertical:e.spaces.space32},primaryLabelContainer:{marginTop:e.spaces.space12},subtitleContainer:{marginTop:e.spaces.space12},bottomBorder:{borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.colors.borderColor}})));var A=a("3XMw"),D=a.n(A),B="introButton",M="nextButton",F="objectiveScreen",R="targetingScreen",N=e=>`targetingScreenGender${e}`,q=e=>`objectiveScreenObjective${e}`,H="targetingLocationScreen",z="budgetSelectScreen",U="reviewScreen",V="reviewButton",G="reviewObjectiveDescription",$="reviewTargetingDescription",W="reviewBudgetAndDurationDescription",Q="reviewPaymentPivot",X="reviewPromotionTotalDescription",J="targetingLocationPivot",K="backButton",Y="targetingLocationSearch",Z="targetingLocationItem",ee="paymentMethodSelect",te=a("4zmP"),ae=a("9RkS"),ne=a("v6aA"),re=a("Xrkv"),oe=a("SrIh");const ce=D.a.c4d0434b,ie=D.a.dc4a9413,se=D.a.bad70c09,le=D.a.c133a39b,de=D.a.ee5da8f5,ue=D.a.g4bf9cb7,me=D.a.gc3ce5d9,pe=D.a.c1778029,he=D.a.cb51c854,ge=D.a.bb7b39e2,be=D.a.eb9466d0,ye=D.a.c21037d0,fe=D.a.b07cc9f2,Ee=D.a.ce309bee,_e=D.a.c6c16a52,we=D.a.cc49d030,ve=D.a.dbe9353e,Ce=D.a.c64974fc,Ie=D.a.i638f89c;function Pe(e){switch(e){case"AnyGender":return he;case"Male":return ge;case"Female":return be;default:return Object(oe.a)(`Unknown gender: ${e}`),e}}function Te(e){switch(e){case"COUNTRIES":return ye;case"REGIONS":return fe;case"METROS":return Ee;case"CITIES":return _e;case"POSTAL_CODES":return we;default:return Object(oe.a)(`Unknown targeting locationType: ${e}`),e}}function Se({amount:e,currency:t,fractionDigits:a,lang:n}){return e.toLocaleString(Object(O.a)(n),{currency:t,style:"currency",maximumFractionDigits:void 0!==a?a:2,minimumFractionDigits:void 0!==a?a:2})}function xe({currency:e,durationDays:t,lang:a,totalBudgetNum:n}){const r=Se({amount:n,lang:a,currency:e,fractionDigits:0});return ie({totalBudget:r,durationLabel:Le({durationDays:t})})}function Oe({currency:e,dailyBudgetNum:t,durationDays:a,lang:n}){const r=Se({amount:t,lang:n,currency:e,fractionDigits:0});return ce({dailyBudget:r,durationLabel:Le({durationDays:a})})}function ke({numLocations:e}){const t=D.a.ia24dc8d(e);return se({numLocations:t})}function Le({durationDays:e}){const t=D.a.ia24dc8d(e);return ue({durationDays:t})}var je=a("yE5w");const Ae=D.a.a3a09d48,De=D.a.e7eb3684,Be=D.a.d9f6e3ce,Me=D.a.d9d6e10e,Fe=D.a.b3954eca,Re=D.a.e1b48db4,Ne=Array(30).fill(null).map(((e,t)=>t+1));class qe extends r.a.PureComponent{constructor(...e){super(...e),this._fetchForecastedAudienceIfNeeded=()=>{const{analytics:e,createLocalApiErrorHandler:t,fetchForecastedAudienceIfNeeded:a,match:{params:{statusId:n}}}=this.props;a(n,e).catch(t())},this._getSliderProps=(e,t)=>({max:e.length-1,min:0,value:e.indexOf(t)}),this._handleDurationSlider=e=>{const{analytics:t,durationDays:a,setBudgetDuration:n}=this.props,r=Ne[e];a!==r&&(Object(je.p)(t)(je.n.setBudgetDuration(`${r}`)),n(r),this._fetchForecastedAudienceIfNeeded())},this._handleBudgetSlider=e=>{const{analytics:t,availableBudgets:a,dailyBudget:n,setDailyBudget:r}=this.props,o=a[e];n!==o&&(Object(je.p)(t)(je.n.setDailyBudget(`${o}`)),r(o),this._fetchForecastedAudienceIfNeeded())}}componentDidMount(){const{analytics:e}=this.props;Object(je.p)(e)(je.n.budgetSelectPageLoad()),this._fetchForecastedAudienceIfNeeded()}componentWillUnmount(){const{setBudgetErrorMessage:e}=this.props;e(null)}render(){const{audience:e,availableBudgets:t,currency:a,dailyBudget:n,durationDays:o,errorMessage:c,lang:s}=this.props,l=n.toLocaleString(Object(O.a)(s),{currency:a,style:"currency",maximumFractionDigits:0,minimumFractionDigits:0}),d=t[0].toLocaleString(Object(O.a)(s),{currency:a,style:"currency",maximumFractionDigits:0,minimumFractionDigits:0}),u=t.slice(-1)[0].toLocaleString(Object(O.a)(s),{currency:a,style:"currency",maximumFractionDigits:0,minimumFractionDigits:0}),m=e?function({high:e,low:t}){const a=D.a.cf8abf59(t),n=D.a.cf8abf59(e);return me({audienceLow:a,audienceHigh:n})}(e):"Â ",p=Le({durationDays:o}),h=Le({durationDays:Ne[0]}),g=Le({durationDays:Ne.slice(-1)[0]}),b=this._getSliderProps(t,n),y=this._getSliderProps(Ne,o),f=this.context.featureSwitches.isTrue("responsive_web_qp_welcome_coupon_enabled")?Oe({dailyBudgetNum:n,durationDays:o,lang:s,currency:a}):xe({totalBudgetNum:n*o,durationDays:o,lang:s,currency:a});return r.a.createElement(E.a,{style:He.qpContainer,testID:z},r.a.createElement(x,{screenType:je.c.BudgetSelect}),c&&r.a.createElement(E.a,{style:He.gutter},r.a.createElement(te.a,{text:c,type:"danger"})),r.a.createElement(L,{primaryLabel:f,subtitle:m,title:Ae}),r.a.createElement(v,{label:De},r.a.createElement(E.a,{style:He.childSpacing},r.a.createElement(ae.a,i()({accessibilityLabel:Be,accessibilityLabelValueText:`"${l}"`},b,{maxIcon:r.a.createElement(_.b,{style:He.iconText},u),minIcon:r.a.createElement(_.b,{style:He.iconText},d),onChange:this._handleBudgetSlider,thumbLabel:l})))),r.a.createElement(v,{label:Me},r.a.createElement(E.a,{style:He.childSpacing},r.a.createElement(ae.a,i()({accessibilityLabel:Fe,accessibilityLabelValueText:`"${p}"`},y,{maxIcon:r.a.createElement(_.b,{style:He.iconText},g),minIcon:r.a.createElement(_.b,{style:He.iconText},h),onChange:this._handleDurationSlider,thumbLabel:p})))),r.a.createElement(E.a,{style:He.disclaimer},r.a.createElement(k.a,{align:"center",color:"gray700",size:"subtext2"},Re)))}}qe.contextType=ne.a;const He=w.a.create((e=>({qpContainer:{flex:1},disclaimer:{marginVertical:e.componentDimensions.gutterVertical,marginHorizontal:e.componentDimensions.gutterHorizontal},gutter:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},childSpacing:{marginTop:e.spaces.space4},iconText:{textAlignVertical:"text-bottom"}})));var ze=f(qe),Ue=a("kGix"),Ve=a("XOJV");const Ge=(e,t)=>t.match.params.statusId,$e=(e,t)=>Ve.a.selectHydrated(e,Ge(0,t)),We=(e,t)=>Object(Ue.d)(Ve.a.selectFetchStatus(e,Ge(0,t)),e.quickPromote.budget.availableBudgetsFetchStatus,e.quickPromote.targeting.initialTargetedLocationsFetchStatus,e.quickPromote.account.accountDataFetchStatus,e.quickPromote.couponsFetchStatus),Qe=(e,t)=>e.quickPromote.promoteStatus,Xe=(e,t)=>e.quickPromote.promoteErrorCode,Je=(e,t)=>e.quickPromote.account.campaigns;var Ke=Object(l.a)().propsFromState((()=>({statusId:Ge,fetchStatus:We,tweet:$e,campaigns:Je,promoteFetchStatus:Qe,promoteErrorCode:Xe}))).propsFromActions((e=>({createLocalApiErrorHandler:Object(d.createLocalApiErrorHandlerWithContextFactory)("QUICK_PROMOTE_SCREEN"),fetchTweetIfNeeded:Ve.a.fetchOneIfNeeded,fetchCurrentTargetingLocationIfNeeded:u.g,fetchAvailableBudgetsIfNeeded:u.e,fetchAdsAccountDataIfNeeded:u.d,fetchQuickPromoteEligibilityIfNeeded:u.k,fetchCouponsIfNeeded:u.f,handleFirstLoad:()=>(e=>{const{analytics:t,history:a,location:n,match:r}=e,{quickPromotePlatform:o,quickPromoteScreenName:c,screenName:i,statusId:s}=r.params,l={pa_signup_complete:n.query.pa_signup_complete||""};return Object(u.l)(i,s,o,c,a,l,t)})(e),setPromoteFetchStatus:u.O}))).withAnalytics(je.o),Ye=Object(l.a)().withAnalytics(je.o),Ze=a("feu+");const et=D.a.e1bca506,tt=D.a.e4a4c608,at=D.a.a219e218;class nt extends r.a.PureComponent{constructor(...e){super(...e),this._handleGoToAnalytics=()=>{const{history:e,match:t}=this.props,{quickPromotePlatform:a,screenName:n,statusId:r}=t.params;Object(je.l)(e)(n,r,a)},this._handleClose=()=>{const{history:e}=this.props;e.goBackThroughModals()}}componentDidMount(){const{analytics:e}=this.props;Object(je.p)(e)(je.n.donePageLoad())}render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{screenType:je.c.Done}),r.a.createElement(Ze.a,{actionLabel:at,headline:et,isFullHeightOnMobile:!0,onAction:this._handleGoToAnalytics,onClose:this._handleClose,subtext:tt,withCloseButton:!1}))}}nt.contextType=ne.a;var rt=Ye(nt),ot=a("v//M"),ct=a("W5XZ"),it=a("jHSc");a("Cm4o"),a("KrtT");const st=e=>!!e.quickPromote.account.selectedFundingInstrument,lt=e=>e.quickPromote.coupons,dt=e=>e.quickPromote.budget.currency||"USD";var ut=Object(l.a)().propsFromState((()=>({hasFundingInstrument:st,coupons:lt,lang:s.q,currency:dt}))).withAnalytics(je.o),mt=a.p+"desktop_header_image.bfa9e367.png",pt=a("TIdA"),ht=a("A91F");function gt({style:e}){return r.a.createElement(E.a,{style:e},r.a.createElement(pt.a,{accessibilityLabel:"",aspectMode:ht.a.exact(750/306),image:mt}))}var bt=a.p+"mobile_header_image.431e8467.png";function yt({style:e}){return r.a.createElement(E.a,{style:e},r.a.createElement(pt.a,{accessibilityLabel:"",aspectMode:ht.a.COVER,image:bt}))}var ft=a("cHvH");function Et({style:e}){return r.a.createElement(ft.a,null,(({windowHeight:t,windowWidth:a})=>a>w.a.theme.breakpoints.medium?r.a.createElement(gt,{style:e}):r.a.createElement(yt,{style:[e,{height:.5*t}]})))}const _t=D.a.dcfb0332,wt=D.a.db841200,vt=D.a.hc67be9e,Ct=D.a.e8702feb,It=D.a.e44dc579,Pt=(0,D.a.ba2e82a1)(new Date(2022,3,30)),Tt=D.a.dcfb0332;class St extends r.a.PureComponent{constructor(...e){super(...e),this._handleGoToNextPage=()=>{const{history:e,match:t}=this.props,{quickPromotePlatform:a,screenName:n,statusId:r}=t.params,o=this.context.featureSwitches.isTrue("responsive_web_qp_objective_picker_enabled");e.push(Object(je.j)(n,r,a,o?je.c.Objective:je.c.Targeting))},this._handleClose=()=>{const{history:e}=this.props;e.goBackThroughModals()}}componentDidMount(){var e,t,a;const{analytics:n,coupons:r,hasFundingInstrument:o,location:c,match:i}=this.props,{screenName:s,statusId:l}=i.params,d=function(e,t,a){if(!e)return"none";{const n=new URL(e,window.location.origin);if(n.pathname===`/${t}`)return"me";if(n.pathname===`/${t}/status/${a}`)return"tweet";if(n.pathname===`/${t}/status/${a}/analytics`)return"analytics";if("/i/flow/convert_to_professional"===n.pathname)return"ptt"}return"other"}(null==(e=c.state)?void 0:e.previousPath,s,l),u="other"===d?null==(t=c.state)?void 0:t.previousPath:void 0,m=(null==r||null==(a=r.eligible_coupon)?void 0:a.total_amount)||0,p=this.context.featureSwitches.isTrue("responsive_web_qp_welcome_coupon_enabled")&&m>0;Object(je.p)(n)(je.n.introPageLoad({hasFundingInstrument:o,entryPoint:d,otherEntryPoint:u,withCoupon:p}))}render(){var e,t;const{coupons:a,currency:n,lang:o,match:c}=this.props,{quickPromotePlatform:i}=c.params,s=i===je.a.Rweb,l=(null==a||null==(e=a.eligible_coupon)?void 0:e.total_amount)||0,d=Se({amount:l,currency:(null==a||null==(t=a.eligible_coupon)?void 0:t.currency_code)||n,lang:o,fractionDigits:0}),u=this.context.featureSwitches.isTrue("responsive_web_qp_welcome_coupon_enabled")&&l>0,m=u?Ct({couponAmount:d}):_t,p=u?It({couponAmount:d,date:Pt}):wt,h=u?Tt:vt;return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{screenType:je.c.Intro}),r.a.createElement(Ze.a,{actionLabel:h,graphic:Et,graphicDisplayMode:"illustrationFullWidth",headline:m,isFullHeightOnMobile:!0,onAction:this._handleGoToNextPage,onClose:this._handleClose,primaryButtonTestID:B,subtext:p,withCloseButton:s}))}}St.contextType=ne.a;var xt=ut(St);const Ot=(e,t)=>e.quickPromote.objective,kt=(e,t)=>Ve.a.selectHydrated(e,((e,t)=>t.match.params.statusId)(0,t));var Lt=Object(l.a)().propsFromState((()=>({selectedObjective:Ot,tweet:kt}))).propsFromActions((()=>({setObjective:u.K}))).withAnalytics(je.o),jt=a("h0NW");const At=D.a.d7d55f3c,Dt=D.a.b25fd3d6,Bt=D.a.bf214f48;var Mt=e=>{const{infoItems:t,onClose:a,onLoad:n}=e;return r.a.useEffect((()=>n()),[]),r.a.createElement(Ze.a,{actionLabel:Bt,children:r.a.createElement(E.a,{style:Ft.infoItemGroup},r.a.createElement(jt.a,{containerStyle:Ft.infoItem,items:t})),contentStyle:Ft.heading,graphicDisplayMode:"none",headline:At,onAction:a,onClose:a,subtext:Dt,withCloseButton:!1})};const Ft=w.a.create((e=>({heading:{marginBottom:e.spaces.space40},infoItemGroup:{marginBottom:e.spaces.space20},infoItem:{paddingHorizontal:0,paddingVertical:0,marginBottom:e.spaces.space24}})));var Rt=a("W2FU"),Nt=a("E0cF"),qt=a("gSL+"),Ht=a("RKmr"),zt=a("Oib4"),Ut=a("Dcm7"),Vt=a("iEUn"),Gt=a("pwey"),$t=a("Lsrn"),Wt=a("k/Ka");const Qt=(e={})=>Object(Wt.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[$t.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M11.25 22h-7C3.01 22 2 20.99 2 19.75V4.25C2 3.01 3.01 2 4.25 2h15.5C20.99 2 22 3.01 22 4.25v7c0 .414-.336.75-.75.75s-.75-.336-.75-.75v-7c0-.413-.337-.75-.75-.75H4.25c-.413 0-.75.337-.75.75v15.5c0 .413.337.75.75.75h7c.414 0 .75.336.75.75s-.336.75-.75.75z"}),r.a.createElement("path",{d:"M22.094 20.01l-3.614-3.614 2.586-.997c.19-.074.313-.26.307-.465-.008-.204-.144-.38-.34-.44l-8.55-2.6c-.168-.05-.353-.006-.478.12-.125.124-.17.31-.12.478l2.6 8.55c.06.195.237.33.44.34h.02c.196 0 .374-.122.445-.308l.997-2.586L20 22.102c.195.194.514.194.708 0l1.386-1.386c.194-.195.194-.513 0-.707z"})));Qt.metadata={width:24,height:24};var Xt=Qt;const Jt=D.a.fcc839b6,Kt=D.a.d80964aa,Yt=D.a.d4f57cce,Zt=D.a.g06d6bf8,ea=D.a.c1a1817c,ta=D.a.efc9b3fe,aa=zt.a,na=D.a.h277a2e8,ra=D.a.gd429fea,oa=Ut.a,ca=D.a.icb22cde,ia=D.a.i859a9d4,sa=D.a.e974b2d4,la=D.a.b9c9b214,da=D.a.i0e569b0,ua=w.a.create((e=>({labelContainer:{flexGrow:1,paddingVertical:e.spaces.space16},qpContainer:{flex:1},radioGroupContainer:{paddingHorizontal:e.spaces.space32},titleContainer:{paddingVertical:e.spaces.space32},icon:{marginRight:e.spaces.space24,fontSize:e.spaces.space20},engagementIcon:{color:e.colors.red600},followersIcon:{color:e.colors.green600},websiteClicksIcon:{color:e.colors.blue500},goalSelectionCallout:{marginHorizontal:"auto",marginTop:"auto",marginBottom:e.spaces.space36}}))),[ma,pa,ha]=[{label:Kt,value:Rt.c.Engagements,decoration:r.a.createElement(Vt.a,{style:[ua.icon,ua.engagementIcon]}),testID:q(Rt.c.Engagements)},{label:Yt,value:Rt.c.Followers,decoration:r.a.createElement(Gt.a,{style:[ua.icon,ua.followersIcon]}),testID:q(Rt.c.Followers)},{label:Zt,value:Rt.c.WebsiteClicks,decoration:r.a.createElement(Xt,{style:[ua.icon,ua.websiteClicksIcon]}),testID:q(Rt.c.WebsiteClicks)}],ga=[{label:Kt,description:sa,decoration:r.a.createElement(Vt.a,{style:[ua.icon,ua.engagementIcon]})},{label:Yt,description:la,decoration:r.a.createElement(Gt.a,{style:[ua.icon,ua.followersIcon]})},{label:Zt,description:da,decoration:r.a.createElement(Xt,{style:[ua.icon,ua.websiteClicksIcon]})}];function ba(){return r.a.createElement(te.a,{Icon:aa,headline:ea,text:ta,type:"warning"})}function ya(){return r.a.createElement(te.a,{Icon:oa,headline:na,text:ra,type:"danger"})}var fa=Lt((e=>{var t,a,n,o,c,i,s;const{analytics:l,history:d,location:u,selectedObjective:m,setObjective:p,tweet:h}=e,g=h?Nt.a.getOriginalTweet(h):h,b=null!=(null==g||null==(t=g.entities)||null==(a=t.media)?void 0:a.length)&&(null==g||null==(n=g.entities)||null==(o=n.media)?void 0:o.length)>0,y=1===(null==g||null==(c=g.entities)||null==(i=c.urls)?void 0:i.length),f=!!(null!=g&&g.in_reply_to_status_id_str||null!=g&&g.in_reply_to_name||null!=g&&g.in_reply_to_screen_name||null!=g&&g.in_reply_to_user_id_str||null!=g&&g.in_reply_to_user);r.a.useEffect((()=>{Object(je.p)(l)(je.n.goalSelectionPageLoad())}),[]);const w=r.a.useMemo((()=>function({selectedObjective:e,tweetContainsLinks:t,tweetHasMedia:a,tweetIsReply:n}){const o=[ma,...n?[]:[{...pa,description:a&&e===Rt.c.Followers?ba():void 0}],{...ha,disabled:!t,description:!t&&ya()}];return o.map((e=>({...e,label:r.a.createElement(_.b,{size:"headline2",weight:"bold"},e.label)})))}({tweetHasMedia:b,tweetContainsLinks:y,selectedObjective:m,tweetIsReply:f})),[b,y,m,f]),v=r.a.useCallback(((e,t)=>{p(t),Object(je.p)(l)(je.n.setPromoteGoal(t))}),[l,p]);return r.a.createElement(E.a,{style:ua.qpContainer,testID:F},r.a.createElement(x,{screenType:je.c.Objective}),r.a.createElement(E.a,{style:ua.titleContainer},r.a.createElement(_.b,{align:"center",size:"headline1",weight:"bold"},Jt)),r.a.createElement(E.a,null,r.a.createElement(qt.a,{name:"objective-picker",onChange:v,options:w,value:m})),r.a.createElement(E.a,{style:ua.goalSelectionCallout},r.a.createElement(Ht.a,{description:ca,learnMoreLabel:ia,learnMoreLink:{external:!1,method:"replace",pathname:u.pathname,state:{showEducationInterstitial:!0}}})),null!=(s=u.state)&&s.showEducationInterstitial?r.a.createElement(Mt,{infoItems:ga,onClose:()=>d.replace(u.pathname,{showEducationInterstitial:!1}),onLoad:()=>Object(je.p)(l)(je.n.educationInterstitialLoad())}):null)}));const Ea=e=>e.quickPromote.paymentMethods;var _a=Object(l.a)().propsFromState((()=>({paymentMethods:Ea,selectedPaymentMethod:u.o}))).propsFromActions((()=>({setSelectedPaymentMethod:u.E,deletePaymentMethod:u.b}))).withAnalytics(je.o),wa=a("YeIG"),va=a("JYMr"),Ca=a("cm6r"),Ia=a("mjJ+"),Pa=a("3rX5"),Ta=a("Wms4"),Sa=a("IG7M"),xa=a("sgih"),Oa=a("/yvb"),ka=a("I4+6"),La=a("iY63");const ja=(e={})=>Object(Wt.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[$t.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M20.746 5.236h-3.75V4.25c0-1.24-1.01-2.25-2.25-2.25h-5.5c-1.24 0-2.25 1.01-2.25 2.25v.986h-3.75c-.414 0-.75.336-.75.75s.336.75.75.75h.368l1.583 13.262c.216 1.193 1.31 2.027 2.658 2.027h8.282c1.35 0 2.442-.834 2.664-2.072l1.577-13.217h.368c.414 0 .75-.336.75-.75s-.335-.75-.75-.75zM10.75 17c0 .414-.336.75-.75.75s-.75-.336-.75-.75v-7c0-.414.336-.75.75-.75s.75.336.75.75v7zm4 0c0 .414-.336.75-.75.75s-.75-.336-.75-.75v-7c0-.414.336-.75.75-.75s.75.336.75.75v7zm.746-11.764h-7V4.25c0-.413.337-.75.75-.75h5.5c.413 0 .75.337.75.75v.986z"})));ja.metadata={width:24,height:24};var Aa=ja;const Da=D.a.de43b660,Ba=D.a.hb4773a0,Ma=D.a.aa2a3dd4,Fa=D.a.b1c5b63c,Ra=D.a.affb5878,Na=D.a.cfd2f35e,qa=(e,t,a)=>e.map((e=>({label:r.a.createElement(Ha,{deletePaymentMethodHandler:a,id:e.id,imgSrcUrl:e.imgSrcUrl,isSelected:t===e.id,lastFourDigits:e.lastFourDigits,status:e.cardStatus}),value:e.id,containerStyle:[Va.paymentMethodRadioContainer,Va.bottomBorder]}))),Ha=e=>{const t=e.deletePaymentMethodHandler?t=>r.a.createElement(Ia.a,{items:[{Icon:Aa,text:Ma,onClick:()=>{t(),e.deletePaymentMethodHandler&&e.deletePaymentMethodHandler(e.id)},isEmphasized:!0,disabled:e.isSelected}],onCloseRequested:t}):void 0;return r.a.createElement(E.a,{style:Va.paymentMethod},r.a.createElement(E.a,{style:[Va.descriptionItemContainer,e.paymentDescriptionStyle]},e.imgSrcUrl?r.a.createElement(E.a,{style:Va.cardImageContainer},r.a.createElement(Pa.a,{source:e.imgSrcUrl,style:Va.cardImage})):r.a.createElement(_.b,{size:"body"},"Card"),r.a.createElement(E.a,{style:Va.descriptionContainer},r.a.createElement(_.b,{color:"gray700",size:"subtext1"},`${Fa} ${e.lastFourDigits}`)),("Expired"===e.status||"Invalid"===e.status)&&r.a.createElement(E.a,{style:Va.statusBadgeContainer},r.a.createElement(Ta.a,{style:Va.expiredBadge},r.a.createElement(_.b,{size:"subtext3",style:Va.expiredBadge,weight:"bold"},e.status)))),e.deletePaymentMethodHandler&&r.a.createElement(Sa.a,{renderActionMenu:t,style:Va.actionMenuContainer}))},za=e=>{const{cancelDeletePaymentMethodHandler:t,confirmDeletePaymentMethodHandler:a}=e;return r.a.createElement(xa.a,{onMaskClick:t,type:"bottom",withMask:!0},r.a.createElement(E.a,{style:Va.deleteCardConfirmContainer},r.a.createElement(Oa.a,{icon:r.a.createElement(Aa,null),onPress:a,style:Va.modalButton,type:"destructiveOutlined"},Ra),r.a.createElement(Oa.a,{onPress:t,style:Va.modalButton,type:"primaryOutlined"},Na)))},Ua=ka.a.generate({backgroundColor:w.a.theme.colors.transparent,color:w.a.theme.colors.primary,insetFocusRing:!0}),Va=w.a.create((e=>({qpContainer:{flex:1,overflow:"auto"},paymentMethod:{flexDirection:"row",justifyContent:"space-between"},descriptionItemContainer:{backgroundColor:e.colors.cellBackground,paddingVertical:e.spaces.space8,marginLeft:e.spaces.space12},statusBadgeContainer:{margin:e.spaces.space2},descriptionContainer:{margin:e.spaces.space2},actionMenuContainer:{marginRight:e.spaces.space16},paymentMethodRadioContainer:{flexDirection:"row-reverse",paddingHorizontal:e.spaces.space2,paddingVertical:e.spaces.space8},bottomBorder:{borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.colors.borderColor},deleteCardConfirmContainer:{justifyContent:"flex-end",padding:e.spaces.space8},titleContainer:{paddingTop:e.spaces.space32,paddingBottom:e.spaces.space20,paddingLeft:e.spaces.space20},addPaymentMethodContainer:{backgroundColor:e.colors.cellBackground,paddingLeft:e.spaces.space4},addPaymentMethodInteractiveContainer:{flexDirection:"row",minHeight:e.spaces.space48,paddingVertical:e.spaces.space16,paddingLeft:e.spaces.space24},plusIcon:{color:e.colors.primary,marginRight:e.spaces.space16},expiredBadge:{backgroundColor:e.colors.red50,color:e.colors.red900},cardImageContainer:{height:"20px",flexDirection:"row",width:"32px",margin:e.spaces.space2},cardImage:{resizeMode:"contain",flex:1},modalButton:{margin:e.spaces.space8}})));var Ga=_a((e=>{const{analytics:t,deletePaymentMethod:a,history:n,match:{params:{quickPromotePlatform:o,screenName:c,statusId:i}},paymentMethods:s,selectedPaymentMethod:l,setSelectedPaymentMethod:d}=e;S(je.c.PaymentSelect);const u=l?l.id:"",[m,p]=r.a.useState(!1),[h,g]=r.a.useState(null);return r.a.useEffect((()=>{Object(je.p)(t)(je.n.paymentSelectPageLoad())}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{style:Va.qpContainer,testID:ee},m?r.a.createElement(va.a,{indeterminate:!0}):null,r.a.createElement(E.a,{style:Va.titleContainer},r.a.createElement(_.b,{accessibilityLevel:1,accessibilityRole:"heading",align:"left",size:"headline1",weight:"heavy"},Da)),r.a.createElement(qt.a,{disabled:m,name:Da,onChange:(e,a)=>{if(Object(wa.a)(s))return;const n=s.find((e=>e.id===a))||null;n&&"Invalid"===n.cardStatus||(p(!0),d(a).catch((e=>{Object(je.p)(t)(je.n.paymentMethodChanged(e))})).finally((()=>{p(!1)})),Object(je.p)(t)(je.n.paymentMethodChanged()))},options:qa(s,u,(e=>g(e))),value:u}),r.a.createElement(E.a,{style:Va.addPaymentMethodContainer},r.a.createElement(Ca.a,{disabled:m,interactive:m,interactiveStyles:Ua,onPress:()=>n.push(`${Object(je.j)(c,i,o,je.c.Payment)}?isAddingPayment=true`),style:Va.addPaymentMethodInteractiveContainer},r.a.createElement(La.a,{style:Va.plusIcon}),r.a.createElement(_.b,{align:"left",color:"primary"},Ba))),h&&r.a.createElement(za,{cancelDeletePaymentMethodHandler:()=>g(null),confirmDeletePaymentMethodHandler:()=>{h&&(g(null),p(!0),a(h).catch((e=>{Object(je.p)(t)(je.n.paymentMethodDeleted(e))})).finally((()=>{p(!1)})),Object(je.p)(t)(je.n.paymentMethodDeleted()))}})))})),$a=a("zh9S"),Wa=a("y0iL");const Qa=(e,t)=>t.match.params.statusId,Xa=(e,t)=>Ve.a.selectHydrated(e,Qa(0,t)),Ja=(e,t)=>Ve.a.selectFetchStatus(e,Qa(0,t)),Ka=(e,t)=>e.quickPromote.account.adsAccount,Ya=(e,t)=>e.quickPromote.account.selectedFundingInstrument;var Za=Object(l.a)().propsFromState((()=>({fetchStatus:Ja,tweet:Xa,adsAccount:Ka,fundingInstrument:Ya,selectedPaymentMethod:u.o}))).propsFromActions((e=>({createLocalApiErrorHandler:Object(d.createLocalApiErrorHandlerWithContextFactory)("QUICK_PROMOTE_PAYMENT_SCREEN"),fetchTweetIfNeeded:Ve.a.fetchOneIfNeeded,scribeAction:$a.c,savePlatformRedirectBackState:()=>Object(Wa.k)(e.match.params.quickPromotePlatform),fetchAdsAccountDataIfNeeded:Wa.d}))).withAnalytics(je.o),en=a("tI3i"),tn=a.n(en),an=a("Rp9C"),nn=a("bPFD");class rn extends r.a.PureComponent{constructor(...e){super(...e),this.isPaymentSelectEnabled=this.context.featureSwitches.isTrue("responsive_web_qp_payment_select_enabled"),this._getIsAddingPayment=()=>{const e=this._getQueryParameter("isAddingPayment");return!!e&&"true"===e},this._getQueryParameter=e=>{const{location:{search:t}}=this.props;return new URLSearchParams(t).get(e)},this._setAppBarRef=e=>{this._appBarRef=e},this._handleIFrameMessage=e=>{const{analytics:t,tweet:a}=this.props,n=this._getIsAddingPayment();if(e&&"quick_promote"===e.name)if("scribe"===e.type){const n=a&&Nt.a.getOriginalTweet(a)||void 0,r=n?[an.a.getTweetItem(n)]:[],o=e.scribeData||{},c="string"==typeof o.component?o.component:"quick_promote",i="string"==typeof o.uiEvent?o.uiEvent:"";t.scribe({component:c,action:i,data:{items:r}})}else if("navigation"===e.type){const{createLocalApiErrorHandler:e,fetchAdsAccountDataIfNeeded:t,history:a,match:r}=this.props,{quickPromotePlatform:o,screenName:c,statusId:i}=r.params;tn()(!!this.context.loggedInUserId,"loggedInUserId must be defined"),t(this.context.loggedInUserId,!0).catch(e()),a.push(`/${c}/status/${i}/${o}/${this.isPaymentSelectEnabled&&n?je.c.PaymentSelect:je.c.Review}`)}else"close"===e.type&&this._appBarRef&&this._appBarRef.goBack()}}componentDidMount(){const{adsAccount:e,analytics:t,fundingInstrument:a,match:n,savePlatformRedirectBackState:r}=this.props,{quickPromotePlatform:o,statusId:c}=n.params;r();const i=this._getIsAddingPayment(),s=Object(je.i)(o,e,c,a,i);i&&Object(je.p)(t)(je.n.paymentPageLoadAddingCard()),Object(je.p)(t)(je.n.paymentPageLoad(s.url)),s.isSameHost||(window.location.href=s.url)}render(){const{adsAccount:e,fundingInstrument:t,match:a}=this.props,n=this._getIsAddingPayment(),{quickPromotePlatform:o,statusId:c}=a.params,i=Object(je.i)(o,e,c,t,n);return i.isSameHost?r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{screenType:je.c.Payment}),r.a.createElement(nn.a,{dangerouslyDisableSandbox:!0,onMessage:this._handleIFrameMessage,reportError:oe.a,src:i.url,style:on.iframe})):null}}rn.contextType=ne.a;const on=w.a.create((e=>({iframe:{flexGrow:1,paddingTop:0}})));var cn=Za(rn);function sn(e){(new Image).src=e}function ln(){return r.a.createElement(ft.a,null,(({windowHeight:e,windowWidth:t})=>(sn(t>w.a.theme.breakpoints.medium?mt:bt),null)))}var dn=a("0zXz");const un=e=>e.quickPromote.objective,mn=(e,t)=>e.quickPromote.targeting.targetedLocations,pn=(e,t)=>e.quickPromote.targeting.ageBucket,hn=(e,t)=>e.quickPromote.targeting.gender,gn=(e,t)=>e.quickPromote.budget.dailyBudget,bn=(e,t)=>e.quickPromote.budget.durationDays,yn=e=>e.quickPromote.budget.currency||"USD",fn=e=>e.quickPromote.account.selectedFundingInstrument,En=e=>e.quickPromote.account.adsAccount,_n=e=>e.quickPromote.promoteStatus,wn=e=>e.quickPromote.promoteErrorCode,vn=e=>e.quickPromote.coupons,Cn=e=>e.quickPromote.enrollCouponErrorCode,In=({history:e,match:t})=>a=>{const{quickPromotePlatform:n,screenName:r,statusId:o}=t.params;return Object(u.a)(e,r,o,n,a)};var Pn=Object(l.a)().propsFromState((()=>({objective:un,targetedLocations:mn,ageBucket:pn,gender:hn,dailyBudget:gn,durationDays:bn,lang:s.q,country:u.p,currency:yn,fundingInstrument:fn,adsAccount:En,promoteStatus:_n,promoteErrorCode:wn,coupons:vn,enrollCouponErrorCode:Cn,selectedPaymentMethod:u.o}))).propsFromActions((e=>({createLocalApiErrorHandler:Object(d.createLocalApiErrorHandlerWithContextFactory)("QUICK_PROMOTE_REVIEW_SCREEN"),clearPersistedRedirectBackState:()=>Object(u.m)(),createPromotion:In(e),enrollCoupon:u.c}))).withAnalytics(je.o),Tn=a("csss"),Sn=a("shC7");const xn=D.a.c3c57e3e,On=D.a.h06724b4,kn=D.a.a96f811e,Ln=D.a.b069d89c,jn=D.a.a3a09d48,An=D.a.fbd44e96,Dn=D.a.e36bce64,Bn=D.a.c602f5b8,Mn=D.a.ia83756c,Fn=D.a.cc217a04,Rn=D.a.c602f5b8,Nn=D.a.g4f2b588,qn=D.a.i41612da,Hn=D.a.cdae1af0,zn=D.a.ed8bb5a0,Un=D.a.fc640c20,Vn=D.a.be2dc078,Gn=D.a.iaefd4de,$n=D.a.e5e42640,Wn=D.a.da2805d2,Qn=D.a.ef4602ec,Xn=D.a.a4db098c,Jn=D.a.ef7e3916;class Kn extends r.a.PureComponent{constructor(...e){super(...e),this._getPaymentDescription=(e,t)=>{const{adsAccount:a}=this.props;return a&&a.timezone&&a.country_code?e?Hn:t?Un:zn:t?Gn:Vn},this._handlePromote=()=>{const{analytics:e,createPromotion:t}=this.props;Object(je.p)(e)(je.n.promotionClick()),t(e)},this._handleEnrollCoupon=()=>{const{analytics:e,coupons:t,enrollCoupon:a,fundingInstrument:n}=this.props,r=this._getCouponErrorMessage();n&&null!=t&&t.eligible_coupon&&!r&&a(e)},this._getPromoteErrorMessage=()=>{const{promoteErrorCode:e,promoteStatus:t}=this.props;if(!e)return t===Ue.a.LOADED?Wn:null;switch(e){case"MissingFundingInstrument":case"InvalidPaymentMethod":return Jn;case"CampaignCreationFailed":case"PromotionIneligible":return Xn;default:return Qn}},this._getCouponErrorMessage=()=>{const{enrollCouponErrorCode:e}=this.props;if(!e)return null;switch(e){case"AccountIneligible":case"MissingAdsAccount":default:return $n}}}componentDidMount(){const{analytics:e,clearPersistedRedirectBackState:t,fundingInstrument:a}=this.props;t();const n=!!a;Object(je.p)(e)(je.n.reviewPageLoad({hasFundingInstrument:n})),this._handleEnrollCoupon()}render(){const{adsAccount:e,ageBucket:t,country:a,coupons:n,currency:c,dailyBudget:i,durationDays:s,fundingInstrument:l,gender:d,lang:m,match:p,objective:h,promoteStatus:g,selectedPaymentMethod:b,targetedLocations:y}=this.props,f=null==e?void 0:e.needs_vat,w=this.context.featureSwitches.isTrue("responsive_web_qp_payment_select_enabled"),C=function({maxAge:e,minAge:t}){return e?le({minAge:t,maxAge:e}):de({minAge:t})}(Rt.e[t]),I=function(e){switch(e){case"Engagements":return ve;case"Followers":return Ce;case"WebsiteClicks":return Ie;default:throw o()}}(h),P=function({formattedAge:e,gender:t,locations:a}){const n=a.length;return pe({newlinePlaceholder:"\n",locations:Object(re.a)(a),locationsHeading:ke({numLocations:n}),formattedAge:e,gender:t})}({locations:y.map((({localized_name:e})=>e)),formattedAge:C,gender:Pe(d)}),T=this.context.featureSwitches.isTrue("responsive_web_qp_welcome_coupon_enabled"),S=T?Oe({dailyBudgetNum:i,durationDays:s,lang:m,currency:c}):xe({totalBudgetNum:i*s,durationDays:s,lang:m,currency:c}),O=l&&null!=n&&n.existing_balance.length?n.existing_balance.find((e=>e.currency_code===l.currency)):null,j=O?"":Se({amount:i*s,lang:m,currency:c}),{quickPromotePlatform:A,screenName:B,statusId:M}=p.params,F=this._getPromoteErrorMessage(),R=this._getCouponErrorMessage(),N=this.context.featureSwitches.isTrue("responsive_web_qp_objective_picker_enabled"),q=!!l,H=!(null==n||!n.eligible_coupon);return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{screenType:je.c.Review}),r.a.createElement(E.a,{style:Yn.qpContainer,testID:U},F&&r.a.createElement(E.a,{style:Yn.gutter},r.a.createElement(te.a,{text:F,type:"danger"})),R&&r.a.createElement(E.a,{style:Yn.gutter},r.a.createElement(te.a,{text:R,type:"warning"})),r.a.createElement(L,{subtitle:On,title:xn}),N&&r.a.createElement(v,{description:I,descriptionTestID:G,label:kn,withBottomBorder:!1}),r.a.createElement(v,{description:P,descriptionTestID:$,label:Ln,withBottomBorder:!1}),r.a.createElement(v,{description:S,descriptionDir:Sn.a.getConstants().isRTL?"rtl":"ltr",descriptionTestID:W,label:T?An:jn,withBottomBorder:!1}),w?r.a.createElement(Tn.a,{description:"CREDIT_CARD"===(null==l?void 0:l.type)&&b&&!f?r.a.createElement(Ha,{id:b.id,imgSrcUrl:b.imgSrcUrl,lastFourDigits:b.lastFourDigits,paymentDescriptionStyle:Yn.paymentDescription,status:b.cardStatus}):l&&!f?l.description:r.a.createElement(_.b,{color:"primary",size:"subtext2"},this._getPaymentDescription(q,H)),label:r.a.createElement(_.b,{weight:"bold"},Dn),link:!l||f?Object(je.j)(B,M,A,je.c.Payment):"CREDIT_CARD"===(null==l?void 0:l.type)?Object(je.j)(B,M,A,je.c.PaymentSelect):void 0,testID:Q}):r.a.createElement(Tn.a,{description:l&&!f?l.description:r.a.createElement(_.b,{color:"primary",size:"subtext2"},this._getPaymentDescription(q,H)),label:r.a.createElement(_.b,{weight:"bold"},Dn),link:!l||f?Object(je.j)(B,M,A,je.c.Payment):void 0,testID:Q}),T?r.a.createElement(v,{description:j,descriptionTestID:X,label:Bn,withBottomBorder:!1},O?function({balance:e,currency:t,lang:a,subtotal:n}){const o=Se({amount:n,currency:t,lang:a}),c=Se({amount:Math.min(n,e),currency:t,lang:a}),i=Se({amount:Math.max(0,n-e),currency:t,lang:a}),s=e>n?Se({amount:e-n,currency:t,lang:a}):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{style:Yn.promotionTotalRow},r.a.createElement(_.b,{color:"gray700",size:"subtext2"},Mn),r.a.createElement(_.b,{color:"gray700",size:"subtext2"},o)),r.a.createElement(E.a,{style:Yn.promotionTotalRow},r.a.createElement(_.b,{color:"blue500",size:"subtext2"},Fn),r.a.createElement(_.b,{color:"blue500",size:"subtext2"},"-",c)),r.a.createElement(E.a,{style:Yn.promotionTotalRow},r.a.createElement(_.b,{color:"gray700",size:"subtext2",weight:"bold"},Rn),r.a.createElement(_.b,{color:"gray700",size:"subtext2",testID:X,weight:"bold"},i)),s&&r.a.createElement(E.a,{style:Yn.promotionTotalRow},r.a.createElement(_.b,{color:"gray700",size:"subtext2"},Nn),r.a.createElement(_.b,{color:"gray700",size:"subtext2"},s)))}({subtotal:i*s,balance:O.total_amount||0,currency:c,lang:m}):null):null),r.a.createElement(E.a,{style:Yn.bottomElements},r.a.createElement(Oa.a,{disabled:!l||f||u.V.includes(g),onPress:this._handlePromote,size:"xLarge",testID:V,type:"brandFilled"},qn),r.a.createElement(k.a,{style:Yn.terms},function(e,t,a){return a?r.a.createElement(D.a.I18NFormatMessage,{$i18n:"cace9785"},r.a.createElement(_.b,{link:Object(je.k)(e)},D.a.eb44cb19),r.a.createElement(_.b,{link:Object(je.g)(t)},D.a.fc0d6d0d)):r.a.createElement(D.a.I18NFormatMessage,{$i18n:"c99d7101"},r.a.createElement(_.b,{link:Object(je.k)(e)},D.a.ca5cd8c7))}(a,m,!!O))))}}Kn.contextType=ne.a;const Yn=w.a.create((e=>({qpContainer:{flex:1,overflow:"auto"},bottomElements:{marginHorizontal:e.spaces.space12,marginVertical:e.spaces.space32},terms:{marginTop:e.spaces.space12,textAlign:"center",color:e.colors.gray700,fontSize:e.fontSizes.subtext3},gutter:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},promotionTotalRow:{marginTop:e.spaces.space2,justifyContent:"space-between",flexDirection:"row"},paymentDescription:{flexDirection:"row",marginLeft:void 0,marginVertical:void 0,backgroundColor:void 0}})));var Zn=Pn(Kn),er=a("zCf4");const tr=(e,t)=>{const a=nr(e,t);return e.ads.typeahead.targetingLocation[a]},ar=(e,t)=>{var a;const n=nr(e,t);return null==(a=e.ads.typeahead.targetingLocation[n])?void 0:a.fetchStatus},nr=(e,t)=>e.quickPromote.targeting.locationQuery,rr=(e,t)=>e.quickPromote.targeting.targetedLocations,or=(e,t)=>e.quickPromote.account.campaigns;var cr=Object(l.a)().propsFromState((()=>({targetingLocationQuery:nr,targetingLocations:tr,targetedLocations:rr,fetchStatus:ar,userCountry:s.A,campaigns:or}))).propsFromActions((()=>({setTargetedLocations:u.S,setAndFetchTargetingLocationQuery:u.u,setTargetingLocationQuery:u.U,createLocalApiErrorHandler:Object(d.createLocalApiErrorHandlerWithContextFactory)("QUICK_PROMOTE_TARGETING_LOCATION_SCREEN")}))).withAnalytics(je.o),ir=a("VwDm"),sr=a("G1WX"),lr=a("e0ey"),dr=a("xKuM"),ur=a("5Vk4"),mr=a("6OUF"),pr=a("zrOZ"),hr=a("kevv");const gr=D.a.cc642518,br=D.a.i0e8c3c6,yr=D.a.deaf5b16,fr=D.a.f69ad048,Er=Object.freeze({COUNTRIES:0,REGIONS:1,METROS:2,CITIES:3,POSTAL_CODES:4}),_r=Object.freeze({[je.e.CurrentCountryMatch]:0,[je.e.Match]:1,[je.e.NoMatch]:2});class wr extends r.a.PureComponent{constructor(...e){super(...e),this.state={errorMessage:null},this._renderSearch=()=>{const{fetchStatus:e,targetingLocationQuery:t}=this.props;return r.a.createElement(vr,{onBack:this._handleGoBack,onChange:this._handleTargetingLocationChange,onClear:this._handleClear,targetingLocationQuery:t},r.a.createElement(E.a,null,r.a.createElement(_.b,{style:Cr.headingText,weight:"heavy"},br)),r.a.createElement(sr.a,{fetchStatus:e,render:this._renderSearchList,retryMessage:yr}))},this._handleClear=()=>{const{setTargetingLocationQuery:e}=this.props;e("")},this._renderSearchList=()=>{const{targetedLocations:e}=this.props,t=Object(pr.a)(e.map((({targeting_value:e})=>e))),a=this._getTargetingLocationOptions();return r.a.createElement(E.a,{style:Cr.overflow},a.map((({localized_name:e,location_type:a,targeting_value:n})=>r.a.createElement(lr.a,{checked:t.has(n),helpText:Te(a),key:n,label:e,name:n,onChange:this._handleSearchSelect,testID:Z}))))},this._getTargetingLocationOptions=()=>{var e,t,a;const{targetingLocationQuery:n,targetingLocations:r,userCountry:o}=this.props,c=null!=(e=null==r||null==(t=r.result)||null==(a=t[0])?void 0:a.locations)?e:[],i=Object(je.h)(o||"US"),s=c.filter((({country_code:e,localized_name:t})=>i(t,e,n)!==je.e.NoMatch));return Object(hr.a)(s,[({country_code:e,localized_name:t})=>{const a=i(t,e,n);return _r[a]},({localized_name:e,location_type:t})=>{var a;return null!=(a=Er[t])?a:(e=>{Object(oe.a)(`Quick Promote: Unknown location type: ${e}. Expected one of {${Object.keys(Er).join(", ")}}`)})(t)||Object.keys(Er).length},({localized_name:e})=>e],"asc")},this._handleSearchSelect=(e,t)=>{const{analytics:a,setTargetedLocations:n,setTargetingLocationQuery:r}=this.props;if(t){this.setState({errorMessage:null});const t=this._getTargetingLocationOptions().find((({targeting_value:t})=>t===e));t?(Object(je.p)(a)(je.n.setTargetingLocation({id:t.targeting_value,locationType:t.location_type,countryCode:t.country_code})),n([t]),this._handleGoBack()):Object(oe.a)(`Quick Promote: could not find "${e}" in list of targeting options`)}else Object(je.p)(a)(je.n.targetingLocationError()),this.setState({errorMessage:fr});r("")},this._renderSelected=()=>{const{targetedLocations:e,targetingLocationQuery:t}=this.props,{errorMessage:a}=this.state;return r.a.createElement(vr,{onBack:this._handleGoBack,onChange:this._handleTargetingLocationChange,onClear:this._handleClear,targetingLocationQuery:t},r.a.createElement(E.a,null,a&&r.a.createElement(E.a,{style:Cr.gutter},r.a.createElement(te.a,{text:a,type:"danger"})),r.a.createElement(_.b,{style:Cr.headingText,weight:"heavy"},ke({numLocations:e.length}))),r.a.createElement(E.a,null,e.map((({localized_name:e,location_type:t,targeting_value:a})=>r.a.createElement(lr.a,{checked:!0,helpText:Te(t),key:a,label:e,name:a,onChange:this._handleSearchSelect,testID:Z})))))},this._handleGoBack=()=>{const{campaigns:e,history:t,location:a,match:n}=this.props,{quickPromotePlatform:r,quickPromoteScreenName:o,screenName:c,statusId:i}=n.params,s=this.context.featureSwitches.isTrue("responsive_web_qp_objective_picker_enabled"),l=this.context.featureSwitches.isTrue("responsive_web_qp_intro_experiment_enabled")&&!(null==e||!e.length);Object(je.m)(t,a)(c,i,r,o,s,l)},this._handleTargetingLocationChange=e=>{const t=e.target.value,{analytics:a,createLocalApiErrorHandler:n,setAndFetchTargetingLocationQuery:r}=this.props;Object(je.p)(a)(je.n.targetingLocationSearch(t)),r(t).catch(n())}}componentDidMount(){const{analytics:e}=this.props;Object(je.p)(e)(je.n.targetingLocationPageLoad())}componentWillUnmount(){this._handleClear()}render(){const{targetingLocationQuery:e}=this.props;return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{screenType:je.c.TargetingLocation}),e?this._renderSearch():this._renderSelected())}}wr.contextType=ne.a;const vr=({children:e,onBack:t,onChange:a,onClear:n,targetingLocationQuery:o})=>r.a.createElement(E.a,{style:Cr.qpContainer,testID:H},r.a.createElement(dr.a,{leftControl:r.a.createElement(ur.a,{onClick:t}),middleControl:r.a.createElement(mr.a,{Icon:ir.a,autoFocus:!0,name:"locationTargetingInput",onChange:a,onClear:n,placeholder:gr,style:Cr.input,testID:Y,value:o,withClearButton:!0})}),e),Cr=w.a.create((e=>({qpContainer:{flex:1},input:{marginVertical:e.spaces.space12},headingText:{fontSize:e.fontSizes.headline1,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical,borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.colors.borderColor,borderTopWidth:1,borderTopStyle:"solid",borderTopColor:e.colors.borderColor},gutter:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},overflow:{flexGrow:1,flexShrink:1,flexBasis:"200px",overflowY:"auto"}})));var Ir=cr(wr);const Pr=(e,t)=>e.quickPromote.targeting.targetedLocations,Tr=(e,t)=>e.quickPromote.targeting.gender,Sr=(e,t)=>e.quickPromote.targeting.ageBucket;var xr=Object(l.a)().propsFromState((()=>({targetedLocations:Pr,selectedGender:Tr,selectedAgeBucket:Sr}))).propsFromActions((()=>({setTargetedAgeBucket:u.Q,setTargetedGender:u.R}))).withAnalytics(je.o),Or=a("JiIh"),kr=a("fyvP"),Lr=a("J4ZH"),jr=a("tn7R"),Ar=a("mN6z");const Dr=D.a.hba1d106,Br=D.a.cba0133e,Mr=D.a.e1efbeae,Fr=D.a.c6ff7c10,Rr=D.a.b555fb46,Nr=D.a.a8d0108e,qr=[Rt.b.Any,Rt.b.Female,Rt.b.Male].map((e=>({label:Pe(e),value:e,testID:N(e)}))),Hr=D.a.j2c03e12,zr=["13","18","21","25","35","50"],Ur=[void 0,void 0,void 0,"24","34","49","54"],Vr=Object(Lr.a)(Object(jr.a)(Rt.e),(e=>e.maxAge||"over")),Gr=Ur.length;function $r(e,t){var a;if(e&&t)return null==(a=Rt.d[e])?void 0:a[t]}class Wr extends r.a.PureComponent{constructor(...e){super(...e),this._handleGenderChange=(e,t)=>{const{analytics:a,setTargetedGender:n}=this.props;n(t),Object(je.p)(a)(je.n.setTargetingGender(t))},this._handleAgeBucketChange=([e,t],a)=>{const{analytics:n,selectedAgeBucket:r,setTargetedAgeBucket:o}=this.props,c=this._sliderValueFromSelectedAgeBucket(r);if(!Object(Ar.a)(c,[e,t]))if(a){const a=zr[e];if(!a)return;const r=$r(a,t===Gr?"over":Ur[t]);if(r)Object(je.p)(n)(je.n.setTargetingAgeBucket(r)),o(r);else{const e=Object.keys(Rt.d[a])[0];this._setAgeBucket({minAge:a,maxAge:e})}}else{const a=t===Gr?"over":Ur[t];if(!a)return;const r=$r(zr[e],a);if(r)Object(je.p)(n)(je.n.setTargetingAgeBucket(r)),o(r);else{const{minAge:e}=Vr[a].slice(-1)[0];this._setAgeBucket({minAge:e,maxAge:a})}}},this._setAgeBucket=({maxAge:e,minAge:t})=>{const{analytics:a,setTargetedAgeBucket:n}=this.props,r=Rt.d[t][e||"over"];if(!r)throw new Error(`Age bucket not found for minAge: "${t}", maxAge: "${e||"<empty>"}"`);Object(je.p)(a)(je.n.setTargetingAgeBucket(r)),n(r)}}componentDidMount(){const{analytics:e}=this.props;Object(je.p)(e)(je.n.targetingPageLoad())}_sliderValueFromSelectedAgeBucket(e){const{maxAge:t,minAge:a}=Rt.e[e];return[zr.indexOf(a),t?Ur.indexOf(t):Gr]}render(){const{match:e,selectedAgeBucket:t,selectedGender:a,targetedLocations:n}=this.props,{quickPromotePlatform:o,screenName:c,statusId:i}=e.params,s=ke({numLocations:n.length}),{maxAge:l,minAge:d}=Rt.e[t],u=this._sliderValueFromSelectedAgeBucket(t),m=l||Hr;return r.a.createElement(E.a,{style:Qr.qpContainer,testID:R},r.a.createElement(x,{screenType:je.c.Targeting}),r.a.createElement(L,{subtitle:Br,title:Dr}),r.a.createElement(Tn.a,{description:Object(re.a)(n.map((({localized_name:e})=>e))),label:r.a.createElement(_.b,{weight:"bold"},s),link:Object(je.j)(c,i,o,je.c.TargetingLocation),testID:J}),r.a.createElement(v,{label:Mr},r.a.createElement(E.a,{style:Qr.ageRangeSlider},r.a.createElement(Or.a,{endThumbAccessibilityLabel:Rr,endThumbAccessibilityLabelValueText:`"${m}"`,endThumbLabel:m,max:Gr,min:0,onChange:this._handleAgeBucketChange,startThumbAccessibilityLabel:Fr,startThumbAccessibilityLabelValueText:`"${d}"`,startThumbLabel:d,value:u}))),r.a.createElement(v,{label:Nr,withBottomBorder:!1},r.a.createElement(E.a,{style:Qr.genderSelection},r.a.createElement(kr.a,{name:"gender",onChange:this._handleGenderChange,options:qr,value:a}))))}}Wr.contextType=ne.a;const Qr=w.a.create((e=>({qpContainer:{flex:1},genderSelection:{marginTop:e.spaces.space4},ageRangeSlider:{marginTop:e.spaces.space12,marginHorizontal:e.spaces.space16},iconText:{textAlignVertical:"text-bottom"}})));var Xr=xr(Wr),Jr=a("q9Zt");const Kr=D.a.a065172e,Yr=D.a.cfcdb4a2,Zr=D.a.dcfb0332,eo=D.a.c1df579e;class to extends r.a.PureComponent{constructor(...e){super(...e),this.state={isLoaded:!1},this._getRetweetOrTweet=()=>{const{tweet:e}=this.props;return e?Nt.a.getOriginalTweet(e):e},this._render=()=>{const{history:e}=this.props,t=this._getRetweetOrTweet();return!t||t&&t.user.id_str!==this.context.loggedInUserId?r.a.createElement(it.b,{history:e,onBackClick:this._handleGoBack,title:Zr},r.a.createElement(Jr.a,{onRetry:null,title:Kr})):this._renderPage()},this._renderHeader=dn.a,this._renderPage=()=>{const{history:e,match:t,promoteErrorCode:a,promoteFetchStatus:n}=this.props,{quickPromotePlatform:r,quickPromoteScreenName:c,screenName:i,statusId:s}=t.params,l=this.context.featureSwitches.isTrue("responsive_web_qp_objective_picker_enabled"),d=this.context.featureSwitches.isTrue("responsive_web_qp_payment_select_enabled"),u=l?je.d:je.b,m=e=>Object(je.j)(i,s,r,e);switch(c){case"intro":return this._renderSplashPage();case"objective":if(l){const e=m(je.c.Targeting);return this._renderProgressPage(je.d.Objective,e)}e.replace(Object(je.j)(i,s,r,je.c.Targeting));break;case"targeting":{const e=m(je.c.BudgetSelect);return this._renderProgressPage(u.Targeting,e)}case"budget_select":{const e=m(je.c.Review);return this._renderProgressPage(u.BudgetSelect,e)}case"review":{const e=[Ue.a.LOADING,Ue.a.LOADED].includes(n)&&!a;return this._renderProgressPage(e?u.Finish:u.Review)}case"payment":return this._renderProgressPage(u.Review);case"targeting_location":return this._renderPopupPage();case"payment_select":return d||e.replace(Object(je.j)(i,s,r,je.c.Review)),this._renderNavigationPage();case"done":return this._renderSplashPage();default:throw o()}},this._renderProgressPage=(e,t)=>{const{history:a}=this.props;return r.a.createElement(it.b,{documentTitle:Zr,history:a,renderHeader:this._renderHeader},r.a.createElement(dr.a,{leftControl:r.a.createElement(ur.a,{autofocus:!0,onClick:this._handleGoBack,testID:K}),rightControl:t&&r.a.createElement(Oa.a,{link:t,testID:M,type:"brandText"},eo)}),r.a.createElement(va.a,{progress:e,style:ao.progressBar}),r.a.createElement(E.a,{style:ao.noScrollView},this._renderRoutes()))},this._renderNavigationPage=()=>{const{history:e}=this.props;return r.a.createElement(it.b,{documentTitle:Zr,history:e,renderHeader:this._renderHeader},r.a.createElement(dr.a,{leftControl:r.a.createElement(ur.a,{autofocus:!0,onClick:this._handleGoBack,testID:K})}),r.a.createElement(E.a,{style:ao.noScrollView},this._renderRoutes()))},this._renderPopupPage=()=>{const{history:e}=this.props;return r.a.createElement(it.b,{documentTitle:Zr,history:e,renderHeader:this._renderHeader},this._renderRoutes())},this._renderSplashPage=()=>this._renderRoutes(),this._renderRoutes=()=>{const{match:e}=this.props,{quickPromoteScreenName:t}=e.params;switch(t){case"intro":return r.a.createElement(er.b,{component:xt});case"objective":return r.a.createElement(er.b,{component:fa});case"targeting":return r.a.createElement(er.b,{component:Xr});case"targeting_location":return r.a.createElement(er.b,{component:Ir});case"budget_select":return r.a.createElement(er.b,{component:ze});case"review":return r.a.createElement(er.b,{component:Zn});case"payment":return r.a.createElement(er.b,{component:cn});case"payment_select":return r.a.createElement(er.b,{component:Ga});case"done":return r.a.createElement(er.b,{component:rt});default:throw o()}},this._handleGoBack=()=>{const{analytics:e,campaigns:t,history:a,location:n,match:r}=this.props,{quickPromotePlatform:o,quickPromoteScreenName:c,screenName:i,statusId:s}=r.params,l=this.context.featureSwitches.isTrue("responsive_web_qp_objective_picker_enabled"),d=this.context.featureSwitches.isTrue("responsive_web_qp_intro_experiment_enabled")&&!(null==t||!t.length);Object(je.p)(e)(je.n.back(c)),Object(je.m)(a,n)(i,s,o,c,l,d)},this._handleRequestRetry=()=>{const{analytics:e,match:t}=this.props,{quickPromoteScreenName:a}=t.params;Object(je.p)(e)(je.n.reload(a)),window.location.reload()}}componentDidMount(){const{analytics:e,createLocalApiErrorHandler:t,fetchAdsAccountDataIfNeeded:a,fetchAvailableBudgetsIfNeeded:n,fetchCouponsIfNeeded:r,fetchCurrentTargetingLocationIfNeeded:o,fetchQuickPromoteEligibilityIfNeeded:c,fetchTweetIfNeeded:i,match:s,promoteFetchStatus:l,setPromoteFetchStatus:d,statusId:u}=this.props,{quickPromoteScreenName:m}=s.params,p=this.context.loggedInUserId;return p?(Ue.a.LOADED===l&&m!==je.c.Done&&d(Ue.a.NONE),Object(P.b)("initial-load",Promise.all([i(u),o(),a(p),r(e),c({statusId:u})]).then((()=>n())).then((()=>{const{handleFirstLoad:e}=this.props;return e()}))).catch((a=>{t(ct.a)(a),Object(je.p)(e)(je.n.pageLoadFail(a.message))})).finally((()=>{this.setState({isLoaded:!0})}))):Promise.resolve()}render(){const{fetchStatus:e,history:t}=this.props;if(!this.context.loggedInUserId)return this._render();const a=Object(Ue.d)(e,this.state.isLoaded?Ue.a.LOADED:Ue.a.LOADING);if(a===Ue.a.NONE)throw new Error("Quick Promote: should never have none state");return a!==Ue.a.LOADED?r.a.createElement(it.b,{documentTitle:Zr,history:t,renderHeader:this._renderHeader},r.a.createElement(ln,null),r.a.createElement(ot.a,{fetchStatus:a,onRequestRetry:this._handleRequestRetry,render:this._render,retryMessage:Yr})):r.a.createElement(ot.a,{fetchStatus:a,onRequestRetry:this._handleRequestRetry,render:this._render,retryMessage:Yr})}}to.contextType=ne.a;const ao=w.a.create((e=>({progressBar:{backgroundColor:e.colors.gray50},noScrollView:{overflowX:"hidden",flex:1}}))),no=Ke(to);t.default=no},kevv:function(e,t,a){"use strict";var n=a("BcsE"),r=a("aTAq");const o=(e,t)=>{if(Object(n.a)(e)&&Object(n.a)(t)){if(e>t)return 1;if(e<t)return-1}else if(Object(r.a)(e)&&Object(r.a)(t)){if(e>t)return 1;if(e<t)return-1}return 0};t.a=(e,t,a)=>{const c=Object(r.a)(a)?Array(t.length).fill(a):a,i=t.map((e=>Object(r.a)(e)?t=>{const a="object"==typeof t?null==t?void 0:t[e]:void 0;return Object(r.a)(a)||Object(n.a)(a)?a:void 0}:e));return e.concat().sort(((e,t)=>(a,n)=>{for(let r=0;r<e.length;r++){const c=e[r],i=t[r]||"asc",s=o(c(a),c(n));if(0!==s)return"desc"===i?-1*s:s}return 0})(i,c))}},z4TA:function(e,t,a){"use strict";a.r(t),a.d(t,"ConversationScreen",(function(){return Ne}));a("kYxP"),a("MvUL");var n=a("aeN7"),r=a("ERkP"),o=a.n(r),c=a("s4rk"),i=a("zI2C"),s=a("6ZtA"),l=a("es0u"),d=a("6/RC"),u=a("x5Pi"),m=a("8Lfv"),p=a("QK5w"),h=a("eSoz"),g=a("RqPI"),b=a("9D1O"),y=a("pNZL"),f=a("XOJV"),E=a("G6rE"),_=a("rxPX"),w=a("0KEI"),v=a("Mx3A");const C=(e,t)=>e.location&&e.location.state&&e.location.state[t],I=(e,t)=>"PUSH"===t.history.action,P=(e,t)=>{const a=C(t,"focal");return a||T(e,t)},T=(e,t)=>{const{location:a,match:n}=t;return n.params&&n.params.statusId?n.params.statusId:a.query&&a.query.tweet_id&&"string"==typeof a.query.tweet_id?a.query.tweet_id:""},S=(e,t)=>t.match.params.screenName,x=(e,t)=>C(t,"socialContext"),O=(e,t)=>C(t,"topicFollowPrompt"),k=(e,t)=>C(t,"contextTweetId"),L=(e,t)=>C(t,"promotedContent"),j=(e,t)=>C(t,"overflow"),A=(e,t)=>C(t,"contextualClientEventInfo"),D=(e,t)=>{const a=C(t,"referrer"),n=P(e,t);return!!a&&a.includes(`/i/topics/tweet/${n}`)},B=(e,t)=>{if(!d.canUseDOM)return!1;const{location:a}=t,n=a.query,r=Object(p.a)(e,t);return Object(v.b)({query:n,httpReferer:r?"":document.referrer||"",requestUrl:window.location.href,emptyIfServerRendered:!1}).referral_type===v.a.Web},M=(e,t)=>f.a.selectHydrated(e,P(e,t)),F=(e,t)=>{const a=P(e,t),n=f.a.selectHydrated(e,a);return n&&n.conversation_id_str?f.a.selectHydrated(e,n.conversation_id_str):null},R=(e,t)=>f.a.selectFetchStatus(e,P(e,t)),N=(e,t)=>t.location.query&&"string"==typeof t.location.query.cxt?t.location.query.cxt:void 0;function q(e,t){const a=M(e,t),n=a?Object(h.g)(e,a):void 0;return a&&n?Object(u.c)(a,n):void 0}var H=Object(_.a)().propsFromState((()=>({communitySocialContextOfFocalTweet:q,contextTweetId:k,contextualClientEventInfo:A,focalTweet:M,initialFetchStatus:R,isForwardNavigation:I,isReferralSource:B,isReferredFromExploreTopics:D,userLanguage:g.q,loggedInUser:E.e.selectLoggedInUser,overflowCount:j,promotedContent:L,richLandingContextId:N,rootTweet:F,screenName:S,selectedTweetId:T,socialContext:x,startLocation:b.t,statusId:P,topicFollowPrompt:O,tweetDetailNav:y.a}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(w.createLocalApiErrorHandlerWithContextFactory)("CONVERSATION_SCREEN"),clearTimelineCache:(e,t)=>Object(m.a)(e,t)}))).withAnalytics({page:"tweet"}),z=a("ymux"),U=a("rkhm"),V=a("SrtL"),G=a("8UdT"),$=a("kGix"),W=a("muX9"),Q=a("3XMw"),X=a.n(Q),J=a("zb92");var K=Object(J.a)({loader:()=>Promise.all([a.e(0),a.e(2),a.e(8),a.e(243)]).then(a.bind(null,"uo3S")),renderPlaceholder:(e,t)=>null}),Y=a("/yvb"),Z=a("sebV"),ee=a("BXlL"),te=a("Irs7"),ae=a("aITJ");const ne=X.a.af9c8a3e;var re=({featureSwitches:e,scribeNamespace:t,startLocation:a,userId:n})=>{const r=Object(te.b)(),c=!!n&&ae.b.isMobileOS()&&!Z.a.isStandaloneApp(),i=o.a.useCallback((o=>{o.preventDefault(),r.scribe({...t,element:"open_app_button",action:"click"}),Object(ee.b)({startLocation:a,featureSwitches:e,userId:n})}),[r,e,t,a,n]);return c&&e.isTrue("responsive_web_open_app_appbar_button_enabled")?o.a.createElement(Y.a,{accessibilityLabel:ne,children:ne,onPress:i,size:"small",type:"primaryOutlined"}):null},oe=a("rJoH"),ce=a("yoO3"),ie=a("caTy"),se=a("PeW/"),le=a("AUxQ"),de=a("Rp9C"),ue=a("7JQg"),me=a("VS6U"),pe=a("tocL"),he=a("HBr9"),ge=a("2fY8"),be=a("MWbm"),ye=a("G8HL"),fe=a("pxuL"),Ee=a("t62R"),_e=a("rHpw"),we=a("zTrU"),ve=a("mN6z");const Ce=X.a.ea831526,Ie=X.a.a90e1e67({noun:""}),Pe=X.a.c299a6c0,Te=X.a.c2ed3314,Se=X.a.ad666301,xe=X.a.f0c37ddb,Oe={page:"tweet"},ke={page:"tweet",section:"landing"},Le={serversideContextType:"tweet"},je=Object(we.a)(((e,t)=>({items:[de.a.forTweet(e,t)],tweet_id:e}))),Ae=Object(we.a)((e=>Object(U.a)(e))),De=Object(we.a)(((e,t,a,n,r)=>{var o,c;return{referrer:e,controller_data:e&&(null==t||null==(o=t.details)||null==(c=o.timelinesDetails)?void 0:c.controllerData),overflowCount:a,with_rux_injections:n,rux_context:r}})),Be=Object(we.a)(((e,t,a)=>Object(z.a)({focalTweetId:e,fetchOptions:t,featureSwitches:a}))),Me=[pe.a.Community];function Fe({context:e}){if(!e)return null;switch(e.contextType){case pe.a.Community:{const t=e.landingUrl?Object(ie.b)(e.landingUrl):void 0;return o.a.createElement(Ee.b,{link:t},e.text)}default:return null}}function Re(e){if(!e)return null;switch(e.contextType){case pe.a.Community:return Te;default:return null}}class Ne extends o.a.Component{constructor(e,t){super(e,t),this._getFabState=()=>{const{promotedContent:e,statusId:t}=this.props;return{inReplyToStatusId:t,promotedContent:e}},this._getNavigationParams=()=>{const{contextualClientEventInfo:e,overflowCount:t,richLandingContextId:a,tweetDetailNav:n}=this.props,r=this._shouldRenderRuxInjections();return De(n,e,t,r,a)},this._getModule=()=>{const{statusId:e}=this.props,{featureSwitches:t}=this.context,a=this._getNavigationParams();return Be(e,a,t)},this._handleEntriesRendered=({entries:e,fetchStatus:t})=>{const{recordTTFL:a}=this.props;if(t===$.a.FAILED&&(this._shouldRecordTTFL=!1),this._shouldRecordTTFL&&e.length){const t=e.some((({type:e})=>e===G.c.Tweet));this._shouldRecordTTFL=!1,t&&a&&a("permalink")}},this._shouldRedirectToCanonical=()=>{var e;const{focalTweet:t,screenName:a,selectedTweetId:n,statusId:r}=this.props;return!(n!==r||null==t||null==(e=t.user)||!e.screen_name)&&(a&&t&&a.toLowerCase()!==t.user.screen_name.toLowerCase())},this._redirectToCanonical=()=>{const{history:e,location:t}=this.props;e.replace({pathname:this._getCanonicalPath(),query:t.query,state:t.state})},this._getCanonicalPath=()=>{const{focalTweet:e}=this.props;return e?`/${e.user.screen_name}/status/${e.id_str}`:"/"},this._getPathForTweetId=(e,t)=>`/${t||"i"}/status/${e}`,this._getScribeNamespace=()=>this._shouldRenderRuxInjections()?ke:Oe,this._shouldRecordTTFL=!0,this._downvoteEnabled=this.context.featureSwitches.isTrue("rweb_reply_downvote_enabled")}shouldComponentUpdate(e){return!Object(ve.a)(e,this.props)}componentDidMount(){const{isForwardNavigation:e}=this.props;e&&this._clearTimelineCache()}componentWillUnmount(){this.context.setBackgroundClickHandler(null)}componentDidUpdate(e){this._shouldRedirectToCanonical()?this._redirectToCanonical():this.props.statusId!==e.statusId&&this.props.isForwardNavigation&&this._clearTimelineCache()}render(){const{loggedInUserId:e}=this.context,{communitySocialContextOfFocalTweet:t,focalTweet:a,history:n,promotedContent:r,selectedTweetId:l,socialContext:d,statusId:m,userLanguage:p}=this.props;let h,g,b,y,f,E,_;if(a){var w,v,C,I;h=xe({tweetText:Object(ge.a)(a.text),fullName:a.user.name}),g=`twitter://status?id=${a.id_str}`,b=`https://twitter.com${this._getCanonicalPath()||""}`,y=Se({fullName:a.user.name}),f=a.possibly_sensitive,E=`â${(null==a?void 0:a.full_text)||""}â`,_=(null==a||null==(w=a.entities)||null==(v=w.media)?void 0:v[0].media_url_https)||"";const e=null==(C=a.entities)||null==(I=C.media)?void 0:I[0].url;e&&(E=E.replace(` ${e}`,""),_=`${_}:large`)}const P=function(...e){return e.find((e=>e&&Me.includes(e.contextType)))}(d,t),T=P&&o.a.createElement(Fe,{context:P}),S={...Le,serversideContextId:l};return o.a.createElement(ue.c,{data:je(m,r),namespace:this._getScribeNamespace()},o.a.createElement(ce.a,{behavioralEventClientEntity:S,behavioralEventViewType:"tweet_details"},f?o.a.createElement(W.a,null,o.a.createElement("meta",{content:"adult",name:"rating"})):null,b?o.a.createElement(W.a,null,o.a.createElement("link",{href:b,rel:"canonical"}),o.a.createElement("link",{href:`https://publish.twitter.com/oembed?url=${b}`,rel:"alternate",title:h,type:"application/json+oembed"})):null,o.a.createElement(oe.a,{canonical:b,description:E,image:_,title:y,type:"article"}),o.a.createElement(s.a,{featureSwitches:this.context.featureSwitches,loggedInUserId:e,userLanguage:p}),o.a.createElement(i.a,{deepLink:g}),b?o.a.createElement(c.a,{canonical:b}):null,o.a.createElement(u.b.Provider,{value:null==P?void 0:P.contextType},o.a.createElement(me.a,{backLocation:"/",documentTitle:h,history:n,primaryContent:this._renderTimeline(),rightControl:this._renderRightControl(),sidebarContent:this._renderSidebarContent(),subtitle:T,title:P&&Re(P)||(a&&a.self_thread?Pe:Ie)})),o.a.createElement(V.a,{title:h,withMeta:!1})))}_renderRightControl(){const{featureSwitches:e,loggedInUserId:t}=this.context,{focalTweet:a,startLocation:n}=this.props;return o.a.createElement(be.a,{style:qe.mobileAppBarRightControl},o.a.createElement(re,{featureSwitches:e,scribeNamespace:this._getScribeNamespace(),startLocation:n,userId:t}),o.a.createElement(se.b,{focalTweet:a,module:this._getModule()}))}_renderSidebarContent(){const{focalTweet:e}=this.props;return e&&e.user.id_str?o.a.createElement(l.a,{focalTweetId:null==e?void 0:e.id_str,withTopicsToFollow:!1,withWhoToFollow:!1},o.a.createElement(K,{focalTweetId:e.id_str})):null}_renderTimeline(){const{contextTweetId:e,focalTweet:t,location:a,promotedContent:n,rootTweet:r,screenName:c,selectedTweetId:i,socialContext:s,statusId:l,topicFollowPrompt:d}=this.props,u={selectedTweetId:i};return o.a.createElement(he.a,{collectionName:Ce},o.a.createElement(le.a,{apiErrorHandlerMap:Ae(c),contextTweetId:e,fetchOptions:this._getNavigationParams(),focalTweet:t,focalTweetId:l,location:a,module:this._getModule(),onEntriesRendered:this._handleEntriesRendered,promotedContent:n,rootTweet:r||void 0,selectedTweet:u,socialContext:s,topicFollowPrompt:d,withRuxInjections:this._shouldRenderRuxInjections()}))}_shouldRenderRuxInjections(){const{isReferralSource:e,isReferredFromExploreTopics:t,richLandingContextId:a}=this.props;return!!a||t||e}_clearTimelineCache(e=this._getModule(),t=this._getNavigationParams()){const{clearTimelineCache:a,createLocalApiErrorHandler:n,screenName:r}=this.props;a(e,t).catch(n(Ae(r)))}}Ne.contextType=fe.a,Ne.defaultProps={recordTTFL:n.c};const qe=_e.a.create((e=>({mobileAppBarRightControl:{flexDirection:"row",alignItems:"center",height:e.componentDimensions.appBarHeightPx}})));t.default=H(Object(ye.a)(Ne))}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.Conversation.18e1bd87.js.map