(window.webpackJsonp=window.webpackJsonp||[]).push([[228],{"+Bsv":function(e,t,n){"use strict";var a=n("ERkP"),l=n.n(a),s=n("3XMw"),i=n.n(s),r=n("M2x3"),o="settingsAppBar",c=n("/yvb"),d=n("rHpw");const u=i.a.bb081ea2,m={viewType:"settings_button"},p=l.a.memo((({onPress:e,pullRight:t,to:n})=>l.a.createElement(c.a,{accessibilityLabel:u,behavioralEventContext:m,hoverLabel:{label:u},icon:l.a.createElement(r.a,null),link:n,onPress:e,pullRight:t,style:g.button,testID:o,type:"primaryText"}))),g=d.a.create((e=>({button:{marginVertical:`calc(-${e.spaces.space12})`}})));t.a=p},"/8XK":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n("ERkP"),l=n.n(a),s=n("t62R"),i=n("3XMw"),r=n.n(i),o=n("4n2h");const c=r.a.fb3ccb56,d=(e=!1,t=!1)=>{const n=Object(o.b)(e),a=Object(o.a)(e,t);return l.a.createElement(s.b,{color:a,numberOfLines:1,weight:n},c)}},"/Kco":function(e,t,n){"use strict";var a={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"pinnedInboxSectionConversation",selections:[{alias:null,args:null,concreteType:"DMConversationLabelInfo",kind:"LinkedField",name:"labels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"label_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"timestamp",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"evolutionDMInboxItem"},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],type:"DMConversation",abstractKey:null,hash:"a00816062f86303dc4d7de69da48a9eb"};e.exports=a},"0Bjv":function(e,t,n){"use strict";var a=n("ERkP"),l=n.n(a),s=n("Lsrn"),i=n("k/Ka");const r=(e={})=>Object(i.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},l.a.createElement("g",null,l.a.createElement("path",{d:"M17.931 2.508c0 .42-.34.75-.75.75h-8.39l1.38 2.08-.56 5.78-.47.16c-1.5.49-3.1 2.07-3.37 3.31-.07.35-.39.59-.73.59-.05 0-.11 0-.16-.01-.4-.09-.66-.49-.58-.89.39-1.81 2.24-3.52 3.91-4.25l.42-4.3-1.35-2.02c-.26-.38-.29-.87-.07-1.29.24-.41.66-.66 1.11-.66h8.86c.41 0 .75.34.75.75zm3.09 12.76c-.14.17-.46.46-1.05.46h-3.86l-2.64 6.1c-.12.28-.39.45-.69.45s-.57-.17-.69-.45l-1.96-4.53c-.16-.38.01-.82.39-.98.38-.17.82.01.99.39l1.27 2.93 1.69-3.91h-1.61c-.42 0-.75-.33-.75-.75 0-.41.33-.75.75-.75h6.81c-.41-1.06-1.64-2.26-2.91-2.82-.09-.04-.16-.09-.22-.16-.22-.21-.3-.54-.17-.83.17-.38.61-.55.99-.39 1.59.7 3.5 2.43 3.89 4.25.06.25.03.66-.23.99zm.839-12.259L3.2 21.659c-.15.15-.34.22-.53.22s-.39-.07-.53-.22c-.29-.29-.29-.76 0-1.06L20.8 1.939c.29-.29.76-.29 1.06 0 .29.3.29.77 0 1.07z"})));r.metadata={width:24,height:24},t.a=r},"29EQ":function(e,t,n){"use strict";n.d(t,"c",(function(){return R})),n.d(t,"a",(function(){return L})),n.d(t,"b",(function(){return K}));var a=n("ERkP"),l=n.n(a),s=n("/yvb"),i=n("3XMw"),r=n.n(i),o=n("Avzu");const c=r.a.f325afc4,d=r.a.cdcebd22;var u=({testID:e})=>l.a.createElement(s.a,{accessibilityLabel:c,hoverLabel:{label:d},icon:l.a.createElement(o.a,null),link:"/messages/compose",pullRight:!0,testID:e,type:"primaryText"}),m=(n("kYxP"),n("v6aA")),p=n("xN10"),g=n("MWbm"),y=n("OiMc"),h=n("t62R"),_=n("9RkS"),b=n("rHpw"),v=n("hX3w");const k=[[],["dm_evolution_enabled","dm_evolution_inbox_primary_enabled","dm_evolution_inbox_secondary_enabled","dm_evolution_inbox_tertiary_enabled"],["dm_evolution_enabled","dm_evolution_inbox_primary_enabled","dm_evolution_inbox_secondary_enabled","dm_evolution_inbox_tertiary_enabled","dm_evolution_message_creation_enabled"]];var f=function(){const{featureSwitches:e}=l.a.useContext(m.a);if(!e.isTrue("dm_evolution_responsive_web_early_bird_only_switch"))return null;const t=Object(v.a)(e),[n,a]=l.a.useState((e=>{for(let t=k.length-1;t>0;t--)if(Object(p.a)(k[t],(t=>e.isTrue(t))))return t;return 0})(e)),s=(e=>{const t=l.a.useRef();return l.a.useEffect((()=>{t.current=e})),t.current})(n);l.a.useEffect((()=>{void 0!==s&&s!==n&&window.location.reload()}),[n,s]);return l.a.createElement(g.a,{style:F.switchContainer},l.a.createElement(y.a,{enableHover:!0,renderContent:()=>l.a.createElement(h.b,{style:F.popoverContent},"How much fancy GraphQL do you want in your DMs?")},l.a.createElement(g.a,{style:[F.icon,F[`level${n}`]]},l.a.createElement("svg",{viewBox:"0 0 400 400",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{d:"M57.468 302.66l-14.376-8.3 160.15-277.38 14.376 8.3z",fill:"#E535AB"}),l.a.createElement("path",{d:"M39.8 272.2h320.3v16.6H39.8z",fill:"#E535AB"}),l.a.createElement("path",{d:"M206.348 374.026l-160.21-92.5 8.3-14.376 160.21 92.5zm139.174-241.079l-160.21-92.5 8.3-14.376 160.21 92.5z",fill:"#E535AB"}),l.a.createElement("path",{d:"M54.482 132.883l-8.3-14.375 160.21-92.5 8.3 14.376z",fill:"#E535AB"}),l.a.createElement("path",{d:"M342.568 302.663l-160.15-277.38 14.376-8.3 160.15 277.38zM52.5 107.5h16.6v185H52.5z",fill:"#E535AB"}),l.a.createElement("path",{d:"M330.9 107.5h16.6v185h-16.6z",fill:"#E535AB"}),l.a.createElement("path",{d:"M203.522 367l-7.25-12.558 139.34-80.45 7.25 12.557z",fill:"#E535AB"}),l.a.createElement("path",{d:"M369.5 297.9c-9.6 16.7-31 22.4-47.7 12.8-16.7-9.6-22.4-31-12.8-47.7 9.6-16.7 31-22.4 47.7-12.8 16.8 9.7 22.5 31 12.8 47.7M90.9 137c-9.6 16.7-31 22.4-47.7 12.8-16.7-9.6-22.4-31-12.8-47.7 9.6-16.7 31-22.4 47.7-12.8 16.7 9.7 22.4 31 12.8 47.7M30.5 297.9c-9.6-16.7-3.9-38 12.8-47.7 16.7-9.6 38-3.9 47.7 12.8 9.6 16.7 3.9 38-12.8 47.7-16.8 9.6-38.1 3.9-47.7-12.8M309.1 137c-9.6-16.7-3.9-38 12.8-47.7 16.7-9.6 38-3.9 47.7 12.8 9.6 16.7 3.9 38-12.8 47.7-16.7 9.6-38.1 3.9-47.7-12.8M200 395.8c-19.3 0-34.9-15.6-34.9-34.9 0-19.3 15.6-34.9 34.9-34.9 19.3 0 34.9 15.6 34.9 34.9 0 19.2-15.6 34.9-34.9 34.9M200 74c-19.3 0-34.9-15.6-34.9-34.9 0-19.3 15.6-34.9 34.9-34.9 19.3 0 34.9 15.6 34.9 34.9 0 19.3-15.6 34.9-34.9 34.9",fill:"#E535AB"})))),l.a.createElement(g.a,{style:F.switch},l.a.createElement(_.a,{accessibilityLabel:"GraphQL Slider",hoverLabels:["Easy (no GraphQL, same as normal Twitter)","Medium (some GraphQL, next launch target) ","Jane Wong (all GraphQL, experimental)"],max:k.length-1,min:0,onChange:e=>{for(let n=k.length-1;n>e;n--)k[n].forEach((e=>t.set(e,!1)));k[e].forEach((e=>t.set(e,!0))),a(e)},value:n,withMarkers:!0})))};const F=b.a.create((e=>({level0:{filter:"grayscale(100%)"},level1:{filter:"grayscale(50%)"},level3:{},icon:{height:e.spaces.space20,marginRight:e.spaces.space8,marginTop:e.spaces.space2,width:e.spaces.space20},popoverContent:{padding:e.spaces.space24},switchContainer:{display:"flex",flexDirection:"row"},switch:{marginRight:e.spaces.space12,minWidth:`calc(2*${e.spaces.space48})`}})));var T=n("nySH"),S=n("M2mT"),E=n("Es6L"),C=n("aI6n"),I=n("Vc8w");const R=r.a.a2f81050,L="dmInbox";function K(e){Object(I.a)();const t=Object(E.a)()?l.a.createElement(g.a,{style:x.appBarButtons},l.a.createElement(f,null),Object(T.d)("/messages/settings",!1),l.a.createElement(u,{testID:C.a.newDM})):Object(T.d)("/messages/settings",!0);return l.a.createElement(S.a,{rightControl:t,screenType:"root",title:R},e.children)}const x=b.a.create((e=>({appBarButtons:{flexDirection:"row",alignItems:"center"}})))},"33Kz":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return i}));n("kYxP");const a=e=>e.getArrayValue("dm_reactions_config_active_reactions"),l=e=>{const t=e.getArrayValue("dm_reactions_config_inactive_reactions");return[...a(e),...t]},s=(e,t)=>{const n=l(t).find((t=>t.endsWith(e)));if(n)return n.split(":")[0]},i=(e,t={includeInactive:!1})=>t.includeInactive?l(e).map((e=>e.split(":")[1])):a(e).map((e=>e.split(":")[1]))},"3AAD":function(e,t,n){"use strict";const a={...n("7n04").a,pinToNewestWhenAtNewest:!0};t.a=a},"4AMG":function(e,t,n){"use strict";n.d(t,"a",(function(){return Rs}));var a=n("ejT/"),l=n("ERkP"),s=n.n(l),i=(n("kYxP"),n("gbD7")),r=n("X/yg"),o=n("b9JY");var c=(e,t)=>{if(e&&e.message_data&&t&&t.message_data&&Object(o.b)(e)&&Object(o.b)(t)){const{sender_id:n,time:a}=e.message_data,{sender_id:l,time:s}=t.message_data,i=parseInt(s,10)-parseInt(a,10);return n===l&&i>=0&&i<=6e4}return!1},d=n("jat/"),u=n("MMRb"),m=n("v6aA"),p=n("XnpN"),g=n("3XMw"),y=n.n(g),h=n("W27K"),_="ProfileInfoHeader",b="UserDescription",v=n("LhSm"),k=n("I4+6"),f=n("rHpw"),F=n("t62R"),T=n("855f"),S=n("PbQQ"),E=n("cm6r"),C=n("oSwX"),I=n("jV+4"),R=n("pBrB"),L=n("wCd/"),K=n("pjBI"),x=n("OOKO");const w=y.a.e535cae9,M=(e,t)=>{const n=Object(p.a)(e,t).map((({user:e})=>e)),a=n&&n[0];return{userAvatarUrl:a.profile_image_url_https,userDescription:a.description,userEntities:a.entities,userWithheldDescription:a.withheld_description,userWithheldEntities:a.withheld_entities,userFollowerCount:a&&a.followers_count,userFriendsCount:a&&a.friends_count,userIdStr:a&&a.id_str,userJoinDate:a&&a.created_at,userName:a&&a.name,userScreenName:a&&a.screen_name,userIsVerified:a&&a.verified}},O=f.a.create((e=>({root:{flexDirection:"column",alignItems:"center",marginBottom:e.spaces.space16,paddingVertical:e.spaces.space20,paddingHorizontal:e.spaces.space16,borderRadius:e.borderRadii.xSmall},profileInfoItemMargin:{marginBottom:e.spaces.space4},borderBottom:{borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid"},description:{width:"100%",textAlign:"center"},descriptionVDL:{marginBottom:0,marginTop:e.spaces.space12},statsVDL:{marginTop:e.spaces.space12,marginBottom:e.spaces.space12},userAvatar:{alignItems:"center"}})));var A=({conversation:e,withBottomBorder:t=!0,withVDLrefresh:n=!1})=>{const{loggedInUserId:a}=s.a.useContext(m.a);if(!e)return null;const{userAvatarUrl:l,userDescription:i,userEntities:r,userFollowerCount:o,userFriendsCount:c,userIdStr:d,userIsVerified:u,userJoinDate:p,userName:g,userScreenName:y,userWithheldDescription:A,userWithheldEntities:D}=M(e,a||""),P=!!(g&&y&&(o&&c||p)),U=k.a.generate({color:f.a.theme.colors.text,backgroundColor:f.a.theme.colors.transparent,customFocusBackgroundColor:f.a.theme.colors.gray0,customHoverBackgroundColor:f.a.theme.colors.gray0,customPressedBackgroundColor:f.a.theme.colors.activeFaintGray});return s.a.createElement(S.a.Consumer,{testId:_},(e=>{return s.a.createElement(E.a,{interactiveStyles:U,link:e.withAnchorless(`https://twitter.com/${y||""}`),style:[O.root,t&&P&&O.borderBottom]},n&&s.a.createElement(C.default,{uri:l}),s.a.createElement(I.a,{isVerified:u,name:g,screenName:y,style:[O.profileInfoItemMargin,n&&O.userAvatar],weight:"bold",withHoverCard:!0,withLink:!0,withStackedLayout:n}),i&&r&&d?s.a.createElement(R.a,{description:i,entities:r,style:[O.profileInfoItemMargin,O.description,n&&O.descriptionVDL],testID:b,userId:d,withheldDescription:A,withheldEntities:D}):null,!n&&o&&c?s.a.createElement(L.a,{followersCount:o,friendsCount:c,screenName:y||"",style:O.profileInfoItemMargin,withLink:!1}):null,!n&&p?s.a.createElement(v.a,{joinDate:p}):null,n?s.a.createElement(s.a.Fragment,null,s.a.createElement(K.a,{style:O.statsVDL},p?(e=>s.a.createElement(F.b,{color:"gray700",size:"subtext1"},s.a.createElement(v.a,{joinDate:e,withoutIcon:!0})))(p):null,o?(a=o,s.a.createElement(F.b,{color:"gray700",size:"subtext1"},w({count:T.a.getTruncatedCount(a)}))):null),s.a.createElement(h.a,{userId:d,userScreenName:y||""}),s.a.createElement(x.a,{spacing:"space28"})):null);var a}))},D=n("V/6K"),P=n("cFyg"),U=n("g54k"),H=n("aA19"),N=n("aWyx"),j=n("mN6z"),B=n("MWbm"),W=n("MAI/"),q=n("zQEV");const V=({children:e,link:t,style:n})=>s.a.createElement(F.b,{align:"center",color:"gray700",link:t,size:"subtext2",style:n},e);class z extends s.a.Component{constructor(...e){super(...e),this._renderContents=()=>{const{conversation:e,entry:t,entryType:n,perspective:a,users:l}=this.props,i=Object(q.a)(t,n,a,l);switch(n){case N.b.CONVERSATION_AVATAR_UPDATE:{const n=e.avatar_image_https===t.conversation_avatar_image_https;return s.a.createElement(s.a.Fragment,null,this._isValidImageSource(e.avatar_image_https)&&n?s.a.createElement(B.a,{style:Q.conversationAvatarContainer},s.a.createElement(H.a,{conversation:e,perspective:a})):null,s.a.createElement(V,null,i))}case N.b.JOIN_CONVERSATION:{const e=this._getAddedYouMessageWithProfileInfo(i),t=this._getParticipantsFromEntry(),n=s.a.createElement(F.b,{align:"center",color:"gray700",size:"subtext2"},this._getParticipantsFromEntryText(t)),a=this._getJoinConversationDetailsWithFacepile(t,n);return s.a.createElement(s.a.Fragment,null,e,a)}default:return s.a.createElement(V,null,i)}},this._getAddedYouMessageWithProfileInfo=e=>{const{entry:t,users:n}=this.props,a=t.sender_id?n[t.sender_id]:void 0,l=a?{pathname:`https://twitter.com/${a.screen_name}`}:void 0;return s.a.createElement(E.a,{interactiveStyles:null,link:l,style:Q.userAddedYouContainer},a?s.a.createElement(C.default,{accessibilityLabel:a.screen_name,screenName:a.screen_name,size:"medium",uri:a.profile_image_url_https,withHoverCard:!0,withLink:!0}):null,s.a.createElement(V,{link:l,style:Q.userAddedYouText},e))},this._getJoinConversationDetailsWithFacepile=(e,t)=>{const{conversation:n}=this.props,a=e.slice(0,20).map((({profile_image_url_https:e})=>e));return s.a.createElement(E.a,{interactiveStyles:null,link:{pathname:`/messages/${n.conversation_id}/participants`},style:Q.joinConversationDetails},t,s.a.createElement(W.a,{style:Q.userAvatarFacepile,userAvatarSize:"xLarge",userAvatarUrls:a}))}}shouldComponentUpdate(e){return!Object(j.a)(this.props,e)}render(){return s.a.createElement(B.a,{style:Q.root},this._renderContents())}_isValidImageSource(e){return e&&""!==e&&e.indexOf("MEDIA_NOT_FOUND")<0}_getParticipantsFromEntry(){const{entry:e,perspective:t,users:n}=this.props;return e.participants?e.participants.filter((({user_id:e})=>t!==e)).map((({user_id:e})=>n[e])).filter(Boolean):[]}_getParticipantsFromEntryText(e){const{conversation:{conversation_id:t}}=this.props;return Object(q.b)(e.length,t)}}const Q=f.a.create((e=>({root:{paddingBottom:e.spaces.space20},conversationAvatarContainer:{alignSelf:"center",height:e.spaces.space64,marginBottom:e.spaces.space12,width:e.spaces.space64},userAddedYouContainer:{flexDirection:"row",justifyContent:"center"},userAddedYouText:{flexShrink:1,marginLeft:e.spaces.space12},joinConversationDetails:{marginTop:e.spaces.space4},userAvatarList:{marginTop:e.spaces.space4},userAvatarFacepile:{marginTop:e.spaces.space4,justifyContent:"center"}})));var G=Object(U.a)(z),Y=n("zTrU");var X=Object(Y.a)((function(e){const t=f.a.theme.spacesPx.space40;return{DMUserAvatarSizeType:"xLarge",DMUserAvatarSizePx:t,DMUserAvatarSpacerPx:t+f.a.theme.spacesPx.space12}})),$=n("shC7"),J=n("38/B");const Z=function(e){return ee(e,J.a.reducedMotionEnabled)},ee=Object(Y.a)((function(e,t){const n=function(){const{DMUserAvatarSizePx:e,DMUserAvatarSpacerPx:t}=X(f.a.theme.scale),n=ae[f.a.theme.scale],a=te/n,l=ne/e,s=ne/2,i=ne-s,r=ne-s-t;return{cssTransition:J.a.reducedMotionEnabled?{}:{transition:`transform ${se}, opacity ${se}`},messageContainer:{base:{transform:[{translateX:0}]},active:{sent:{transform:[{translateX:($.a.getConstants().isRTL?1:-1)*i}]},received:{transform:[{translateX:($.a.getConstants().isRTL?-1:1)*r}]}}},actionsContainer:{base:{transform:[{translateX:0}]},active:{sent:{transform:[{translateX:($.a.getConstants().isRTL?1:-1)*le[f.a.theme.scale]}]},received:{transform:[{translateX:($.a.getConstants().isRTL?-1:1)*(le[f.a.theme.scale]+r)-s}]}}},voiceMessage:{container:{base:{height:n},active:{height:te}},base:{height:n,transform:[{scale:1}]},active:{base:{transform:[{scale:a}]},sent:{paddingRight:s/a,transformOrigin:$.a.getConstants().isRTL?"bottom left":"bottom right"},received:{paddingLeft:s/a,transformOrigin:$.a.getConstants().isRTL?"bottom right":"bottom left"}}},userAvatar:{base:{transform:[{scale:1}]},sent:{transformOrigin:$.a.getConstants().isRTL?"bottom left":"bottom right"},received:{transformOrigin:$.a.getConstants().isRTL?"bottom right":"bottom left"},active:{opacity:1,pointerEvents:"all",transform:[{scale:l}]},visuallyHidden:{opacity:0,pointerEvents:"none"}}}}();return{actionsContainer:function({isSent:e,isVoiceMessageActive:t}){const a=[n.cssTransition,n.actionsContainer.base];return t&&a.push(e?n.actionsContainer.active.sent:n.actionsContainer.active.received),a},messageContainer:function({isSent:e,isVoiceMessageActive:t}){const a=[n.cssTransition,n.messageContainer.base];return t&&a.push(e?n.messageContainer.active.sent:n.messageContainer.active.received),a},voiceMessageContainer:function({isSent:e,isVoiceMessageActive:t}){const a=[n.cssTransition,n.voiceMessage.container.base];return t&&a.push(n.voiceMessage.container.active),a},voiceMessage:function({isSent:e,isVoiceMessageActive:t}){const a=[n.cssTransition,n.voiceMessage.base];return t&&(a.push(n.voiceMessage.active.base),a.push(e?n.voiceMessage.active.sent:n.voiceMessage.active.received)),a},userAvatar:function({isSent:e,isVoiceMessageActive:t}){const a=[n.cssTransition,n.userAvatar.base,e?n.userAvatar.sent:n.userAvatar.received];return t?a.push(n.userAvatar.active):e&&a.push(n.userAvatar.visuallyHidden),a}}}));const te=60,ne=te,ae={xSmall:42,small:42,normal:47,large:47,xLarge:47},le={xSmall:72.26,small:165.61-89.3,normal:158.22-94.4,large:166.64-100.58,xLarge:181.55-111.81},se="0.2s 0s ease-in-out";var ie=n("+Kfv"),re=n("hqKg"),oe=n("oEGd"),ce=n("zh9S"),de=n("Yatk"),ue=n("G6rE"),me=n("P1r1");const pe={scribeAction:ce.c},ge=Object(re.createSelector)(((e,t)=>ue.e.select(e,t.senderId)),me.k,me.q,((e,t,n)=>({user:Object(de.a)(e),displaySensitiveMedia:t,isDmNsfwMediaFilterEnabled:n})));var ye=Object(oe.f)(ge,pe),he=(n("MvUL"),n("1YZw")),_e=n("rxPX"),be=n("0KEI");var ve=Object(_e.a)().propsFromActions((()=>({addToast:he.b,createLocalApiErrorHandler:Object(be.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_OVERFLOW_ACTIONS"),deleteEntry:u.deleteEntry}))).withAnalytics(),ke=n("k49u"),fe=n("LVU8");const Fe=y.a.f58dff34,Te=y.a.ad5a8e8e,Se={[ke.a.MissingParameter]:{toast:Object(fe.a)(Fe)},[ke.a.DirectMessageDestroyPermissionsError]:{toast:{text:Te}},showToast:!0};var Ee=n("xCUF"),Ce=n("uKEd");const Ie=[],Re=Object(re.createSelector)((e=>Object(Ce.l)(e).entries),((e,t)=>Object(Ce.p)(e,t.entry.id)||Ie),((e,t)=>t.perspective),((e,t,n)=>({selectedReactions:t.filter((t=>{const a=e[t]&&e[t].data;return a&&a.sender_id===n})).map((t=>e[t].data.reaction_key))}))),Le={createReaction:Ce.d,createLocalApiErrorHandler:Object(be.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_REACTIONS_POPOVER"),fetchUpdatesIfNeeded:Ee.d,removeReaction:Ce.k};var Ke=Object(oe.f)(Re,Le),xe=n("33Kz"),we=n("wTX1");var Me=({accessibilityLabelFormatter:e,count:t,emojiSize:n,emotion:a,enableHoverStyle:l,focusable:i,onPress:r,style:o})=>{const{featureSwitches:c}=s.a.useContext(m.a),d=Object(xe.b)(a,c),u=e&&d?e({emoji:d,count:t}):void 0,p=k.a.generate({backgroundColor:f.a.theme.colors.gray50,color:f.a.theme.colors.gray700});return s.a.createElement(E.a,{accessibilityLabel:u,focusable:i,interactiveStyles:l?p:null,onPress:r,style:[Oe.container,...o||[]]},s.a.createElement(F.b,{size:n,style:Oe.unsetLineHeight},d),t?s.a.createElement(we.a,{color:"gray700",containerStyle:Oe.count,count:t,size:"subtext3"},t):null)};const Oe=f.a.create((e=>({container:{flexDirection:"row"},count:{alignSelf:"center",minWidth:e.spaces.space16,paddingLeft:e.spaces.space2},unsetLineHeight:{lineHeight:"unset"}})));var Ae=n("pHkl"),De=n("Irs7");const Pe=y.a.ca7a2215,Ue=y.a.fc0e94b7;class He extends s.a.Component{constructor(...e){super(...e),this._handleReactionScribing=(e,t)=>{const{analytics:n,entry:a,isGroupDM:l,participantsCount:s}=this.props,i=t?"delete_reaction":"create_reaction",o=Object(r.c)(a);n.scribe({section:"twitter_service",component:"direct_messages",element:i,action:"success",data:{conversation_id:a.conversation_id,conversation_participant_count:s,conversation_type:l?Ae.k.GROUP:Ae.k.ONE_TO_ONE,message_type:o,reaction_emotion:e}})},this._reactionClickHandler=(e,t)=>()=>{const{createLocalApiErrorHandler:n,createReaction:a,dismiss:l,entry:s,fetchUpdatesIfNeeded:i,perspective:r,removeReaction:o}=this.props,c={reaction_key:e,conversation_id:s.conversation_id,dm_id:s.id,perspective:r};(t?o:a)(c).then(this._handleReactionScribing(e,t)).then((()=>i())).catch(n()),l()}}render(){const{selectedReactions:e}=this.props,t=Object(xe.a)(this.context.featureSwitches).map((t=>{const n=e.includes(t);return s.a.createElement(Me,{accessibilityLabelFormatter:n?Pe:Ue,emojiSize:"title4",emotion:t,enableHoverStyle:!0,focusable:!0,key:t,onPress:this._reactionClickHandler(t,n),style:[je.reaction,n&&je.selectedReaction]})}));return s.a.createElement(B.a,{style:je.reactions},t)}}He.contextType=m.a;var Ne=Object(De.a)(Ke(He));const je=f.a.create((e=>({reactions:{cursor:"pointer",flexDirection:"row",padding:e.spaces.space12},reaction:{borderRadius:e.borderRadii.small,padding:e.spaces.space4},selectedReaction:{backgroundColor:e.colors.gray50}})));var Be=n("OiMc");class We extends s.a.Component{constructor(...e){super(...e),this._renderDMReactionPickerContent=e=>{const{entry:t,isGroupDM:n,participantsCount:a,perspective:l}=this.props;return s.a.createElement(Ne,{dismiss:e,entry:t,isGroupDM:n,participantsCount:a,perspective:l})}}render(){const{children:e,onDismiss:t}=this.props;return s.a.createElement(Be.a,{enableEnterKeyToggle:!0,onDismiss:t,preferredVerticalOrientation:"up",renderContent:this._renderDMReactionPickerContent,withArrow:!0,withFixedPosition:this.context.isDrawer},e)}}We.contextType=D.a;var qe=n("TnY3"),Ve=n("mjJ+"),ze=n("Q0VY"),Qe=n("eb3s"),Ge=n("/yvb"),Ye=n("ZToW"),Xe=n("CaKu"),$e=n("i4Oy"),Je=n("4w6w");const Ze=(e,t)=>{if(null==e)return!1;const[n,a]=t||[0,0];return!((0===n||1===n)&&e.length===a)},et=e=>{const{message_data:t}=e;if(!t)return!1;const{attachment:n}=t;if(!n)return!0;if(n.sticker)return!1;const a=n.tweet||n.photo||n.animated_gif||n.video||void 0;if(a)return Ze(t.text,a.indices);if(n.card){var l;const e=((null==(l=t.entities)?void 0:l.urls)||[]).find((e=>e.url===n.card));return Ze(t.text,e&&e.indices)}return!0},tt=e=>{var t;const n=null==e||null==(t=e.message_data)?void 0:t.attachment;return!(!n||!(n.card||n.tweet||n.photo||n.animated_gif||n.video))},nt=e=>{var t;const n=null==e||null==(t=e.message_data)?void 0:t.attachment;return!(!n||!n.fleet)},at=(e,t,n)=>{const a=1.25*f.a.theme.fontSizesPx.body;return{compositeRendered:e?void 0!==t&&void 0!==n:void 0!==t,isTextSquared:void 0!==t&&void 0!==n&&(n===t||n<=t-a),isAttachmentSquared:void 0!==n&&void 0!==t&&(t===n||t<=n-a)}};var lt=n("hiGS"),st=n("zIWA"),it=n("Lsrn"),rt=n("k/Ka");const ot=(e={})=>Object(rt.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[it.a.root,e.style],viewBox:"0 0 24 24"},s.a.createElement("g",null,s.a.createElement("path",{d:"M16.925 9.5H14.5V7.075c0-.414-.336-.75-.75-.75s-.75.336-.75.75V9.5h-2.425c-.414 0-.75.336-.75.75s.336.75.75.75H13v2.425c0 .414.336.75.75.75s.75-.336.75-.75V11h2.425c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-.3 11H4.25c-.413 0-.75-.337-.75-.75V8.402c0-.414-.336-.75-.75-.75s-.75.336-.75.75V19.75C2 20.99 3.01 22 4.25 22h12.375c.414 0 .75-.336.75-.75s-.336-.75-.75-.75z"}),s.a.createElement("path",{d:"M19.75 2h-12C6.51 2 5.5 3.01 5.5 4.25v12c0 1.24 1.01 2.25 2.25 2.25h12c1.24 0 2.25-1.01 2.25-2.25v-12C22 3.01 20.99 2 19.75 2zm.75 14.25c0 .413-.337.75-.75.75h-12c-.413 0-.75-.337-.75-.75v-12c0-.413.337-.75.75-.75h12c.413 0 .75.337.75.75v12z"})));ot.metadata={width:24,height:24};var ct=ot,dt=n("DlVf"),ut=n("ACHU"),mt=n("UgB4"),pt=n("fz3c");const gt=y.a.ba60339a,yt=y.a.j4bfee22,ht=y.a.d96cf7ce,_t=y.a.faddd3a2,bt=y.a.eb497e08,vt=y.a.b170974a,kt=y.a.i202bd22,ft=y.a.f2e5491a,Ft=y.a.f88553c8,Tt=y.a.ifea3114,St=y.a.cac1482a,Et=y.a.h63a5c3c;class Ct extends s.a.Component{constructor(e,t){super(e,t),this._renderOverflowMenu=e=>{const{analytics:t,entry:n,featureSwitches:a,isSent:l}=this.props,i=pt.a.DMMessage,r=t.contextualScribeNamespace,o=[{text:gt,Icon:lt.a,isEmphasized:!0,onClick:this._handleShowDeleteConfirmation(e)}];if(!l)if(Object(pt.g)(a,i)){var c;const e=Object(pt.d)({clientReferer:window.location.pathname,isMedia:!1,isPromoted:!1,reportType:i,reportedConversationId:n.conversation_id,reportedMessageId:n.id,reportedUser:null==(c=n.message_data)?void 0:c.sender_id,scribeNamespace:t.contextualScribeNamespace});o.push({text:kt,Icon:st.a,link:{pathname:"/i/safety/report_story_start",state:{input:{requested_variant:JSON.stringify(e)}}},onClick:this.props.onReportMessage})}else o.push({text:kt,Icon:st.a,link:{pathname:`/i/report/${i}/${n.id}`,state:{clientReferer:window.location.pathname,conversationId:n.conversation_id,scribeNamespace:r}},onClick:this.props.onReportMessage});return Xe.a.isAvailable()&&o.push({text:ft,Icon:ct,onClick:this._handleCopyMessageText}),s.a.createElement(Ve.a,{isFixed:this.context.isDrawer,items:o,onCloseRequested:this._handleHideActionsAndMenus(e),preferredHorizontalOrientation:"right"})},this._handleCopyMessageText=e=>{const{addToast:t}=this.props,n=this._replaceMessageUrls();n&&(Xe.a.setString(n),t({text:Ft})),e&&e()},this._handleForwardButton=()=>{var e,t;const{entry:n,history:a}=this.props;if(null!=n&&null!=(e=n.message_data)&&null!=(t=e.attachment)&&t.tweet){const{tweet:e}=n.message_data.attachment;a.push({pathname:"/messages/compose",state:{tweetAttachment:{...e,id_str:e.status}}})}},this._handleSetActionsActive=()=>{const{setShouldFreezeUpdates:e}=this.props;this.setState({actionsAreActive:!0}),e(!0)},this._handleDelete=()=>{const{analytics:e,createLocalApiErrorHandler:t,deleteEntry:n,entry:a,inboxType:l,isGroupDM:s,participantsCount:i}=this.props,o=Object(r.c)(a);e.scribe({action:"delete",data:{conversation_id:a.conversation_id,conversation_type:s?Ae.k.GROUP:Ae.k.ONE_TO_ONE,conversation_participant_count:i,message_type:o,inbox_type:Object(r.l)(l)}}),n({conversationId:a.conversation_id,id:a.id}).catch(t(Se))},this._handleHideDeleteConfirmation=()=>{this.setState({showDeleteConfirmation:!1})},this._handleHideActionsAndMenus=e=>()=>{const{setShouldFreezeUpdates:t}=this.props;e&&e(),this.setState({actionsAreActive:!1}),t(!1)},this._handlePressReactionPickerButton=()=>{const{analytics:e,entry:t}=this.props;e.scribe({component:"reaction_button",element:Object(r.c)(t),action:"click"}),this._handleSetActionsActive()},this._handleShowDeleteConfirmation=e=>()=>{const{setShouldFreezeUpdates:t}=this.props;e(),this.setState({actionsAreActive:!1,showDeleteConfirmation:!0}),t(!1)},this._replaceMessageUrls=()=>{const{entry:e}=this.props,t=e&&e.message_data&&e.message_data.entities;let n=e&&e.message_data&&e.message_data.text||"";return ze.a.tweetTextParts(n,[0,n.length],t).forEach((e=>{"url"===e.entityType&&(n=n.replace(e.url,e.expandedUrl))})),n},this.state={actionsAreActive:!1,showDeleteConfirmation:!1},this._hasMedia=tt(this.props.entry),this._isNarrow=$e.a.get("screen").width<f.a.theme.breakpoints.xSmall}render(){var e,t;const{entry:n,isSent:a,shouldShowReactionButton:l,style:i,withVDLRefresh:r}=this.props,o=this._areActionsVisible();return s.a.createElement(B.a,{pointerEvents:o?"auto":"none",style:[Rt.messageActions,a?Rt.messageActionsLeft:Rt.messageActionsRight,o?Rt.visible:Rt.invisible,r&&Rt.vdlMessageActions,this._isNarrow&&(this._hasMedia?Rt.messageActionsMediaNarrow:Rt.messageActionsNarrow),i]},(null==n||null==(e=n.message_data)||null==(t=e.attachment)?void 0:t.tweet)&&r&&this._renderForwardButton(),l&&this._renderReactionButton(),this._renderOverflowButton(),this._renderDeleteConfirmation())}_renderDeleteConfirmation(){return this.state.showDeleteConfirmation?s.a.createElement(Qe.a,{confirmButtonLabel:ht,confirmButtonType:"destructiveFilled",headline:yt,onCancel:this._handleHideDeleteConfirmation,onConfirm:this._handleDelete,text:_t}):null}_renderForwardButton(){return s.a.createElement(Ge.a,{accessibilityLabel:Tt,hoverLabel:{label:Tt},icon:Lt,onPress:this._handleForwardButton,size:this._isNarrow?"small":"medium",type:"brandText"})}_renderReactionButton(){const{entry:e,isGroupDM:t,participantsCount:n,perspective:a,withVDLRefresh:l}=this.props,{actionsAreActive:i}=this.state,r=s.a.createElement(dt.a,{style:l?Rt.vdlActionIcon:Rt.actionIcon});return s.a.createElement(We,{entry:e,isGroupDM:t,onDismiss:this._handleHideActionsAndMenus(),participantsCount:n,perspective:a},s.a.createElement(Ge.a,{accessibilityExpanded:!!i,accessibilityHasPopup:"menu",accessibilityLabel:vt,hoverLabel:{label:St},icon:r,onPress:this._handlePressReactionPickerButton,size:this._isNarrow?"small":"medium",type:"brandText"}))}_renderOverflowButton(){const{withVDLRefresh:e}=this.props,t=s.a.createElement(ut.a,{style:e?Rt.vdlActionIcon:Rt.actionIcon});return s.a.createElement(Ge.a,{accessibilityLabel:bt,hoverLabel:{label:Et},icon:t,onPress:this._handleSetActionsActive,renderMenu:this._renderOverflowMenu,size:this._isNarrow?"small":"medium",type:"brandText"})}_areActionsVisible(){const{containerIsActive:e,containerIsFocused:t,containerIsHovered:n,isDraft:a}=this.props,{actionsAreActive:l}=this.state,s=(i=this.props.entry,!et(i)&&tt(i)&&!Ye.a.isEnabled);var i;return!a&&(s||e&&!Ye.a.isEnabled||t||n||l)}}Ct.contextType=D.a;var It=Object(qe.a)(ve(Ct));const Rt=f.a.create((e=>({invisible:{opacity:0},messageActions:{alignSelf:"flex-end",flexDirection:"row"},messageActionsMediaNarrow:{flexDirection:"column"},messageActionsNarrow:{flexShrink:1,flexWrap:"wrap",minWidth:e.spaces.space32},messageActionsLeft:{justifyContent:"flex-end",paddingRight:e.spaces.space4},messageActionsRight:{justifyContent:"flex-start",paddingLeft:e.spaces.space4},vdlMessageActions:{alignSelf:"center"},actionIcon:{color:e.colors.gray700},vdlActionIcon:{color:e.colors.gray600},visible:{opacity:1}}))),Lt=s.a.createElement(mt.a,{style:Rt.vdlActionIcon});var Kt=n("97Jx"),xt=n.n(Kt),wt=n("CDB5");var Mt=Object(_e.a)().propsFromActions((()=>({createLocalApiErrorHandler:Object(be.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_CONVERSATION"),removeEntry:u.removeEntry,sendMessage:wt.m}))).withAnalytics();const Ot="87.5%";var At=n("wrlS"),Dt=n("RqPI");const Pt=[],Ut=(e,t)=>Object(Ce.p)(e,t.entryId)||Pt,Ht=e=>Object(Ce.l)(e).entries,Nt={createLocalApiErrorHandler:Object(be.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_REACTIONS")};var jt=Object(oe.e)((()=>Object(re.createSelector)(Ht,Ut,Dt.s,At.d,((e,t,n,a)=>{const l=Object(xe.a)(a,{includeInactive:!0});let s,i=0;return{reactionsWithCounts:t.reduceRight(((t,a)=>{const r=e[a]&&e[a].data;if(!r)return t;if(!l.includes(r.reaction_key))return t;const o=(t.get(r.reaction_key)||0)+1;return t.set(r.reaction_key,o),(null==r?void 0:r.sender_id)===n&&(s=r.reaction_key),i+=1,t}),new Map),selectedReactionKey:s,totalReactionCount:i}}))),Nt);const Bt=[],Wt=(e,t)=>t.entryId,qt=e=>Object(Ce.l)(e).entries,Vt=(e,t)=>Object(Ce.p)(e,Wt(0,t))||Bt,zt=(e,t)=>ue.e.selectMany(e,((e,t)=>Object(Ce.q)(e,Wt(0,t)))(e,t)),Qt={removeReaction:Ce.k,fetchUpdatesIfNeeded:Ee.d,createLocalApiErrorHandler:Object(be.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_REACTION_SUMMARY_CONTEXT")};var Gt=Object(oe.e)((()=>Object(re.createSelector)(qt,Vt,Dt.s,zt,At.d,((e,t,n,a,l)=>{const s=Object(xe.a)(l,{includeInactive:!0}),i=[];t.forEach((t=>{const l=e[t]&&e[t].data;if(!(l&&s.includes(l.reaction_key)))return;const r=a.find((e=>e&&e.id_str===l.sender_id)),o=r&&{avatarUri:r.profile_image_url_https,userId:r.id_str,reactionKey:l.reaction_key,isLoggedInUser:r.id_str===n,screenName:r.screen_name,name:r.name,isProtected:r.protected,isVerified:r.verified,time:l.time};o&&i.push(o)})),i.sort(((e,t)=>t.time-e.time));const r=i.findIndex((e=>e.userId===n));return r>-1&&i.push(...i.splice(0,r)),{loggedInUserId:n,usersWithReactions:i}}))),Qt),Yt=n("TIdA"),Xt=n("htQn");const $t=y.a.gf5e9ea6,Jt=y.a.a2d48779,Zt=Yt.a.createLayoutCache();const en=f.a.create((e=>({bodyColumn:{flexShrink:1,flexGrow:1,justifyContent:"center",marginHorizontal:e.spaces.space4},body:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},bottomBorder:{borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},column:{alignItems:"center",justifyContent:"center",marginRight:e.spaces.space4},reactionColumn:{alignItems:"center",justifyContent:"center",marginRight:e.componentDimensions.gutterHorizontal},root:{flexDirection:"row",minHeight:"56px",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical}})));var tn=function(e){const{featureSwitches:t}=s.a.useContext(m.a),{onUndoPress:n,renderUndo:a,user:l,withBottomBorder:i}=e,{avatarUri:r,isProtected:o,isVerified:c,name:d,screenName:u}=l,p=s.a.useMemo((()=>function(e){e.stopPropagation(),n()}),[n]),g=s.a.createElement(C.default,{imageLayoutCache:Zt,screenName:u,size:"xxLarge",uri:r}),y=s.a.createElement(Me,{emojiSize:"title4",emotion:l.reactionKey,focusable:!1}),h=s.a.createElement(I.a,{badgeContext:"content",isProtected:o,isVerified:c,name:d,screenName:u,withHoverCard:!0,withStackedLayout:!0});return s.a.createElement(Xt.a,{link:{pathname:`/${u}`,anchorless:!0},style:[en.root,i&&en.bottomBorder]},s.a.createElement(B.a,{style:en.reactionColumn},y),s.a.createElement(B.a,{style:en.column},g),s.a.createElement(B.a,{style:en.bodyColumn},s.a.createElement(B.a,{style:en.body},h)),a?s.a.createElement(B.a,{style:en.column},s.a.createElement(Ge.a,{accessibilityLabel:Jt({emoji:Object(xe.b)(l.reactionKey,t)}),onClick:p,size:"small",type:"brandText"},$t)):null)},nn=n("xKuM"),an=n("efqG");const ln=y.a.b772cd66,sn=y.a.c0098d4a,rn=y.a.j85999ec;class on extends s.a.PureComponent{constructor(...e){super(...e),this._renderContent=(e,t)=>s.a.createElement(B.a,null,this._renderHeader(e,t),this._renderUsers(e,t),this._renderDoneButton(e,t)),this._renderHeader=(e,t)=>"sheet"===t?s.a.createElement(nn.a,{title:sn}):s.a.createElement(F.b,{visuallyHidden:!0},sn),this._renderUsers=(e,t)=>s.a.createElement(B.a,{accessibilityLabel:rn,style:[cn.container,"sheet"===t?cn.sheet:cn.popover]},this._renderUserCells(e)),this._renderDoneButton=(e,t)=>"sheet"===t&&s.a.createElement(Ge.a,{key:"button_done",onPress:e,style:cn.cancelButton,type:"primaryOutlined"},ln),this._renderUserCells=e=>this.props.usersWithReactions.filter(Boolean).map(((t,n)=>s.a.createElement(tn,{history:this.props.history,key:t.userId,onUndoPress:this._reactionUndoHandler(t.reactionKey,e),renderUndo:t.isLoggedInUser,user:t,withBottomBorder:n!==this.props.usersWithReactions.length-1}))),this._reactionUndoHandler=(e,t)=>()=>{const{conversationId:n,createLocalApiErrorHandler:a,entryId:l,fetchUpdatesIfNeeded:s,loggedInUserId:i,removeReaction:r}=this.props,o={reaction_key:e,conversation_id:n,dm_id:l,perspective:i};t(),r(o).then(this._handleScribeRemoveReaction(e)).then(s).catch(a())},this._handleScribeRemoveReaction=e=>()=>{const{analytics:t}=this.props;t.scribe({page:"app",section:"twitter_service",component:"direct_messages",element:"delete_reaction",action:"success",data:{reaction_emotion:e}})}}render(){const{children:e}=this.props;return s.a.createElement(an.a,{renderContent:this._renderContent,withFixedPosition:this.context.isDrawer},e)}}on.contextType=D.a;const cn=f.a.create((e=>({cancelButton:{marginHorizontal:e.spaces.space12,marginVertical:e.spaces.space12},container:{overflowY:"auto",paddingVertical:e.spaces.space12},popover:{maxHeight:"35vh",minWidth:"320px"},sheet:{maxHeight:"65vh"}})));var dn=Object(qe.a)(Object(De.a)(Gt(on)));const un=y.a.h95f9e77;class mn extends s.a.PureComponent{constructor(e){super(e),this._handleScribeDMReactionSummary=()=>{const{analytics:e}=this.props;e.scribe({component:"dm_reaction_summary",action:"show"})},this._onSetReactionsNode=e=>{this._measureWidths(e||void 0)},this._renderReactions=({isHovered:e})=>{const{reactionsWithCounts:t,selectedReactionKey:n}=this.props,a=this.state.emojiSize||"headline1",l=t.size-1;return Array.from(t,(([t,i],r)=>s.a.createElement(Me,{count:i,emojiSize:a,emotion:t,enableHoverStyle:!1,focusable:!0,key:t,style:[r===l&&pn.rightPadding,pn.elementPadding,n===t?pn.selfSelect:null,e&&pn.isHoveredDMReaction]})))},this.state={emojiSize:void 0}}render(){const{conversationId:e,entryId:t,isEndOfDM:n,isSent:a,totalReactionCount:l}=this.props,{emojiSize:i}=this.state;if(0===l)return null;const r=k.a.generate({backgroundColor:f.a.theme.colors.gray50,color:f.a.theme.colors.gray700}),o=un({reactionCount:l});return s.a.createElement(B.a,{style:[pn.container,n?pn.marginShort:pn.marginLong,a?pn.alignRight:pn.alignLeft,i?pn.visible:pn.invisible]},s.a.createElement(dn,{conversationId:e,entryId:t},s.a.createElement(E.a,{accessibilityLabel:o,focusable:!0,interactiveStyles:r,onPress:this._handleScribeDMReactionSummary,ref:this._onSetReactionsNode,style:pn.content},this._renderReactions)))}_measureWidths(e){const t=e&&e.parentElement,n={emojiSize:"headline1"};if(t){const{width:a}=t.getBoundingClientRect(),{width:l=0}=e?e.getBoundingClientRect():{};l>a&&(n.emojiSize="subtext2")}this.setState({...n})}}const pn=f.a.create((e=>({container:{boxSizing:"border-box"},content:{borderRadius:e.borderRadii.infinite,display:"flex",flexDirection:"row"},rightPadding:{paddingRight:e.spaces.space2},elementPadding:{borderColor:e.colors.transparent,borderWidth:e.borderWidths.small,paddingBottom:e.spaces.space2,paddingTop:e.spaces.space2,paddingLeft:`calc(${e.spaces.space2} * 2)`},selfSelect:{borderColor:f.a.theme.colors.gray50,borderRadius:e.borderRadii.infinite},alignLeft:{alignSelf:"flex-start"},alignRight:{alignSelf:"flex-end"},invisible:{opacity:0},visible:{opacity:1},marginShort:{marginBottom:e.spaces.space4},marginLong:{marginBottom:e.spaces.space12},isHoveredDMReaction:{borderColor:e.colors.transparent,cursor:"pointer"}})));var gn=Object(De.a)(jt(mn)),yn=n("Xrkv");const hn=y.a.icd0bf34,_n=y.a.e8bd8fec,bn=y.a.b2d32fae,vn=y.a.a763d33f;class kn extends s.a.PureComponent{constructor(e){super(e),this._handlePress=e=>{e.stopPropagation(),this.setState({showFullList:!0})},this.state={showFullList:!1}}render(){const{isGroupDM:e,isSeenByEveryone:t,namesToDisplay:n}=this.props;return s.a.createElement(B.a,{style:fn.root},s.a.createElement(F.b,{align:"right",color:"gray700",size:"subtext2",style:fn.seenLabel},this._renderSeenLabel()),!t&&e&&n.length?this._renderNameList():null)}_renderSeenLabel(){const{isGroupDM:e,isSeenByEveryone:t,namesToDisplay:n}=this.props;return t?e?bn:hn:n.length?vn({count:n.length}):_n}_renderNameList(){let{namesToDisplay:e}=this.props;const{showFullList:t}=this.state,n=!t&&e.length>10,a=e.length-10,l=({namesList:e,othersCount:t})=>s.a.createElement(y.a.I18NFormatMessage,{$i18n:"f6464107"},s.a.createElement(F.b,null,e),s.a.createElement(F.b,{color:"link",onPress:this._handlePress},y.a.e762ce30({othersCount:t})));n&&(e=e.slice(0,10));const i=Object(yn.a)(e,n);return s.a.createElement(F.b,{align:"right",color:"gray700",size:"subtext2",style:fn.namesList},n?s.a.createElement(l,{namesList:i,othersCount:a}):s.a.createElement(F.b,null,i))}}const fn=f.a.create((e=>({root:{alignItems:"flex-end",width:`calc(100% - ${e.spaces.space2})`},seenLabel:{cursor:"pointer"},namesList:{marginBottom:e.spaces.space2,whiteSpace:"pre-line"}})));var Fn=kn,Tn=n("t0aI");const Sn=({entryId:e,participants:t,user:n})=>{const a=En({entryId:e,participants:t,user:n});return{namesToDisplay:a,isSeenByEveryone:a.length===t.length-1}},En=({entryId:e,participants:t,user:n})=>t.reduce(((t,a)=>{const{join_conversation_event_id:l,last_read_event_id:s,user:{name:i}}=a,r=a.user_id!==n.id_str,o=s&&1!==Object(Tn.a)(e,s),c=!l||1!==Object(Tn.a)(l,e);return r&&o&&c&&t.push(i),t}),[]);var Cn=n("IMYl"),In=n("21zW"),Rn=n("gmpV");const Ln=y.a.fad48eea,Kn=y.a.ba60339a,xn=y.a.d338f53e,wn=y.a.ae7d7a24,Mn=y.a.d725a289,On=y.a.bbe74f3f,An=y.a.h0e4cdf5,Dn=y.a.bfbc051d;class Pn extends s.a.PureComponent{constructor(...e){super(...e),this._handleRemove=()=>{const{conversationId:e,entryId:t,removeEntry:n}=this.props;n(e,null,{id:t})},this._handleTryAgain=()=>{const{conversationId:e,entryText:t,localMediaId:n,sendMessage:a,user:l}=this.props;a({tweetAttachment:void 0,senderId:l.id_str,conversationId:e,text:t,localMediaId:n}),this._handleRemove()}}render(){const{isSent:e,onPress:t}=this.props,n=this._renderSending(),a=this._renderError(),l=this._renderTimestamp(),i=this._renderReadReceipt(),r=this._renderSentCheckmark(),o=this._renderReactions(),c=l||i||r,d=n||a||o||c,u=this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_chat_p0_enabled");return d&&s.a.createElement(B.a,{style:[Un.root,u&&Un.vdlRootMargin,e&&Un.sentMessage]},n,a,o,c?s.a.createElement(E.a,{interactiveStyles:null,onPress:t,style:e&&Un.sentContainer},s.a.createElement(B.a,{style:e&&Un.groupedItems},l,r),i):null)}_renderError(){const{isError:e}=this.props;return e&&s.a.createElement(B.a,null,s.a.createElement(F.b,{align:"right",color:"gray700",size:"subtext2"},wn),s.a.createElement(B.a,{style:Un.groupedItems},s.a.createElement(F.b,{accessibilityRole:"button",color:"magenta500",onPress:this._handleRemove,size:"subtext2",withInteractiveStyling:!0},Kn),s.a.createElement(In.a,null),s.a.createElement(F.b,{accessibilityRole:"button",color:"primary",onPress:this._handleTryAgain,size:"subtext2",withInteractiveStyling:!0},xn)))}_renderReactions(){const{conversationId:e,entryId:t,isLastRapidFire:n,isRapidFire:a,isSent:l,withUserAvatar:i}=this.props,r=!a||n;return e?s.a.createElement(B.a,{style:i&&Un.footerPadderWithAvatar},s.a.createElement(gn,{conversationId:e,entryId:t,isEndOfDM:r,isSent:l})):null}_renderReadReceipt(){const{entryId:e,isActive:t,isDraft:n,isError:a,isGroupDM:l,isSent:i,participants:r,user:o}=this.props;return t&&i&&!n&&!a?s.a.createElement(Fn,xt()({isGroupDM:l},Sn({entryId:e,participants:r,user:o}))):null}_renderSending(){const{isDraft:e,isError:t}=this.props;return e&&!t&&s.a.createElement(F.b,{align:"right",color:"gray700",size:"subtext2"},Ln)}_renderSentCheckmark(){const{entryId:e,isDraft:t,isError:n,isLastRapidFire:a,isRapidFire:l,isSent:i,participants:r,user:o}=this.props,{isSeenByEveryone:c}=Sn({entryId:e,participants:r,user:o});return!i||t||n||l&&!a?null:s.a.createElement(F.b,{color:c?"primary":"gray700",style:Un.checkmarkContainer},s.a.createElement(Cn.a,{style:Un.checkmark}))}_renderTimestamp(){const{entryTime:e,isDraft:t,isError:n,isGroupDM:a,isLastRapidFire:l,isRapidFire:i,isSent:r,user:{name:o},withUserAvatar:c}=this.props;if(t||n||i&&!l)return null;const d=new Date(Number(e));let u;u=Object(Rn.c)(d)?Mn(d):Object(Rn.d)(d)?On({time:Mn(d)}):Object(Rn.e)(d)?An(d):Dn(d);const m=a&&!r,p=r?"right":"left";return s.a.createElement(B.a,{style:[c&&Un.footerPadderWithAvatar,r&&Un.timestamp]},s.a.createElement(F.b,{align:p,color:"gray700",size:"subtext2",withInteractiveStyling:r||!Ye.a.isEnabled},m&&s.a.createElement(y.a.I18NFormatMessage,{$i18n:"c8b914d5"},s.a.createElement(F.b,null,o)),m&&" ",u))}}Pn.contextType=m.a;const Un=f.a.create((e=>({root:{marginTop:e.spaces.space2,overflow:"hidden",width:Ot},vdlRootMargin:{marginTop:`calc(${e.spaces.space8} - ${e.spaces.space2})`},sentMessage:{alignSelf:"flex-end",justifyContent:"flex-end"},sentContainer:{flexDirection:"column"},groupedItems:{justifyContent:"flex-end",flexDirection:"row"},timestamp:{cursor:"pointer"},checkmark:{cursor:"pointer",flexShrink:0,height:"1rem",paddingLeft:e.spaces.space2},checkmarkContainer:{lineHeight:"1"},footerPadderWithAvatar:{marginLeft:`calc(${e.spaces.space40} + ${e.spaces.space12})`}})));var Hn=Mt(Pn),Nn=n("jtO7");const jn=f.a.create((e=>({root:{borderColor:e.colors.gray50,borderStyle:"solid",borderWidth:e.borderWidths.small,borderBottomWidth:e.borderWidths.none,boxSizing:"border-box",overflow:"hidden"},isLast:{borderBottomWidth:e.borderWidths.small},insideTopRoundedSent:{borderTopLeftRadius:e.borderRadii.xLarge},insideTopRoundedReceived:{borderTopRightRadius:e.borderRadii.xLarge},outsideTopRoundedSent:{borderTopRightRadius:e.borderRadii.xLarge},outsideTopRoundedReceived:{borderTopLeftRadius:e.borderRadii.xLarge},sentLast:{borderBottomLeftRadius:e.borderRadii.xLarge},receivedLast:{borderBottomRightRadius:e.borderRadii.xLarge}})));var Bn=({insideTopRounded:e,isLast:t,isSent:n,label:a,onClick:l,outsideTopRounded:i,tcoUrl:r})=>{const o=[jn.root,t&&jn.isLast,t&&n&&jn.sentLast,t&&!n&&jn.receivedLast,e&&n&&jn.insideTopRoundedSent,e&&!n&&jn.insideTopRoundedReceived,i&&n&&jn.outsideTopRoundedSent,i&&!n&&jn.outsideTopRoundedReceived];return s.a.createElement(B.a,{style:o},s.a.createElement(Nn.a,{align:"center",color:"primary",label:a,link:r,onClick:l}))},Wn=n("fs1G");class qn extends s.a.Component{componentDidMount(){this.props.onImpression()}render(){const{callToActions:e,isSent:t,onCtaClick:n,withSticker:a,withUserText:l}=this.props,i=e.map(((i,r)=>{const o=0===r;return s.a.createElement(Bn,{insideTopRounded:o&&(a||!l),isLast:r===e.length-1,isSent:t,key:r,label:i.label,onClick:n,outsideTopRounded:o&&a,tcoUrl:i.tco_url})}));return s.a.createElement(B.a,null,i)}}qn.defaultProps={onCtaClick:Wn.a,onImpression:Wn.a};var Vn=qn,zn=n("vjRr"),Qn=n("EGrD");const Gn=(e,t)=>t.cardUrl;var Yn=Object(_e.a)().propsFromState((()=>({adFreeArticleDomains:Qn.c,card:zn.a.createSingleHydratedSelector(Gn)}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(be.createLocalApiErrorHandlerWithContextFactory)("DM_CARD_MESSAGE"),fetchAdFreeToken:Qn.a,loadAdFreeArticleDomainsFromPersistence:Qn.b,popOutConversation:u.popOutConversation})));const Xn=f.a.create((e=>({root:{width:"100%"},invisible:{opacity:0},visible:{opacity:1}})));var $n=({attachmentContent:e,attachmentHeader:t,isVisible:n=!0,textContent:a})=>s.a.createElement(B.a,{style:[n?Xn.visible:Xn.invisible,Xn.root]},t,e,a),Jn=n("cTG8");const Zn=({excludeCardUrl:e,isActive:t=!1,isFailedDraft:n,isFirstRapidFire:a=!1,isLastRapidFire:l=!1,isRapidFire:i=!1,isSent:r,hasAssociatedAttachment:o,messageData:c={},rootStyle:d,tweetId:u,withCta:p,withMediaLinks:g,withMessageBubble:y})=>{const{featureSwitches:h}=s.a.useContext(m.a),_=h.isTrue("dm_vdl_enabled")&&h.isTrue("dm_vdl_chat_p0_enabled"),b=[d,y&&ea.messageTextContainer,y&&r&&ea.sent,y&&!r&&ea.received,n&&ea.failedDraft,i&&!a&&!r&&ea.rapidFireReceived,i&&!a&&r&&ea.rapidFireSent,o&&r&&ea.hasAssociatedAttachmentSent,o&&!r&&ea.hasAssociatedAttachmentReceived,y&&_&&r&&ea.vdlSent,y&&t&&r&&ea.activeSent,y&&_&&t&&r&&ea.vdlActiveSent,y&&t&&!r&&!Ye.a.isEnabled&&ea.activeReceived,p&&ea.withCta],v=[ea.tweetText,y&&ea.textAlignLeft,!y&&r&&ea.textAlignRight],{gray0:F,magenta500:T,primary:S,text:C,white:I}=f.a.theme.colors,R=k.a.generate({color:r?I:C,backgroundColor:n?T:r?S:F}),L=c.text&&c.text.length||0;return s.a.createElement(E.a,{accessibilityRole:"none",interactive:r,interactiveStyles:y?R:null,style:b},s.a.createElement(Jn.a,{color:f.a.isDarkMode()||r?"whiteOnColor":void 0,displayTextRange:[0,L],entities:c.entities,excludeCardUrl:e,linkColor:y&&r||f.a.isDarkMode()?"whiteOnColor":"link",linkify:!0,quotedTweetId:u,size:y?void 0:"title2",style:v,text:c.text||"",underlineLinks:!0,withMediaLinks:g}))},ea=f.a.create((e=>({tweetText:{overflow:"hidden",wordBreak:"break-word"},messageTextContainer:{borderRadius:e.borderRadii.xLarge,boxSizing:"border-box",maxWidth:"100%",paddingVertical:e.spaces.space12,paddingHorizontal:e.spaces.space16},textAlignLeft:{textAlign:"left"},textAlignRight:{textAlign:"right"},sent:{alignSelf:"flex-end",backgroundColor:e.colors.primary,borderBottomRightRadius:e.borderRadii.none,borderColor:e.colors.primary},received:{alignSelf:"flex-start",backgroundColor:e.colors.dmReceivedBubbleBackground,borderBottomLeftRadius:e.borderRadii.none,borderColor:e.colors.gray200},vdlSent:{backgroundColor:e.colors.primary600},activeSent:{backgroundColor:e.colors.lightPrimary},activeReceived:{backgroundColor:e.colors.gray200},vdlActiveSent:{backgroundColor:e.colors.primary700},failedDraft:{backgroundColor:e.colors.magenta500},rapidFireReceived:{borderTopLeftRadius:e.borderRadii.none},rapidFireSent:{borderTopRightRadius:e.borderRadii.none},withCta:{borderBottomRightRadius:e.borderRadii.none,borderBottomLeftRadius:e.borderRadii.none},hasAssociatedAttachmentSent:{borderTopRightRadius:e.borderRadii.none},hasAssociatedAttachmentReceived:{borderTopLeftRadius:e.borderRadii.none}})));Zn.defaultProps={withMediaLinks:!1};var ta=Zn;var na=({isActive:e=!1,isFailedDraft:t,isFirstRapidFire:n=!1,isLastRapidFire:a=!1,isRapidFire:l=!1,isSent:i,messageData:r,withCta:o,withMessageBubble:c})=>s.a.createElement(ta,{isActive:e,isFailedDraft:t,isFirstRapidFire:n,isLastRapidFire:a,isRapidFire:l,isSent:i,messageData:r,withCta:o,withMediaLinks:!0,withMessageBubble:c}),aa=n("sCEu"),la=n("aX4+"),sa=n("/Ikv");const{CardNames:ia}=sa.a;class ra extends s.a.Component{constructor(...e){var t;super(...e),this.state={attachmentWidth:void 0,textContentWidth:void 0},this._hasClaimsForAdFreeArticles=null==(t=this.context.userClaims)?void 0:t.isTrueAndEnabled("subscriptions_feature_1006"),this._handleAttachmentLayout=e=>{const{nativeEvent:{layout:{width:t}}}=e,{attachmentWidth:n}=this.state;if(n!==t){const e={attachmentWidth:t};this.setState(e)}},this._handleOnClick=e=>{const{card:{binding_values:t}={},conversationId:n,popOutConversation:a}=this.props;if(n&&a(n),this._hasClaimsForAdFreeArticles){const{adFreeArticleDomains:n,createLocalApiErrorHandler:a,fetchAdFreeToken:l}=this.props,[s,i]=new aa.a(l,a()).getAdFreeArticlesClickHandler({destinationUrl:sa.a.getBindingValue(t,"card_url"),linkDomain:sa.a.getBindingValue(t,"domain"),adFreeArticleDomains:n});s&&i(e)}},this._handleTextContentLayout=e=>{const{nativeEvent:{layout:{width:t}}}=e,{textContentWidth:n}=this.state;if(n!==t){const e={textContentWidth:t};this.setState(e)}}}componentDidMount(){this._hasClaimsForAdFreeArticles&&this.props.loadAdFreeArticleDomainsFromPersistence()}render(){const{card:e,hasUserText:t,isActive:n,isFailedDraft:a,isFirstRapidFire:l,isLastRapidFire:i,isRapidFire:r,isSent:o,messageData:c,withCta:d,withMessageBubble:u}=this.props,{attachmentWidth:m,textContentWidth:p}=this.state,g=!!Object.values(ia).includes(null==e?void 0:e.name),y=at(t,m,p),h=y.isAttachmentSquared?"both":o?"right":"left",_=this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_chat_p0_enabled"),b=e?s.a.createElement(B.a,{onClick:this._handleOnClick,onLayout:this._handleAttachmentLayout},s.a.createElement(la.a,{card:{name:e.name,url:e.url,binding_values:e.binding_values,users:e.users},cardContext:{tweetUserId:c.sender_id},dmSentOrReceived:o?"sent":"received",withBorderShadow:_,withSquareBottomBorderRadius:h})):null,v=t?s.a.createElement(B.a,{onLayout:this._handleTextContentLayout,style:o?oa.sentMessageWrapper:oa.receivedMessageWrapper},s.a.createElement(ta,{excludeCardUrl:null==e?void 0:e.url,hasAssociatedAttachment:!0,isActive:n,isFailedDraft:a,isFirstRapidFire:l,isLastRapidFire:i,isRapidFire:r,isSent:o,messageData:c,rootStyle:y.isTextSquared?o?oa.textSentSquared:oa.textReceivedSquared:void 0,withCta:d,withMessageBubble:u})):null;return g?s.a.createElement($n,{attachmentContent:b,isVisible:y.compositeRendered,textContent:v}):s.a.createElement(na,{isActive:n,isFailedDraft:a,isFirstRapidFire:l,isLastRapidFire:i,isRapidFire:r,isSent:o,messageData:c,withCta:d,withMessageBubble:u})}}ra.defaultProps={hasUserText:!1},ra.contextType=m.a;const oa=f.a.create((e=>({attachmentReceivedSquared:{borderBottomRightRadius:e.borderRadii.none},attachmentSentSquared:{borderBottomLeftRadius:e.borderRadii.none},card:{marginBottom:e.spaces.space2},receivedMessageWrapper:{alignSelf:"flex-start"},sentMessageWrapper:{alignSelf:"flex-end"},received:{borderBottomLeftRadius:e.borderRadii.none},sent:{borderBottomRightRadius:e.borderRadii.none},textReceivedSquared:{borderTopRightRadius:e.borderRadii.none},textSentSquared:{borderTopLeftRadius:e.borderRadii.none}})));var ca=Yn(ra);const da=y.a.f7204380;class ua extends s.a.Component{constructor(...e){super(...e),this.state={attachmentWidth:void 0,textContentWidth:void 0},this._getSquareBottomStyles=e=>{const{isSent:t}=this.props;let n="left";return e?n="both":t&&(n="right"),ma[n]},this._handleAttachmentLayout=e=>{const{nativeEvent:{layout:{width:t}}}=e,{attachmentWidth:n}=this.state;n!==t&&this.setState({attachmentWidth:t})},this._handleTextContentLayout=e=>{const{nativeEvent:{layout:{width:t}}}=e,{textContentWidth:n}=this.state;n!==t&&this.setState({textContentWidth:t})}}render(){const{hasUserText:e,isActive:t,isFailedDraft:n,isFirstRapidFire:a,isLastRapidFire:l,isRapidFire:i,isSent:r,messageData:o,withCta:c,withMessageBubble:d}=this.props,{attachmentWidth:u,textContentWidth:m}=this.state;if(!o||!o.attachment||!o.attachment.fleet)return null;const{compositeRendered:p,isAttachmentSquared:g,isTextSquared:y}=at(e,u,m),h=[pa.tombstoneWrapper,r?pa.sentMessageWrapper:pa.receivedMessageWrapper,this._getSquareBottomStyles(g)],_=s.a.createElement(B.a,{onLayout:this._handleAttachmentLayout,style:h},s.a.createElement(F.b,{color:"gray700"},da)),b=e?s.a.createElement(B.a,{onLayout:this._handleTextContentLayout,style:[r?pa.sentMessageWrapper:pa.receivedMessageWrapper,!d&&pa.fleetReactionSpacing]},s.a.createElement(ta,{hasAssociatedAttachment:!0,isActive:t,isFailedDraft:n,isFirstRapidFire:a,isLastRapidFire:l,isRapidFire:i,isSent:r,messageData:o,rootStyle:y?r?pa.sentSquared:pa.receivedSquared:void 0,withCta:c,withMessageBubble:d})):null;return s.a.createElement($n,{attachmentContent:_,isVisible:p,textContent:b})}}const ma=f.a.create((e=>({both:{borderBottomRightRadius:e.borderRadii.none,borderBottomLeftRadius:e.borderRadii.none},left:{borderBottomLeftRadius:e.borderRadii.none},right:{borderBottomRightRadius:e.borderRadii.none}}))),pa=f.a.create((e=>({fleetReactionSpacing:{marginTop:e.spaces.space4},receivedMessageWrapper:{alignSelf:"flex-start"},receivedSquared:{borderTopRightRadius:e.borderRadii.none},sentMessageWrapper:{alignSelf:"flex-end"},sentSquared:{borderTopLeftRadius:e.borderRadii.none},tombstoneWrapper:{backgroundColor:e.colors.gray0,borderColor:e.colors.gray50,borderRadius:e.borderRadii.xLarge,boxSizing:"border-box",flexDirection:"row",borderWidth:e.borderWidths.small,paddingHorizontal:e.spaces.space16,paddingVertical:e.spaces.space12,overflow:"auto"}})));var ga=ua,ya=(n("849X"),n("prG5")),ha=n("RCZO"),_a=n("A91F");const ba=y.a.b327c12a,va=e=>{e.stopPropagation()};var ka=({media:e,mediaUrl:t})=>{const n=e.ext_alt_text||ba,a=e.media_url_https,{height:l,width:i}=e.original_info||{},r=Object(ha.b)(e).rgb,o=s.a.createElement(ya.a,{accessibilityLabel:n,aspectMode:_a.a.withinRange(9/16,10),backgroundColor:r,image:{url:a,width:i,height:l},shouldShowAltLabel:!!e.ext_alt_text});return t?s.a.createElement(E.a,{interactiveStyles:null,link:t,onPress:va},o):o},fa=n("Modb"),Fa=n("lklz"),Ta=n("XrEN"),Sa=n("ZvMt");var Ea=({media:e,messageId:t})=>{const n=e&&Ta.a.extractVideoProps(Fa.b.forDm(t),e);return n?s.a.createElement(fa.a,xt()({},n,{aspectRatio:Sa.a.getAspectRatio(e.video_info),withPostPlayback:!0})):null},Ca=Object(_e.a)().withAnalytics();class Ia extends s.a.PureComponent{constructor(e,t){super(e,t),this._handleLayout=e=>{const{nativeEvent:{layout:{width:t}}}=e;this.state.width!==t&&this.setState({width:t})},this._getElement=()=>{const{contentType:e,isSensitive:t}=this.props;return`${t?"sensitive":"untrusted"}_${e}_interstitial`},this._handleClick=()=>{const{analytics:e}=this.props;this.setState({hide:!1}),e.scribe({element:this._getElement(),action:"reveal"})},this.state={hide:!0,width:0}}componentDidMount(){const{analytics:e}=this.props;e.scribe({element:this._getElement(),action:"impression"})}render(){const{children:e,ctaText:t,description:n,withSquareBottomBorderRadius:a}=this.props,{hide:l,width:i}=this.state,r=i<f.a.theme.breakpoints.micro;return l?s.a.createElement(B.a,{focusable:!0,onLayout:this._handleLayout,style:[La.root,r?{flexDirection:"column"}:{flexDirection:"row",alignItems:"center"},a&&Ra[a]]},s.a.createElement(B.a,{style:La.description},s.a.createElement(F.b,null,n)),s.a.createElement(B.a,{style:[La.button,r?La.breakButtonWrapper:void 0]},s.a.createElement(Ge.a,{onClick:this._handleClick,size:"small",style:La.buttonElement,type:"brandText"},t))):e}}Ia.defaultProps={isSensitive:!1};const Ra=f.a.create((e=>({both:{borderBottomRightRadius:e.borderRadii.none,borderBottomLeftRadius:e.borderRadii.none},left:{borderBottomLeftRadius:e.borderRadii.none},right:{borderBottomRightRadius:e.borderRadii.none}}))),La=f.a.create((e=>({breakButtonWrapper:{marginTop:f.a.theme.spaces.space4,marginLeft:`calc(-1 * ${e.spaces.space12})`},button:{flexGrow:1,alignItems:"flex-start"},buttonElement:{paddingHorizontal:e.spaces.space12},description:{flexGrow:1,flexShrink:1},root:{backgroundColor:e.colors.gray0,borderColor:e.colors.gray50,borderRadius:e.borderRadii.xLarge,boxSizing:"border-box",borderWidth:e.borderWidths.small,maxWidth:"100%",paddingLeft:e.spaces.space16,paddingTop:e.spaces.space16,paddingBottom:e.spaces.space16,paddingRight:e.spaces.space4,overflow:"auto",display:"flex"}})));var Ka=Object(De.a)(Ca(Ia)),xa=n("CoGJ");const wa=s.a.createElement(xa.a,null),Ma=y.a.d9de7b58,Oa=y.a.f2879f4e,Aa=y.a.b518221e,Da=y.a.eeaa9f90,Pa=y.a.g2b43664,Ua=y.a.f277e94a;class Ha extends s.a.Component{constructor(...e){super(...e),this.state={attachmentWidth:void 0,textContentWidth:void 0},this._renderAttachment=()=>{const{entry:e,hasUserText:t,isFirstRapidFire:n,isRapidFire:a,isSent:l,isTrusted:i,messageData:o}=this.props,{attachmentWidth:c,textContentWidth:d}=this.state,{attachment:u}=o||{},m=e.is_draft,p=at(t,c,d),g=[Na.mediaAttachment,l&&Na.isSent,!l&&Na.received,l&&p.isAttachmentSquared&&Na.equalComponentDimensionsSent,!l&&p.isAttachmentSquared&&Na.equalComponentDimensionsReceived,a&&!n&&l&&Na.rapidFireSent,a&&!n&&!l&&Na.rapidFireReceived];let y,h,_=null;if(!m&&e.conversation_id&&(_=`/messages/${e.conversation_id}/media/${e.id}`),u)if(u.photo)y=u.photo,h=s.a.createElement(ka,{media:y,mediaUrl:_});else if(u.animated_gif)y=u.animated_gif,h=s.a.createElement(Ea,{media:y,messageId:e.id});else if(u.video){if(y=u.video,Object(r.p)(u,this.context.featureSwitches))throw new Error("DMMediaMessage should not be used to render voice messages");h=s.a.createElement(Ea,{media:y,messageId:e.id})}const b=p.isAttachmentSquared?"both":l?"right":"left",v=y&&h&&(l?h:this._getMediaContentWithGuard(y,i,h,b));return{attachmentContent:s.a.createElement(B.a,{onLayout:this._handleAttachmentLayout,style:g},v),media:y}},this._handleAttachmentLayout=e=>{const{nativeEvent:{layout:{width:t}}}=e,{attachmentWidth:n}=this.state;if(n!==t){const e={attachmentWidth:t};this.setState(e)}},this._handleTextContentLayout=e=>{const{nativeEvent:{layout:{width:t}}}=e,{textContentWidth:n}=this.state;if(n!==t){const e={textContentWidth:t};this.setState(e)}}}render(){const{entry:e,hasUserText:t,isActive:n,isFailedDraft:a,isFirstRapidFire:l,isLastRapidFire:i,isRapidFire:r,isSent:o,messageData:c,withCta:d,withMessageBubble:u}=this.props,{attachmentWidth:m,textContentWidth:p}=this.state,g=e.is_draft,y=at(t,m,p),{attachmentContent:h,media:_}=this._renderAttachment(),b=t?s.a.createElement(B.a,{onLayout:this._handleTextContentLayout,style:o?Na.sentMessageWrapper:Na.receivedMessageWrapper},s.a.createElement(ta,{hasAssociatedAttachment:!0,isActive:!!n,isFailedDraft:a,isFirstRapidFire:!!l,isLastRapidFire:!!i,isRapidFire:!!r,isSent:o,messageData:g?c:this._parseMessageData(c,_),rootStyle:y.isTextSquared?o?Na.sentSquared:Na.receivedSquared:void 0,withCta:d,withMessageBubble:u})):null;return s.a.createElement($n,{attachmentContent:h,isVisible:y.compositeRendered,textContent:b})}_getMediaContentWithGuard(e,t,n,a){const{displaySensitiveMedia:l,isDmNsfwMediaFilterEnabled:i}=this.props;if(e.possibly_sensitive&&this.context.featureSwitches.isTrue("dm_conversations_nsfw_media_filter_enabled")){if(i){const t="animated_gif"===e.type&&Pa||"video"===e.type&&Da||Aa;return s.a.createElement(Ka,{contentType:e.type,ctaText:t,description:Oa,isSensitive:!0,withSquareBottomBorderRadius:a},n)}}else if(!l&&e.possibly_sensitive)return s.a.createElement(Ka,{contentType:e.type,ctaText:Ua,description:wa,isSensitive:!0,withSquareBottomBorderRadius:a},n);return t?n:s.a.createElement(Ka,{contentType:e.type,ctaText:Ua,description:Ma,withSquareBottomBorderRadius:a},n)}_parseMessageData(e,t){var n;const a=null!=e&&null!=(n=e.entities)&&n.urls&&t?e.entities.urls.filter((e=>e.display_url!==t.display_url)):null;return e&&a?{...e,entities:{...e.entities,urls:a,media:t?[t]:[]}}:void 0}}Ha.contextType=m.a,Ha.defaultProps={hasUserText:!1};const Na=f.a.create((e=>({equalComponentDimensionsSent:{borderBottomLeftRadius:e.borderRadii.none},equalComponentDimensionsReceived:{borderBottomRightRadius:e.borderRadii.none},invisible:{opacity:0},isSent:{borderBottomRightRadius:e.borderRadii.none},mediaAttachment:{borderRadius:e.borderRadii.xLarge,WebkitMaskImage:"url(data:image/png;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICRAEAOw==)"},receivedMessageWrapper:{alignSelf:"flex-start"},sentMessageWrapper:{alignSelf:"flex-end"},rapidFireReceived:{borderTopLeftRadius:e.borderRadii.none},rapidFireSent:{borderTopRightRadius:e.borderRadii.none},received:{borderBottomLeftRadius:e.borderRadii.none},receivedSquared:{borderTopRightRadius:e.borderRadii.none},sentSquared:{borderTopLeftRadius:e.borderRadii.none},visible:{opacity:1}})));var ja=Ha,Ba=Object(_e.a)().propsFromActions((()=>({markSpamStatus:u.markSpamStatus})));const Wa=y.a.fd079470,qa=y.a.c7a92dca,Va=y.a.f277e94a,za=y.a.fb3ccb56;class Qa extends s.a.PureComponent{constructor(...e){super(...e),this._handlePress=e=>()=>{const{conversationId:t,dmId:n,markSpamStatus:a}=this.props;a({conversationId:t,dmId:n,markSpam:e})}}render(){const{children:e}=this.props;return s.a.createElement(Ka,{contentType:"dm",ctaText:Va,description:za},e,this._renderButtons())}_renderButtons(){return s.a.createElement(B.a,{style:Ya.buttons},s.a.createElement(Ge.a,{onPress:this._handlePress(!1),style:Ya.leftButton,type:"brandOutlined"},qa),s.a.createElement(Ge.a,{onPress:this._handlePress(!0),type:"brandOutlined"},Wa))}}var Ga=Ba(Qa);const Ya=f.a.create((e=>({buttons:{flexDirection:"row",paddingTop:e.spaces.space4},leftButton:{marginRight:e.spaces.space12}})));var Xa=n("U+bB");const $a=e=>{const t=e.images,n=t.svg||t.size_1x;if(n)return n.url},Ja=f.a.create((e=>({stickerItem:{height:`calc(3 * ${e.fontSizes.title2})`,width:`calc(3 * ${e.fontSizes.title2})`}})));var Za=({sticker:e})=>s.a.createElement(Xa.a,{accessibilityLabel:e.display_name,source:$a(e),style:Ja.stickerItem}),el=n("XOJV");const tl=(e,t)=>{var n;const a=null==(n=t.messageData)?void 0:n.attachment;if(a&&a.tweet)return a.tweet.status};var nl=Object(_e.a)().propsFromState((()=>({tweet:el.a.createHydratedTweetSelector(tl)}))).propsFromActions((()=>({popOutConversation:u.popOutConversation}))),al=n("b5s6");const ll=s.a.createElement(F.b,{link:"/settings/safety"});var sl=e=>s.a.createElement(y.a.I18NFormatMessage,{$i18n:"j3c7dd33"},s.a.cloneElement(ll,null,y.a.adcf07b6));const il=y.a.e4df0ad8,rl=y.a.f277e94a,ol=y.a.b5b91d58,cl=y.a.bb594d7c,dl=s.a.createElement(sl,null);const ul=f.a.create((e=>({received:{boxShadow:e.boxShadows.small},receivedAttachmentSquared:{borderTopRightRadius:e.borderRadii.none,boxShadow:e.boxShadows.small},sent:{boxShadow:e.boxShadows.small},sentAttachmentSquared:{borderTopRightRadius:e.borderRadii.none,boxShadow:e.boxShadows.small}}))),ml=f.a.create((e=>({attachment:{marginBottom:0},receivedMessageWrapper:{alignSelf:"flex-start"},sentMessageWrapper:{alignSelf:"flex-end"},received:{borderBottomLeftRadius:e.borderRadii.none,borderColor:e.colors.gray200},receivedAttachmentSquared:{borderBottomRightRadius:e.borderRadii.none},receivedSquared:{borderTopRightRadius:e.borderRadii.none},sent:{borderBottomRightRadius:e.borderRadii.none,borderColor:e.colors.primary},sentAttachmentSquared:{borderBottomLeftRadius:e.borderRadii.none},sentSquared:{borderTopLeftRadius:e.borderRadii.none}}))),pl={attachment:ml.attachment,receivedMessageWrapper:ml.receivedMessageWrapper,sentMessageWrapper:ml.sentMessageWrapper,received:ul.received,receivedAttachmentSquared:ul.receivedAttachmentSquared,receivedSquared:ml.receivedSquared,sent:ul.sent,sentAttachmentSquared:ul.sentAttachmentSquared,sentSquared:ml.sentSquared};var gl=nl((function(e){const{featureSwitches:t}=s.a.useContext(m.a),{conversationId:n,displaySensitiveMedia:a,hasUserText:l=!1,isActive:i=!1,isDmNsfwMediaFilterEnabled:r,isFailedDraft:o,isFirstRapidFire:c=!1,isLastRapidFire:d=!1,isRapidFire:u=!1,isSent:p,isTrusted:g,isVdlEnabled:y,messageData:h,popOutConversation:_,tweet:b,withCta:v,withMessageBubble:k}=e,[f,F]=s.a.useState(void 0),[T,S]=s.a.useState(void 0),E=s.a.useMemo((()=>function(){n&&_(n)}),[n,_]),C=s.a.useMemo((()=>function(e){const{nativeEvent:{layout:{width:t}}}=e;f!==t&&F(t)}),[f]),I=s.a.useMemo((()=>function(e){const{nativeEvent:{layout:{width:t}}}=e;T!==t&&S(t)}),[T]);if(!h||!h.attachment||!h.attachment.tweet)return null;const R=h.attachment.tweet,L=p?"sent":"received",K=at(l,f,T),x=y?pl:ml,w=s.a.createElement(al.a,{onPress:E,style:[x[L],l&&x.attachment,K.isAttachmentSquared?p?x.sentAttachmentSquared:x.receivedAttachmentSquared:void 0],tweetId:R.status}),M=K.isAttachmentSquared?"both":p?"right":"left",O=(()=>{if(!b)return null;if(p)return w;if(b.possibly_sensitive&&t.isTrue("dm_conversations_nsfw_media_filter_enabled")){if(r||void 0===r)return s.a.createElement(Ka,{contentType:"photo",ctaText:cl,description:ol,withSquareBottomBorderRadius:M},w)}else if(!a&&b.possibly_sensitive)return s.a.createElement(Ka,{contentType:"photo",ctaText:rl,description:dl,withSquareBottomBorderRadius:M},w);return g?w:s.a.createElement(Ka,{contentType:"tweet",ctaText:rl,description:il,withSquareBottomBorderRadius:M},w)})(),A=s.a.createElement(B.a,{onLayout:C,style:x.attachment},O),D=l?s.a.createElement(B.a,{onLayout:I,style:p?x.sentMessageWrapper:x.receivedMessageWrapper},s.a.createElement(ta,{hasAssociatedAttachment:!0,isActive:i,isFailedDraft:o,isFirstRapidFire:c,isLastRapidFire:d,isRapidFire:u,isSent:p,messageData:h,rootStyle:K.isTextSquared?p?x.sentSquared:x.receivedSquared:void 0,tweetId:R.status,withCta:v,withMediaLinks:!0,withMessageBubble:k})):null;return s.a.createElement($n,{attachmentContent:A,isVisible:K.compositeRendered,textContent:D})})),yl=n("htvZ"),hl=n("MH+I"),_l=n("5Ixf"),bl=n("AtEG");function vl(e){var t,n;const a=s.a.useContext(yl.a),{isLowQuality:l,isSent:i,isTrusted:r}=e;if(null==(t=e.media)||!t.video_info)return null;const[o,c]=a.activeVoiceMessage,[d]=a.playerApi,[u]=a.playerState,{scribeAction:m}=a,[p]=o,g=e.messageId===p;if(!m)return null;const y=fl(u),h=(null==(n=e.media)?void 0:n.video_info.duration_millis)||0,_={durationMs:h,isActive:g,isSent:i,playerApi:null,playerState:null,onImpression:()=>m.impression({isLowQuality:l,isTrusted:r}),onPlayRequest:()=>c([e.messageId,e.media]),onPlay:()=>m.play({data:{duration_ms:h}}),onPause:()=>m.pause()};return g&&y&&y.contentId===e.media.id_str&&(_.playerApi=d,_.playerState=u,null!=y&&y.durationMs&&(_.durationMs=null==y?void 0:y.durationMs)),s.a.createElement(kl,_)}function kl(e){const{isActive:t,isSent:n,playerApi:a,playerState:l}=e,i=null==l?void 0:l.isPlaying,r=fl(l),o=(null==r?void 0:r.currentTimeMs)||0,c=(null==r?void 0:r.durationMs)||e.durationMs,d=Math.max(t?c-o:c,0);s.a.useLayoutEffect((()=>{e.onImpression()}),[]),s.a.useEffect((()=>{a&&0===o&&(a.play(),e.onPlay())}),[a]);const u=f.a.isDarkMode()||n,m={color:u?"whiteOnColor":"text"},p=[Sl.voiceMessage,El({isSent:n,squared:t}),n?Sl.voiceMessageSent:Sl.voiceMessageReceived,Z(f.a.theme.scale).voiceMessage({isVoiceMessageActive:t,isSent:n})],g=i?_l.a:bl.a;return s.a.createElement(B.a,{style:[Sl.container,Z(f.a.theme.scale).voiceMessageContainer({isVoiceMessageActive:t,isSent:n})]},s.a.createElement(B.a,{style:p},s.a.createElement(B.a,{style:Sl.startSpacer}),s.a.createElement(Ge.a,{accessibilityLabel:i?Tl:Fl,icon:s.a.createElement(g,{style:u?Sl.iconColorDark:Sl.iconColorDefault}),onPress:()=>{a?i?(a.pause(),e.onPause()):(a.play(),e.onPlay()):e.onPlayRequest()},type:"onMediaText"}),s.a.createElement(B.a,{style:Sl.durationSpacer}),s.a.createElement(B.a,{style:n?Sl.durationOpacity:void 0},s.a.createElement(hl.a,xt()({countdown:!0,timeMs:d},m,{color:"gray700",size:"subtext2",style:n?Sl.durationDark:void 0,weight:"bold",withCountdownSymbol:t}))),s.a.createElement(B.a,{style:Sl.endSpacer})))}const fl=e=>e?e.tracks[e.currentTrackId]:null,Fl=y.a.c94b7d8a,Tl=y.a.eb6f9582,Sl=f.a.create((e=>({displayNone:{display:"none"},container:{flexDirection:"row",alignSelf:"flex-end",alignItems:"center",justifyContent:"center"},voiceMessage:{alignSelf:"flex-end",flexDirection:$.a.getConstants().isRTL?"row-reverse":"row",alignItems:"center",justifyContent:"center"},voiceMessageSent:{backgroundColor:e.colors.primary},voiceMessageReceived:{backgroundColor:e.colors.dmReceivedBubbleBackground},durationSpacer:{width:e.spaces.space4},durationOpacity:{opacity:.75},durationDark:{color:e.colors.whiteOnColor},iconColorDark:{color:e.colors.whiteOnColor},iconColorDefault:{color:e.colors.alwaysBaseGray1100},startSpacer:{width:e.spaces.space4},endSpacer:{width:e.spaces.space16}})));function El({isSent:e,squared:t}){return[Cl.base,e?Cl.sent:Cl.received,t?e?Cl.sentSquared:Cl.receivedSquared:void 0]}const Cl=f.a.create((e=>({base:{borderRadius:e.borderRadii.xLarge,WebkitMaskImage:"url(data:image/png;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICRAEAOw==)"},sent:{borderBottomRightRadius:e.borderRadii.none},sentSquared:{borderTopRightRadius:e.borderRadii.none},received:{borderBottomLeftRadius:e.borderRadii.none},receivedSquared:{borderTopLeftRadius:e.borderRadii.none}})));class Il extends s.a.Component{render(){const{entry:e,isSent:t,onCtaClick:n,onCtaImpression:a}=this.props,{message_data:l}=e,i=l&&l.attachment?l.attachment:{},o=e.marked_as_spam,c=tt(e),d=!!l&&!!l.ctas,u=et(e),m=(e=>{const{message_data:t}=e;if(!t)return!1;if(tt(e)&&!nt(e))return!1;if(!t.text)return!1;const n=Object(Je.parse)(t.text);if(!n||0===n.length)return!1;const a=n.sort(((e,t)=>t.indices[1]-e.indices[1])).reduce(((e,t)=>`${e.slice(0,t.indices[0])}${e.slice(t.indices[1])}`),t.text).trim();return n.length<=10&&0===a.length})(e),p=!(u&&m),g=nt(e);let y;y=i.sticker?s.a.createElement(Za,{sticker:i.sticker}):this._renderDMMessage(u,d,p);const h=o?s.a.createElement(Ga,{conversationId:e.conversation_id,dmId:e.id},y):y,_=c&&!g&&!Object(r.p)(null==l?void 0:l.attachment,this.context.featureSwitches),b=[t?Rl.isSent:Rl.isReceived,d&&Rl.withCta,_?Rl.mediaRoot:Rl.flexShrink,this.props.style];return s.a.createElement(B.a,{style:b},h,l&&l.ctas?s.a.createElement(Vn,{callToActions:l.ctas,isSent:t,onCtaClick:n,onImpression:a,withSticker:!!i.sticker||m,withUserText:u}):null)}_renderDMMessage(e,t,n){const{displaySensitiveMedia:a,entry:l,isActive:i,isDmNsfwMediaFilterEnabled:o,isFirstRapidFire:c,isLastRapidFire:d,isLowQuality:u,isRapidFire:m,isSent:p,isTrusted:g}=this.props,{error:y,message_data:h}=l,_=h&&{...h,entities:h&&h.entities||void 0,error:y},b=null==_?void 0:_.attachment,v={isActive:i,isFailedDraft:!!y,isFirstRapidFire:c,isLastRapidFire:d,isRapidFire:m,isSent:p,withCta:t,withMessageBubble:n},k=this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_chat_p0_enabled");if(_&&b){if(b.tweet)return s.a.createElement(gl,xt()({conversationId:l.conversation_id,displaySensitiveMedia:a,hasUserText:e,isDmNsfwMediaFilterEnabled:o,isTrusted:g,isVdlEnabled:k,messageData:_},v));if(b.photo||b.animated_gif||b.video)return b.video&&Object(r.p)(b,this.context.featureSwitches)?s.a.createElement(vl,{isLowQuality:u,isSent:!!p,isTrusted:g,media:b.video,messageId:l.id}):s.a.createElement(ja,xt()({displaySensitiveMedia:a,entry:l,hasUserText:e,isDmNsfwMediaFilterEnabled:o,isTrusted:g,messageData:_},v));if(b.card)return s.a.createElement(ca,xt()({cardUrl:b.card,conversationId:l.conversation_id,hasUserText:e,messageData:_},v));if(b.fleet)return s.a.createElement(ga,xt()({entry:l,hasUserText:e,messageData:_},v))}return s.a.createElement(na,xt()({},v,{messageData:_}))}}Il.contextType=m.a;const Rl=f.a.create((e=>({flexShrink:{flexShrink:1},mediaRoot:{flex:1},isSent:{alignItems:"flex-end"},isReceived:{alignItems:"flex-start"},withCta:{alignItems:"stretch"}})));var Ll=Il;const Kl=f.a.create((e=>({avatar:{borderRadius:e.borderRadii.infinite}})));var xl=({showAvatar:e,size:t="xLarge",user:n})=>e?s.a.createElement(C.default,{accessibilityLabel:n.name,link:{pathname:`/${n.screen_name}`},size:t,uri:n.profile_image_url_https}):s.a.createElement(B.a,{style:[Kl.avatar,C.default.getSizeStyle(t)]}),wl=n("B3eJ");function Ml({color:e,isActive:t,size:n,...a}){const l=s.a.useContext(yl.a),[i,r]=s.a.useState(.5),[o]=l.playerState;s.a.useEffect((()=>{t&&o&&o.isPlaying&&r(Math.random())}),[t,o]);const c=t&&(null==o?void 0:o.isPlaying),d=n+2*Ol,u=[Al.container,a.style,{width:n,height:n}];return s.a.createElement(B.a,{style:u},s.a.createElement(B.a,{style:[Al.container,Al.transitionOpacity,c?Al.show:Al.hide]},J.a.reducedMotionEnabled?null:s.a.createElement(wl.a,{audioLevel:i,color:e,paused:!c,size:n})),s.a.createElement(B.a,{style:[Al.border,{width:d,height:d},Al.transitionOpacity,t?Al.show:Al.hide]}))}const Ol=parseInt(f.a.theme.spaces.space2,10),Al=f.a.create((e=>({container:{alignItems:"center",justifyContent:"center",pointerEvents:"none"},border:{position:"absolute",top:-1*Ol,left:-1*Ol,backgroundColor:e.colors.navigationBackground,borderRadius:e.borderRadii.infinite},transitionOpacity:{transition:"opacity 0.2s 0s ease-in-out"},hide:{opacity:0},show:{opacity:1}})));var Dl=n("uArA"),Pl="messageEntry";const Ul={element:"cta_dm"},Hl={viewType:"message"},Nl={isGroupDM:!1,isRapidFire:!1,isFirstRapidFire:!1,isLastRapidFire:!1};class jl extends s.a.Component{constructor(...e){super(...e),this.state={shouldFadeHighlight:!1},this._handleClick=Object(Dl.a)((()=>{const{entry:{error:e,id:t,is_draft:n},isActive:a,setActiveEntry:l}=this.props;n||e||(l(a?null:t),this._handleScribeMessageEntryClick())})),this._handleScribeMessageEntryClick=()=>{const{isActive:e}=this.props;if(!Ye.a.isEnabled&&!e){const{entry:e}=this.props,t={component:"message",element:Object(r.c)(e),action:"click"};this._scribeAction(t)}},this._handleCtaImpression=()=>{this._scribeAction({...Ul,action:"show"})},this._handleCtaClick=()=>{this._scribeAction({...Ul,action:"click"})},this._isDMVoiceMessage=()=>{var e;return Object(r.p)(null==(e=this.props.entry.message_data)?void 0:e.attachment,this.context.featureSwitches)}}componentDidMount(){this.props.isHighlightedMessageSearchEntry&&this.setState({shouldFadeHighlight:!0})}shouldComponentUpdate(e,t){return!Object(j.a)(this.props,e)||!Object(j.a)(this.state.shouldFadeHighlight,t.shouldFadeHighlight)}render(){const{isActive:e,isGroupDM:t,isHighlightedMessageSearchEntry:n,isSent:a,user:l}=this.props,i=this._getRapidFireProps(),r=!i.isRapidFire||i.isLastRapidFire,o=this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_chat_p0_enabled"),c=[Wl.root.base,o&&Wl.root.vdlPadding,r&&Wl.root.contentSpacing,r&&o&&Wl.root.vdlContentSpacing,n&&Wl.root.highlightableEntry,n&&this.state.shouldFadeHighlight&&Wl.root.remove],d=this._isDMVoiceMessage(),u=o?t&&!a:!a||d;if(!l)return null;const m=!Ye.a.isEnabled||a;return s.a.createElement(ie.a,{behavioralEventContext:Hl},s.a.createElement(B.a,{style:c},s.a.createElement(E.a,{accessibilityExpanded:!(!m||!e),focusable:!0,interactiveStyles:null,onPress:m?this._handleClick:void 0,style:a?Wl.root.sent:Wl.root.received,testID:Pl},(({isFocused:e,isHovered:t})=>this._renderMessage({isFocused:e,isHovered:t,rapidFireProps:i,withVDLRefresh:o,withUserAvatar:u}))),this._renderFooter(i,u)))}_renderMessage({isFocused:e,isHovered:t,rapidFireProps:n,withUserAvatar:a,withVDLRefresh:l}){const{displaySensitiveMedia:i,entry:r,inboxType:o,isActive:c,isDmNsfwMediaFilterEnabled:d,isGroupDM:u,isLowQuality:m,isReadOnly:p,isSent:g,isTrusted:y,isVoiceMessageActive:h,isWide:_,participants:b,perspective:v,scribeVoiceMessage:k,setShouldFreezeUpdates:F}=this.props,{isFirstRapidFire:T,isLastRapidFire:S,isRapidFire:E}=n,C=[g?Wl.messageContainer.sent:Wl.messageContainer.received,_?Wl.messageContainer.wide:Wl.messageContainer.narrow,g&&_&&Wl.messageContainer.sentWide,!g&&_&&Wl.messageContainer.receivedWide],I=y&&!p,R=this._isDMVoiceMessage(),L=(null==b?void 0:b.length)||0;return s.a.createElement(B.a,{style:C},r.error?null:s.a.createElement(It,{containerIsActive:c,containerIsFocused:e,containerIsHovered:t,entry:r,featureSwitches:this.context.featureSwitches,inboxType:o,isDraft:!!r.is_draft,isGroupDM:u,isSent:g,onReportMessage:R&&k?()=>k.report({isLowQuality:m,isTrusted:y}):void 0,participantsCount:L,perspective:v,setShouldFreezeUpdates:F,shouldShowReactionButton:I,style:R&&Z(f.a.theme.scale).actionsContainer({isSent:g,isVoiceMessageActive:h}),withVDLRefresh:l}),s.a.createElement(Ll,{displaySensitiveMedia:i,entry:r,isActive:c,isDmNsfwMediaFilterEnabled:d,isFirstRapidFire:T,isLastRapidFire:S,isLowQuality:m,isRapidFire:E,isSent:g,isTrusted:y,key:r.id,onCtaClick:this._handleClick,onCtaImpression:this._handleCtaImpression,style:R&&Z(f.a.theme.scale).messageContainer({isSent:g,isVoiceMessageActive:h})}),this._possiblyRenderUserAvatar(n,a))}_renderFooter({isLastRapidFire:e,isRapidFire:t},n){var a,l;const{entry:i,isActive:r,isGroupDM:o,isSent:c,participants:d,user:u}=this.props;return u?s.a.createElement(Hn,{conversationId:i.conversation_id,entryId:i.id,entryText:null==(a=i.message_data)?void 0:a.text,entryTime:i.time,isActive:r,isDraft:!!i.is_draft,isError:!!i.error,isGroupDM:o,isLastRapidFire:e,isRapidFire:t,isSent:c,localMediaId:null==(l=i.message_data)?void 0:l.localMediaId,onPress:this._handleClick,participants:d,user:u,withUserAvatar:n}):null}_possiblyRenderUserAvatar({isLastRapidFire:e,isRapidFire:t},n){const{isSent:a,isVoiceMessageActive:l,user:i}=this.props,r=this._isDMVoiceMessage();if(!i||!n&&!l)return null;const{DMUserAvatarSizePx:o,DMUserAvatarSizeType:c}=X(f.a.theme.scale),d={showAvatar:!!r||(!t||!!e),size:c,user:i},u=[Wl.userAvatar.base,a?Wl.userAvatar.sent:Wl.userAvatar.received,r&&Z(f.a.theme.scale).userAvatar({isVoiceMessageActive:l,isSent:a})];return s.a.createElement(B.a,{style:Wl.userAvatar.container},a?null:s.a.createElement(B.a,{style:Wl.userAvatar.spacer}),r?s.a.createElement(Ml,{color:a?f.a.theme.colors.primary:f.a.theme.colors.text,isActive:!!l,size:o,style:u}):null,s.a.createElement(B.a,{style:u},s.a.createElement(xl,d)))}_scribeAction(e){const{analytics:t}=this.props;t.scribe({...e})}_getRapidFireProps(){return{isFirstRapidFire:this.props.isFirstRapidFire,isLastRapidFire:this.props.isLastRapidFire,isRapidFire:this.props.isRapidFire}}}jl.contextType=m.a,jl.defaultProps=Nl;var Bl=Object(De.a)(ye(function(e){function t(t){const{entry:n}=t,a=s.a.useContext(yl.a),[l]=a.activeVoiceMessage,{scribeAction:i}=a,[r]=l,o=r===n.id,c={...t,isVoiceMessageActive:o,scribeVoiceMessage:i};return s.a.createElement(e,c)}return t.defaultProps=Nl,t}(jl)));const Wl={root:f.a.create((e=>({base:{flexDirection:"column",paddingBottom:e.spaces.space2},vdlPadding:{paddingBottom:"0px"},received:{cursor:"default",alignItems:"flex-start"},sent:{cursor:"pointer",alignItems:"flex-end"},contentSpacing:{paddingBottom:e.spaces.space20},vdlContentSpacing:{paddingBottom:e.spaces.space24},highlightableEntry:{marginHorizontal:`calc(-${e.spaces.space16})`,paddingHorizontal:e.spaces.space16,transition:"background-color 3s ease-in",backgroundColor:e.colors.unreadCellBackground},remove:{backgroundColor:e.colors.cellBackground}}))),messageContainer:f.a.create((e=>({sent:{flexDirection:"row",justifyContent:"flex-end"},received:{flexDirection:"row-reverse",justifyContent:"flex-end"},narrow:{width:"100%"},wide:{width:Ot},receivedWide:{paddingRight:e.spaces.space12},sentWide:{paddingLeft:e.spaces.space12}}))),userAvatar:f.a.create((e=>({container:{flexDirection:"row",alignItems:"flex-end"},base:{position:"absolute"},sent:{right:0},received:{left:0},spacer:{width:X(e.scale).DMUserAvatarSpacerPx}})))};var ql=n("H4nC");const Vl=e=>{const{conversation:t,entry:n,inboxType:a,isActive:l,isFirstRapidFire:i,isHighlightedMessageSearchEntry:r,isLastRapidFire:c,isRapidFire:d,isWide:m,perspective:p,scribeNamespace:g,setActiveEntry:y,setShouldFreezeUpdates:h}=e;if(Object(o.b)(n)||Object(o.e)(n)){const{conversation_id:e,low_quality:o,participants:_,read_only:b,trusted:v,type:k}=t,{message_data:{sender_id:f}={}}=n,F=void 0===e||v;return s.a.createElement(Bl,{entry:n,inboxType:a,isActive:l,isFirstRapidFire:i,isGroupDM:k===u.CONVERSATION_TYPE.GROUP,isHighlightedMessageSearchEntry:r,isLastRapidFire:c,isLowQuality:!!o,isRapidFire:d,isReadOnly:b,isSent:f===p,isTrusted:!!F,isWide:m,participants:_,perspective:p,scribeNamespace:g,senderId:f,setActiveEntry:y,setShouldFreezeUpdates:h})}return Object(o.a)(n)?s.a.createElement(G,{conversation:t,entry:n,entryType:n.type,perspective:p}):Object(o.d)(n)?s.a.createElement(ql.a,{entry:n,isCompact:!1}):null};var zl=n("0JOx");const Ql=Object(re.createSelector)(((e,t)=>{const n=Object(Ce.o)(e,t.conversationId),a=n&&Object(d.a)(n);return a&&Object(u.selectEntry)(e,a)}),(e=>({lastEntry:e})));var Gl=Object(oe.c)(Ql),Yl=n("uDfI");const Xl=Object(re.createSelector)(((e,t)=>ue.e.selectMany(e,t.userIds||[])),(e=>({users:e})));var $l=Object(Yl.b)(Xl),Jl=n("VPAj"),Zl=n("Enqy"),es=n("+/1j");const ts="overflow",ns=(e,t)=>e.id_str<t.id_str?-1:e.id_str>t.id_str?1:0,as={stiffness:1e3,damping:70},ls=140,ss={scale:Object(Zl.spring)(1,as),translateY:Object(Zl.spring)(0,as)},is=(e,t)=>({key:e.id_str,data:e,style:ss}),rs=Object(Jl.a)({translateY:ls,scale:0}),os=Object(Jl.a)({scale:Object(Zl.spring)(1,as),translateY:Object(Zl.spring)(ls,as)}),cs=[{key:"bubble",style:{scale:Object(Zl.spring)(1,as),translateY:Object(Zl.spring)(0,as)}}],ds=Object(Jl.a)({translateY:ls,scale:0}),us=Object(Jl.a)({scale:Object(Zl.spring)(1,as),translateY:Object(Zl.spring)(ls,as)}),ms=e=>[isFinite(e.scale)&&{scale:e.scale.toFixed(3)},isFinite(e.translateY)&&{translateY:`${Math.round(e.translateY)}%`}].filter(Boolean);class ps extends s.a.Component{constructor(...e){super(...e),this.state={isHidden:!0},this._afterLeave=()=>{const{users:e}=this.props;this.setState((t=>({isHidden:0===e.length})))}}componentDidUpdate(e,t){this.state.isHidden&&this.props.users&&this.props.users.length&&this.setState({isHidden:!1})}shouldComponentUpdate(e,t){return!Object(j.a)(this.props,e)||!Object(j.a)(this.state,t)}render(){const{isHidden:e}=this.state,{users:t}=this.props,n=t.sort(ns).slice(0,5).map(is);return t.length>5&&n.push({key:ts,style:ss}),s.a.createElement(B.a,{style:[gs.root,e&&gs.hidden]},s.a.createElement(B.a,{style:gs.avatarRow},s.a.createElement(Zl.TransitionMotion,{styles:n,willEnter:rs,willLeave:os},(e=>s.a.createElement(s.a.Fragment,null,e.map(((e,n)=>{if(e.style.scale<=.05)return null;const a=ms(e.style);return e.key===ts?s.a.createElement(B.a,{key:e.key,style:[gs.avatar,gs.avatarSpacer,gs.overflowAvatar,{transform:a}]},s.a.createElement(es.a,{style:gs.overflowAvatarText},"+",t.length-5)):s.a.createElement(B.a,{key:e.key,style:[gs.avatar,{transform:a}]},s.a.createElement(C.default,{accessibilityLabel:e.data&&e.data.name,size:"xLarge",uri:e.data&&e.data.profile_image_url_https}))})))))),s.a.createElement(Zl.TransitionMotion,{didLeave:this._afterLeave,styles:t.length>0?cs:[],willEnter:ds,willLeave:us},(e=>s.a.createElement(s.a.Fragment,null,e.map((e=>s.a.createElement(B.a,{key:e.key,style:[gs.messageBubble,{transform:ms(e.style)}]},s.a.createElement(B.a,{style:gs.dot}),s.a.createElement(B.a,{style:[gs.dot,gs.dot1]}),s.a.createElement(B.a,{style:[gs.dot,gs.dot2]}))))))))}}const gs=f.a.create((e=>({root:{flexDirection:"row",paddingBottom:e.spaces.space20,paddingRight:e.spaces.space12,width:"calc(100% * 7/8)",position:"relative",transitionProperty:"height, padding-bottom",transitionDuration:"0.2s",overflow:"hidden"},hidden:{paddingBottom:0,paddingRight:0,height:0,width:0},avatarRow:{display:"inline-flex",alignItems:"flex-start",flexDirection:"row"},avatar:{marginEnd:e.spaces.space12,transformOrigin:"50% 100%"},avatarSpacer:{height:e.spaces.space40,width:e.spaces.space40},overflowAvatar:{borderRadius:e.borderRadii.infinite,backgroundColor:e.colors.primary,alignItems:"center",justifyContent:"center"},overflowAvatarText:{color:"white"},messageBubble:{alignItems:"center",borderRadius:e.borderRadii.infinite,maxWidth:"100%",paddingVertical:e.spaces.space12,paddingHorizontal:e.spaces.space16,backgroundColor:e.colors.gray50,borderBottomLeftRadius:e.borderRadii.none,borderColor:e.colors.gray200,flexDirection:"row",height:e.spaces.space40,overflow:"hidden",transformOrigin:"0% 100%"},dot:{display:"flex-inline",position:"relative",width:e.spaces.space12,height:e.spaces.space12,overflow:"hidden",borderRadius:e.borderRadii.infinite,backgroundColor:e.colors.gray700,marginEnd:e.spaces.space4,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationKeyframes:[{"15%":{transform:[{scale:1.4}],backgroundColor:e.colors.primary},"30%":{transform:[{scale:1}]}}]},dot1:{animationDelay:"0.1s"},dot2:{animationDelay:"0.2s"}})));var ys=$l(ps),hs=n("tn7R");class _s extends s.a.PureComponent{constructor(...e){super(...e),this._timers={},this.state={forceHide:!1,userIds:[]},this._handleLivePipelineUpdate=e=>{const{user_id:t}=e.dm_typing;t!==this.context.loggedInUserId&&(this._timers[t]&&clearTimeout(this._timers[t]),this._timers[t]=setTimeout((()=>this._removeAvatar(t)),4e3),this.setState((e=>({forceHide:!1,userIds:[...e.userIds.filter((e=>e!==t)),t]}))))},this._removeAvatar=(e,t=!1)=>{this.setState((n=>{const a=n.userIds.filter((t=>t!==e));return{forceHide:t&&0===a.length,userIds:a}}))}}componentDidMount(){this._initializeLivePipeline()}componentDidUpdate(e,t){if(this.props.lastEntry){const{lastEntry:t={}}=e||{},{lastEntry:n}=this.props;t&&t.id!==n.id&&n.message_data&&this._removeAvatar(n.message_data.sender_id,!0)}e.conversationId!==this.props.conversationId&&(this._teardownLivePipeline(),this._initializeLivePipeline())}componentWillUnmount(){this._teardownLivePipeline()}render(){const{forceHide:e,userIds:t}=this.state;return!e&&s.a.createElement(ys,{userIds:t})}_teardownLivePipeline(){Object(hs.a)(this._timers).forEach((e=>clearTimeout(e))),this._livePipelineSubscription&&this._livePipelineSubscription.teardown()}_initializeLivePipeline(){const{conversationId:e}=this.props;Object(zl.h)().then((({LivePipeline:t})=>{t.isSupportedAndReady(this.context.featureSwitches)&&this.context.featureSwitches.isTrue("livepipeline_dm_features_enabled")&&!this._livePipelineSubscription&&(this._livePipelineSubscription=t.get().subscribeTopic(`/dm_typing/${e}`,this._handleLivePipelineUpdate))}))}}_s.contextType=m.a;var bs=Gl(_s),vs=n("3AAD"),ks=n("iBK2"),fs=n("RJrc"),Fs=n("yw4N"),Ts=n("mw9i");const Ss=y.a.i859a9d4,Es=y.a.i8ecae5c,Cs=e=>e.entry.id,Is=e=>e.entry.type===N.b.MESSAGE;class Rs extends s.a.Component{constructor(e,t){super(e,t),this._isVDLEnabled=this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_chat_p0_enabled"),this._handleItemsRendered=e=>{var t,n;const a=e.positions.find((e=>"conversationProfileInfoHeader"===e.id)),l=void 0!==a&&e.viewport.getTop()<a.rectangle.getHeight();null==(t=(n=this.props).onConversationProfileVisibilityChange)||t.call(n,l)},this._handleScrollEnd=()=>{this.setState({didRenderMessageSearchEntry:!0})},this._renderItem=e=>{const{conversation:t}=this.props,n=t.conversation_id;switch(e.type){case N.b.TYPING_INDICATOR:return n?s.a.createElement(bs,{conversationId:n}):null;case N.b.READ_ONLY_INDICATOR:return n?s.a.createElement(B.a,{style:Ls.readOnly},s.a.createElement(F.b,{align:"center",color:"gray700",size:"subtext2"},Es," ",s.a.createElement(F.b,{link:"https://support.twitter.com/articles/14606#faq"},Ss))):null;case N.b.CONVERSATION_PROFILE_INFO_HEADER:return s.a.createElement(A,{conversation:t,withVDLrefresh:this._isVDLEnabled});default:return this._renderDMEntry(e)}},this._setActiveEntry=e=>{this.setState({activeEntryId:e})},this._setShouldFreezeUpdates=e=>{this.setState({shouldFreezeUpdates:e})},this.state={activeEntryId:null,didRenderMessageSearchEntry:!1,shouldFreezeUpdates:!1}}shouldComponentUpdate(e,t){return!1===t.shouldFreezeUpdates}render(){const{conversation:e,drawerHeader:t,isWide:n,messageSearchEntryId:l,onForwardRequest:o,onHistoryRequest:m,shouldScrollToCenter:p,style:g}=this.props,{activeEntryId:y}=this.state,h=(({activeEntryId:e,canInjectConversationProfileInfoHeader:t,conversation:n,footer:a,messageSearchEntryId:l,readOnlyEntry:s})=>{const o=n&&n.entries||[],m=null==n?void 0:n.max_search_entry_id,p=null==n?void 0:n.min_search_entry_id,g=(null==n?void 0:n.status)===u.PAGINATION_STATUS.AT_END,y=m?Object(r.d)(o,m):o.length-1,h=p?Object(r.d)(o,p):-1,_=l&&-1===h?Object(r.d)(o,l):h,b=o.slice(g?0:_,y+1),v=(l?b:o).reduce(((a,s,r)=>{t&&0===r&&a.push(i.b);const u=Object(d.a)(a),m=r===o.length-1;if(a.push({isRapidFire:!1,isFirstRapidFire:!1,isLastRapidFire:!1,entry:s,isActive:l===s.id||e===s.id,isTrusted:!(null==n||!n.trusted),messageSearchEntryId:l}),u){const e=c(u.entry,s),t=a[a.length-2];e?(a[a.length-1].isRapidFire=!0,t.isRapidFire||(t.isFirstRapidFire=!0,t.isRapidFire=!0),m&&(a[a.length-1].isLastRapidFire=!0)):t.isRapidFire&&(t.isLastRapidFire=!0)}return a}),[]);return a&&!l&&v.push(a),n.read_only&&s&&!l&&v.push(s),v})({conversation:e,footer:i.d,readOnlyEntry:i.c,canInjectConversationProfileInfoHeader:e.status===N.c.AT_END&&e.type===N.a.ONE_TO_ONE,activeEntryId:y,messageSearchEntryId:l}),_=e.conversation_id,b=e=>{for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&Is(n))return n}return(e=>e[e.length-1])(e)},v=l?`dm-activity-${_}-${l}`:`dm-activity-${_}`,k=this.state.didRenderMessageSearchEntry&&(null==e?void 0:e.min_search_entry_id)&&e.status!==N.c.AT_END;return s.a.createElement(D.a.Consumer,null,(({isDrawer:i})=>{const r=i?P.b.drawerHeaderRadius:Ls.scrollSpace;return s.a.createElement(B.a,{style:[Ls.scrollContainer,r]},s.a.createElement(Fs.a,{style:[Ls.scrollContainer,n&&Ls.conversationsPadding,r,g]},t||null,e.status&&e.status!==N.c.AT_END&&!l||k?s.a.createElement(fs.a,null):null,s.a.createElement(Ts.a,{style:[Ls.content,Ls.alignTop],withGutter:!0},s.a.createElement(ks.b,{anchoring:vs.a,assumedItemHeight:50,cacheKey:v,canBeAnchorFunction:Is,centerInitialAnchor:l&&p,hasNewContentAtBottom:!0,identityFunction:Cs,initialAnchor:h.length>0?a.a(l&&p?l:Cs(b(h))):void 0,items:h,nearStartProximityRatio:2,onAtEnd:l&&this.state.didRenderMessageSearchEntry?o:void 0,onAtStart:l&&this.state.didRenderMessageSearchEntry?m:void 0,onItemsRendered:this._handleItemsRendered,onNearStart:l?void 0:m,onScrollEnd:l&&!this.state.didRenderMessageSearchEntry?this._handleScrollEnd:void 0,renderer:this._renderItem,withoutHeadroom:this._isVDLEnabled})),this.state.didRenderMessageSearchEntry&&l&&e.max_search_entry_id&&e.search_status!==N.c.AT_END?s.a.createElement(fs.a,null):null))}))}_renderDMEntry({entry:e,isActive:t,isFirstRapidFire:n,isLastRapidFire:a,isRapidFire:l}){const{conversation:i,inboxType:r,isWide:o,messageSearchEntryId:c,perspective:d,scribeNamespace:u}=this.props,m=e.id===c;return e&&r?s.a.createElement(Vl,{conversation:i,entry:e,inboxType:r,isActive:t,isFirstRapidFire:n,isHighlightedMessageSearchEntry:m,isLastRapidFire:a,isRapidFire:l,isWide:o,key:e.id,perspective:d,scribeNamespace:u,setActiveEntry:this._setActiveEntry,setShouldFreezeUpdates:this._setShouldFreezeUpdates}):null}}Rs.contextType=m.a;const Ls=f.a.create((e=>({spinner:{alignItems:"center",marginVertical:"30px"},scrollContainer:{backgroundColor:e.colors.cellBackground,flexGrow:1,height:"100%",overflowX:"hidden",WebkitOverflowScrolling:"touch"},scrollSpace:{paddingTop:e.componentDimensions.appBarHeightPx,marginTop:-e.componentDimensions.appBarHeightPx},conversationsPadding:{paddingTop:e.spaces.space20},content:{flexGrow:1,transform:[{translate3d:"0,0,0"}]},alignTop:{justifyContent:"flex-start"},readOnly:{paddingBottom:e.spaces.space20}})))},"4hmp":function(e,t,n){"use strict";const a=n("rHpw").a.create((e=>({inboxPip:{backgroundColor:e.colors.blue500,borderWidth:e.borderWidths.medium,borderColor:e.colors.cellBackground,borderStyle:"solid",position:"absolute",height:e.baseFontSize-4,width:e.baseFontSize-4,top:e.spacesPx.space8+e.spacesPx.space2,right:e.spacesPx.space8+e.spacesPx.space2},requestPivotContainer:{backgroundColor:e.colors.cellBackground,zIndex:2},requestPivotContainerBorder:{borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor},root:{backgroundColor:e.colors.cellBackground,flexGrow:1},searchInput:{backgroundColor:e.colors.cellBackground,padding:e.spaces.space12,zIndex:1},searchInputBorder:{borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small}})));t.a=a},"4n2h":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return l}));const a=e=>e?"medium":"normal",l=(e,t)=>e||t?"text":"gray700"},"6bmY":function(e,t,n){"use strict";var a,l,s,i,r,o,c,d,u,m,p,g,y,h,_,b,v,k,f,F,T,S,E,C,I,R,L,K,x,w,M,O,A,D={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:null,name:"evolutionDMInboxPrimaryQuery",selections:[{alias:"trusted",args:[l={kind:"Variable",name:"count",variableName:"count"},s={kind:"Literal",name:"desired_lists",value:["Trusted"]},i={kind:"Literal",name:"known_lists",value:["Trusted","Untrusted","LowQuality"]},r={kind:"Literal",name:"s",value:17},o={kind:"Literal",name:"sort_by",value:"Recency"}],concreteType:null,kind:"LinkedField",name:"__evolutionDMInboxPrimaryQuery_dm_convo_list_slice_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[d={alias:null,args:null,concreteType:"DMConversationLabelInfo",kind:"LinkedField",name:"labels",plural:!0,selections:[c={alias:null,args:null,kind:"ScalarField",name:"label_type",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"evolutionDMInboxItem"}],type:"DMConversation",abstractKey:null},u={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null},m={alias:null,args:null,concreteType:"SliceInfo",kind:"LinkedField",name:"slice_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"next_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"previous_cursor",storageKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null},u],storageKey:null},{alias:"untrusted",args:p=[{kind:"Literal",name:"desired_lists",value:["Untrusted"]},i,r,o],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"evolutionMessageRequestsPivot"}],type:"DMConversation",abstractKey:null}],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(desired_lists:["Untrusted"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'},{alias:"low_quality",args:g=[{kind:"Literal",name:"desired_lists",value:["LowQuality"]},i,r,o],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[_={kind:"InlineFragment",selections:h=[y={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"DMConversation",abstractKey:null}],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(desired_lists:["LowQuality"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'},{alias:"pinned",args:b=[{kind:"Literal",name:"label",value:"Pinned"},{kind:"Literal",name:"s",value:20}],concreteType:"DMLabeledConversationsSlice",kind:"LinkedField",name:"labeled_conversation_slice",plural:!1,selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"items_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"pinnedInboxSectionConversation"}],type:"DMConversation",abstractKey:null}],storageKey:null}],storageKey:null},u],storageKey:'labeled_conversation_slice(label:"Pinned",s:20)'}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"evolutionDMInboxPrimaryQuery",selections:[{alias:"trusted",args:v=[l,{kind:"Variable",name:"cursor",variableName:"cursor"},s,i,r,o],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[k={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[k,f={kind:"TypeDiscriminator",abstractKey:"__isDMConvoListItem"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[k,{kind:"InlineFragment",selections:[d,y,F={alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[k,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"original_img_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_url",storageKey:null}],type:"ApiImage",abstractKey:null}],storageKey:null},y],storageKey:null}],storageKey:null},R={alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[k,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[T={alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null}],storageKey:null},C={alias:null,args:null,filters:null,handle:"defaultScalars",key:"",kind:"LinkedHandle",name:"legacy"},y],type:"User",abstractKey:null}],storageKey:null},I={alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"result"},y],storageKey:null}],storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"last_readable_event_id",storageKey:null},w={alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"conversation_type",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"conversation_id",storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[k,{kind:"InlineFragment",selections:[y,{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},T,x,S,E],storageKey:null},C,L],type:"User",abstractKey:null}],storageKey:null},I,y],storageKey:null}],storageKey:null}],storageKey:null},O={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"legacy_conversation_slice",plural:!1,selections:[k,{kind:"TypeDiscriminator",abstractKey:"__isDMEventSliceResult"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMEventItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"DMEvent",kind:"LinkedField",name:"dm_event",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventMetadata",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventDetail",kind:"LinkedField",name:"event_detail",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageInfo",kind:"LinkedField",name:"dm",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachments",plural:!0,selections:[k,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Card",kind:"LinkedField",name:"card",plural:!1,selections:h,storageKey:null}],type:"DMCardAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[k,{kind:"InlineFragment",selections:M=[{alias:null,args:null,kind:"ScalarField",name:"alt_text",storageKey:null}],type:"ApiGif",abstractKey:null},{kind:"InlineFragment",selections:M,type:"ApiImage",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiImage",kind:"LinkedField",name:"preview_image",plural:!1,selections:M,storageKey:null}],type:"ApiVideo",abstractKey:null}],storageKey:null},y],storageKey:null}],type:"DMMediaAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"TweetResults",kind:"LinkedField",name:"tweet_results",plural:!1,selections:h,storageKey:null}],type:"DMTweetAttachment",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},x,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"users_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[k,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[T,x],storageKey:null},C,y],type:"User",abstractKey:null}],storageKey:null},I,y],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spam_hide",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_type",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"initiating_user_results",plural:!1,selections:[L,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[k,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[x],storageKey:null},C,y],type:"User",abstractKey:null}],storageKey:null},I,y],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at_millis",storageKey:null}],storageKey:null},L,y],storageKey:null}],storageKey:null}],type:"DMEventSlice",abstractKey:null}],storageKey:null},A={alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"last_read_event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted_due_to_muted_user",storageKey:null}],storageKey:null}],type:"DMConversation",abstractKey:null},u],storageKey:null},y],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null},m],type:"DMConvoListSlice",abstractKey:null},u],storageKey:null},{alias:"trusted",args:v,filters:["count","desired_lists","known_lists","s","sort_by"],handle:"slice",key:"evolutionDMInboxPrimaryQuery_dm_convo_list_slice",kind:"LinkedHandle",name:"dm_convo_list_slice"},{alias:"untrusted",args:p,concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[k,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[k,f,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[k,{kind:"InlineFragment",selections:[K,{alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"SocialProof",kind:"LinkedField",name:"social_proof",plural:!1,selections:[{alias:null,args:null,concreteType:"MutualFriendsSocialProof",kind:"LinkedField",name:"mutual_friends",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"total_mutual_friends",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},y],type:"DMConversation",abstractKey:null}],storageKey:null},y],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(desired_lists:["Untrusted"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'},{alias:"low_quality",args:g,concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[k,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[k,f,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[k,_],storageKey:null},y],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(desired_lists:["LowQuality"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'},{alias:"pinned",args:b,concreteType:"DMLabeledConversationsSlice",kind:"LinkedField",name:"labeled_conversation_slice",plural:!1,selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"items_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[k,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationLabelInfo",kind:"LinkedField",name:"labels",plural:!0,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"timestamp",storageKey:null}],storageKey:null},y,F,R,L,K,w,O,A,u],type:"DMConversation",abstractKey:null}],storageKey:null},y],storageKey:null},u],storageKey:'labeled_conversation_slice(label:"Pinned",s:20)'}]},params:{id:"sG_LGJOfXCIn3oM1IuMjIw",metadata:{sliceInfoPath:["trusted","slice_info"]},name:"evolutionDMInboxPrimaryQuery",operationKind:"query",text:null}};D.hash="f0cfbe9bc3038b3aeb91d76154d06102",e.exports=D},"8/ot":function(e,t,n){"use strict";var a,l,s,i,r,o,c,d,u,m,p,g,y,h,_,b,v,k,f,F,T,S,E,C,I={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"query"},{defaultValue:null,kind:"LocalArgument",name:"withConversationQueryHighlights"}],kind:"Fragment",metadata:null,name:"DMConversationGroupTabQuery",selections:[{alias:"dm_group_convo_slice_result",args:[l={kind:"Variable",name:"query",variableName:"query"},s={kind:"Literal",name:"s",value:21}],concreteType:null,kind:"LinkedField",name:"__DMConversationsGroupTabQuery_dm_group_convo_slice_result_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMGroupConvoSearchItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"DMConversation",kind:"LinkedField",name:"dm_convo_search",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[o={alias:null,args:null,kind:"ScalarField",name:"conversation_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[o,c={alias:null,args:null,kind:"ScalarField",name:"conversation_type",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"created_by_user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[i,r,{kind:"RequiredField",field:m={alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[d,u={alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null}],storageKey:null},action:"THROW",path:"dm_group_convo_slice_result.items.dm_convo_search.legacy.metadata.created_by_user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"created_at_millis",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"admin_user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[i,r,{kind:"RequiredField",field:m,action:"THROW",path:"dm_group_convo_slice_result.items.dm_convo_search.legacy.metadata.admin_user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[g={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"original_img_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_height",storageKey:null}],type:"ApiImage",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[i,r,{kind:"RequiredField",field:y={alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},d,u,{alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null}],storageKey:null},action:"THROW",path:"dm_group_convo_slice_result.items.dm_convo_search.legacy.participants_metadata.user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"last_read_event_id",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"join_time_millis",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"join_conversation_event_id",storageKey:null}],storageKey:null},v={alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[h,{alias:null,args:null,kind:"ScalarField",name:"low_quality",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted_due_to_muted_user",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"read_only",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trusted",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},k={condition:"withConversationQueryHighlights",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"DMHighlighting",kind:"LinkedField",name:"highlighting",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"query_tokens",storageKey:null}],storageKey:null}]}],storageKey:null},f={alias:null,args:null,concreteType:"SliceInfo",kind:"LinkedField",name:"slice_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"next_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"previous_cursor",storageKey:null}],storageKey:null}],type:"DMGroupConvoSlice",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"DMConversationGroupTabQuery",selections:[{alias:null,args:F=[{kind:"Variable",name:"cursor",variableName:"cursor"},l,s],concreteType:null,kind:"LinkedField",name:"dm_group_convo_slice_result",plural:!1,selections:[T={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMGroupConvoSearchItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"DMConversation",kind:"LinkedField",name:"dm_convo_search",plural:!1,selections:[i,r,{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[o,{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[o,c,d,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"created_by_user_results",plural:!1,selections:C=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[T,{kind:"InlineFragment",selections:[i,r,m,S={alias:null,args:null,filters:null,handle:"defaultScalars",key:"",kind:"LinkedHandle",name:"legacy"}],type:"User",abstractKey:null}],storageKey:null},E={alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"result"},i],storageKey:null},p,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"admin_user_results",plural:!1,selections:C,storageKey:null},{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[T,g],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[T,{kind:"InlineFragment",selections:[i,r,y,S],type:"User",abstractKey:null}],storageKey:null},E,i],storageKey:null},h,_,b],storageKey:null},v],storageKey:null}],storageKey:null},k],storageKey:null},f],type:"DMGroupConvoSlice",abstractKey:null}],storageKey:null},{alias:null,args:F,filters:["query","s"],handle:"slice",key:"DMConversationsGroupTabQuery_dm_group_convo_slice_result",kind:"LinkedHandle",name:"dm_group_convo_slice_result"}]},params:{id:"Y-2xaN8TNKRkCMJCWLQIwA",metadata:{sliceInfoPath:["dm_group_convo_slice_result","slice_info"]},name:"DMConversationGroupTabQuery",operationKind:"query",text:null}};I.hash="6ee5108eca5a69a21570c79f2e7f8684",e.exports=I},"883S":function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return F}));var a=n("k49u"),l=n("3XMw"),s=n.n(l),i=n("fs1G");const r=s.a.c3752568,o=s.a.f78aa3ea,c=s.a.f9690dc0,d=s.a.i859a9d4,u=s.a.b1d35408,m=s.a.g539cca6,p=s.a.bbac001a,g=s.a.a1d2a68e,y=s.a.d4f2d9d8,h=s.a.hf383be4,_=s.a.b25c5b2a,b=s.a.c4fdbd16,v=s.a.hf3e7e38,k={[a.a.DirectMessageConversationNotFound]:{customAction:()=>!1}},f={defaultToast:{text:o},showToast:!0},F={defaultToast:{text:r},[a.a.CurrentUserSuspended]:{toast:{text:m,action:{label:d,link:"https://support.twitter.com/articles/15790"}}},[a.a.DirectMessageCannotDmOtherUser]:{toast:{text:c}},[a.a.DirectMessageDuplicate]:{toast:{text:_}},[a.a.DirectMessageOtherUserNotFollowing]:{toast:{text:g,action:{label:d,link:"https://support.twitter.com/articles/14606"}}},[a.a.DirectMessagesSenderBlocksRecipient]:{toast:{text:b}},[a.a.DirectMessageTooLongError]:{toast:{text:p}},[a.a.DirectMessageTweetNotFound]:{toast:{text:y}},[a.a.GenericBadRequest]:{customAction:i.a},[a.a.MessageSendError]:{toast:{text:v}},[a.a.OverStatusUpdateLimit]:{toast:{action:{label:d,link:"https://support.twitter.com/articles/15364"},text:u}},[a.a.TargetUserNotFound]:{toast:{text:h}},showToast:!0}},"8W85":function(e,t,n){"use strict";n("kYxP"),n("ERkP");var a=n("zb92");t.a=Object(a.a)({loader:()=>Promise.all([n.e(124),n.e(227)]).then(n.bind(null,"u2Vg")).then((e=>({default:e.__DANGEROUS_IMPORT__})))})},"8fJk":function(e,t,n){"use strict";var a={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"evolutionMessageRequestsPivot",selections:[{alias:null,args:null,kind:"ScalarField",name:"last_readable_event_id",storageKey:null},{alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"SocialProof",kind:"LinkedField",name:"social_proof",plural:!1,selections:[{alias:null,args:null,concreteType:"MutualFriendsSocialProof",kind:"LinkedField",name:"mutual_friends",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"total_mutual_friends",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"DMConversation",abstractKey:null,hash:"90ff34717d6f33cb87d17d696fbedc86"};e.exports=a},"8hvq":function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));n("MvUL");var a=n("MMRb"),l=n("ERkP"),s=n.n(l),i=n("1YZw"),r=n("v6aA"),o=n("EbOo"),c=n("tZH3"),d=n("3XMw"),u=n.n(d),m=n("5oT/"),p=n("YemM"),g=n("u0B7"),y=n("Irs7"),h=n("0KEI"),_=n("uDfI"),b=n("zCf4"),v=n("G6rE"),k=n("vMjK"),f=n("efqG"),F=n("/yvb"),T=n("6u/5"),S=n.n(T),E=n("PJTX"),C=n.n(E),I=n("pHkl"),R=n("X/yg"),L=n("fz3c");const K=u.a.d88d0790;function x(e){const{conversationId:t,conversationType:n,inboxType:l,participant:d}=e,u=Object(y.b)(),T=Object(h.useCreateLocalApiErrorHandler)("DIRECT_MESSAGES_INBOX_ITEM"),E=Object(_.c)(),x=C()(),{featureSwitches:w}=s.a.useContext(r.a),M=Object(b.f)(),O=w.isTrue("dm_vdl_enabled")&&w.isTrue("dm_vdl_inbox_p0_enabled"),A=n===a.CONVERSATION_TYPE.GROUP,D=e=>{E(v.e.unblock(e)).catch(T(g.a)),u.scribeAction("unblock")},P=()=>{const{participantCount:s,position:i,relayId:r}=e,o=n===a.CONVERSATION_TYPE.GROUP?"leave_group":"delete_thread",c={conversation_type:n===a.CONVERSATION_TYPE.GROUP?I.k.GROUP:I.k.ONE_TO_ONE,conversation_id:t,conversation_participant_count:s,position:i,inbox_type:Object(R.l)(l),entry_point:I.c.CELL_X_BUTTON};u.scribe({element:"thread",action:o,data:c}),E(a.leaveConversation({conversationId:t})).then((()=>{r&&S()(x,(e=>{e.delete(r)}))})).catch(T({showToast:!0})),M.replace(Object(R.g)(l))},U=()=>{const{userId:n}=e,a=L.a.DMConversation;if(u.scribeAction("report"),Object(L.g)(w,a)){const e=Object(L.d)({clientReferer:window.location.pathname,isMedia:!1,isPromoted:!1,reportType:a,reportedConversationId:t,reportedUser:n,scribeNamespace:u.contextualScribeNamespace});M.push({pathname:"/i/safety/report_story_start",state:{input:{requested_variant:JSON.stringify(e)}}})}else{const e=Object(R.j)(t,window.location.pathname,u.contextualScribeNamespace,l);M.push(e)}};return s.a.createElement(f.a,{renderContent:(e,t)=>s.a.createElement(c.a,{dismiss:e,flatBorders:"sheet"===t,isGroup:A,onBlockClick:()=>{return e=d.idStr,E(v.e.block(e)).then((()=>{E(Object(i.b)({action:{label:k.c,onAction:()=>D(e)},text:k.a}))}),T(o.a)),void u.scribeAction("block");var e},onDeleteClick:P,onReportClick:U,requestorScreenName:d.screenName,showBlock:!A,showCancel:"sheet"===t,showDelete:!0})},s.a.createElement(F.a,{accessibilityLabel:K,icon:s.a.createElement(m.a,{style:O?p.a.xIcon:void 0}),onPress:e=>{e.preventDefault()},style:O?p.a.vdlXButton:p.a.xButton,type:O?void 0:"destructiveText"}))}},AYcr:function(e,t,n){"use strict";var a,l,s={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"conversation_id"}],kind:"Fragment",metadata:null,name:"evolutionPinConversationMutation",selections:l=[{alias:null,args:[{kind:"Variable",name:"conversation_id",variableName:"conversation_id"},{kind:"Literal",name:"label",value:"Pinned"},{kind:"Literal",name:"s",value:20}],concreteType:null,kind:"LinkedField",name:"add_dm_conversation_label_v3",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"label_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"timestamp",storageKey:null}],type:"DMConversationLabelInfo",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"failure_reason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"DMConversationLabelUnavailable",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"evolutionPinConversationMutation",selections:l},params:{id:"ZHTYqgRlFOIozAdfcLAF_A",metadata:{},name:"evolutionPinConversationMutation",operationKind:"mutation",text:null}};s.hash="3a550c6d2710cd81564e2c2508b2f30f",e.exports=s},Avzu:function(e,t,n){"use strict";var a=n("ERkP"),l=n.n(a),s=n("Lsrn"),i=n("k/Ka");const r=(e={})=>Object(i.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},l.a.createElement("g",null,l.a.createElement("path",{d:"M23.25 3.25h-2.425V.825c0-.414-.336-.75-.75-.75s-.75.336-.75.75V3.25H16.9c-.414 0-.75.336-.75.75s.336.75.75.75h2.425v2.425c0 .414.336.75.75.75s.75-.336.75-.75V4.75h2.425c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-3.175 6.876c-.414 0-.75.336-.75.75v8.078c0 .414-.337.75-.75.75H4.095c-.412 0-.75-.336-.75-.75V8.298l6.778 4.518c.368.246.79.37 1.213.37.422 0 .844-.124 1.212-.37l4.53-3.013c.336-.223.428-.676.204-1.012-.223-.332-.675-.425-1.012-.2l-4.53 3.014c-.246.162-.563.163-.808 0l-7.586-5.06V5.5c0-.414.337-.75.75-.75h9.094c.414 0 .75-.336.75-.75s-.336-.75-.75-.75H4.096c-1.24 0-2.25 1.01-2.25 2.25v13.455c0 1.24 1.01 2.25 2.25 2.25h14.48c1.24 0 2.25-1.01 2.25-2.25v-8.078c0-.415-.337-.75-.75-.75z"})));r.metadata={width:24,height:24},t.a=r},CVqr:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d}));var a=n("3XMw"),l=n.n(a);const s=l.a.f041be05,i=l.a.a2fad0f3,r=l.a.cbddf365,o=l.a.fac945ad,c=l.a.h6beb5fb,d=e=>{const{newUntrustedWithSocialProof:t,newUntrustedWithoutSocialProof:n,oldUntrustedWithSocialProof:a,oldUntrustedWithoutSocialProof:l}=e;let c="normal",d="",m=!1;return t>0?(d=i({stringCount:u(t),count:t}),c="bold",m=!0):n>0?(d=o({stringCount:u(n),count:n}),c="bold",m=!0):a>0?(d=r({stringCount:u(a),count:a}),c="medium"):l>0&&(d=s({stringCount:u(l),count:l}),c="medium"),{titleWeight:c,description:d,showNotificationDot:m}},u=e=>e>10?c({count:10}):e},DQzJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));n("kYxP");var a=n("ERkP"),l=n.n(a),s=n("kGix"),i=n("tI3i"),r=n.n(i),o=n("SrIh"),c=n("0KEI"),d=n("IAZG"),u=n("VYI2"),m=n.n(u),p=n("PJTX"),g=n.n(p),y=n("P74S"),h=n.n(y),_=n("YWiL");function b(e,t){const[n,a]=l.a.useState(!1),[i,u]=l.a.useState(null),p=g()(),[y]=m()(t),b=Object(c.useApiErrorHandler)(),v=Object(d.a)(e,y);return l.a.useMemo((()=>{var t,l;const c=null==(t=Object(_.getRequest)(e).params)||null==(l=t.metadata)?void 0:l.sliceInfoPath;r()(!!c,"The provided query does not have an associated sliceInfoPath. Make sure you are using the `@slice` directive with your query.");const{next_cursor:d,previous_cursor:m}=function(e,t){try{r()("slice_info"===t[t.length-1],"Invalid sliceInfoPath!");let a=e;for(const e of t){var n;r()(!!a,"The provided path is invalid."),r()("string"==typeof e,"Unexpected value for path!"),a=null==(n=a)?void 0:n[e]}return a}catch(e){return void Object(o.a)(e.message)}}(v,c)||{},g=t=>{n||(a(!0),h()(p,e,{...y,cursor:t}).subscribe({complete:()=>{a(!1)},error:e=>{a(!1),u(e),b(e)}}))},k=()=>{d&&g(d)},f=()=>{m&&g(m)};return i?{subsequentFetchStatus:s.a.FAILED,error:i,fetchNext:k,fetchPrevious:f,data:v,hasNext:Boolean(d),hasPrevious:Boolean(m)}:{subsequentFetchStatus:n?s.a.LOADING:s.a.NONE,error:void 0,fetchNext:k,fetchPrevious:f,data:v,hasNext:Boolean(d),hasPrevious:Boolean(m)}}),[e,v,n,i,p,y,b])}},DbJc:function(e,t,n){"use strict";var a=n("VPAj");const l={...n("7n04").a,initialScrollHeadroom:Object(a.a)(0),scrollHeadroom:Object(a.a)(0),pinToNewestWhenAtNewest:!0};t.a=l},FWve:function(e,t,n){"use strict";var a,l,s,i,r,o,c,d,u,m,p,g,y,h,_,b,v,k,f,F,T={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:null,name:"EvolutionDMInboxSecondaryNoQualityFilterQuery",selections:[{alias:"untrusted",args:[l={kind:"Variable",name:"count",variableName:"count"},s={kind:"Literal",name:"desired_lists",value:["Untrusted","LowQuality"]},i={kind:"Literal",name:"known_lists",value:["Trusted","Untrusted","LowQuality"]},r={kind:"Literal",name:"s",value:17},o={kind:"Literal",name:"sort_by",value:"Recency"}],concreteType:null,kind:"LinkedField",name:"__EvolutionDMInboxSecondaryNoQualityFilterQuery_dm_convo_list_slice_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[c={alias:null,args:null,concreteType:"SliceInfo",kind:"LinkedField",name:"slice_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"previous_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"next_cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"evolutionDMInboxItem"},d={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"EvolutionDMInboxSecondaryNoQualityFilterQuery",selections:[{alias:"untrusted",args:u=[l,{kind:"Variable",name:"cursor",variableName:"cursor"},s,i,r,o],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[m={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[c,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[m,{kind:"TypeDiscriminator",abstractKey:"__isDMConvoListItem"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m,{kind:"InlineFragment",selections:[p={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[m,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"original_img_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_url",storageKey:null}],type:"ApiImage",abstractKey:null}],storageKey:null},p],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[g={alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null}],storageKey:null},_={alias:null,args:null,filters:null,handle:"defaultScalars",key:"",kind:"LinkedHandle",name:"legacy"},p],type:"User",abstractKey:null}],storageKey:null},b={alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"result"},p],storageKey:null}],storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"last_readable_event_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"conversation_type",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"conversation_id",storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m,{kind:"InlineFragment",selections:[p,{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},g,k,y,h],storageKey:null},_,v],type:"User",abstractKey:null}],storageKey:null},b,p],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"legacy_conversation_slice",plural:!1,selections:[m,{kind:"TypeDiscriminator",abstractKey:"__isDMEventSliceResult"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMEventItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"DMEvent",kind:"LinkedField",name:"dm_event",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventMetadata",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventDetail",kind:"LinkedField",name:"event_detail",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageInfo",kind:"LinkedField",name:"dm",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachments",plural:!0,selections:[m,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Card",kind:"LinkedField",name:"card",plural:!1,selections:f=[p],storageKey:null}],type:"DMCardAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[m,{kind:"InlineFragment",selections:F=[{alias:null,args:null,kind:"ScalarField",name:"alt_text",storageKey:null}],type:"ApiGif",abstractKey:null},{kind:"InlineFragment",selections:F,type:"ApiImage",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiImage",kind:"LinkedField",name:"preview_image",plural:!1,selections:F,storageKey:null}],type:"ApiVideo",abstractKey:null}],storageKey:null},p],storageKey:null}],type:"DMMediaAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"TweetResults",kind:"LinkedField",name:"tweet_results",plural:!1,selections:f,storageKey:null}],type:"DMTweetAttachment",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},k,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"users_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[g,k],storageKey:null},_,p],type:"User",abstractKey:null}],storageKey:null},b,p],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spam_hide",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_type",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"initiating_user_results",plural:!1,selections:[v,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[k],storageKey:null},_,p],type:"User",abstractKey:null}],storageKey:null},b,p],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at_millis",storageKey:null}],storageKey:null},v,p],storageKey:null}],storageKey:null}],type:"DMEventSlice",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"last_read_event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted_due_to_muted_user",storageKey:null}],storageKey:null}],type:"DMConversation",abstractKey:null},d],storageKey:null},p],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:null},{alias:"untrusted",args:u,filters:["count","desired_lists","known_lists","s","sort_by"],handle:"slice",key:"EvolutionDMInboxSecondaryNoQualityFilterQuery_dm_convo_list_slice",kind:"LinkedHandle",name:"dm_convo_list_slice"}]},params:{id:"6YA3CFdh-WkgaC7_8ZJ_uA",metadata:{sliceInfoPath:["untrusted","slice_info"]},name:"EvolutionDMInboxSecondaryNoQualityFilterQuery",operationKind:"query",text:null}};T.hash="6fb9d9631c7c450980be91852c33c0c3",e.exports=T},GSsg:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n("B5iK");class l{constructor(e,t=Object.freeze({})){const{interval:n=6e4,burstInterval:l=3e3,burstDuration:s=3e5}=t;this.pollTimer=new a.b(n).interval(e),this.burstTimer=new a.a(this.pollTimer,l,s)}start(e){return this.pollTimer.start(),e&&this.burstTimer.requestBurst(),this}stop(){return this.burstTimer.stopBurst(),this.pollTimer.stop(),this}restart(){return this.stop(),this.start(),this}}},H4nC:function(e,t,n){"use strict";var a=n("ERkP"),l=n.n(a),s=n("3XMw"),i=n.n(s),r=n("MWbm"),o=n("rHpw"),c=n("t62R"),d=n("4n2h");const u=o.a.create((e=>({root:{paddingBottom:e.spaces.space20}}))),m=i.a.d84b485e,p=i.a.be0c83d8;t.a=({entry:e,isCompact:t,isSelected:n=!1,unread:a=!1})=>{const s="follow"===e.reason?m:p,i=Object(d.b)(a),o=Object(d.a)(a,n);return t?l.a.createElement(c.b,{color:o,weight:i},s):l.a.createElement(r.a,{style:u.root},l.a.createElement(c.b,{align:"center",color:o,size:"subtext2",weight:i},s))}},HvW7:function(e,t,n){"use strict";var a=n("IGGJ")(n("yiKp")),l=n("XiYe"),s=n("PJTX"),i=n("ERkP"),r=n("e1/f").commitMutation,o=i.useState,c=i.useEffect,d=i.useRef,u=i.useCallback;e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=s(),i=l(),m=d(n),p=d(e),g=d(new Set),y=o(!1),h=y[0],_=y[1],b=u((function(t){m.current===n&&p.current===e&&(g.current.delete(t),i.current&&_(g.current.size>0))}),[n,i,e]);c((function(){m.current===n&&p.current===e||(g.current=new Set,i.current&&_(!1),m.current=n,p.current=e)}),[n,i,e]);var v=u((function(l){var s=t(n,(0,a.default)((0,a.default)({},l),{},{mutation:e,onCompleted:function(e,t){var n;b(s),null===(n=l.onCompleted)||void 0===n||n.call(l,e,t)},onError:function(e){var t;b(s),null===(t=l.onError)||void 0===t||t.call(l,e)},onUnsubscribe:function(){var e;b(s),null===(e=l.onUnsubscribe)||void 0===e||e.call(l)},onNext:function(){var e;null===(e=l.onNext)||void 0===e||e.call(l)}}));return g.current.add(s),i.current&&_(!0),s}),[b,t,n,i,e]);return[v,h]}},"I2k/":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("k49u"),l=n("lRnM"),s=n("LVU8");const i=e=>({[a.a.ClientNotPermitted]:{customAction:()=>(Object(s.d)("/messages/",{statusCode:401}),Object(l.v)(e))}})},IACL:function(e,t,n){"use strict";var a,l,s,i,r,o={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"evolutionDMDrawerQuery",selections:[{alias:null,args:l=[{kind:"Literal",name:"count",value:1},{kind:"Literal",name:"desired_lists",value:a=["Trusted","Untrusted","LowQuality"]},{kind:"Literal",name:"known_lists",value:a},{kind:"Literal",name:"s",value:17},{kind:"Literal",name:"sort_by",value:"Recency"}],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[i={kind:"InlineFragment",selections:[s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"DMConversation",abstractKey:null}],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(count:1,desired_lists:["Trusted","Untrusted","LowQuality"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"evolutionDMDrawerQuery",selections:[{alias:null,args:l,concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[r,{kind:"TypeDiscriminator",abstractKey:"__isDMConvoListItem"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[r,i],storageKey:null},s],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(count:1,desired_lists:["Trusted","Untrusted","LowQuality"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'}]},params:{id:"YmdLg9J6c80rHupQ-HKU2A",metadata:{},name:"evolutionDMDrawerQuery",operationKind:"query",text:null}};o.hash="12ce289bb1eb52629b06ad2c666962ca",e.exports=o},IpT4:function(e,t,n){"use strict";var a=n("ERkP"),l=n.n(a),s=n("Lsrn"),i=n("k/Ka");const r=(e={})=>Object(i.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},l.a.createElement("g",null,l.a.createElement("path",{d:"M22.238 2.257c-.293-.293-.768-.293-1.06 0L2.52 20.917c-.293.292-.293.767 0 1.06.146.146.338.22.53.22s.384-.073.53-.22l18.658-18.66c.293-.293.293-.767 0-1.06zM2.986 17.82c.155 0 .312-.048.446-.148.112-.083 2.752-2.104 2.708-7.248-.02-2.16.643-3.98 1.913-5.266 1.093-1.107 2.577-1.72 4.18-1.727 1.325.006 2.562.42 3.578 1.195.137.104.297.153.455.153.227 0 .45-.102.598-.295.25-.33.188-.8-.142-1.052-1.278-.975-2.828-1.493-4.483-1.5h-.003c-2.008.008-3.87.78-5.248 2.173-1.536 1.551-2.368 3.8-2.348 6.332.037 4.33-2.02 5.967-2.103 6.03-.332.247-.4.718-.154 1.05.147.2.374.303.603.303zm16.844-7.382c.002-.246-.003-.487-.017-.723-.024-.414-.387-.74-.792-.706-.413.023-.728.378-.705.79.012.205.017.413.015.624-.024 2.868.785 4.765 1.526 5.896h-8.314c-.414 0-.75.336-.75.75s.336.75.75.75h3.522c-.1 1.48-1.323 2.66-2.828 2.66-1.003 0-1.913-.514-2.436-1.372-.214-.354-.675-.467-1.03-.25-.354.214-.467.675-.25 1.03.795 1.31 2.185 2.09 3.716 2.09 2.332 0 4.227-1.85 4.328-4.158h4.922c.32 0 .604-.206.707-.51.104-.305 0-.643-.255-.84-.087-.066-2.145-1.7-2.108-6.032z"})));r.metadata={width:24,height:24},t.a=r},J2UM:function(e,t,n){"use strict";var a=n("0JOx");t.a=()=>Object(a.h)().then((({inputDetect:e})=>e))},KWCo:function(e,t,n){"use strict";var a,l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"evolutionDMConversationAvatar",selections:[{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"original_img_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_url",storageKey:null}],type:"ApiImage",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null}],storageKey:null},action:"THROW",path:"participants.user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"DMConversation",abstractKey:null};l.hash="730d72814d575d9d07f0685f80113703",e.exports=l},Ka95:function(e,t,n){"use strict";n.d(t,"a",(function(){return be}));n("kYxP");var a,l=n("ERkP"),s=n.n(l),i=n("BUB3"),r=n("1YZw"),o=n("v6aA"),c=n("6M7t"),d=n("2Aal"),u=(n("YWiL"),n("CVPS")),m=n.n(u);const p=void 0!==a?a:a=n("KWCo");function g(e){var t,n;const{conversation:a,conversationId:l,conversationType:i,perspective:r,size:o,withBadge:u}=e,{metadata:g,participants:y}=m()(p,a),h=null==g||null==(t=g.avatar)?void 0:t.media_info,_=h&&"ApiImage"===h.__typename?{height:h.original_img_height,width:h.original_img_width,url:h.original_img_url}:void 0,b=y||[],v=[];for(let e=0;e<b.length;e++){var k,f;const t=b[e];if("User"===(null==t||null==(k=t.user_results)||null==(f=k.result)?void 0:f.__typename)){const{legacy:e}=t.user_results.result;if(e){const{id_str:t,profile_image_url_https:n,screen_name:a}=e;v.push({id_str:t,profile_image_url_https:n,screen_name:a})}}}const F=v.filter((e=>e.id_str!==r)).slice(0,d.a),T=Object(d.b)(_)||Object(d.c)(F,o),S=(null==(n=F[0])?void 0:n.screen_name)||"",E=Object(d.e)(l,S,i),C=u?v.length-1:0;return T?s.a.createElement(c.a,{avatar:T,avatarLink:E,badgeCount:C}):null}var y=n("OhSZ"),h=n("t62R"),_=n("zQEV"),b=n("4n2h");function v({entry:e,entryType:t,isSelected:n=!1,perspective:a,unread:l=!1,users:i}){const r=Object(_.a)(e,t,a,i),o=Object(b.b)(l),c=Object(b.a)(l,n);return s.a.createElement(h.b,{color:c,weight:o},r)}var k,f=n("ijJS"),F=n("XYIr");const T=void 0!==k?k:k=n("VGyq");function S({dm:e,isGroupDM:t,isSelected:n,perspective:a,senderId:l,senderName:i,unread:r}){const{attachments:o,text:c}=m()(T,e),d=o?o[0]:null,u=d&&(d.card||d.media||d.tweet_results),p=a===l,g=Boolean(u&&p)||Boolean(t&&!p);let y,h=Object(F.a)(i,g,c);if(d)if(d.card)h=Object(F.d)(p,i,g);else if(d.tweet_results)h=Object(F.i)(p,i,g);else if(d.media){const e=d.media.media_info;if("ApiGif"===(null==e?void 0:e.__typename))y=e.alt_text,h=Object(F.c)(p,i,g);else if("ApiImage"===(null==e?void 0:e.__typename))y=e.alt_text,h=Object(F.e)(p,i,g);else if("ApiVideo"===(null==e?void 0:e.__typename)){var _;y=null==(_=e.preview_image)?void 0:_.alt_text,h=Object(F.g)(p,i,g)}}return s.a.createElement(f.a,{accessibilityLabel:y,content:h,isSelected:n,unread:r})}var E,C=n("/8XK"),I=n("pHkl");const R=void 0!==E?E:E=n("vL4t"),L=(e,t)=>({created_at:"",description:"",entities:{description:{}},followed_by:!1,followers_count:0,following:!1,friends_count:0,id:parseInt(t,10),id_str:t,name:e||"",profile_image_url_https:"",protected:!1,screen_name:"",verified:!1});function K({entry:e,isGroupDM:t,isSelected:n,perspective:a,type:l,unread:i}){var r,o,c,d,u,p;const{legacy:g}=m()(R,e);let y=(null==g||null==(r=g.initiating_user_results)?void 0:r.rest_id)||"",h=(null==g||null==(o=g.initiating_user_results)||null==(c=o.result)||null==(d=c.legacy)?void 0:d.name)||"";const _=null==g?void 0:g.event_id;if(null!=g&&null!=(u=g.event_detail)&&u.is_spam_hide)return Object(C.a)(i,n);if(null!=g&&null!=(p=g.event_detail)&&p.dm&&l===I.e.MESSAGE_CREATE)return s.a.createElement(S,{dm:g.event_detail.dm,isGroupDM:t,isSelected:n,perspective:a,senderId:y,senderName:h,unread:i});if([I.e.CONVERSATION_NAME_UPDATE,I.e.PARTICIPANTS_JOIN,I.e.PARTICIPANTS_LEAVE].includes(l)){var b;const e=I.f[l];let t={},r=[];if(l===I.e.PARTICIPANTS_LEAVE){var k,f,F,T,E,K,x,w,M,O;if(null==g||null==(k=g.event_detail)||!k.users_results||(null==g||null==(f=g.event_detail)?void 0:f.users_results.length)<1)return null;if(y=null==g||null==(F=g.event_detail)||null==(T=F.users_results[0])||null==(E=T.result)||null==(K=E.legacy)?void 0:K.id_str,h=null==g||null==(x=g.event_detail)||null==(w=x.users_results[0])||null==(M=w.result)||null==(O=M.legacy)?void 0:O.name,!y)return null;r=[{user_id:y}],t={[y]:{name:h}}}else{t={[y]:L(h,y)};for(const e of(null==g||null==(A=g.event_detail)?void 0:A.users_results)||[]){var A,D,P,U,H;const n=null==e||null==(D=e.result)||null==(P=D.legacy)?void 0:P.id_str,a=null==e||null==(U=e.result)||null==(H=U.legacy)?void 0:H.name;n&&a&&(t[n]=L(a,n),r.push({user_id:n}))}}const o={by_user_id:y,conversation_name:(null==g||null==(b=g.event_detail)?void 0:b.name)||"",id:_||"",participants:r,sender_id:y,time:"",type:e};return s.a.createElement(v,{entry:o,entryType:e,isSelected:n,perspective:a,unread:i,users:t})}return null}var x=n("h3MB"),w=n("XnpN"),M=n("X/yg"),O=n("3XMw"),A=n.n(O),D=n("IpT4"),P=n("AQ79"),U=n("t0aI"),H=n("sNn6"),N=n("VcIV"),j=n("NjAB"),B=n("gEJU"),W=n("RqPI"),q=n("YemM"),V=n("Irs7"),z=n("0KEI"),Q=n("zCf4"),G=n("MWbm"),Y=n("8hvq");var X,$,J,Z=n("Znyr"),ee=n("GBcw"),te=n("cm6r"),ne=n("htQn"),ae=n("5mJL"),le=n("6u/5"),se=n.n(le),ie=n("HvW7"),re=n.n(ie),oe=n("PJTX"),ce=n.n(oe),de=n("MMRb"),ue=n("q8SM"),me=n("uDfI");const pe=A.a.d98e066c,ge=A.a.j302dba8,ye=void 0!==X?X:X=n("Sy9O"),he=void 0!==$?$:$=n("AYcr"),_e=void 0!==J?J:J=n("whlN");function be({conversationIds:e,dm_conversation:t,dmDrawerOnClick:n,inboxType:a,isMessageItem:l,isPinned:c,pinnedSliceId:d}){var u,p;const h=Object(V.b)(),_=Object(z.useCreateLocalApiErrorHandler)("DIRECT_MESSAGES_INBOX_ITEM_EVOLUTION"),b=Object(me.c)(),v=ce()(),k=Object(Q.g)(),[f,F]=s.a.useState(!1),T=m()(ye,t),S=Object(j.b)([T],[x.a]).entities.conversations[null==T||null==(u=T.legacy)?void 0:u.conversation_id],E=((null==T||null==(p=T.legacy_conversation_slice)?void 0:p.items)||[]).map((e=>null==e?void 0:e.dm_event)).find((e=>{var t;return I.d.includes(null==e||null==(t=e.legacy)?void 0:t.event_type)})),{featureSwitches:C}=s.a.useContext(o.a),R=C.getNumberValue("dm_conversation_labels_max_pinned_count"),L=C.isTrue("dm_vdl_enabled")&&C.isTrue("dm_vdl_inbox_p0_enabled"),O=C.isTrue("dm_conversation_labels_pinned_enabled")&&C.isTrue("direct_messages_incremental_holdback_2022h1"),{conversation_id:A,id:X,last_read_event_id:$,last_readable_event_id:J,muted:le,participants:ie,type:oe}=S,be=Object(me.d)(W.s)||"",ve=oe===de.CONVERSATION_TYPE.GROUP,ke=e.findIndex((e=>e===X))+1,fe=Object.keys(ie).length,Fe=!J||!($&&Object(U.c)($,J)),Te=L&&ve,Se=ve?"0":(()=>{const e=Object(w.a)(S,be).map((({user:e})=>e)),t=e&&e[0]||null;return t?t.id_str:""})();s.a.useEffect((()=>{b(Object(de.updateLastSeenEventIdEvolution)(J,a)).catch(_({}))}),[_,b,J,a]);const Ee=e=>{h.scribe({element:"thread",action:"click",data:{event_value:0,conversation_id:A,conversation_participant_count:fe,conversation_type:ve?I.k.GROUP:I.k.ONE_TO_ONE,position:ke}}),Fe&&b(Object(de.updateConversationReadState)(A)).then((()=>{se()(v,(e=>{((e,t,n)=>{const a=n.get(e);if(!a)return;const l=a.getLinkedRecord("perspectival_conversation_metadata");l&&l.setValue(t,"last_read_event_id")})(X,J,e)}))})).catch(_({})),n&&n(e,A)},[Ce]=re()(he),Ie=s.a.useCallback((()=>{Ce({variables:{conversation_id:A},onCompleted(e){var t,n;if("DMConversationLabelUnavailable"===(null==(t=e.add_dm_conversation_label_v3)?void 0:t.__typename)){const{failure_reason:t}=e.add_dm_conversation_label_v3;h.scribe({element:"thread",action:"error_shown",data:{error_type:I.i.MAX_PINS_REACHED}}),"ExceededMaxPinnedConversations"===t&&F(!0)}else"DMConversationLabelInfo"===(null==(n=e.add_dm_conversation_label_v3)?void 0:n.__typename)&&b(Object(r.b)({ariaOnly:!0,text:pe}))},updater(e,t){var n;"DMConversationLabelInfo"===(null==t||null==(n=t.add_dm_conversation_label_v3)?void 0:n.__typename)&&((e,t,n)=>{if(!n)return;const a=t.get(e),l=t.getRootField("add_dm_conversation_label_v3"),s=t.get(n);if(!a||!l||!s)return;const i=a.getLinkedRecord("result");if(!i)return;const r=a.getLinkedRecords("labels")||[];i.setLinkedRecords([...r,l],"labels"),a.setLinkedRecord(i,"result");const o=(s.getLinkedRecords("items_results")||[]).concat(a);s.setLinkedRecords(o,"items_results")})(X,e,d)},onError(e){_(ue.a)(e)}})}),[h,A,_,b,X,Ce,d]),[Re]=re()(_e),Le=s.a.useCallback((()=>{Re({variables:{conversation_id:A},onCompleted(){b(Object(r.b)({ariaOnly:!0,text:ge}))},updater(e){((e,t)=>{const n=t.get(e);if(!n)return;const a=n.getLinkedRecord("result");if(!a)return;const l=a.getLinkedRecords("labels")||[],s=[];l.forEach((e=>{e&&e.getValue("label_type")!==P.a.PINNED&&s.push(e)})),a.setLinkedRecords(s,"labels")})(X,e),((e,t,n)=>{if(!n)return;const a=t.get(e),l=t.get(n);if(!a||!l)return;const s=l.getLinkedRecords("items_results")||[],i=[];s.forEach((t=>{if(!t)return;const n=t.getLinkedRecord("result");if(!n)return;const a=n.getValue("__id");a!==e&&a!==`DMConversation:${e}`&&i.push(t)})),l.setLinkedRecords(i,"items_results")})(X,e,d)},onError(e){_(ue.b)(e)}})}),[A,_,b,X,d,Re]),Ke=({isFocused:e,isFocusedWithin:t,isHovered:n})=>s.a.createElement(N.a,{conversationId:A,conversationType:oe,inboxType:a,isHovered:e||t||n,isPinned:c,isSnoozed:le,participantCount:fe,position:ke,relayId:X,togglePinStateEvolution:c?Le:Ie,userId:Se}),xe=()=>{var e;const t=Number(null==E||null==(e=E.legacy)?void 0:e.created_at_millis),n=[L||l?q.a.inlineNotificationsDisabledIcon:q.a.notificationsDisabledIcon,L&&q.a.inlineNotificationsDisabledIconVDL];return s.a.createElement(G.a,{style:L&&q.a.inlineTimestamp},t?s.a.createElement(ee.a,{timestamp:t}):null,le?s.a.createElement(D.a,{style:n}):null)},we=()=>{const e=Object(M.m)(S,be);return s.a.createElement(Y.a,{conversationId:A,conversationType:oe,inboxType:a,participant:e,participantCount:fe,position:ke,relayId:X,userId:Se})},Me=e=>{const t=[q.a.root,Fe&&!L&&q.a.unread,e&&L&&q.a.active];let n="text",i="bold";return L&&!Fe&&(n="gray900",i="medium"),L&&e&&(n="text",i="medium"),s.a.createElement(te.a,null,(({isFocused:r,isFocusedWithin:o,isHovered:c})=>{var d;return s.a.createElement(ne.a,{accessibilityRole:"none",accessibilityState:{selected:e},link:{pathname:`/messages/${A}`,anchorless:!0,state:{...k.state,entryPoint:l?null==E?void 0:E.rest_id:null,position:ke,isMessageItem:l}},onPress:Ee,style:t},s.a.createElement(ae.a,{avatarCell:s.a.createElement(g,{conversation:T,conversationId:A,conversationType:oe,perspective:be,withBadge:Te}),avatarSize:"xxLarge"},s.a.createElement(G.a,{style:q.a.bodyColumn},s.a.createElement(G.a,{style:q.a.titleContainer},s.a.createElement(y.b,{conversation:S,perspective:be,renderTimestamp:()=>xe(),textColor:n,titleWeight:i,withScreenName:!0,withVDLRefresh:L}),s.a.createElement(G.a,{style:q.a.snippet},E?s.a.createElement(K,{entry:E,isGroupDM:ve,isSelected:L&&e,perspective:be,type:(null==(d=E.legacy)?void 0:d.event_type)||I.e.MESSAGE_CREATE,unread:L&&Fe}):null)),s.a.createElement(G.a,{style:q.a.endCell},(()=>{const e=Fe?s.a.createElement(Z.a,{pip:!0,style:q.a.unreadMessagePip,truncatedCountFormatter:()=>"",unreadCountLabel:()=>""}):null;return L?e:xe()})()),(({isFocused:e,isFocusedWithin:t,isHovered:n})=>{switch(a){case P.d.PRIMARY:return O?Ke({isFocused:e,isFocusedWithin:t,isHovered:n}):null;case P.d.SECONDARY:case P.d.TERTIARY:return we();default:return null}})({isFocused:r,isFocusedWithin:o,isHovered:c}))))}))};return s.a.createElement(s.a.Fragment,null,f?s.a.createElement(B.a,{count:R,setShowPinError:F}):null,L?s.a.createElement(H.a,{exact:!1,path:`/messages/${A}`},Me):s.a.createElement(i.a,{exact:!1,path:`/messages/${A}`},Me))}},Lz2T:function(e,t,n){"use strict";var a=n("97Jx"),l=n.n(a),s=n("ERkP"),i=n.n(s),r=n("PnKw"),o=n("vYiB"),c=n("X3+4"),d=n("rcen"),u=n("k89r");function m(e){const{bodyRichText:t,bodyText:n,onImpression:a,primaryAction:s,titleRichText:m,titleText:p,...g}=e,y=Object(u.a)(),h=()=>{y.scribe({action:"click"})},_=m?i.a.createElement(d.a,{entities:m.entities,onEntityClick:h,text:m.text}):p&&p.length?p:null,b=t?i.a.createElement(d.a,{entities:t.entities,onEntityClick:h,text:t.text}):n&&n.length?n:null,v=e=>({...s,onClick:t=>{(null==s?void 0:s.onClick)&&s.onClick(t),e(t)}}),k=i.a.createElement(c.a.Consumer,null,(({handleNextSlide:e})=>i.a.createElement(r.a,l()({},g,{headline:_,primaryAction:s?v(e):void 0,subtext:b}))));return"function"==typeof a?i.a.createElement(o.a,{onImpression:a},k):k}m.defaultProps={shouldRenderBorder:!1},t.a=m},M2mT:function(e,t,n){"use strict";n("kYxP");var a=n("+/5o"),l=n("ERkP"),s=n.n(l),i=n("HPNB"),r=n("VAZu"),o=n("wiP2"),c=n("Es6L"),d=n("rHpw");var u=d.a.create((e=>({fill:{flex:1,alignSelf:"stretch"},viewportView:{...d.a.absoluteFillObject,overflowY:"auto"},appBarContainer:{position:"sticky",top:0,backfaceVisibility:"hidden",zIndex:e.componentZIndices.appBarZIndex}}))),m=n("MWbm"),p=n("yw4N"),g=n("TnY3"),y=n("cHvH"),h=n("3xLC");class _ extends s.a.Component{constructor(...e){super(...e),this._renderChildren=()=>{const{children:e}=this.props;return this.context.rootDetailPerColumnScroll?s.a.createElement(m.a,{style:u.fill},s.a.createElement(p.a,{style:u.viewportView},this._renderInlineNav({isTwoColumnLayout:!0}),e)):e}}render(){return s.a.createElement(y.a,null,(({windowWidth:e})=>i.a.isTwoColumnLayout(e)?this._renderForTwoColumnLayout():this._renderForOneColumnLayout()))}_renderForOneColumnLayout(){const{appBarStyle:e,children:t,leftControl:n,screenType:a,showSubtitleOnRoot:l,showSubtitleOnWideDetail:i,withBottomBorder:r,withDetailOpen:d,...u}=this.props;return s.a.createElement(s.a.Fragment,null,Object(c.a)()?this._renderInlineNav({isTwoColumnLayout:!1}):s.a.createElement(o.a.Configure,u),t)}_renderForTwoColumnLayout(){const e=this.context.rootDetailPerColumnScroll;return s.a.createElement(s.a.Fragment,null,!e&&this._renderInlineNav({isTwoColumnLayout:!0}),this._renderChildren())}_renderInlineNav({isTwoColumnLayout:e}){const{SideNavButton:t,TabBar:n,TeamsSwitcher:l,appBarStyle:i,backLocation:c,documentTitle:d,headerless:p,history:g,leftControl:y,middleControl:h,onBackClick:_,rightControl:b,screenType:v,searchBoxOptions:k,secondaryBar:f,showSubtitleOnRoot:F,showSubtitleOnWideDetail:T,subtitle:S,title:E,titleIconCell:C,titleIconCellSize:I,withDetailOpen:R,withSearchBox:L,withTweetButton:K}=this.props,x="root"===v,w="secondaryRoot"===v,M="primaryDetail"===v,O=M&&T||x&&F,A=x||M&&e,D=x?a.c:M?a.a:void 0,P=s.a.createElement(m.a,{style:u.appBarContainer},s.a.createElement(r.a,{backLocation:c,fixed:!1,hideBackButton:A,history:g,leftControl:y,middleControl:h,onBackClick:_,rightControl:b,secondaryBar:f,style:i,subtitle:O?S:void 0,title:E,titleDomId:D,titleIconCell:C,titleIconCellSize:I})),U=x||w&&R?null:s.a.createElement(o.a.Configure,{SideNavButton:t,TabBar:n,TeamsSwitcher:l,backLocation:c,documentTitle:d,headerless:p,middleControl:h,onBackClick:_,rightControl:b,searchBoxOptions:k,subtitle:S,title:E,withSearchBox:L,withTweetButton:K});return s.a.createElement(s.a.Fragment,null,U,P)}}_.contextType=h.a,_.defaultProps={screenType:"secondaryDetail",showSubtitleOnWideDetail:!0};t.a=Object(g.a)(_)},OOE2:function(e,t,n){"use strict";n.d(t,"b",(function(){return T})),n.d(t,"c",(function(){return S})),n.d(t,"a",(function(){return E}));var a=n("ERkP"),l=n.n(a),s=n("v6aA"),i=n("3XMw"),r=n.n(i),o=n("Lsrn"),c=n("k/Ka");const d=(e={})=>Object(c.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.a.root,e.style],viewBox:"0 0 24 24"},l.a.createElement("g",null,l.a.createElement("path",{d:"M20.075 10.12c-.414 0-.75.337-.75.75v8.08c0 .413-.337.75-.75.75H4.095c-.412 0-.75-.337-.75-.75V8.292l6.778 4.518c.368.247.79.37 1.213.37.422 0 .844-.123 1.212-.368l4.53-3.014c.336-.223.428-.676.204-1.012-.223-.334-.675-.427-1.012-.203l-4.53 3.015c-.246.162-.563.163-.808 0l-7.586-5.06V5.496c0-.414.337-.75.75-.75h8.092c.414 0 .75-.336.75-.75s-.336-.75-.75-.75H4.096c-1.24 0-2.25 1.01-2.25 2.25V18.95c0 1.24 1.01 2.25 2.25 2.25h14.48c1.24 0 2.25-1.01 2.25-2.25v-8.078c0-.415-.337-.75-.75-.75zm3.165-6.87h-5.624l1.64-1.64c.315-.317.315-.828 0-1.144-.316-.315-.826-.316-1.143 0l-2.96 2.96c-.157.16-.236.367-.236.574 0 .207.08.414.237.57l2.96 2.962c.16.158.365.236.572.236s.413-.08.57-.236c.316-.315.316-.827 0-1.143l-1.64-1.64h5.623c.412 0 .75-.338.75-.75s-.338-.75-.75-.75z"})));d.metadata={width:24,height:24};var u=d,m=n("AQ79"),p=n("nySH"),g=n("4hmp"),y=n("aI6n"),h=n("Irs7"),_=n("MWbm"),b=n("Znyr"),v=n("csss"),k=n("t62R"),f=n("j7Bv"),F=n("CVqr");const T=r.a.cf2d1048,S=r.a.da2f9225;function E(e){const t=l.a.useContext(s.a),n=Object(h.b)(),{allowUntrustedInbox:a,allowUntrustedVDLInbox:i,secondaryInboxCounts:r,untrustedUnreadCount:o}=e,c=t.featureSwitches.isTrue("dm_vdl_enabled")&&t.featureSwitches.isTrue("dm_vdl_inbox_p0_enabled"),d=[g.a.requestPivotContainer,c?void 0:g.a.requestPivotContainerBorder],{description:E,showNotificationDot:C,titleWeight:I}=Object(F.a)(r);return a||i?l.a.createElement(_.a,{style:d},l.a.createElement(v.a,{description:c?E:void 0,label:c?l.a.createElement(k.b,{weight:I},T):T,link:Object(p.b)(m.d.SECONDARY),onPress:()=>{n.scribe({element:"requests_pivot",action:"click"})},renderRightContent:c?(R=C,R?()=>l.a.createElement(b.a,{pip:!0,standalone:!0,truncatedCountFormatter:()=>"",unreadCountLabel:()=>""}):()=>null):()=>o>0?l.a.createElement(b.a,{count:o,standalone:!0,truncatedCountFormatter:F.b,unreadCountLabel:S}):null,thumbnail:c?l.a.createElement(_.a,{testID:y.a.untrustedThumbnail},l.a.createElement(f.a,{Icon:u,color:"neutral"})):null,withoutArrow:c})):null;var R}},OOKO:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("ERkP"),l=n.n(a),s=n("rHpw"),i=n("MWbm");function r({spacing:e}){return l.a.createElement(i.a,{accessibilityRole:"separator",style:[o.divider,{marginVertical:null!=e?s.a.theme.spaces[e]:void 0}]})}const o=s.a.create((e=>({divider:{backgroundColor:e.colors.borderColor,height:e.borderWidths.small}})))},Oi4X:function(e,t,n){"use strict";n("Qavd"),n("MvUL"),n("kYxP");var a=n("ERkP"),l=n.n(a),s=n("0JOx"),i=n("MMRb"),r=n("CDB5"),o=n("RqPI"),c=n("1YZw"),d=n("hqKg"),u=n("kGix"),m=n("AQOc"),p=n("UhuB"),g=n("pNZL"),y=n("G6rE"),h=n("rxPX"),_=n("X/yg"),b=n("0KEI"),v=n("P1r1");const k=(e,t)=>t.conversationId,f=(e,t)=>i.selectConversation(e,k(0,t)),F=Object(d.createSelector)(i.selectFetchStatus,((e,t)=>i.selectConversationFetchStatus(e,k(0,t))),((e,t)=>e===u.a.LOADED?t:e)),T=Object(d.createSelector)(((e,t)=>i.selectEntriesForConversation(e,k(0,t))),o.s,((e,t)=>t?Object(_.e)(e,t):void 0)),S=(e,t)=>r.j(e,k(0,t)),E=(e,t)=>r.i(e,k(0,t)),C=(e,t)=>r.k(e,k(0,t)),I=(e,t)=>r.h(e,k(0,t)),R=(e,t)=>r.l(e,k(0,t)),L=(e,t)=>r.g(e,k(0,t)),K=(e,t)=>{const n=k(0,t);return i.selectInboxTypeByConversation(e,n)},x=e=>(t,n)=>r.a(e,t,n);var w=Object(h.a)().propsFromState((()=>({cardUrl:L,conversation:f,dataSaverMode:v.j,draftText:R,dtabBarInfo:v.m,entries:i.selectEntries,fetchStatus:F,gifMetadata:I,inboxType:K,isDmReceiptSettingEnabled:p.n,isNewGroupConversation:_.q,isUploading:S,media:E,mediaUploadProgress:C,newConversationParticipants:_.r,perspective:o.s,quickReplyOptions:T,tweetAttachment:_.s,users:y.e.selectAll}))).adjustStateProps((({cardUrl:e,conversation:t,dataSaverMode:n,draftText:a,dtabBarInfo:l,entries:s,fetchStatus:i,gifMetadata:r,inboxType:o,isDmReceiptSettingEnabled:c,isNewGroupConversation:d,isUploading:u,media:p,mediaUploadProgress:g,newConversationParticipants:y,perspective:h,quickReplyOptions:_,tweetAttachment:b,users:v})=>{const k=null==t?void 0:t.data;return{conversation:k&&Object(m.a)(k,s,v)||void 0,dataSaverMode:n,draftText:a,dtabBarInfo:l,entries:s,fetchStatus:i,gifMetadata:r,inboxType:o,isDmReceiptSettingEnabled:c,cardUrl:e,isNewGroupConversation:d,isUploading:u,media:p,mediaUploadProgress:g,newConversationParticipants:y,perspective:h,quickReplyOptions:_,tweetAttachment:b}})).propsFromActions((({conversationId:e})=>({acceptConversation:i.acceptConversation,addMedia:x(e),saveText:r.f,addToast:c.b,addWelcomeMessageToConversation:i.addWelcomeMessageToConversation,cancelUpload:Object(_.a)(e),createLocalApiErrorHandler:Object(b.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_CONVERSATION"),fetchConversationFuture:i.fetchConversationFuture,fetchConversationHistoricalSnapshot:i.fetchConversationHistoricalSnapshot,fetchConversationHistory:i.fetchConversationHistory,fetchConversationIfNeeded:i.fetchConversationIfNeeded,fetchInboxIfNeeded:i.fetchInboxIfNeeded,fetchUpdatesIfNeeded:i.fetchUpdatesIfNeeded,leaveConversation:i.leaveConversation,removeMedia:Object(_.b)(e),removeText:r.d,sendMessage:r.m,updateConversationReadState:i.updateConversationReadState,updateTweetDetailNav:g.b,updateTyping:i.updateTyping,removeConversation:i.removeConversation,popOutConversation:i.popOutConversation}))).withAnalytics(),M=n("I2k/"),O=n("4AMG"),A=n("uB9N"),D=n("htvZ"),P=n("v//M"),U=n("3XMw"),H=n.n(U),N=n("J2UM"),j=n("07FG"),B=n("I8M8"),W=n("yoO3"),q=n("7myi"),V=n("pHkl"),z=n("883S"),Q=n("z0MJ"),G=n.n(Q),Y=n("Es6L"),X=n("LsPn"),$=n("sl05"),J=n("GSsg"),Z=n("v6aA"),ee=n("EbOo");var te=Object(h.a)().propsFromActions((()=>({addToast:c.b,block:y.e.block,createLocalApiErrorHandler:Object(b.createLocalApiErrorHandlerWithContextFactory)("UNTRUSTED_CONVERSATION_ACTIONS"),muteDMUser:i.muteDMUser,unmuteDMUser:i.unmuteDMUser,unblock:y.e.unblock}))).withAnalytics({element:"untrusted_interstitial"}),ne=(n("AQ79"),n("u0B7")),ae=n("97Jx"),le=n.n(ae),se=n("tZH3"),ie=n("/yvb"),re=n("efqG");const oe=H.a.ccf2f24e,ce=H.a.ib3fe8aa;var de=({isGroup:e,onBlockClick:t,onReportClick:n,requestorScreenName:a})=>{const s={type:"destructiveOutlined"},i=l.a.createElement(ie.a,le()({},s,{accessibilityRole:"button"}),ce),r=l.a.createElement(ie.a,le()({},s,{onPress:n}),oe),o=l.a.useCallback(((e,s)=>l.a.createElement(se.a,{dismiss:e,flatBorders:"sheet"===s,onBlockClick:t,onReportClick:n,requestorScreenName:a,showBlock:!0,showCancel:"sheet"===s})),[t,n,a]);return e?r:l.a.createElement(re.a,{renderContent:o},i)},ue=n("MWbm"),me=n("cHvH"),pe=n("rHpw");const ge=e=>{const t=l.a.useContext(Z.a),n=t.featureSwitches.isTrue("dm_vdl_enabled")&&t.featureSwitches.isTrue("dm_vdl_chat_p0_enabled"),{loggedInUserId:a}=t,s=()=>e.onAccept(),i=()=>e.onBlock(),r=()=>e.onReport(),o=()=>e.onLeave();return l.a.createElement(me.a,null,(({windowWidth:t})=>{const c=t<=pe.a.theme.breakpoints.small;return l.a.createElement(ue.a,{style:ye.actionsContainer},n&&l.a.createElement(ie.a,{onPress:s,size:"medium",style:[ye.actionFullWidth,ye.actionMarginBottom],type:"primaryOutlined"},e.acceptButtonText),l.a.createElement(ue.a,{style:c?ye.actionFullWidth:[ye.actionHalfWidth,ye.actionMarginRight]},l.a.createElement(de,{isGroup:e.isGroup,onBlockClick:i,onReportClick:r,requestorScreenName:Object(_.m)(e.conversation,a).screenName})),l.a.createElement(ie.a,{onPress:o,size:"medium",style:c?[ye.actionFullWidth,ye.actionMarginTop]:[ye.actionHalfWidth,ye.actionMarginLeft],type:"destructiveOutlined"},e.declineButtonText),!n&&l.a.createElement(ie.a,{onPress:s,size:"medium",style:[ye.actionFullWidth,ye.actionMarginTop],type:"primaryOutlined"},e.acceptButtonText))}))},ye=pe.a.create((e=>({actionsContainer:{display:"flex",flexWrap:"wrap",flexDirection:"row"},actionFullWidth:{width:"100%"},actionHalfWidth:{width:`calc(50% - ${e.spaces.space4})`},actionMarginRight:{marginRight:e.spaces.space4},actionMarginLeft:{marginLeft:e.spaces.space4},actionMarginTop:{marginTop:e.spaces.space12},actionMarginBottom:{marginBottom:e.spaces.space12}})));var he=n("aITJ"),_e=n("t62R"),be=n("eb3s"),ve=n("vMjK"),ke=n("24HD"),fe=n("zCf4");const Fe=H.a.da878dc0,Te=H.a.d96cf7ce,Se=(H.a.gde6b425,H.a.e308019b,H.a.gf5e9ea6,H.a.hc52446c),Ee=H.a.f7e1ad65,Ce={headline:H.a.gdf4b790,text:H.a.bbf83d84,confirmButtonLabel:H.a.bb1d57b6},Ie=pe.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,borderColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:"1px",paddingVertical:e.spaces.space20,paddingHorizontal:e.componentDimensions.gutterHorizontal},copy:{paddingBottom:e.spaces.space20}})));var Re=te((e=>{const{analytics:t,conversation:n}=e,a=l.a.useContext(Z.a),s=Object(fe.f)(),r=Object(fe.g)(),[o,c]=l.a.useState(!1),[d,u]=l.a.useState(!1),m=l.a.useCallback((()=>({items:[{conversation_type:n.type===i.CONVERSATION_TYPE.GROUP?V.k.GROUP:V.k.ONE_TO_ONE}]})),[n.type]),p=l.a.useCallback(((e,n)=>{t.scribe({action:e,data:n||m()})}),[t,m]);l.a.useEffect((()=>{p("impression")}),[p]);const g=()=>{c(!0),u(!1)},y=()=>{c(!1)},h=()=>{u(!1)},b=()=>{var t;const{conversationId:a,inboxType:l,leaveConversation:s}=e,o=n.type===i.CONVERSATION_TYPE.GROUP?"leave_group":"delete_thread",d=(null==n?void 0:n.participants.length)||0,u=(null==r||null==(t=r.state)?void 0:t.position)||0,m={conversation_type:(null==n?void 0:n.type)===i.CONVERSATION_TYPE.GROUP?V.k.GROUP:V.k.ONE_TO_ONE,conversation_id:a,conversation_participant_count:d,position:u,inbox_type:Object(_.l)(l),entry_point:V.c.REQUEST_ACTION_SHEET};c(!1),s({conversationId:a}),p(o,m),v()},v=()=>{const{inboxType:t}=e;s.push(Object(_.g)(t))},k=()=>{(()=>{var t;const{acceptConversation:a,analytics:l,conversationId:s,inboxType:o}=e,c=(null==n?void 0:n.participants.length)||0,d=(null==r||null==(t=r.state)?void 0:t.position)||0;s&&(a(s),l.scribe({action:"accept",data:{conversation_id:s,conversation_type:n.type===i.CONVERSATION_TYPE.GROUP?V.k.GROUP:V.k.ONE_TO_ONE,conversation_participant_count:c,entry_point:V.c.REQUEST_ACTION_SHEET,inbox_type:Object(_.l)(o),position:d}}))})()},f=t=>()=>{const{addToast:n,block:a,createLocalApiErrorHandler:l}=e;u(!1),a(t).then((()=>{n({action:{label:ve.c,onAction:F(t)},text:ve.a})}),l(ee.a)),p("block")},F=t=>()=>{const{createLocalApiErrorHandler:n,unblock:a}=e;a(t).catch(n(ne.a)),p("unblock")},T=(n&&n.type)===i.CONVERSATION_TYPE.GROUP;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ue.a,{style:Ie.root},(e=>{const{loggedInUserId:t}=a;return l.a.createElement(_e.b,{style:Ie.copy},e?Se:Ee({senderName:Object(_.m)(n,t).name}))})(T),l.a.createElement(ge,{acceptButtonText:Fe,conversation:n,declineButtonText:Te,isGroup:T,onAccept:k,onBlock:()=>{c(!1),u(!0)},onLeave:g,onReport:()=>{const{analytics:t,conversationId:n,inboxType:a}=e;n&&(p("report"),s.push(Object(_.j)(n,window.location.pathname,t.contextualScribeNamespace,a)))}})),he.b.isKaiOS()?l.a.createElement(X.a,{leftText:Te,onLeftClick:g,onRightClick:k,rightText:Fe}):null,o?l.a.createElement(be.a,{confirmButtonLabel:Ce.confirmButtonLabel,confirmButtonType:"destructiveFilled",headline:Ce.headline,onCancel:y,onConfirm:b,text:Ce.text}):null,d?(()=>{const{loggedInUserId:e}=a,{idStr:t,screenName:l}=Object(_.m)(n,e);return Object(ke.j)({confirmation:Object(ke.f)(l),onClose:h,handleConfirm:f(t)})})():null)})),Le=n("yw4N"),Ke=n("rFBM"),xe=n("mw9i");const we=(e,t,n)=>{let a;return n?a={tweet:n}:t?t.mediaFile?a={media:t}:t.externalMediaDetails&&e&&(a={media:t,provider:e.provider,gifUrl:e.url}):a=null,a};var Me=n("jTgF"),Oe=n("+d3d"),Ae=n("mN6z");const De=H.a.badb01a0,Pe=H.a.d6b11d9c,Ue=H.a.i7ca1446,He=e=>e&&(e.tweet||e.media);class Ne extends l.a.PureComponent{constructor(e,t){super(e,t),this._composer=l.a.createRef(),this._handleLivePipelineUpdate=()=>{this._fetchUpdatesIfNeeded(),this._updatePolling&&this._updatePolling.restart()},this._fetchUpdatesIfNeeded=()=>{const{conversationId:e,createLocalApiErrorHandler:t,fetchUpdatesIfNeeded:n,isDmReceiptSettingEnabled:a}=this.props;n(a?{active_conversation_id:e,dm_users:!0}:{}).catch(t())},this._handleInitialFetch=()=>{this._initialFetch()},this._initialFetch=()=>{const{conversationId:e,createLocalApiErrorHandler:t,fetchInboxIfNeeded:n,fetchUpdatesIfNeeded:a}=this.props;return n().then((()=>{if(e)return this._fetchConversation(e).then((()=>this._requestWelcomeMessage(e)))})).then((()=>a())).catch(t()).finally((()=>{this._updatePolling&&this._updatePolling.start()}))},this._isUntrustedConversation=e=>{const{isNewGroupConversation:t}=this.props;return!(null!=e&&e.trusted||t)},this._leaveConversation=()=>{const{conversationId:e,createLocalApiErrorHandler:t,leaveConversation:n}=this.props;n({conversationId:e}).catch(t({showToast:!0}))},this._acceptConversation=e=>{const{acceptConversation:t,createLocalApiErrorHandler:n}=this.props;t(e).then((()=>{he.b.isMobileOS()&&this._fetchConversation(e)})).catch(n({showToast:!0}))},this._renderActions=()=>{const{conversation:e,conversationId:t,inboxType:n}=this.props;return e&&this._isUntrustedConversation(e)?e.read_only?null:t&&l.a.createElement(Re,{acceptConversation:this._acceptConversation,conversation:e,conversationId:t,inboxType:n,leaveConversation:this._leaveConversation}):l.a.createElement(l.a.Fragment,null,this._renderComposerBar(),he.b.isKaiOS()?l.a.createElement(X.a,{leftText:Ue,onLeftClick:this._handleInfoClick,onRightClick:this._handleComposeClick,rightText:De}):null)},this._render=()=>{var e,t,n;const{analytics:a,conversation:s,conversationId:i,drawerHeader:r,inboxType:o,isWide:c,location:d,onConversationProfileVisibilityChange:u,perspective:m}=this.props,{attachment:p,composerHeight:g}=this.state;return l.a.createElement(D.b,{key:i},l.a.createElement(Ke.a,{allowDragDrop:!He(p),onFilesAdded:this._handleDragDrop,style:$.a.dragDrop},l.a.createElement(Le.a,{style:[$.a.scrollView,!Object(Y.a)()&&!this._isUntrustedConversation(s)&&{paddingBottom:g}]},m&&s&&(null==d||null==(e=d.state)||!e.entryPoint||this.state.hasLoadedSnapshot)?l.a.createElement(O.a,{conversation:s,drawerHeader:r,inboxType:o,isWide:c,messageSearchEntryId:null==d||null==(t=d.state)?void 0:t.entryPoint,onConversationProfileVisibilityChange:u,onForwardRequest:this._handleForwardRequest,onHistoryRequest:null!=d&&null!=(n=d.state)&&n.entryPoint?this._handleRelativeHistoryRequest:this._handleHistoryRequest,perspective:m,scribeNamespace:a.contextualScribeNamespace,shouldScrollToCenter:this.state.shouldScrollToCenter,style:$.a.activity}):null),this._renderActions()))},this._handleNavHeightChange=e=>{this.setState({composerHeight:`${e}px`})},this._handleTyping=()=>{this._throttleSaveDraftText(),this._throttleUpdateTyping()},this._throttleUpdateTyping=Object(Oe.a)((()=>{const{conversationId:e,createLocalApiErrorHandler:t,updateTyping:n}=this.props;e&&n({conversationId:e}).catch(t())}),2e3,{trailing:!1}),this._throttleSaveDraftText=Object(Oe.a)((()=>{const{conversationId:e}=this.props;e&&this._handleSaveDraftText()}),1e3,{leading:!1}),this._handleDragDrop=e=>{this._currentComposer&&this._currentComposer.handleAddMediaFiles(e)},this._handleForwardRequest=()=>{const{conversation:e,conversationId:t,createLocalApiErrorHandler:n,fetchConversationFuture:a}=this.props;this.setState({shouldScrollToCenter:!1}),null!=e&&e.max_search_entry_id&&a({conversationId:t}).catch(n())},this._handleHistoryRequest=()=>{const{conversationId:e,createLocalApiErrorHandler:t,fetchConversationHistory:n}=this.props;n({conversationId:e}).catch(t())},this._handleRelativeHistoryRequest=()=>{const{conversationId:e,createLocalApiErrorHandler:t,fetchConversationHistory:n}=this.props;this.setState({shouldScrollToCenter:!1}),n({conversationId:e,isSearch:!0}).catch(t())},this._willSendMessage=(e,t,n)=>{const{analytics:a,cardUrl:l,conversation:s,conversationId:r,gifMetadata:o,tweetAttachment:c}=this.props,{attachment:d}=this.state,u=null!=s&&s.participants?s.participants.length:0,m=(null==s?void 0:s.type)===i.CONVERSATION_TYPE.GROUP;e.quickReply||n||(this._currentComposer&&this._currentComposer.clear(),this._currentComposer&&this._currentComposer.focus());const p=((e,t,n,a,l)=>{var s;if(e)return"gif";if(t)return"card";if(a)return"tweet";const i=null==l||null==(s=l.media)?void 0:s.mediaFile,r=null!=i&&i.isVideo?"video":null!=i&&i.isGif?"gif":"photo";return i?r:n?"text":"unknown"})(o,l,t,c,d);return r&&a.scribe({...a.contextualScribeNamespace,element:p,action:"send_dm",data:{conversation_id:r,conversation_participant_count:u,conversation_type:m?V.k.GROUP:V.k.ONE_TO_ONE}}),this.setState({isSending:!0}),p},this._didSendMessage=(e,t,n,a,l)=>{if(l){const{analytics:e,history:a,newConversationParticipants:l}=this.props;e.scribe({...e.contextualScribeNamespace,element:n,action:"send_dm",data:{conversation_id:t,conversation_participant_count:l?l.length+1:0,conversation_type:V.k.GROUP}}),this.setState({attachment:null}),a.replace(`/messages/${t}`)}else!e.quickReply&&a&&(this._currentComposer&&this._currentComposer.clear(),this._currentComposer&&this._currentComposer.focus());this.setState({isSending:!1})},this._failedToSendMessage=(e,t)=>{const{createLocalApiErrorHandler:n}=this.props;if(t){const{addToast:t,createLocalApiErrorHandler:n}=this.props;if(this.setState({isSending:!1}),Object(Me.d)(e)&&e.code===B.b.CANCELED)return;if(Object(Me.d)(e)){const n=Object(Me.b)(e,Pe);n&&t(n)}else n(z.b)(e)}else n(z.b)},this._handleSendMessage=(e,t,n)=>{var a,l;const{cardUrl:s,conversationId:i,history:r,location:o,newConversationParticipants:c,perspective:d,sendMessage:u,tweetAttachment:m}=this.props,{attachment:p}=this.state,g=!(!p||!p.media),y=this._willSendMessage(e,t,g);if(!i){return u({senderId:d,recipients:c&&c.map((({data:e})=>e.id_str)),text:t,tweetAttachment:m}).then((t=>{this._didSendMessage(e,t,y,g,!0)})).catch((e=>{this._failedToSendMessage(e,!0)})),Promise.resolve()}return!this.state.attachment||null!=(a=this.state.attachment)&&null!=(l=a.media)&&l.uploading||(this.setState({attachment:null}),r.replace(o.pathname)),u({senderId:d,cardUrl:s,conversationId:i,text:t,tweetAttachment:m,...e&&e.quickReply&&{quickReply:e.quickReply}}).then((()=>{this._didSendMessage(e,i,y,g,!1)})).catch((e=>{this._failedToSendMessage(e,!1)}))},this._handlePopOutConvo=()=>{const{conversationId:e,popOutConversation:t}=this.props;t(e)},this._handleInfoClick=()=>{const{conversationId:e,history:t}=this.props;e&&t.push(`/messages/${e}/info`)},this._handleComposeClick=()=>{this._currentComposer&&this._currentComposer.focus()},this._handleSaveDraftText=()=>{const{conversationId:e,saveText:t}=this.props;e&&this._currentComposer&&t(e,this._currentComposer.value())},this.state={attachment:we(e.gifMetadata,e.media,e.tweetAttachment),composerHeight:pe.a.theme.componentDimensions.appBarHeight,hasLoadedSnapshot:!1,isSending:!1,shouldScrollToCenter:!1}}componentDidMount(){var e,t;return this._initializePolling({interval:3e3}),this._initializeLivePipeline(),this._focusComposerIfNeeded(),null!=(e=this.props.location)&&null!=(t=e.state)&&t.entryPoint&&this.setState({shouldScrollToCenter:!0}),this._initialFetch()}_focusComposerIfNeeded(){G()((()=>Object(N.a)().then((({KEYBOARD:e,MOUSE:t,detectedType:n})=>{const a=this.props.quickReplyOptions;(n(e)||n(t))&&!a&&this._currentComposer&&this._currentComposer.focus()}))))}_initializeLivePipeline(){const{conversationId:e}=this.props;Object(s.h)().then((({LivePipeline:t})=>{e&&t.isSupportedAndReady(this.context.featureSwitches)&&this.context.featureSwitches.isTrue("livepipeline_dm_features_enabled")&&!this._livePipelineSubscription&&(this._livePipelineSubscription=t.get().subscribeTopic(`/dm_update/${e}`,this._handleLivePipelineUpdate),this._initializePolling({interval:1e4}))}))}_initializePolling({interval:e}){this._updatePolling&&this._updatePolling.stop(),this._updatePolling=new J.a(this._fetchUpdatesIfNeeded,{interval:e})}componentWillUnmount(){const{conversation:e,conversationId:t,removeConversation:n}=this.props,a=(null==e?void 0:e.entries)||[];this._updatePolling&&this._updatePolling.stop(),this._updatePolling=void 0,this._livePipelineSubscription&&this._livePipelineSubscription.teardown(),0===a.length&&n(t),1===a.length&&"welcome_message_create"===a[0].type&&n(t)}componentDidUpdate(e,t){var n,a,l;const{conversation:s,conversationId:i,fetchStatus:r,isUploading:o,location:c,quickReplyOptions:d,updateConversationReadState:m}=this.props;var p;((null==c||null==(n=c.state)?void 0:n.entryPoint)!==(null==(a=e.location)||null==(l=a.state)?void 0:l.entryPoint)&&i&&this._fetchConversation(i),i!==e.conversationId)?(i&&this._fetchConversation(i),this._focusComposerIfNeeded(),this._livePipelineSubscription&&this._livePipelineSubscription.teardown(),this._initializeLivePipeline()):((null==s?void 0:s.sort_event_id)!==(null==(p=e.conversation)?void 0:p.sort_event_id)&&m(i),o||!e.isUploading||d||this._currentComposer&&this._currentComposer.focus(),e.fetchStatus===u.a.LOADED&&r!==u.a.LOADED&&i&&this._fetchConversation(i))}UNSAFE_componentWillReceiveProps(e){const{media:t}=this.props,{media:n}=e;Object(Ae.a)(t,n)||this.setState({attachment:we(e.gifMetadata,e.media,e.tweetAttachment)})}render(){const{fetchStatus:e}=this.props;return l.a.createElement(W.a,null,l.a.createElement(xe.a,{style:[$.a.root,he.b.isKaiOS()&&$.a.kaiOSFix]},l.a.createElement(P.a,{fetchStatus:e,onRequestRetry:this._handleInitialFetch,render:this._render})))}_renderComposerBar(){const{addMedia:e,analytics:t,cardUrl:n,conversation:a,conversationId:s,dataSaverMode:i,draftText:r,dtabBarInfo:o,history:c,isUploading:d,mediaUploadProgress:u,quickReplyOptions:m,removeMedia:p,richTextInputContext:g,typeaheadWrapper:y}=this.props,{attachment:h,isSending:_}=this.state,b=this.props.prefillText||r;return null!=a&&a.read_only?null:l.a.createElement(A.a,{attachment:h,conversationId:s,disabled:d,dtabBarInfo:o,history:c,isCardPreviewTombstoned:Object(j.a)(n),isSending:_,isUploading:d,key:s,mediaUploadProgress:u,onAddMedia:e,onBlur:this._handleSaveDraftText,onHeightChange:this._handleNavHeightChange,onPrimaryAction:this._handleSendMessage,onTyping:i?this._throttleSaveDraftText:this._handleTyping,prefillText:"string"==typeof b?b:void 0,quickReplyOptions:m,ref:this._composer,removeMedia:p,richTextInputContext:g,scribeNamespace:t.contextualScribeNamespace,showPrimaryActionIconInsteadOfLabel:!0,typeaheadWrapper:y})}get _currentComposer(){return this._composer.current}_fetchConversation(e){var t;const{createLocalApiErrorHandler:n,fetchConversationHistoricalSnapshot:a,fetchConversationIfNeeded:l,location:s,updateConversationReadState:r}=this.props;var o;return null!=s&&null!=(t=s.state)&&t.entryPoint?(this.setState({hasLoadedSnapshot:!1}),a({conversationId:e,entryId:null==s||null==(o=s.state)?void 0:o.entryPoint}).then((e=>{var t,n;let a=!0;(null==e||null==(t=e.result)||null==(n=t.conversation_timeline)?void 0:n.status)===i.PAGINATION_STATUS.AT_END&&(a=!1),this.setState({hasLoadedSnapshot:!0,shouldScrollToCenter:a})})).catch((e=>(this.setState({hasLoadedSnapshot:!0}),n(e))))):l({conversationId:e}).then((()=>r(e))).catch(n(Object(M.a)(e)))}_requestWelcomeMessage(e){var t;const{addWelcomeMessageToConversation:n,conversation:a,createLocalApiErrorHandler:l,location:s}=this.props,{text:r}=s.query,o=Array.isArray(s.query.welcome_message_id)?s.query.welcome_message_id[0]:s.query.welcome_message_id,c=!!this.state.attachment||!(!r||o),d=!a||!a.type||a.type===i.CONVERSATION_TYPE.GROUP,u=a&&(null==a||null==(t=a.participants)?void 0:t.length)<=1;return c||d||u?Promise.resolve():n(e,o).catch(l({showToast:!1}))}}Ne.contextType=Z.a,Ne.defaultProps={isNewGroupConversation:!1,typeaheadWrapper:q.a};const je=w(Ne);t.a=je},PnKw:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));n("kYxP");var a=n("ERkP"),l=n.n(a),s=n("TIdA"),i=n("t62R"),r=n("A91F"),o=n("/yvb"),c=n("rHpw"),d="inlinePrompt",u="inlinePrompt-primaryAction",m="inlinePrompt-secondaryAction",p="inlinePrompt-centeredImageContainer",g=n("MWbm");class y extends l.a.Component{constructor(...e){super(...e),this._renderImage=(e,t)=>{const n=l.a.createElement(s.a,{accessibilityLabel:"",aspectMode:r.a.exact(e.width/e.height),backgroundColor:e.backgroundColor,customVariants:t,image:e});return e.isCentered?l.a.createElement(g.a,{style:h.centeredImage,testID:p},l.a.createElement(g.a,{style:{width:`${e.width}px`,height:`${e.height}px`}},n)):n},this._renderTitle=()=>{const{headline:e}=this.props;return e?l.a.createElement(i.b,{accessibilityRole:"heading",align:"left",size:"title3",style:h.flexGrow,weight:"heavy",withHashflags:!0},e):null},this._renderBodyText=()=>{const{subtext:e}=this.props;return e?l.a.createElement(i.b,{align:"left",color:"gray700",style:this.styles.body,withHashflags:!0},e):null},this._renderAction=({action:e,buttonSize:t,buttonType:n,style:a,testID:s})=>{const{secondaryAction:i}=this.props,{link:r,onClick:c,text:d}=e;return l.a.createElement(g.a,{style:[this.styles.actionContainer,a,{justifyContent:"flex-start"}],testID:s},l.a.createElement(o.a,{link:r,onPress:c,size:t,style:{width:i?"100%":"auto"},type:n},d))}}render(){const{image:e,imageVariants:t,primaryAction:n,rightControl:a,secondaryAction:s,shouldRenderBorder:i}=this.props;return l.a.createElement(g.a,{style:i?[_.root,_.rootMargin]:h.root},l.a.createElement(l.a.Fragment,null,e?this._renderImage(e,t):null,l.a.createElement(g.a,{style:this.styles.rootPadding,testID:d},this._renderTitle(),this._renderBodyText(),n?this._renderAction({action:n,buttonType:"primaryFilled",style:this.styles.primaryAction,buttonSize:"large",testID:u}):null,s?this._renderAction({action:s,buttonType:"primaryOutlined",style:this.styles.secondaryAction,buttonSize:"large",testID:m}):null)),a?l.a.createElement(g.a,{style:h.rightControl},a):null)}get styles(){return this.props.isCompact?v:b}}y.defaultProps={shouldRenderBorder:!1};const h=c.a.create((e=>({root:{backgroundColor:e.colors.cellBackground},flexGrow:{flexGrow:1},centeredImage:{display:"flex",flexDirection:"row",justifyContent:"center"},rightControl:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical,position:"absolute",right:0,top:0}}))),_=c.a.create((e=>({root:{borderColor:e.colors.nestedBorderColor,borderWidth:e.borderWidths.small,borderRadius:e.borderRadii.xLarge,overflow:"hidden"},rootMargin:{marginLeft:e.spaces.space16,marginRight:e.spaces.space16}}))),b=c.a.create((e=>({rootPadding:{padding:e.spaces.space32},body:{marginTop:e.spaces.space8},actionContainer:{flexDirection:"row"},primaryAction:{marginTop:e.spaces.space28},secondaryAction:{marginTop:e.spaces.space16}}))),v=c.a.create((e=>({rootPadding:{padding:e.spaces.space16},body:{marginTop:e.spaces.space2},actionContainer:{flexDirection:"row"},primaryAction:{marginTop:e.spaces.space4},secondaryAction:{marginTop:e.spaces.space2}})))},QvgI:function(e,t,n){"use strict";n("kYxP"),n("Qavd");var a=n("ERkP"),l=n.n(a),s=n("BUB3"),i=n("rxPX"),r=n("0KEI");const o=(e,{module:t})=>t.selectItems(e),c=(e,{module:t})=>t.selectFetchStatus(e);var d=Object(i.a)().propsFromState((()=>({fetchStatus:c,sliceItems:o}))).adjustStateProps((({fetchStatus:e,sliceItems:t})=>{const n=(e=>{var t,n;return(null==(t=e.find((e=>e.groupData)))||null==(n=t.groupData)?void 0:n.result)||[]})(t),a=(e=>{var t,n;return(null==(t=e.find((e=>e.peopleData)))||null==(n=t.peopleData)?void 0:n.result)||[]})(t),l=(e=>{var t,n;return(null==(t=e.find((e=>e.messageData)))||null==(n=t.messageData)?void 0:n.conversationIds)||[]})(t);return{entryIds:(e=>{var t,n;return(null==(t=e.find((e=>e.messageData)))||null==(n=t.messageData)?void 0:n.entryIds)||[]})(t),fetchStatus:e,groupConversationIds:n,groupHighlightingTokens:(e=>{var t,n;return null==(t=e.find((e=>e.groupData)))||null==(n=t.groupData)?void 0:n.highlightingTokens})(t),messageConversationIds:l,messageHighlightingTokens:(e=>{var t,n;return null==(t=e.find((e=>e.messageData)))||null==(n=t.messageData)?void 0:n.highlightingTokens})(t),peopleHighlightingTokens:(e=>{var t,n;return null==(t=e.find((e=>e.peopleData)))||null==(n=t.peopleData)?void 0:n.highlightingTokens})(t),peopleSearchConversationIds:a,sliceItems:t}})).propsFromActions((({module:e})=>({createLocalApiErrorHandler:Object(r.createLocalApiErrorHandlerWithContextFactory)("DM_SEARCH_ALL_CONTEXT"),fetchSearchIfNeeded:e.fetchIfNeeded}))),u=n("d9IC"),m=n("MDbM"),p=n("v//M"),g=n("3XMw"),y=n.n(g),h=n("MWbm"),_=n("0yYu"),b=n("t62R"),v=n("rHpw"),k=n("v6aA"),f=n("lBmi"),F=n("91AQ"),T=n("6ZHn");const S=y.a.c94ac69e,E=y.a.a2f81050,C=y.a.g2fd3206,I=y.a.ffd9cfe6;class R extends l.a.Component{constructor(...e){super(...e),this._groupBucketSize=this.context.featureSwitches.getNumberValue("dm_inbox_search_groups_bucket_size"),this._messagesBucketSize=this.context.featureSwitches.getNumberValue("dm_inbox_search_messages_bucket_size"),this._peopleBucketSize=this.context.featureSwitches.getNumberValue("dm_inbox_search_people_bucket_size"),this._renderSearchResults=()=>{const{groupConversationIds:e,messageConversationIds:t,peopleSearchConversationIds:n,renderEmptyState:a}=this.props,s=n.length&&e.length,i=this._groupBucketSize<e.length,r=this._messagesBucketSize<t.length,o=this._peopleBucketSize<n.length;return(null==e?void 0:e.length)||n.length||t.length?l.a.createElement(l.a.Fragment,null,n.length?this._renderPeopleSection():null,s&&!o?l.a.createElement(_.a,null):null,o?this._renderDMSearchFooter(C):null,e.length?this._renderGroupsSection():null,i?this._renderDMSearchFooter(S):null,t.length?this._renderMessagesSection():null,r?this._renderDMSearchFooter(E):null):a()},this._handleFetch=()=>{const{createLocalApiErrorHandler:e,fetchSearchIfNeeded:t}=this.props;t().catch(e())},this._renderDMSearchFooter=e=>{const{location:t}=this.props;return l.a.createElement(h.a,{style:L.header},l.a.createElement(b.b,{link:{pathname:t.pathname,state:{tab:e}}},I))},this._renderDMHeader=({headerText:e,icon:t})=>l.a.createElement(u.a,{headerText:e,icon:t}),this._renderGroupsSection=()=>{const{groupConversationIds:e,groupHighlightingTokens:t,pinConversation:n,renderInboxItem:a,unpinConversation:s}=this.props;return l.a.createElement(l.a.Fragment,null,this._renderDMHeader({icon:f.a,headerText:S}),e.map(((l,i)=>l?a({conversationIds:e,pinConversation:n,unpinConversation:s,highlightingTokens:t})(l):null)).slice(0,this._groupBucketSize))},this._renderMessagesSection=()=>{const{entryIds:e,messageConversationIds:t,messageHighlightingTokens:n,pinConversation:a,renderInboxItem:s,unpinConversation:i}=this.props;return l.a.createElement(l.a.Fragment,null,this._renderDMHeader({icon:F.a,headerText:E}),e.map(((l,r)=>l?((l,r)=>s({conversationIds:t,isMessageItem:!0,messageIds:e,pinConversation:a,unpinConversation:i,highlightingTokens:n})(l))(l):null)).slice(0,this._messagesBucketSize))},this._renderPeopleSection=()=>{const{peopleHighlightingTokens:e,peopleSearchConversationIds:t,pinConversation:n,renderInboxItem:a,unpinConversation:s}=this.props;return l.a.createElement(l.a.Fragment,null,this._renderDMHeader({icon:T.a,headerText:C}),t.map(((l,i)=>l?a({conversationIds:t,pinConversation:n,unpinConversation:s,highlightingTokens:e})(l):null)).slice(0,this._peopleBucketSize))}}componentDidUpdate(e){const{fetchStatus:t,module:n}=this.props;e.module!==n&&t!==m.a.FAILED&&this._handleFetch()}componentDidMount(){this._handleFetch()}render(){const{fetchStatus:e,loadingLabel:t}=this.props;return l.a.createElement(p.a,{accessibilityLabel:t,fetchStatus:e,onRequestRetry:this._handleFetch,render:this._renderSearchResults})}}R.contextType=k.a;const L=v.a.create((e=>({header:{backgroundColor:e.colors.cellBackground,paddingLeft:e.spaces.space16,paddingVertical:e.spaces.space12,alignItems:"center",flexDirection:"row",justifyContent:"space-between",borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:e.borderWidths.small,borderTopColor:e.colors.borderColor}})));var K=d(R),x=n("hqKg"),w=n("wAC9"),M=n("q+MS"),O=n("pHkl");var A=e=>Object(w.a)({contextSuffix:"DM_SEARCH_SLICE",getFetchApiEndpoint:e=>e.DirectMessagesGraphQL.fetchDMAllSearch,sliceKey:`${O.j}-${e}`,getEndpointParams:t=>({...t,query:e}),mapEntitiesToActions:M.a});const D=(e,t)=>t.query;var P=Object(i.a)().propsFromState((()=>({sliceModule:Object(x.createSelector)(D,(e=>e?A(e):void 0))})))((e=>{const{loadingLabel:t,location:n,pinConversation:a,query:s,renderEmptyState:i,renderInboxItem:r,sliceModule:o,unpinConversation:c}=e;return o?l.a.createElement(K,{loadingLabel:t,location:n,module:o,pinConversation:a,query:s,renderEmptyState:i,renderInboxItem:r,unpinConversation:c}):i()})),U=n("MMRb"),H=n("kGix");const N=U.selectRecentSearches,j=(e,t)=>t.query?U.selectSearchConversations(e,t.query):[],B=(e,t)=>t.query?U.selectSearchFetchStatus(e,t.query):H.a.LOADED,W=(e,t)=>t.conversationIds||[],q=(e,t)=>null!=e&&e.length?t.filter((t=>e.indexOf(t)>-1)):e;var V,z=Object(i.a)().propsFromState((()=>({conversationIds:W,recentSearches:N,searchFetchStatus:B,searchConversationIds:j}))).adjustStateProps((({conversationIds:e,recentSearches:t,searchConversationIds:n,searchFetchStatus:a})=>({conversationIds:e,recentSearches:t,searchFetchStatus:a,searchConversationIds:q(n,e)}))).propsFromActions((()=>({addRecentSearch:U.addRecentSearches,createLocalApiErrorHandler:Object(r.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_SEARCH"),search:U.searchConversations,clearRecentSearch:U.clearRecentSearch,clearRecentSearches:U.clearRecentSearches}))),Q=n("s14A"),G=n("h3MB"),Y=(n("YWiL"),n("mN6z")),X=n("TEoO"),$=n("NjAB"),J=n("Fr3L"),Z=n("uDfI"),ee=n("s8G+"),te=n("DQzJ");const ne=void 0!==V?V:V=n("8/ot"),ae="DM_GROUP_SEARCH",le={context:ae},se=e=>e,ie=e=>{var t;const{footer:n,noItemsRenderer:a,onScrollEnd:s,pinConversation:i,renderInboxItem:r,searchTerm:o,unpinConversation:c}=e,d=Object(Z.c)(),u=Object(ee.a)("dm_inbox_search_query_highlighting_conversation_results_enabled"),{data:m,fetchNext:p,hasNext:g}=Object(te.a)(ne,{query:o,withConversationQueryHighlights:u}),{entities:y,highlightingTokens:h,normalizedConversations:_}=l.a.useMemo((()=>{var e,t,n,a;const l=null==m||null==(e=m.dm_group_convo_slice_result)||null==(t=e.items)?void 0:t.map((e=>null==e?void 0:e.dm_convo_search)),s=u?null==m||null==(n=m.dm_group_convo_slice_result)||null==(a=n.items)?void 0:a.map((e=>{var t;return null==e||null==(t=e.highlighting)?void 0:t.query_tokens})):void 0,i=Object($.b)(l,[G.a]);return{normalizedConversations:i,entities:{...null==i?void 0:i.entities},highlightingTokens:s}}),[null==m||null==(t=m.dm_group_convo_slice_result)?void 0:t.items,u]),b=(e=>{const t=l.a.useRef();return l.a.useEffect((()=>{t.current=e})),t.current})(m);return l.a.useEffect((()=>{Object(Y.a)(m,b)||d(Object(M.a)(y,!0))}),[y,m,b,d]),l.a.createElement(X.a,{cacheKey:ae,footer:g?null:n,identityFunction:se,items:null==_?void 0:_.result,noItemsRenderer:a,onNearEnd:p,onScrollEnd:s,renderer:r({conversationIds:null==_?void 0:_.result,isMessageItem:!1,pinConversation:i,unpinConversation:c,highlightingTokens:h}),withoutHeadroom:!0})};function re(e){return l.a.createElement(J.a,{errorConfig:le},l.a.createElement(ie,e))}var oe;const ce=void 0!==oe?oe:oe=n("Rccd"),de="DM_PEOPLE_SEARCH",ue={context:de},me=e=>e,pe=e=>{var t;const{footer:n,noItemsRenderer:a,onScrollEnd:s,pinConversation:i,renderInboxItem:r,searchTerm:o,unpinConversation:c}=e,d=Object(Z.c)(),u=Object(ee.a)("dm_inbox_search_query_highlighting_conversation_results_enabled"),{data:m,fetchNext:p,hasNext:g}=Object(te.a)(ce,{query:o,withConversationQueryHighlights:u}),{entities:y,highlightingTokens:h,normalizedConversations:_}=l.a.useMemo((()=>{var e,t,n,a;const l=null==m||null==(e=m.dm_people_convo_slice_result)||null==(t=e.items)?void 0:t.map((e=>null==e?void 0:e.dm_convo_search)),s=u?null==m||null==(n=m.dm_people_convo_slice_result)||null==(a=n.items)?void 0:a.map((e=>{var t;return null==e||null==(t=e.highlighting)?void 0:t.query_tokens})):void 0,i=Object($.b)(l,[G.a]);return{normalizedConversations:i,entities:{...null==i?void 0:i.entities},highlightingTokens:s}}),[null==m||null==(t=m.dm_people_convo_slice_result)?void 0:t.items,u]),b=(e=>{const t=l.a.useRef();return l.a.useEffect((()=>{t.current=e})),t.current})(m);return l.a.useEffect((()=>{Object(Y.a)(m,b)||d(Object(M.a)(y,!0))}),[y,m,b,d]),l.a.createElement(X.a,{cacheKey:de,footer:g?null:n,identityFunction:me,items:null==_?void 0:_.result,noItemsRenderer:a,onNearEnd:p,onScrollEnd:s,renderer:r({conversationIds:null==_?void 0:_.result,isMessageItem:!1,pinConversation:i,unpinConversation:c,highlightingTokens:h}),withoutHeadroom:!0})};function ge(e){return l.a.createElement(J.a,{errorConfig:ue},l.a.createElement(pe,e))}var ye,he=n("ZYFu");const _e=void 0!==ye?ye:ye=n("y59G"),be="DM_MESSAGE_SEARCH",ve={context:be},ke=e=>e,fe=e=>{var t;const{footer:n,noItemsRenderer:a,onScrollEnd:s,pinConversation:i,renderInboxItem:r,searchTerm:o,unpinConversation:c}=e,d=Object(Z.c)(),u=Object(ee.a)("dm_inbox_search_message_attachment_previews_enabled"),m=Object(ee.a)("dm_inbox_search_query_highlighting_message_results_enabled"),p=Object(ee.a)("rito_safety_mode_blocked_profile_enabled"),g=Object(ee.a)("super_follow_user_api_enabled"),{data:y,fetchNext:h,hasNext:_}=Object(te.a)(_e,{query:o,withAttachments:u,withMessageQueryHighlights:m,withSafetyModeUserFields:p,withSuperFollowsUserFields:g}),{entities:b,highlightingTokens:v,normalizedConversations:k,normalizedMessages:f}=l.a.useMemo((()=>{var e,t,n;const a=null==y||null==(e=y.dm_message_slice_result)||null==(t=e.items)?void 0:t.map((e=>{var t,n;return null==e||null==(t=e.dm_event)||null==(n=t.legacy)?void 0:n.conversation})),l=null==y||null==(n=y.dm_message_slice_result)?void 0:n.items,s=m?null==l?void 0:l.map((e=>{var t;return null==e||null==(t=e.highlighting)?void 0:t.query_tokens})):void 0,i=Object($.b)(a,[G.a]),r=Object($.b)(l,[G.b]);return{normalizedConversations:i,normalizedMessages:r,entities:{...null==i?void 0:i.entities,...null==r?void 0:r.entities},highlightingTokens:s}}),[null==y||null==(t=y.dm_message_slice_result)?void 0:t.items,m]),F=(e=>{const t=l.a.useRef();return l.a.useEffect((()=>{t.current=e})),t.current})(y);return l.a.useEffect((()=>{Object(Y.a)(y,F)||d(Object(M.a)(b,!0))}),[b,y,F,d]),l.a.createElement(X.a,{cacheKey:be,footer:_?null:n,identityFunction:ke,items:null==f?void 0:f.result,noItemsRenderer:a,onNearEnd:h,onScrollEnd:s,renderer:r({conversationIds:null==k?void 0:k.result,isMessageItem:!0,messageIds:null==f?void 0:f.result,pinConversation:i,unpinConversation:c,highlightingTokens:v}),withoutHeadroom:!0})};function Fe(e){return l.a.createElement(J.a,{errorConfig:ve},l.a.createElement(fe,e))}var Te=n("j7Bv"),Se=n("htQn"),Ee=n("5mJL"),Ce=n("/yvb"),Ie=n("VwDm"),Re=n("hOZg");const Le=y.a.dbd5d400;class Ke extends l.a.PureComponent{render(){const{clearRecentSearch:e,handleRecentSearchClick:t,recentSearch:n}=this.props,a=l.a.createElement(Te.a,{Icon:Ie.a,color:"neutral",size:"xLarge",style:xe.searchIcon}),s=[xe.listItemView,xe.bottomBorder];return l.a.createElement(Se.a,{onPress:t,style:s},l.a.createElement(h.a,null,l.a.createElement(Ee.a,{avatarCell:a,avatarSize:"xLarge",cellStyle:xe.avatarColumn},l.a.createElement(h.a,{style:xe.container},l.a.createElement(b.b,{numberOfLines:1},n),l.a.createElement(Ce.a,{accessibilityLabel:Le,borderColor:"transparent",icon:l.a.createElement(Re.a,null),onPress:e,type:"brandText"})))))}}const xe=v.a.create((e=>({container:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},searchIcon:{marginRight:e.spaces.space12,padding:e.spaces.space4},avatarColumn:{flexGrow:1,minWidth:"32px"},bottomBorder:{borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor},listItemView:{backgroundColor:e.colors.cellBackground,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space12,width:"100%"}})));var we=Ke,Me=n("DbJc"),Oe=n("AQ79"),Ae=n("tI3i"),De=n.n(Ae),Pe=n("sNn6"),Ue=n("IG4P"),He=n("RJrc"),Ne=n("TnY3"),je=n("FIs5"),Be=n("cm6r"),We=n("6OUF"),qe=n("k/OQ"),Ve=n("BcsE"),ze=n("VY6S"),Qe=n("95Se");const Ge=e=>e,Ye=y.a.b08821f4,Xe=y.a.a66ac766,$e=y.a.fe61929e,Je=y.a.a846382a,Ze=y.a.b9dae4f4,et=y.a.e7fb2028,tt=y.a.ae111c99,nt=y.a.efb6c154,at=y.a.e8581cce,lt=y.a.f08940ac,st=y.a.gaae1fd6,it=y.a.i5d7593a,rt=y.a.f8321d82,ot=y.a.c94ac69e,ct=y.a.a2f81050,dt=y.a.g2fd3206,ut=y.a.fb3c8e74;class mt extends l.a.Component{constructor(...e){super(...e),this.state={debouncedQuery:"",isLoadingMore:!1,isRefreshing:!1},this._conversationHighlightingEnabled=this.context.featureSwitches.isTrue("dm_inbox_search_query_highlighting_conversation_results_enabled")&&this.context.featureSwitches.isTrue("direct_messages_incremental_holdback_2022h1"),this._isVDLEnabled=this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_inbox_p0_enabled"),this._messageSearchEnabled=this.context.featureSwitches.isTrue("dm_inbox_search_message_results_enabled")&&this.context.featureSwitches.isTrue("direct_messages_incremental_holdback_2022h1"),this._modularSearchEnabled=this.context.featureSwitches.isTrue("dm_inbox_search_modular_results_enabled"),this._setInputRef=e=>{this._textInputRef=e},this._handleConversationClick=(e,t,n,a)=>{const{analytics:l}=this.props,s=(null==n?void 0:n.participants.length)||0,i=(null==n?void 0:n.type)===U.CONVERSATION_TYPE.GROUP;l.scribe({element:"thread",action:"click",data:{event_value:this.props.query.length,conversation_id:t,conversation_participant_count:s,conversation_type:i?O.k.GROUP:O.k.ONE_TO_ONE,position:a}})},this._renderEmptyDMSearchInbox=()=>{const{analytics:e,query:t}=this.props,{debouncedQuery:n}=this.state;return n&&t?(e.scribe({component:"search",element:"results",action:"empty"}),l.a.createElement(je.a,{buttonLink:"/messages/compose",buttonText:lt,header:tt({query:n}),message:this._messageSearchEnabled?at:nt,onButtonPress:this._handleComposeButtonPress})):l.a.createElement(h.a,{style:pt.emptyState},l.a.createElement(b.b,{align:"center",color:"gray700"},this._messageSearchEnabled?it:st))},this._renderRecentSearches=()=>{const{analytics:e,query:t,recentSearches:n}=this.props;return n.length&&!t?l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a,{analytics:e,clearRecentSearches:this._clearRecentSearches,headerText:ut,withClearButton:!0}),n.map((e=>l.a.createElement(we,{clearRecentSearch:t=>this._handleClearRecentSearch(t,e),handleRecentSearchClick:()=>this._handleRecentSearchClick(e),key:e,recentSearch:e})))):this._renderEmptyDMSearchInbox()},this._renderAllDMSearchResultsTab=()=>{const{location:e,pinConversation:t,unpinConversation:n}=this.props,{debouncedQuery:a}=this.state;return a?l.a.createElement(P,{loadingLabel:Xe,location:e,pinConversation:t,query:a,renderEmptyState:this._renderEmptyDMSearchInbox,renderInboxItem:this._renderSearchInboxItem,unpinConversation:n}):this._renderEmptyDMSearchInbox()},this._renderConversationsTab=e=>{const{pinConversation:t,unpinConversation:n}=this.props,{debouncedQuery:a}=this.state;return e?l.a.createElement(re,{footer:this._renderFooter(),noItemsRenderer:this._renderEmptyDMSearchInbox,onScrollEnd:this._handleScrollEnd,pinConversation:t,renderInboxItem:this._renderSearchInboxItem,searchTerm:a,unpinConversation:n}):l.a.createElement(ge,{footer:this._renderFooter(),noItemsRenderer:this._renderEmptyDMSearchInbox,onScrollEnd:this._handleScrollEnd,pinConversation:t,renderInboxItem:this._renderSearchInboxItem,searchTerm:a,unpinConversation:n})},this._renderMessagesTab=()=>{const{pinConversation:e,unpinConversation:t}=this.props,{debouncedQuery:n}=this.state;return n?l.a.createElement(Fe,{footer:this._renderFooter(),noItemsRenderer:this._renderEmptyDMSearchInbox,onScrollEnd:this._handleScrollEnd,pinConversation:e,renderInboxItem:this._renderSearchInboxItem,searchTerm:n,unpinConversation:t}):this._renderEmptyDMSearchInbox()},this._renderTabContent=()=>{const{location:e}=this.props,{tab:t}=(null==e?void 0:e.state)||{};switch(t){case dt:return this._renderConversationsTab(!1);case ot:return this._renderConversationsTab(!0);case ct:return this._renderMessagesTab();default:return this._renderAllDMSearchResultsTab()}},this._renderSearchInboxItem=({conversationIds:e,highlightingTokens:t,isMessageItem:n=!1,messageIds:a,pinConversation:i,unpinConversation:r})=>(o,c)=>{const{loggedInUserId:d}=this.context,{location:u}=this.props,{query:m}=this.props,p=n?(a||[]).indexOf(o):-1,g=-1!==p&&null!=e&&e.length?e[p]:null,y=g?o:"",h=g||o,_={pathname:`/messages/${h}`,state:{...null==u?void 0:u.state,entryPoint:null,searchQuery:m}},b=h&&null!=e&&e.length?e.indexOf(h):null,v=b?b+1:0;De()(!!d,"loggedInUserId must be defined"),c&&c(!0);const k=null!=t&&t.length&&Object(Ve.a)(b)&&b>=0?t[b]:void 0,f=e=>l.a.createElement(he.a,{conversationId:h,highlightingTokens:k,inboxType:Oe.d.PRIMARY,isActive:e,isMessageItem:n,key:h,link:_,messageId:y,onClick:this._handleConversationClick,perspective:d,pinConversation:i,position:v,searchQuery:m,unpinConversation:r});return this._isVDLEnabled?l.a.createElement(Pe.a,{exact:!1,path:_.pathname},f):l.a.createElement(s.a,{exact:!1,path:_.pathname},f)},this._renderSearchResults=()=>{const{accessibilityTitle:e,pinConversation:t,searchConversationIds:n,unpinConversation:a}=this.props,{isRefreshing:s}=this.state;return l.a.createElement(Q.a,null,l.a.createElement(Ue.a,{isRefreshing:s,onRefresh:this._handlePullToRefresh},l.a.createElement(X.a,{accessibilityRole:"tablist",accessibilityTitle:e,anchoring:Me.a,assumedItemHeight:100,cacheKey:"dmSearchInbox",footer:this._renderFooter(),identityFunction:Ge,items:n,noItemsRenderer:this._renderRecentSearches,onNearEnd:this._handleNearEnd,onScrollEnd:this._handleScrollEnd,renderer:this._renderSearchInboxItem({conversationIds:n,pinConversation:t,unpinConversation:a}),withoutHeadroom:!0})))},this._renderFooter=()=>this.state.isLoadingMore?l.a.createElement(He.a,null):l.a.createElement(h.a,{style:pt.footerContainer},l.a.createElement(b.b,{align:"center",size:"body",weight:"bold"},et),l.a.createElement(Be.a,{interactiveStyles:null},l.a.createElement(b.b,{align:"center",color:"primary",onPress:this._handleFooterClick,size:"subtext2",withInteractiveStyling:!0},Ze))),this._clearRecentSearches=()=>{const{analytics:e,clearRecentSearches:t}=this.props;e.scribe({component:"recent_search",action:"clear"}),t()},this._handleComposeButtonPress=()=>{const{analytics:e}=this.props;e.scribe({component:"search",element:"empty_results",action:"compose"})},this._handleFooterClick=()=>{var e,t;null==(e=this._textInputRef)||e.clear(),null==(t=this._textInputRef)||t.focus()},this._handleRefetchSearch=()=>{const{analytics:e,createLocalApiErrorHandler:t,search:n}=this.props,{debouncedQuery:a}=this.state;n&&a&&(e.scribe({component:"search",element:"retry",action:"click"}),n({query:a.toLowerCase(),preserveResults:!1,fetchNextPage:!1}).catch(t()))},this._handlePullToRefresh=()=>{const{createLocalApiErrorHandler:e,search:t}=this.props,{debouncedQuery:n}=this.state;this.setState({isRefreshing:!0}),t&&n&&t({query:n.toLowerCase(),preserveResults:!0,fetchNextPage:!1}).then((()=>this.setState({isRefreshing:!1}))).catch((t=>(this.setState({isRefreshing:!1}),e()(t))))},this._handleSearchChangeInner=e=>{const{createLocalApiErrorHandler:t,onQueryChange:n,search:a}=this.props;n(e),this.setState({debouncedQuery:e}),a&&e&&!this._modularSearchEnabled&&a({query:e,preserveResults:!1,fetchNextPage:!1}).catch(t())},this._handleSearchChangeDebounced=Object(ze.a)(this._handleSearchChangeInner,200),this._handleSearchChange=({currentTarget:{value:e}})=>{const{onQueryChange:t}=this.props;(e&&e.trim()||!e)&&(t(e),this._handleSearchChangeDebounced(e))},this._handleNearEnd=()=>{const{analytics:e,search:t}=this.props,{debouncedQuery:n}=this.state;this.setState({isLoadingMore:!0}),n&&(e.scribe({component:"search",element:"results",action:"get_older"}),t({query:n,preserveResults:!1,fetchNextPage:!0}).finally((()=>this.setState({isLoadingMore:!1}))))},this._handleScrollEnd=()=>{const{addRecentSearch:e,analytics:t,query:n}=this.props,{debouncedQuery:a}=this.state;a&&n&&(e(n),t.scribe({component:"recent_search",action:"add"}))},this._handleSearchClear=()=>this._handleSearchChangeInner(""),this._handleHideRecentSearches=()=>{const{hideRecentSearches:e}=this.props;e()},this._handleAddRecentSearch=({currentTarget:{value:e}})=>{const{addRecentSearch:t,analytics:n}=this.props;e&&(t(e),n.scribe({component:"recent_search",action:"add"}),this._textInputRef&&this._textInputRef.blur())},this._handleRecentSearchClick=e=>{const{analytics:t,onQueryChange:n}=this.props;n(e),t.scribe({component:"recent_search",action:"click"}),this._handleSearchChangeInner(e)},this._handleClearRecentSearch=(e,t)=>{const{analytics:n,clearRecentSearch:a}=this.props;e.stopPropagation(),e.preventDefault(),n.scribe({component:"recent_search",action:"clear"}),a(t)}}componentDidMount(){var e;const{location:t}=this.props;var n;null!=t&&null!=(e=t.state)&&e.searchQuery&&this._handleSearchChangeInner(null==t||null==(n=t.state)?void 0:n.searchQuery);this._textInputRef&&this._textInputRef.focus()}componentDidUpdate(e){const{analytics:t,query:n,recentSearches:a}=this.props;e.query||!n||a.includes(n)||t.scribe({component:"search",action:"began_typing"})}render(){const{location:e,query:t,searchFetchStatus:n}=this.props,a=!(this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_inbox_p0_enabled")||this._modularSearchEnabled&&t),s=[pt.searchInput,a?pt.searchInputBorder:void 0],{tab:i}=(null==e?void 0:e.state)||{},r=[rt,dt,ot];this._messageSearchEnabled&&r.push(ct);const o=r.map((t=>({key:t,label:t,accessibilityLabel:t,isActive:()=>i===t||!i&&t===rt,to:{...e,state:{...e.state,tab:t}}}))),c=i===ct&&this._messageSearchEnabled;return l.a.createElement(l.a.Fragment,null,l.a.createElement(h.a,{style:s},l.a.createElement(Ce.a,{accessibilityLabel:Ye,icon:l.a.createElement(Qe.a,null),onPress:this._handleHideRecentSearches,pullLeft:!0,type:"primaryText"}),l.a.createElement(We.a,{Icon:Ie.a,autoComplete:"off",onChange:this._handleSearchChange,onClear:this._handleSearchClear,onSubmitEditing:this._handleAddRecentSearch,placeholder:this._messageSearchEnabled?Je:$e,ref:this._setInputRef,value:t,withClearButton:!0})),this._modularSearchEnabled&&(t||i===dt||i===ot||c)?l.a.createElement(l.a.Fragment,null,l.a.createElement(qe.a,{links:o}),this._renderTabContent()):l.a.createElement(p.a,{accessibilityLabel:Xe,fetchStatus:n,onRequestRetry:this._handleRefetchSearch,render:this._renderSearchResults}))}}mt.contextType=k.a,mt.defaultProps={recentSearches:[],searchConversationIds:[],query:""};const pt=v.a.create((e=>({emptyState:{marginTop:e.spaces.space32},searchInput:{backgroundColor:e.colors.cellBackground,padding:e.spaces.space12,flexDirection:"row",alignItems:"center",zIndex:1},searchInputBorder:{borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},footerContainer:{marginVertical:e.spaces.space32}})));t.a=Object(Ne.a)(z(mt))},RJrc:function(e,t,n){"use strict";var a=n("ERkP"),l=n.n(a),s=n("3XMw"),i=n.n(s),r=n("MWbm"),o=n("Qwev"),c=n("rHpw");const d=i.a.ffde2fdc,u=c.a.create((e=>({spinner:{alignItems:"center",marginVertical:"30px"}})));t.a=()=>l.a.createElement(r.a,{style:u.spinner},l.a.createElement(o.a,{accessibilityLabel:d}))},Rccd:function(e,t,n){"use strict";var a,l,s,i,r,o,c,d,u,m,p,g,y,h,_,b,v,k,f,F,T,S,E,C,I={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"query"},{defaultValue:null,kind:"LocalArgument",name:"withConversationQueryHighlights"}],kind:"Fragment",metadata:null,name:"DMConversationPeopleTabQuery",selections:[{alias:"dm_people_convo_slice_result",args:[l={kind:"Variable",name:"query",variableName:"query"},s={kind:"Literal",name:"s",value:21}],concreteType:null,kind:"LinkedField",name:"__DMConversationPeopleTabQuery_dm_people_convo_slice_result_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMPeopleConvoSearchItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"DMConversation",kind:"LinkedField",name:"dm_convo_search",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[o={alias:null,args:null,kind:"ScalarField",name:"conversation_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[o,c={alias:null,args:null,kind:"ScalarField",name:"conversation_type",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"created_by_user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[i,r,{kind:"RequiredField",field:m={alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[d,u={alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null}],storageKey:null},action:"THROW",path:"dm_people_convo_slice_result.items.dm_convo_search.legacy.metadata.created_by_user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"created_at_millis",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"admin_user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[i,r,{kind:"RequiredField",field:m,action:"THROW",path:"dm_people_convo_slice_result.items.dm_convo_search.legacy.metadata.admin_user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[g={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"original_img_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_height",storageKey:null}],type:"ApiImage",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[i,r,{kind:"RequiredField",field:y={alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},d,u,{alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null}],storageKey:null},action:"THROW",path:"dm_people_convo_slice_result.items.dm_convo_search.legacy.participants_metadata.user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"last_read_event_id",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"join_time_millis",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"join_conversation_event_id",storageKey:null}],storageKey:null},v={alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[h,{alias:null,args:null,kind:"ScalarField",name:"low_quality",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted_due_to_muted_user",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"read_only",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trusted",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},k={condition:"withConversationQueryHighlights",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"DMHighlighting",kind:"LinkedField",name:"highlighting",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"query_tokens",storageKey:null}],storageKey:null}]}],storageKey:null},f={alias:null,args:null,concreteType:"SliceInfo",kind:"LinkedField",name:"slice_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"next_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"previous_cursor",storageKey:null}],storageKey:null}],type:"DmPeopleConvoSlice",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"DMConversationPeopleTabQuery",selections:[{alias:null,args:F=[{kind:"Variable",name:"cursor",variableName:"cursor"},l,s],concreteType:null,kind:"LinkedField",name:"dm_people_convo_slice_result",plural:!1,selections:[T={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMPeopleConvoSearchItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"DMConversation",kind:"LinkedField",name:"dm_convo_search",plural:!1,selections:[i,r,{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[o,{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[o,c,d,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"created_by_user_results",plural:!1,selections:C=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[T,{kind:"InlineFragment",selections:[i,r,m,S={alias:null,args:null,filters:null,handle:"defaultScalars",key:"",kind:"LinkedHandle",name:"legacy"}],type:"User",abstractKey:null}],storageKey:null},E={alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"result"},i],storageKey:null},p,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"admin_user_results",plural:!1,selections:C,storageKey:null},{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[T,g],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[T,{kind:"InlineFragment",selections:[i,r,y,S],type:"User",abstractKey:null}],storageKey:null},E,i],storageKey:null},h,_,b],storageKey:null},v],storageKey:null}],storageKey:null},k],storageKey:null},f],type:"DmPeopleConvoSlice",abstractKey:null}],storageKey:null},{alias:null,args:F,filters:["query","s"],handle:"slice",key:"DMConversationPeopleTabQuery_dm_people_convo_slice_result",kind:"LinkedHandle",name:"dm_people_convo_slice_result"}]},params:{id:"MgM5HdLJBMQyYFXzXvM_bA",metadata:{sliceInfoPath:["dm_people_convo_slice_result","slice_info"]},name:"DMConversationPeopleTabQuery",operationKind:"query",text:null}};I.hash="c0d77ca30d89c2b324136af93ce84df5",e.exports=I},SDjT:function(e,t,n){"use strict";var a,l,s,i,r,o,c,d,u,m,p,g,y,h,_,b,v,k,f,F,T={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:null,name:"evolutionDMInboxTertiaryQuery",selections:[{alias:"dm_convo_list_slice",args:[l={kind:"Variable",name:"count",variableName:"count"},s={kind:"Literal",name:"desired_lists",value:["LowQuality"]},i={kind:"Literal",name:"known_lists",value:["Trusted","Untrusted","LowQuality"]},r={kind:"Literal",name:"s",value:17},o={kind:"Literal",name:"sort_by",value:"Recency"}],concreteType:null,kind:"LinkedField",name:"__EvolutionDMInboxTertiaryQuery_dm_convo_list_slice_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"evolutionDMInboxItem"},c={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null},d={alias:null,args:null,concreteType:"SliceInfo",kind:"LinkedField",name:"slice_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"next_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"previous_cursor",storageKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"evolutionDMInboxTertiaryQuery",selections:[{alias:null,args:u=[l,{kind:"Variable",name:"cursor",variableName:"cursor"},s,i,r,o],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[m={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[m,{kind:"TypeDiscriminator",abstractKey:"__isDMConvoListItem"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m,{kind:"InlineFragment",selections:[p={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[m,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"original_img_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_url",storageKey:null}],type:"ApiImage",abstractKey:null}],storageKey:null},p],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[g={alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null}],storageKey:null},_={alias:null,args:null,filters:null,handle:"defaultScalars",key:"",kind:"LinkedHandle",name:"legacy"},p],type:"User",abstractKey:null}],storageKey:null},b={alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"result"},p],storageKey:null}],storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"last_readable_event_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"conversation_type",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"conversation_id",storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m,{kind:"InlineFragment",selections:[p,{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},g,k,y,h],storageKey:null},_,v],type:"User",abstractKey:null}],storageKey:null},b,p],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"legacy_conversation_slice",plural:!1,selections:[m,{kind:"TypeDiscriminator",abstractKey:"__isDMEventSliceResult"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMEventItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"DMEvent",kind:"LinkedField",name:"dm_event",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventMetadata",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventDetail",kind:"LinkedField",name:"event_detail",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageInfo",kind:"LinkedField",name:"dm",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachments",plural:!0,selections:[m,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Card",kind:"LinkedField",name:"card",plural:!1,selections:f=[p],storageKey:null}],type:"DMCardAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[m,{kind:"InlineFragment",selections:F=[{alias:null,args:null,kind:"ScalarField",name:"alt_text",storageKey:null}],type:"ApiGif",abstractKey:null},{kind:"InlineFragment",selections:F,type:"ApiImage",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiImage",kind:"LinkedField",name:"preview_image",plural:!1,selections:F,storageKey:null}],type:"ApiVideo",abstractKey:null}],storageKey:null},p],storageKey:null}],type:"DMMediaAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"TweetResults",kind:"LinkedField",name:"tweet_results",plural:!1,selections:f,storageKey:null}],type:"DMTweetAttachment",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},k,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"users_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[g,k],storageKey:null},_,p],type:"User",abstractKey:null}],storageKey:null},b,p],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spam_hide",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_type",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"initiating_user_results",plural:!1,selections:[v,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[k],storageKey:null},_,p],type:"User",abstractKey:null}],storageKey:null},b,p],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at_millis",storageKey:null}],storageKey:null},v,p],storageKey:null}],storageKey:null}],type:"DMEventSlice",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"last_read_event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted_due_to_muted_user",storageKey:null}],storageKey:null}],type:"DMConversation",abstractKey:null},c],storageKey:null},p],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null},d],type:"DMConvoListSlice",abstractKey:null}],storageKey:null},{alias:null,args:u,filters:["count","desired_lists","known_lists","s","sort_by"],handle:"slice",key:"EvolutionDMInboxTertiaryQuery_dm_convo_list_slice",kind:"LinkedHandle",name:"dm_convo_list_slice"}]},params:{id:"n9y7xrXgQq4xLR1fVh0hOg",metadata:{sliceInfoPath:["dm_convo_list_slice","slice_info"]},name:"evolutionDMInboxTertiaryQuery",operationKind:"query",text:null}};T.hash="24482eb5cbdc697f7bf3d475cdd9cdcd",e.exports=T},"ShJ/":function(e,t,n){"use strict";var a=n("ERkP"),l=n.n(a),s=n("Lsrn"),i=n("k/Ka");const r=(e={})=>Object(i.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},l.a.createElement("g",null,l.a.createElement("path",{d:"M20.472 14.738c-.388-1.808-2.24-3.517-3.908-4.246l-.474-4.307 1.344-2.016c.258-.387.28-.88.062-1.286-.218-.406-.64-.66-1.102-.66H7.54c-.46 0-.884.254-1.1.66-.22.407-.197.9.06 1.284l1.35 2.025-.42 4.3c-1.667.732-3.515 2.44-3.896 4.222-.066.267-.043.672.222 1.01.14.178.46.474 1.06.474h3.858l2.638 6.1c.12.273.39.45.688.45s.57-.177.688-.45l2.638-6.1h3.86c.6 0 .92-.297 1.058-.474.265-.34.288-.745.228-.988zM12 20.11l-1.692-3.912h3.384L12 20.11zm-6.896-5.413c.456-1.166 1.904-2.506 3.265-2.96l.46-.153.566-5.777-1.39-2.082h7.922l-1.39 2.08.637 5.78.456.153c1.355.45 2.796 1.78 3.264 2.96H5.104z"})));r.metadata={width:24,height:24},t.a=r},Sy9O:function(e,t,n){"use strict";var a,l,s,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"evolutionDMInboxItem",selections:[a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"evolutionDMConversationAvatar"},l={alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"last_readable_event_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"conversation_type",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"conversation_id",storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[a,{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},s,{alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null}],storageKey:null},action:"THROW",path:"legacy.participants_metadata.user_results.result.legacy"},l],type:"User",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"legacy_conversation_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMEventItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"DMEvent",kind:"LinkedField",name:"dm_event",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"evolutionDMEntryPreview"},{alias:null,args:null,concreteType:"DMEventMetadata",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"created_at_millis",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_type",storageKey:null}],storageKey:null},l],storageKey:null}],storageKey:null}],type:"DMEventSlice",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"last_read_event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted_due_to_muted_user",storageKey:null}],storageKey:null}],type:"DMConversation",abstractKey:null};i.hash="f052fa01019907de89b033bd2795b7d7",e.exports=i},"V/6K":function(e,t,n){"use strict";var a=n("ERkP");const l=n.n(a).a.createContext({isDrawer:!1});t.a=l},VGyq:function(e,t,n){"use strict";var a,l,s={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"evolutionDMMessageEntry",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachments",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Card",kind:"LinkedField",name:"card",plural:!1,selections:a=[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"DMCardAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:l=[{alias:null,args:null,kind:"ScalarField",name:"alt_text",storageKey:null}],type:"ApiGif",abstractKey:null},{kind:"InlineFragment",selections:l,type:"ApiImage",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiImage",kind:"LinkedField",name:"preview_image",plural:!1,selections:l,storageKey:null}],type:"ApiVideo",abstractKey:null}],storageKey:null}],storageKey:null}],type:"DMMediaAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"TweetResults",kind:"LinkedField",name:"tweet_results",plural:!1,selections:a,storageKey:null}],type:"DMTweetAttachment",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],type:"DirectMessageInfo",abstractKey:null};s.hash="92f772325badd93bf2f53eadbc54446b",e.exports=s},Vc8w:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("ERkP"),l=n.n(a),s=n("pxuL");const i=()=>{const{decrementDmDrawerSuppressorCount:e,incrementDmDrawerSuppressorCount:t}=l.a.useContext(s.a);l.a.useEffect((()=>(t(),()=>e())),[t,e])}},VcIV:function(e,t,n){"use strict";n.d(t,"a",(function(){return ne}));n("kYxP"),n("MvUL");var a=n("MMRb"),l=n("ERkP"),s=n.n(l),i=n("1YZw"),r=n("HPNB"),o=n("v6aA"),c=n("V/6K"),d=n("3XMw"),u=n.n(d),m=n("tI3i"),p=n.n(m),g=n("xZGM"),y=n("YemM"),h=n("Irs7"),_=n("0KEI"),b=n("uDfI"),v=n("ii+P"),k=n("zCf4"),f=n("MWbm"),F=n("mjJ+"),T=n("eb3s"),S=n("ZToW"),E=n("cHvH"),C=n("kb9v"),I=n("IG7M"),R=n("6u/5"),L=n.n(R),K=n("PJTX"),x=n.n(K),w=n("pHkl"),M=n("X/yg"),O=n("0Bjv"),A=n("ShJ/"),D=n("Lsrn"),P=n("k/Ka");const U=(e={})=>Object(P.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[D.a.root,e.style],viewBox:"0 0 32 32"},s.a.createElement("g",null,s.a.createElement("path",{d:"M28.05 6.52h-5.42V4.887c0-1.548-1.26-2.808-2.81-2.808h-7.54c-1.548 0-2.807 1.26-2.807 2.808v1.63H4.05c-.414 0-.75.337-.75.75s.336.75.75.75h.753L7 26.435c.27 1.504 1.657 2.554 3.37 2.554h11.36c1.713 0 3.1-1.05 3.376-2.598l2.19-18.37h.753c.413 0 .75-.337.75-.75s-.336-.75-.75-.75zM10.972 4.887c0-.72.586-1.308 1.307-1.308h7.542c.72 0 1.308.587 1.308 1.308v1.63H10.972V4.89zm12.65 21.28c-.163.91-1.068 1.32-1.893 1.32H10.37c-.824 0-1.73-.41-1.887-1.276L6.313 8.02h19.472l-2.162 18.148z"}),s.a.createElement("path",{d:"M13.312 23.123c.414 0 .75-.336.75-.75v-9.6c0-.414-.336-.75-.75-.75s-.75.336-.75.75v9.6c0 .414.336.75.75.75zm5.486 0c.414 0 .75-.336.75-.75v-9.6c0-.414-.336-.75-.75-.75s-.75.336-.75.75v9.6c0 .414.336.75.75.75z"})));U.metadata={width:32,height:32};var H=U,N=n("zIWA"),j=n("5pef"),B=n("IpT4"),W=n("fz3c");const q=u.a.a30a206e,V=u.a.ib4b1b86,z=u.a.bd3ca2ef,Q={confirmButtonLabel:u.a.bb1d57b6,actionTextLeave:u.a.g9074da4,header:u.a.gdf4b790,text:u.a.h09b49f8},G=u.a.ad63377e,Y=u.a.e1c9ec9c,X=u.a.i6b19b08,$=u.a.e3cfff7c,J=u.a.f398722e,Z=u.a.bdd91964,ee=u.a.a8ed0eca,te=u.a.jac4eb1e;function ne(e){const{conversation:t,conversationId:n,conversationType:l,inboxType:d,isHovered:u,isMessageSearchResult:m,isPinned:R,isSnoozed:K,participantCount:D,pinConversation:P,position:U,relayId:ne,unpinConversation:ae}=e,le=Object(h.b)(),se=Object(_.useCreateLocalApiErrorHandler)("DIRECT_MESSAGES_INBOX_ITEM"),ie=Object(b.c)(),re=x()(),{featureSwitches:oe}=s.a.useContext(o.a),ce=Object(k.f)(),{isDrawer:de}=s.a.useContext(c.a),ue=oe.getValue("dm_conversation_labels_max_pinned_count"),me=oe.isTrue("dm_conversation_labels_pinned_education_enabled")&&!R&&1===U,[pe,ge]=s.a.useState(!1),[ye,he]=s.a.useState(!1),[_e,be]=Object(v.a)(g.t),[ve,ke]=s.a.useState(me&&_e);s.a.useEffect((()=>{if(ve)return be}),[be,ve]);const fe=()=>{const e=l===a.CONVERSATION_TYPE.GROUP?"leave_group":"delete_thread",t={conversation_type:l===a.CONVERSATION_TYPE.GROUP?w.k.GROUP:w.k.ONE_TO_ONE,conversation_id:n,conversation_participant_count:D,position:U,inbox_type:Object(M.l)(d),entry_point:w.c.THREE_DOT_MENU};he(!1),le.scribe({element:"thread",action:e,data:t}),R&&Ee(),ie(a.leaveConversation({conversationId:n})).then((()=>{ne&&L()(re,(e=>{e.delete(ne)}))})).catch(se({showToast:!0})),ce.replace(Object(M.g)(d))},Fe=e=>()=>{e&&e(),ge(!1)},Te=t=>()=>{const{userId:a}=e,l=W.a.DMConversation;if(le.scribeAction("report"),Object(W.g)(oe,l)){const e=Object(W.d)({clientReferer:window.location.pathname,isMedia:!1,isPromoted:!1,reportType:l,reportedConversationId:n,reportedUser:a,scribeNamespace:le.contextualScribeNamespace});t.push({pathname:"/i/safety/report_story_start",state:{input:{requested_variant:JSON.stringify(e)}}})}else{const e=Object(M.j)(n,window.location.pathname,le.contextualScribeNamespace,d);t.push(e)}},Se=()=>{if(K)ie(a.enableNotifications({conversationId:n})).then((()=>{ne&&L()(re,(e=>{const t=e.get(ne);p()(t,"relayId must be defined");const n=t.getLinkedRecord("perspectival_conversation_metadata");p()(n,"metadataRef must be defined"),n.setValue(!1,"muted")})),ie(Object(i.b)({ariaOnly:!0,text:te}))}));else{const e={conversation_type:l===a.CONVERSATION_TYPE.GROUP?w.k.GROUP:w.k.ONE_TO_ONE,conversation_id:n,conversation_participant_count:D,entry_point:w.c.THREE_DOT_MENU};le.scribe({element:"thread",action:"mute_dm_thread_forever",data:e}),ie(a.disableNotifications({conversationId:n})).then((()=>{ne&&L()(re,(e=>{const t=e.get(ne);p()(t,"relayId must be defined");const n=t.getLinkedRecord("perspectival_conversation_metadata");p()(n,"metadataRef must be defined"),n.setValue(!0,"muted")})),ie(Object(i.b)({ariaOnly:!0,text:J}))}))}},Ee=()=>{const{togglePinStateEvolution:s}=e,i=R?"unpin_dm_conversation":"pin_dm_conversation",r=R?ae:P,o={conversation_type:l===a.CONVERSATION_TYPE.GROUP?w.k.GROUP:w.k.ONE_TO_ONE,conversation_id:n,conversation_participant_count:D,position:U};le.scribe({element:"thread",action:i,data:o}),s?s():t&&r&&r(n,t)},Ce=e=>{const t=[{Icon:R?O.a:A.a,onClick:Ee,text:R?Z:Y,withBottomBorder:!0},{Icon:H,isEmphasized:!0,onClick:()=>he(!0),text:G,withBottomBorder:!0},{Icon:N.a,onClick:Te(ce),text:X,withBottomBorder:!0},{Icon:K?j.a:B.a,onClick:Se,text:K?ee:$,withBottomBorder:!0}];return s.a.createElement(F.a,{items:t,onCloseRequested:Fe(e),shouldCloseOnClick:!0})},Ie=!S.a.isEnabled||u||pe||ve;return s.a.createElement(s.a.Fragment,null,ye?s.a.createElement(T.a,{confirmButtonLabel:Q.confirmButtonLabel,confirmButtonType:"destructiveFilled",headline:Q.header,onCancel:()=>he(!1),onConfirm:fe,text:Q.text}):null,Ie?s.a.createElement(E.a,null,(({windowWidth:e})=>{const t=r.a.isTwoColumnLayout(e);return s.a.createElement(f.a,{style:[y.a.menuContainer,m&&y.a.messageSearchResultMenuContainer]},s.a.createElement(C.a,{actionPrimary:{text:q,onClick:()=>ke(!1)},headline:V,onDismiss:()=>ke(!1),shouldDisplay:ve&&!de,text:z({count:ue}),withMask:!t},t?s.a.createElement(I.a,{onClick:()=>ge(!0),renderActionMenu:Ce,style:Ie?y.a.menu:y.a.hiddenMenu}):null),t?null:s.a.createElement(I.a,{onClick:()=>ge(!0),renderActionMenu:Ce,style:Ie?y.a.menu:y.a.hiddenMenu}))})):null)}},"X3+4":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("ERkP"),l=n.n(a),s=n("fs1G");const i=l.a.createContext({handleNextSlide:s.a})},X8um:function(e,t,n){"use strict";var a,l,s,i,r,o,c,d,u,m,p,g,y,h,_,b={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"label"}],kind:"Fragment",metadata:null,name:"DMPinnedInboxQuery",selections:[{alias:"labeled_conversation_slice",args:l=[{kind:"Variable",name:"label",variableName:"label"},{kind:"Literal",name:"s",value:20}],concreteType:"DMLabeledConversationsSlice",kind:"LinkedField",name:"__DMPinnedInboxQuery_labeled_conversation_slice_slice",plural:!1,selections:[{alias:null,args:null,concreteType:"DMConversation",kind:"LinkedField",name:"items",plural:!0,selections:[s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[r={alias:null,args:null,kind:"ScalarField",name:"conversation_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[r,o={alias:null,args:null,kind:"ScalarField",name:"conversation_type",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"created_at_millis",storageKey:null},{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[s,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[u={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"original_img_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_height",storageKey:null}],type:"ApiImage",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[s,i,{kind:"RequiredField",field:m={alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},c,{alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null}],storageKey:null},action:"THROW",path:"labeled_conversation_slice.items.legacy.participants_metadata.user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},p={alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"last_read_event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"low_quality",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted_due_to_muted_user",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"read_only",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trusted",storageKey:null}],storageKey:null}],storageKey:null},g={alias:null,args:null,concreteType:"DMConversationLabelInfo",kind:"LinkedField",name:"labels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"label_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"timestamp",storageKey:null}],storageKey:null}],storageKey:null},y={alias:null,args:null,concreteType:"SliceInfo",kind:"LinkedField",name:"slice_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"next_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"previous_cursor",storageKey:null}],storageKey:null},h={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"DMPinnedInboxQuery",selections:[{alias:null,args:l,concreteType:"DMLabeledConversationsSlice",kind:"LinkedField",name:"labeled_conversation_slice",plural:!1,selections:[{alias:null,args:null,concreteType:"DMConversation",kind:"LinkedField",name:"items",plural:!0,selections:[s,i,{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[r,{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[r,o,c,d,{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[s,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[_={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},u],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[_,{kind:"InlineFragment",selections:[s,i,m,{alias:null,args:null,filters:null,handle:"defaultScalars",key:"",kind:"LinkedHandle",name:"legacy"}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"result"},s],storageKey:null}],storageKey:null},p],storageKey:null},g],storageKey:null},y,h],storageKey:null},{alias:null,args:l,filters:["label","s"],handle:"slice",key:"DMPinnedInboxQuery_labeled_conversation_slice",kind:"LinkedHandle",name:"labeled_conversation_slice",handleArgs:[{kind:"Literal",name:"itemsFieldName",value:"items_results"}]}]},params:{id:"_gBQBgClVuMQb8efxWkbbQ",metadata:{sliceInfoPath:["labeled_conversation_slice","slice_info"]},name:"DMPinnedInboxQuery",operationKind:"query",text:null}};b.hash="ce2e2976cf1d1610f3238a158593facf",e.exports=b},XYIr:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return k})),n.d(t,"h",(function(){return F})),n.d(t,"i",(function(){return S}));var a=n("ERkP"),l=n.n(a),s=n("cTG8"),i=n("t62R"),r=n("3XMw"),o=n.n(r);const c=(e,t,n,a,i)=>l.a.createElement(l.a.Fragment,null,E(e,t)," ",n&&l.a.createElement(s.a,{displayTextRange:[0,n.length],entities:a,highlightType:"background",hitHighlights:i,key:"message",text:n,withMediaLinks:!0})),d=(e,t,n)=>e?l.a.createElement(o.a.I18NFormatMessage,{$i18n:"i005f1fd"},l.a.createElement(i.b,null,t),l.a.createElement(i.b,null,n||"")):l.a.createElement(o.a.I18NFormatMessage,{$i18n:"b35cee41"},l.a.createElement(i.b,null,n||"")),u=o.a.a9cc8cfe,m=(e,t,n)=>n?e?l.a.createElement(i.b,null,o.a.eb3d722e):l.a.createElement(o.a.I18NFormatMessage,{$i18n:"dc4b75a1"},l.a.createElement(i.b,null,t)):u,p=o.a.e5bfe07e,g=(e,t,n)=>n?e?l.a.createElement(i.b,null,o.a.db53c018):l.a.createElement(o.a.I18NFormatMessage,{$i18n:"hcbbbb35"},l.a.createElement(i.b,null,t)):p,y=o.a.bf584cd2,h=(e,t,n)=>n?e?l.a.createElement(i.b,null,o.a.f80629ba):l.a.createElement(o.a.I18NFormatMessage,{$i18n:"c1e1f849"},l.a.createElement(i.b,null,t)):y,_=o.a.e20b65b0,b=(e,t,n)=>n?e?l.a.createElement(i.b,null,o.a.d30c2d40):l.a.createElement(o.a.I18NFormatMessage,{$i18n:"c7e2464f"},l.a.createElement(i.b,null,t)):_,v=o.a.a876e58c,k=(e,t,n)=>n?e?l.a.createElement(i.b,null,o.a.j7d8101a):l.a.createElement(o.a.I18NFormatMessage,{$i18n:"eee2f121"},l.a.createElement(i.b,null,t)):v,f=o.a.dedfd266,F=(e,t,n)=>n?e?l.a.createElement(i.b,null,o.a.h7033cac):l.a.createElement(o.a.I18NFormatMessage,{$i18n:"be5a9617"},l.a.createElement(i.b,null,t)):f,T=o.a.b1a614fe,S=(e,t,n)=>n?e?l.a.createElement(i.b,null,o.a.d5b762c8):l.a.createElement(o.a.I18NFormatMessage,{$i18n:"dfd2b3b9"},l.a.createElement(i.b,null,t)):T,E=(e,t)=>t?l.a.createElement(i.b,{key:"senderName"},l.a.createElement(o.a.I18NFormatMessage,{$i18n:"b3a2b11d"},l.a.createElement(i.b,null,e))):null},XZOd:function(e,t,n){"use strict";var a,l,s,i,r,o,c,d,u,m,p,g,y,h,_,b,v,k,f,F,T,S,E,C={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:null,name:"EvolutionDMInboxSecondaryQuery",selections:[{alias:"untrusted",args:[l={kind:"Variable",name:"count",variableName:"count"},s={kind:"Literal",name:"desired_lists",value:["Untrusted"]},i={kind:"Literal",name:"known_lists",value:["Trusted","Untrusted","LowQuality"]},r={kind:"Literal",name:"s",value:17},o={kind:"Literal",name:"sort_by",value:"Recency"}],concreteType:null,kind:"LinkedField",name:"__EvolutionDMInboxSecondaryQuery_dm_convo_list_slice_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"evolutionDMInboxItem"},c={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null},d={alias:null,args:null,concreteType:"SliceInfo",kind:"LinkedField",name:"slice_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"next_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"previous_cursor",storageKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:null},{alias:"low_quality",args:m=[l,u={kind:"Variable",name:"cursor",variableName:"cursor"},{kind:"Literal",name:"desired_lists",value:["LowQuality"]},i,r,o],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[c],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"EvolutionDMInboxSecondaryQuery",selections:[{alias:"untrusted",args:p=[l,u,s,i,r,o],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[g={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[g,y={kind:"TypeDiscriminator",abstractKey:"__isDMConvoListItem"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[g,{kind:"InlineFragment",selections:[h={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[g,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"original_img_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_url",storageKey:null}],type:"ApiImage",abstractKey:null}],storageKey:null},h],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[_={alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null}],storageKey:null},k={alias:null,args:null,filters:null,handle:"defaultScalars",key:"",kind:"LinkedHandle",name:"legacy"},h],type:"User",abstractKey:null}],storageKey:null},f={alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"result"},h],storageKey:null}],storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"last_readable_event_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"conversation_type",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"conversation_id",storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[g,{kind:"InlineFragment",selections:[h,{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},_,T,b,v],storageKey:null},k,F],type:"User",abstractKey:null}],storageKey:null},f,h],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"legacy_conversation_slice",plural:!1,selections:[g,{kind:"TypeDiscriminator",abstractKey:"__isDMEventSliceResult"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMEventItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"DMEvent",kind:"LinkedField",name:"dm_event",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventMetadata",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventDetail",kind:"LinkedField",name:"event_detail",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageInfo",kind:"LinkedField",name:"dm",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachments",plural:!0,selections:[g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Card",kind:"LinkedField",name:"card",plural:!1,selections:S=[h],storageKey:null}],type:"DMCardAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[g,{kind:"InlineFragment",selections:E=[{alias:null,args:null,kind:"ScalarField",name:"alt_text",storageKey:null}],type:"ApiGif",abstractKey:null},{kind:"InlineFragment",selections:E,type:"ApiImage",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiImage",kind:"LinkedField",name:"preview_image",plural:!1,selections:E,storageKey:null}],type:"ApiVideo",abstractKey:null}],storageKey:null},h],storageKey:null}],type:"DMMediaAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"TweetResults",kind:"LinkedField",name:"tweet_results",plural:!1,selections:S,storageKey:null}],type:"DMTweetAttachment",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},T,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"users_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[_,T],storageKey:null},k,h],type:"User",abstractKey:null}],storageKey:null},f,h],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spam_hide",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_type",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"initiating_user_results",plural:!1,selections:[F,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[T],storageKey:null},k,h],type:"User",abstractKey:null}],storageKey:null},f,h],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at_millis",storageKey:null}],storageKey:null},F,h],storageKey:null}],storageKey:null}],type:"DMEventSlice",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"last_read_event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted_due_to_muted_user",storageKey:null}],storageKey:null}],type:"DMConversation",abstractKey:null},c],storageKey:null},h],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null},d],type:"DMConvoListSlice",abstractKey:null}],storageKey:null},{alias:"untrusted",args:p,filters:["count","desired_lists","known_lists","s","sort_by"],handle:"slice",key:"EvolutionDMInboxSecondaryQuery_dm_convo_list_slice",kind:"LinkedHandle",name:"dm_convo_list_slice"},{alias:"low_quality",args:m,concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[g,y,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[g,{kind:"InlineFragment",selections:S,type:"DMConversation",abstractKey:null},c],storageKey:null},h],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:null}]},params:{id:"qQhbAvYHElGk7VIUFdll7g",metadata:{sliceInfoPath:["untrusted","slice_info"]},name:"EvolutionDMInboxSecondaryQuery",operationKind:"query",text:null}};C.hash="02c89e4a60b7684bb3a0b1864b759197",e.exports=C},XiYe:function(e,t,n){"use strict";var a=n("ERkP"),l=a.useEffect,s=a.useRef;e.exports=function(){var e=s(!0);return l((function(){return e.current=!0,function(){e.current=!1}}),[]),e}},YemM:function(e,t,n){"use strict";const a=n("rHpw").a.create((e=>({root:{backgroundColor:e.colors.cellBackground,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16,width:"100%"},rootMessageAttachment:{paddingVertical:`calc(${e.spaces.space2} + ${e.spaces.space8})`},active:{backgroundColor:e.colors.gray0},avatarCellContainer:{flexGrow:1,maxWidth:e.spaces.space32,marginRight:`calc(${e.spaces.space2} + ${e.spaces.space8})`,minWidth:e.spaces.space32},bodyColumn:{flexDirection:"row"},inlineTimestamp:{flexDirection:"row"},inlineTimestampVDL:{flexDirection:"row",alignItems:"center"},messageSearchTitleContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},titleContainer:{flex:1},inlineNotificationsDisabledIcon:{paddingLeft:`calc(${e.spaces.space2} * 3)`,color:e.colors.gray700},inlineNotificationsDisabledIconVDL:{width:e.spaces.space16,height:e.spaces.space16},hiddenMenu:{opacity:0,overflow:"hidden",width:0},menu:{alignSelf:"flex-start"},menuContainer:{height:0,marginLeft:`calc(${e.spaces.space8} + ${e.spaces.space2})`},messageSearchResultMenuContainer:{height:"100%",marginLeft:`calc(${e.spaces.space8} + ${e.spaces.space2})`},notificationsDisabledIcon:{alignSelf:"flex-end",color:e.colors.gray700,paddingTop:e.spaces.space4},unreadMessagePip:{backgroundColor:e.colors.blue500,marginTop:`calc(${e.spaces.space8} - ${e.spaces.space1})`,height:e.baseFontSize-5,width:e.baseFontSize-5},unreadMessagePipMessageSearchResult:{marginTop:0,top:`calc(-3 * ${e.spaces.space2} + ${e.spaces.space1})`},vdlXButton:{border:"none",marginLeft:`calc(${e.spaces.space8} + ${e.spaces.space2})`,marginRight:`calc(-1 * ${e.spaces.space4})`,marginTop:`calc(-1 * (${e.spaces.space8} - ${e.spaces.space1}))`},xButton:{alignSelf:"center",marginRight:`calc(-1 * ${e.spaces.space4})`},xIcon:{height:`calc(${e.spaces.space28} - ${e.spaces.space1})`,width:`calc(${e.spaces.space28} - ${e.spaces.space1})`},trashcanIcon:{color:e.colors.gray700},snippet:{maxHeight:e.spaces.space40,overflow:"hidden"},snippetPadding:{paddingRight:`calc(${e.spaces.space28} + ${e.spaces.space1} * 0.75)`},unread:{backgroundColor:e.colors.unreadCellBackground},socialProofContainer:{marginTop:e.spaces.space4},socialProofText:{marginLeft:0},convoLabelIcon:{marginRight:e.spaces.space4},endCell:{marginLeft:e.spaces.space16}})));t.a=a},ZH9U:function(e,t,n){"use strict";var a,l,s={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"conversation_id"},{defaultValue:null,kind:"LocalArgument",name:"label"}],kind:"Fragment",metadata:null,name:"DMPinnedInboxAppend_Mutation",selections:l=[{alias:null,args:[{kind:"Variable",name:"conversation_id",variableName:"conversation_id"},{kind:"Variable",name:"label",variableName:"label"},{kind:"Literal",name:"s",value:20}],concreteType:null,kind:"LinkedField",name:"add_dm_conversation_label_v3",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"label_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"timestamp",storageKey:null}],type:"DMConversationLabelInfo",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"failure_reason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"DMConversationLabelUnavailable",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"DMPinnedInboxAppend_Mutation",selections:l},params:{id:"o0aymgGiJY-53Y52YSUGVA",metadata:{},name:"DMPinnedInboxAppend_Mutation",operationKind:"mutation",text:null}};s.hash="86e5601441f8d07b68ccbcf112746d23",e.exports=s},ZYFu:function(e,t,n){"use strict";n("kYxP");var a=n("ERkP"),l=n.n(a),s=n("MMRb"),i=n("1YZw"),r=n("hqKg"),o=n("AQOc"),c=n("G6rE"),d=n("xZGM"),u=n("0KEI"),m=n("oEGd");const p=(e,t)=>t.conversationId,g=Object(r.createSelector)(p,((e,t)=>s.selectConversation(e,p(0,t))),s.selectEntries,c.e.selectAll,((e,t)=>!s.selectConversationIsRead(e,p(0,t))),((e,t)=>{const n=p(0,t);return Object(s.selectInboxTypeByConversation)(e,n)}),((e,t)=>Object(d.E)(e,d.t)),((e,t,n,a,l,s,i)=>({conversation:(null==t?void 0:t.data)&&Object(o.a)(t.data,n,a),conversationId:e,unread:l,inboxType:s,shouldShowPinnedEducation:i}))),y={addFlag:d.A,addRecentSearch:s.addRecentSearches,addToast:i.b,block:c.e.block,createLocalApiErrorHandler:Object(u.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_INBOX_ITEM"),disableNotifications:s.disableNotifications,enableNotifications:s.enableNotifications,leaveConversation:s.leaveConversation,muteDMUser:s.muteDMUser,unmuteDMUser:s.unmuteDMUser,unblock:c.e.unblock};var h=Object(m.f)(g,y),_=n("aA19"),b=n("OhSZ"),v=n("t62R"),k=n("g54k"),f=n("rxPX");const F=(e,t)=>t.entry;var T=Object(f.a)().propsFromState((()=>({users:Object(r.createSelector)(c.e.selectAll,F,k.b)}))).adjustStateProps((({users:e})=>({...e}))),S=n("zQEV"),E=n("4n2h");var C=T((({entry:e,entryType:t,isSelected:n=!1,perspective:a,unread:s=!1,users:i})=>{const r=Object(S.a)(e,t,a,i),o=Object(E.b)(s),c=Object(E.a)(s,n);return l.a.createElement(v.b,{color:c,weight:o},r)})),I=n("v6aA"),R=n("vjRr");const L=(e,t)=>{var n,a,l;return t.isMessageItem&&(null==(n=t.entry)||null==(a=n.message_data)||null==(l=a.attachment)?void 0:l.card)},K=(e,t)=>c.e.select(e,t.senderId),x=(e,t)=>t.recipientId?c.e.select(e,t.recipientId):void 0;var w=Object(f.a)().propsFromState((()=>({card:R.a.createSingleHydratedSelector(L),user:K,recipient:x}))),M=n("ijJS"),O=n("3dad"),A=n("XYIr"),D=n("X/yg");var P=w((({card:e,entry:t,perspective:n,isGroupDM:a,highlightingTokens:s,isMessageItem:i,unread:r=!1,user:o={},recipient:c={},isSelected:d=!1})=>{var u;const{featureSwitches:m}=l.a.useContext(I.a),p=t&&t.message_data;if(!p)return null;const{attachment:g}=p,y=g&&!!(g.video||g.photo||g.animated_gif||g.tweet||g.fleet||g.sticker||g.card);let h;const _=n===o.id_str,b=!(!y||!_)||!(!a||_),v=o.name,k=c.name;let f;if(s&&null!=s&&s.length&&null!=p&&p.text){const e=Object(D.n)(s);f=null!=e&&e.length?null==e?void 0:e.map((e=>Object(D.h)(e,p.text))):void 0}let F,T=Object(A.a)(v,b,null==p?void 0:p.text,p.entities,f);const S=T;g&&(g.tweet?(F=g.tweet.status,T=Object(A.i)(_,v,b)):g.fleet?T=Object(A.b)(_,k,p.text):g.video?Object(D.p)(g,m)?(T=Object(A.h)(_,v,b),h=g.video):(T=Object(A.g)(_,v,b),h=g.video):g.photo?(T=Object(A.e)(_,v,b),h=g.photo):g.animated_gif?(T=Object(A.c)(_,v,b),h=g.animated_gif):g.sticker?T=Object(A.f)(_,v,b):g.card&&(T=Object(A.d)(_,v,b)));const E=h&&i?O.a.getOriginalImage(h):null,C=null==(u=h)?void 0:u.ext_alt_text;return l.a.createElement(M.a,{accessibilityLabel:C,card:e,content:i?S:T,isMessageSearchItem:i,isSelected:d,searchImage:E,tweetId:F,tweetUserId:p.sender_id,unread:r})})),U=n("uKEd");const H=(e,t)=>t.senderId?c.e.select(e,t.senderId):void 0,N=(e,t)=>Object(U.n)(e,t.reactionEntry.message_id),j=(e,t)=>{const n=N(e,t);return n&&n.message_data&&c.e.select(e,n.message_data.sender_id)};var B=Object(f.a)().propsFromState((()=>({reactingUser:H,reactedMessageEntry:N,messageUser:j}))),W=n("3XMw"),q=n.n(W),V=n("33Kz");var z=B((({isGroupDM:e,isSelected:t=!1,messageUser:n,perspective:a,reactedMessageEntry:s,reactingUser:i,reactionEntry:r,unread:o=!1})=>{const{featureSwitches:c}=l.a.useContext(I.a),d=s&&s.message_data,u=d&&d.attachment,m=d&&d.text,p=n&&n.screen_name,g=a===(i&&i.id_str),y=i&&i.name,h=Object(V.b)(r.reaction_key||"",c),_=Object(E.b)(o),b=Object(E.a)(o,t);let k;return k=u&&u.tweet?e?((e,t,n,a)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"c4202785"},l.a.createElement(v.b,null,n),l.a.createElement(v.b,null,a)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"b493a891"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,n),l.a.createElement(v.b,null,a)))(g,y,p,h):((e,t,n)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"ca684bf5"},l.a.createElement(v.b,null,n)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"h5797be5"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,n)))(g,y,h):u&&u.video?e?((e,t,n,a)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"d1f8bdd9"},l.a.createElement(v.b,null,n),l.a.createElement(v.b,null,a)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"d764af97"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,n),l.a.createElement(v.b,null,a)))(g,y,p,h):((e,t,n)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"ab1cdfe3"},l.a.createElement(v.b,null,n)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"f0cf1699"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,n)))(g,y,h):u&&u.photo?e?((e,t,n,a)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"hec0fd4d"},l.a.createElement(v.b,null,n),l.a.createElement(v.b,null,a)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"j55320df"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,n),l.a.createElement(v.b,null,a)))(g,y,p,h):((e,t,n)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"jf27606b"},l.a.createElement(v.b,null,n)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"cd110359"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,n)))(g,y,h):u&&u.animated_gif?e?((e,t,n,a)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"e70dcc35"},l.a.createElement(v.b,null,n),l.a.createElement(v.b,null,a)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"g1bf440b"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,n),l.a.createElement(v.b,null,a)))(g,y,p,h):((e,t,n)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"b2da1bf9"},l.a.createElement(v.b,null,n)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"g84c0421"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,n)))(g,y,h):u&&u.card?e?((e,t,n,a)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"cd2e7c19"},l.a.createElement(v.b,null,n),l.a.createElement(v.b,null,a)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"aee9e7fb"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,n),l.a.createElement(v.b,null,a)))(g,y,p,h):((e,t,n)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"f9fb1cf7"},l.a.createElement(v.b,null,n)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"f2bf910f"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,n)))(g,y,h):m?e?((e,t,n,a,s)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"i6cec545"},l.a.createElement(v.b,null,a),l.a.createElement(v.b,null,n),l.a.createElement(v.b,null,s)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"d6998bab"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,a),l.a.createElement(v.b,null,n),l.a.createElement(v.b,null,s)))(g,y,h,p,m):((e,t,n,a)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"cec676f3"},l.a.createElement(v.b,null,n),l.a.createElement(v.b,null,a)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"a2706f9b"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,n),l.a.createElement(v.b,null,a)))(g,y,h,m):((e,t,n)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"d6b15bbf"},l.a.createElement(v.b,null,n)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"ac0d4bc7"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,n)))(g,y,h),l.a.createElement(v.b,{color:b,numberOfLines:1,weight:_},k)})),Q=n("H4nC"),G=n("/8XK"),Y=n("b9JY");var X=({conversationType:e,entry:t,highlightingTokens:n,isMessageItem:a=!1,isSelected:i=!1,perspective:r,unread:o})=>{if(t.marked_as_spam)return Object(G.a)(o,i);if(Object(Y.b)(t)){const{message_data:{recipient_id:c,sender_id:d}={}}=t;return l.a.createElement(P,{entry:t,highlightingTokens:n,isGroupDM:e===s.CONVERSATION_TYPE.GROUP,isMessageItem:a,isSelected:i,perspective:r,recipientId:c,senderId:d,unread:o})}return Object(Y.c)(t)?l.a.createElement(z,{isGroupDM:e===s.CONVERSATION_TYPE.GROUP,isSelected:i,perspective:r,reactionEntry:t,senderId:t.sender_id,unread:o}):Object(Y.a)(t)?l.a.createElement(C,{entry:t,entryType:t.type,isSelected:i,perspective:r,unread:o}):Object(Y.d)(t)?l.a.createElement(Q.a,{entry:t,isCompact:!0,isSelected:i,unread:o}):null},$=n("Myq3"),J=n("3wZR"),Z=n("XnpN"),ee=n("IpT4"),te=n("VcIV"),ne=n("aWyx"),ae=n("YemM"),le="conversation",se=n("MWbm"),ie=n("Irs7"),re=n("8hvq"),oe=n("Znyr"),ce=n("0PHd"),de=n("yrzJ"),ue=n("Xrkv"),me=n("cTG8"),pe=n("GBcw"),ge=n("cm6r"),ye=n("htQn"),he=n("5mJL"),_e=n("AQ79"),be=n("pHkl");const ve=({children:e})=>l.a.createElement(se.a,{style:ae.a.socialProofContainer},e);class ke extends l.a.Component{constructor(...e){super(...e),this._isPinnedInboxEnabled=this.context.featureSwitches.isTrue("dm_conversation_labels_pinned_enabled")&&this.context.featureSwitches.isTrue("direct_messages_incremental_holdback_2022h1"),this._isVDLEnabled=this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_inbox_p0_enabled"),this._renderAvatarCell=()=>{const{conversation:e,perspective:t}=this.props;return l.a.createElement(se.a,{style:ae.a.avatarCellContainer},l.a.createElement(_.a,{conversation:e,perspective:t,size:"large",withBadge:!1}))},this._renderEndCellWithMenu=(e,t,n,a)=>l.a.createElement(l.a.Fragment,null,e?l.a.createElement(se.a,{style:ae.a.endCell},e):null,this._renderConversationActions({isFocused:t,isFocusedWithin:n,isHovered:a})),this._renderMenu=({isFocused:e,isFocusedWithin:t,isHovered:n})=>{const{conversation:a,conversationId:i,inboxType:r,isMessageItem:o,pinConversation:c,position:d,unpinConversation:u}=this.props;if(a&&c&&u){const m=(e=>{var t;return Boolean(null==e||null==(t=e.labels)?void 0:t.find((e=>e.label_type===_e.a.PINNED)))})(a),p=a.notifications_disabled,g=a.participants.length||0,y=a.type===s.CONVERSATION_TYPE.GROUP?"0":this._getUserIdOfOneToOneConvo();return l.a.createElement(te.a,{conversation:a,conversationId:i,conversationType:a.type,inboxType:r,isHovered:e||t||n,isMessageSearchResult:o,isPinned:m,isSnoozed:p,participantCount:g,pinConversation:c,position:d,unpinConversation:u,userId:y})}return null},this._renderConversationActions=({isFocused:e,isFocusedWithin:t,isHovered:n})=>{const{inboxType:a}=this.props;switch(a){case _e.d.PRIMARY:return this._isPinnedInboxEnabled?this._renderMenu({isFocused:e,isFocusedWithin:t,isHovered:n}):null;case _e.d.SECONDARY:case _e.d.TERTIARY:return this._renderX();default:return null}},this._renderConversationEndCell=e=>{const{inboxType:t,isMessageItem:n,searchQuery:a,unread:s}=this.props,i=s?l.a.createElement(oe.a,{pip:!0,style:[ae.a.unreadMessagePip,n&&ae.a.unreadMessagePipMessageSearchResult],truncatedCountFormatter:()=>"",unreadCountLabel:()=>""}):null;switch(t){case _e.d.PRIMARY:return this._isVDLEnabled?i:a?null:this._renderTimestamp(e);case _e.d.SECONDARY:return this._isVDLEnabled?i:null;default:return null}},this._renderConversationLabel=({convo_label:e})=>{if(null==e||!e.text)return null;const t=Object(J.b)(e.icon);return l.a.createElement(v.b,{color:"gray700",size:"subtext2"},t?l.a.createElement(t,{style:ae.a.convoLabelIcon}):null,e.text)},this._renderSocialProof=({social_proof:e})=>{if(!e||0===e.length)return null;const t=e[0];switch(t.proof_type){case ne.d.MUTUAL_FRIENDS:{if(0===t.total)return null;const e=t.users.map((({profile_image_url_https:e})=>e)),n=t.users.map((({name:e})=>e));return l.a.createElement(ve,null,l.a.createElement(v.b,{weight:this._isVDLEnabled?"medium":"normal"},l.a.createElement(ce.a,{displayFacepileInline:!0,knownFollowersAvatarUrls:e,knownFollowersCount:t.total,knownFollowersNames:n,textStyle:this._isVDLEnabled&&ae.a.socialProofText,withFacepile:!this._isVDLEnabled})))}default:return null}},this._renderSearchConversationPreview=()=>{const{conversation:e,highlightingTokens:t,perspective:n,searchQuery:a}=this.props,i=e?Object(Z.a)(e,n):[],r=[],o=(e,t)=>e.localeCompare(t),c=i.map((({user:e})=>e)).filter((e=>{var t;const l=null==(t=e.name)?void 0:t.toLowerCase().includes(a);return e.id_str!==n&&(l&&r.push(e.name),!l)})).map((e=>e.name)).sort(o),d=r.sort(o).concat(c);if(e){if(e.type===s.CONVERSATION_TYPE.ONE_TO_ONE){const[e]=i.map((({user:e})=>e)),n=`@${e.screen_name}`,a=n?Object(D.i)(t,n):null,s=null!=a&&a.length?Object(D.f)(a,n):void 0;return l.a.createElement(de.a,{color:"gray700",renderScreenNameHighlights:s,screenName:e.screen_name})}{const e=!0,n=Object(ue.a)(d,e),a=Object(D.n)(t),s=null==a?void 0:a.filter((e=>n&&-1!==n.toLowerCase().indexOf(e.toLowerCase()))),i=null!=s&&s.length?s.map((e=>Object(D.h)(e,n))):void 0;return l.a.createElement(me.a,{color:"gray700",displayTextRange:[0,n.length],entities:{},highlightType:"background",hitHighlights:i,key:"groupsearchresult",numberOfLines:2,text:n})}}},this._renderX=()=>{const{conversation:e,conversationId:t,inboxType:n,position:a}=this.props,{loggedInUserId:i}=this.context;if(e){const r=Object(D.m)(e,i),o=e.participants.length||0,c=(null==e?void 0:e.type)===s.CONVERSATION_TYPE.GROUP?"0":this._getUserIdOfOneToOneConvo();return l.a.createElement(re.a,{conversationId:t,conversationType:e.type,inboxType:n,participant:r,participantCount:o,position:a,userId:c})}return null},this._getUserIdOfOneToOneConvo=()=>{const{conversation:e,perspective:t}=this.props,n=e&&Object(Z.a)(e,t).map((({user:e})=>e)),a=n&&n[0]||null;return a?a.id_str:""},this._renderTimestamp=e=>{const{conversation:t,isMessageItem:n}=this.props,a=this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_inbox_p0_enabled"),s=[a||n?ae.a.inlineNotificationsDisabledIcon:ae.a.notificationsDisabledIcon,a&&ae.a.inlineNotificationsDisabledIconVDL],i=Number(e&&n?null==e?void 0:e.time:null==t?void 0:t.sort_timestamp);return l.a.createElement(l.a.Fragment,null,l.a.createElement(se.a,{style:[n&&ae.a.inlineTimestamp,a&&ae.a.inlineTimestampVDL]},t&&i?l.a.createElement(pe.a,{timestamp:i}):null,null!=t&&t.notifications_disabled?l.a.createElement(ee.a,{style:s}):null))},this._handleOnClick=e=>{const{addRecentSearch:t,analytics:n,conversation:a,conversationId:l,onClick:i,position:r,searchQuery:o}=this.props,c=(null==a?void 0:a.participants.length)||0,d=(null==a?void 0:a.type)===s.CONVERSATION_TYPE.GROUP;o&&(n.scribe({component:"search",element:"conversation",action:"click",data:{conversation_id:l,conversation_participant_count:c,conversation_type:d?be.k.GROUP:be.k.ONE_TO_ONE,entry_point:be.c.ALL,inbox_type:be.g.PRIMARY,dm_search_result_type:be.a.CONVERSATION,message_type:be.h.NOT_APPLICABLE,position:r}}),n.scribe({component:"recent_search",action:"add"}),t(o)),i(e,l,a,r)}}shouldComponentUpdate(e){const t=this.props.conversation,n=null==t?void 0:t.conversation_id,a=null==t?void 0:t.notifications_disabled,l=null==t?void 0:t.last_read_event_id,s=null==t?void 0:t.sort_event_id,i=null==t?void 0:t.max_entry_id,r=null==t?void 0:t.convo_label,o=this.props.highlightingTokens,c=this.props.messageId,d=e.conversation,u=null==d?void 0:d.conversation_id,m=null==d?void 0:d.notifications_disabled,p=e.highlightingTokens,g=null==d?void 0:d.last_read_event_id,y=null==d?void 0:d.sort_event_id,h=null==d?void 0:d.max_entry_id,_=null==d?void 0:d.convo_label,b=e.messageId,{filter:v,isActive:k}=this.props,{filter:f,isActive:F}=e;return n!==u||a!==m||o!==p||l!==g||s!==y||i!==h||c!==b||k!==F||v!==f||r!==_}render(){var e;const{conversation:t,highlightingTokens:n,isActive:a,isMessageItem:i,link:r,messageId:o,perspective:c,position:d,searchQuery:u,unread:m}=this.props,p=(null==t?void 0:t.entries)||[],g=i?p.find((e=>e.id===o)):Object($.a)(p,(e=>!be.b.includes(e.type))),y=null==g||null==(e=g.message_data)?void 0:e.attachment,h=[ae.a.root,i&&y&&ae.a.rootMessageAttachment,m&&!this._isVDLEnabled&&ae.a.unread,a&&this._isVDLEnabled&&ae.a.active],v=(null==t?void 0:t.type)===s.CONVERSATION_TYPE.GROUP,k=this._isVDLEnabled&&v;if(!t)return null;const f=!!t.convo_label,F=!t.trusted&&!f,T=this._renderConversationEndCell(g),S=u&&!i;let E="text",C="bold";return this._isVDLEnabled&&!m&&(E="gray900",C="medium"),this._isVDLEnabled&&a&&(E="text",C="medium"),!t||!u&&t.isSearchResultOnly?null:l.a.createElement(ge.a,null,(({isFocused:e,isFocusedWithin:s,isHovered:o})=>{var p;return l.a.createElement(ye.a,{accessibilityRole:"none",accessibilityState:{selected:a},link:{pathname:null==r?void 0:r.pathname,anchorless:!0,state:{...null==r?void 0:r.state,position:d,entryPoint:i?null==g?void 0:g.id:null,isMessageItem:i}},onPress:this._handleOnClick,style:h,testID:le},l.a.createElement(he.a,{avatarCell:i?void 0:l.a.createElement(_.a,{conversation:t,perspective:c,withBadge:k}),avatarSize:"xxLarge"},l.a.createElement(se.a,{style:ae.a.bodyColumn},l.a.createElement(se.a,{style:ae.a.titleContainer},l.a.createElement(se.a,{style:i?ae.a.messageSearchTitleContainer:void 0},l.a.createElement(b.b,{conversation:t,highlightingTokens:n,isConversationSearchTitle:!!S,isMessageSearchTitle:!!i,perspective:c,renderAvatarCell:this._renderAvatarCell,renderTimestamp:()=>this._renderTimestamp(g),textColor:E,titleWeight:C,withScreenName:!u&&!i,withVDLRefresh:this._isVDLEnabled}),l.a.createElement(se.a,{style:ae.a.messageSearchTitleContainer},i?this._renderEndCellWithMenu(T,e,s,o):null)),l.a.createElement(se.a,{style:[!(i&&(null!=y&&y.card||null!=y&&y.tweet))&&ae.a.snippet,!e&&!s&&!o&&!(i&&null!=g&&null!=(p=g.message_data)&&p.attachment)&&ae.a.snippetPadding]},g&&!S?l.a.createElement(X,{conversationType:t.type,entry:g,highlightingTokens:n,isMessageItem:i,isSelected:this._isVDLEnabled&&a,perspective:c,unread:this._isVDLEnabled&&m}):S?this._renderSearchConversationPreview():null),f?this._renderConversationLabel(t):null,F?this._renderSocialProof(t):null),i?null:this._renderEndCellWithMenu(T,e,s,o))))}))}}ke.contextType=I.a,ke.defaultProps={searchQuery:"",inboxType:"primary",isActive:!1,filter:e=>!0};t.a=Object(ie.a)(h(ke),{page:"messages",section:"inbox"})},b9JY:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return c}));var a=n("aWyx");const l=e=>e&&e.type===a.b.MESSAGE,s=e=>e&&e.type===a.b.WELCOME_MESSAGE,i=e=>e&&e.type===a.b.TRUST_CONVERSATION,r=e=>e&&e.type===a.b.REACTION_CREATE,o=[a.b.CONVERSATION_AVATAR_UPDATE,a.b.CONVERSATION_NAME_UPDATE,a.b.JOIN_CONVERSATION,a.b.PARTICIPANTS_JOIN,a.b.PARTICIPANTS_LEAVE],c=e=>e&&o.indexOf(e.type)>-1},d9IC:function(e,t,n){"use strict";var a=n("ERkP"),l=n.n(a),s=n("3XMw"),i=n.n(s),r=n("Irs7"),o=n("MWbm"),c=n("/yvb"),d=n("t62R"),u=n("rHpw");const m=i.a.b08821f4,p=i.a.e047b8fa,g=u.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,paddingLeft:e.spaces.space16,paddingVertical:e.spaces.space4,alignItems:"center",flexDirection:"row",justifyContent:"space-between",borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor},backButton:{marginRight:e.spaces.space4},iconContainer:{alignItems:"center",flexDirection:"row"},icon:{color:e.colors.text,marginRight:e.spaces.space12,fontSize:e.fontSizes.body,marginVertical:e.spaces.space8},labelHeader:{borderBottomStyle:"none",paddingVertical:e.spaces.space12}})));t.a=e=>{const t=Object(r.b)(),{clearRecentSearches:n,headerText:a,icon:s,isInboxLabelHeader:i,withClearButton:u}=e;l.a.useEffect((()=>{t.scribe({component:"recent_search",action:"impression"})}),[t]);const y=[g.root,i&&g.labelHeader];return l.a.createElement(o.a,{style:y},l.a.createElement(o.a,{style:g.iconContainer},(()=>{const e=s;return e?l.a.createElement(e,{style:g.icon}):null})(),l.a.createElement(d.b,{accessibilityLevel:2,accessibilityRole:"heading",size:"headline1",weight:"heavy"},a)),u?l.a.createElement(c.a,{accessibilityLabel:m,onPress:n,style:g.backButton,type:"onMediaWhiteFilled"},p):null)}},"ejT/":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return l}));const a=e=>({id:e,distanceToViewportTop:0}),l=e=>({id:e,distanceToViewportBottom:0})},f42t:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("97Jx"),l=n.n(a),s=(n("kYxP"),n("ERkP")),i=n.n(s);class r extends i.a.Component{constructor(...e){super(...e),this.state={isLoaded:!1}}componentDidMount(){return this._isMounted=!0,this.load()}componentDidUpdate(e){return this.props.modules===e.modules?null:this.load()}componentWillUnmount(){this._isMounted=!1}load(){this.setState({isLoaded:!1});const{modules:e}=this.props,t=Object.keys(e);return Promise.all(t.map((t=>e[t]()))).then((e=>t.reduce(((t,n,a)=>(t[n]=e[a],t)),{}))).then((e=>{if(!this._isMounted)return null;this.setState({modules:e,isLoaded:!0})}))}render(){const{isLoaded:e}=this.state,t=e?this.state.modules:{};return i.a.Children.only(this.props.children(t||{}))}}const o=(e,t)=>n=>i.a.createElement(r,{modules:t},(t=>i.a.createElement(e,l()({},t,n))))},fuhe:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ht}));var a=n("ERkP"),l=n.n(a),s=n("v6aA"),i=(n("kYxP"),n("MMRb")),r=n("97Jx"),o=n.n(r),c=n("ZUOq"),d=n("V/6K"),u=n("CDB5"),m=n("RqPI"),p=n("1YZw"),g=n("hqKg"),y=n("X/yg"),h=n("AQOc"),_=n("UhuB"),b=n("l0YN"),v=n("G6rE"),k=n("rxPX"),f=n("0KEI"),F=n("P1r1");const T=(e,t)=>t.conversationId,S=Object(g.createSelector)(((e,t)=>i.selectEntriesForConversation(e,T(0,t))),m.s,((e,t)=>t?Object(y.e)(e,t):void 0)),E=e=>t=>u.c(e,t),C=e=>(t,n)=>u.a(e,t,n),I={conversation:(e,t)=>i.selectConversation(e,T(0,t)),entries:i.selectEntries,perspective:m.s,users:v.e.selectAll,dataSaverMode:F.j,dtabBarInfo:F.m,quickReplyOptions:S,visibility:i.selectDrawerVisibility,inboxUnreadCount:b.a,isUnread:(e,t)=>!i.selectConversationIsRead(e,T(0,t)),isDmReceiptSettingEnabled:_.n},R={draftText:(e,t)=>u.l(e,T(0,t)),gifMetadata:(e,t)=>u.h(e,T(0,t)),isUploading:(e,t)=>u.j(e,T(0,t)),media:(e,t)=>u.i(e,T(0,t)),mediaUploadProgress:(e,t)=>u.k(e,T(0,t))};var L=Object(k.a)().propsFromState((()=>({...I,...R}))).adjustStateProps((({conversation:e,dataSaverMode:t,draftText:n,dtabBarInfo:a,entries:l,gifMetadata:s,inboxUnreadCount:i,isDmReceiptSettingEnabled:r,isUnread:o,isUploading:c,media:d,mediaUploadProgress:u,perspective:m,quickReplyOptions:p,users:g,visibility:y})=>{const _=null==e?void 0:e.data;return{conversation:_&&Object(h.a)(_,l,g),perspective:m,dataSaverMode:t,draftText:n,dtabBarInfo:a,gifMetadata:s,inboxUnreadCount:i,isDmReceiptSettingEnabled:r,isUploading:c,isUnread:o,media:d,mediaUploadProgress:u,quickReplyOptions:p,visibility:y}})).propsFromActions((({conversationId:e})=>({addMedia:C(e),addToast:p.b,createLocalApiErrorHandler:Object(f.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_CONVERSATION"),fetchConversationHistory:i.fetchConversationHistory,removeMedia:E(e),saveText:u.f,sendMessage:u.m,updateConversationReadState:i.updateConversationReadState,updateTyping:i.updateTyping,fetchUpdatesIfNeeded:i.fetchUpdatesIfNeeded}))).withAnalytics({page:"messages",section:"thread_drawer"}),K=n("aWyx"),x=n("qz2E"),w=n("Oi4X"),M=n("OhSZ"),O=n("3XMw"),A=n.n(O),D=n("95Se"),P=n("uDfI"),U=n("MWbm"),H=n("/yvb"),N=n("Znyr"),j=n("rHpw");const B=A.a.b08821f4;function W({buttonType:e,inboxUnreadCount:t}){const n=Object(P.c)();return l.a.createElement(U.a,null,l.a.createElement(H.a,{accessibilityLabel:B,icon:l.a.createElement(D.a,null),onPress:()=>{n(i.popOutConversation(null))},type:e}),t&&t>0?l.a.createElement(N.a,{pip:!0,style:q.newMessagePip,truncatedCountFormatter:()=>"",unreadCountLabel:()=>""}):null)}const q=j.a.create((e=>({newMessagePip:{right:e.spaces.space4,top:e.spaces.space4}})));var V=n("zCf4"),z=n("Avzu"),Q=n("Lsrn"),G=n("k/Ka");const Y=(e={})=>Object(G.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[Q.a.root,e.style],viewBox:"0 0 24 24"},l.a.createElement("g",null,l.a.createElement("path",{d:"M12 19.344l-8.72-8.72c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l9.25 9.25c.292.294.767.294 1.06 0l9.25-9.25c.146-.145.22-.337.22-.53s-.073-.383-.22-.53c-.293-.292-.768-.292-1.06 0L12 19.344z"}),l.a.createElement("path",{d:"M12 11.535l-8.72-8.72c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l9.25 9.25c.292.294.767.294 1.06 0l9.25-9.25c.146-.145.22-.337.22-.53s-.073-.383-.22-.53c-.293-.292-.768-.292-1.06 0L12 11.535z"})));Y.metadata={width:24,height:24};var X=Y;const $=(e={})=>Object(G.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[Q.a.root,e.style],viewBox:"0 0 24 24"},l.a.createElement("g",null,l.a.createElement("path",{d:"M12 4.656l8.72 8.72c.293.293.768.293 1.06 0s.294-.768 0-1.06l-9.25-9.25c-.292-.294-.767-.294-1.06 0l-9.25 9.25c-.146.145-.22.337-.22.53s.073.383.22.53c.293.292.768.292 1.06 0L12 4.656z"}),l.a.createElement("path",{d:"M12 12.465l8.72 8.72c.293.293.768.293 1.06 0s.294-.768 0-1.06l-9.25-9.25c-.292-.294-.767-.294-1.06 0l-9.25 9.25c-.146.145-.22.337-.22.53s.073.383.22.53c.293.292.768.292 1.06 0l8.72-8.72z"})));$.metadata={width:24,height:24};var J=$;const Z=A.a.d227d19e,ee=A.a.c64c1884,te=A.a.j7d0e836,ne=A.a.cdcebd22;function ae({analytics:e,buttonType:t,conversationTitle:n,handleToggleVisibility:a,isExpanded:s}){const i=Object(V.f)();return l.a.createElement(U.a,{style:le.rightControls},n?null:l.a.createElement(H.a,{accessibilityLabel:ee,hoverLabel:{label:ne},icon:l.a.createElement(z.a,null),onPress:()=>{e.scribe({section:"compose_drawer",component:"dm",action:"show"}),i.push({pathname:"/messages/compose",state:{source:"drawer"}})},type:t}),s?l.a.createElement(H.a,{accessibilityLabel:Z,hoverLabel:{label:Z},icon:l.a.createElement(X,null),onPress:a,type:t}):l.a.createElement(H.a,{accessibilityLabel:te,hoverLabel:{label:te},icon:l.a.createElement(J,null),onPress:a,type:t}))}const le=j.a.create((e=>({rightControls:{flexDirection:"row"}})));var se=n("x0mb"),ie=n("t62R");const re=A.a.a2f81050,oe=A.a.e736990a;function ce({conversationTitle:e,hasNewMessages:t,isHighlighted:n}){const a=e||l.a.createElement(ie.b,null,re);return l.a.createElement(U.a,{style:de.titleContainer},l.a.createElement(U.a,{style:[de.titleTextRoot,n&&t?de.titleTextHighlighted:null]},a),t?l.a.createElement(U.a,{style:de.newMessageDotContainer},l.a.createElement(se.a,{accessibilityLabel:oe,style:[de.newMessageDotRoot,n?de.newMessageDotHighlighted:de.newMessageDotRegular]})):null)}const de=j.a.create((e=>({newMessageDotContainer:{flexGrow:1},newMessageDotRoot:{width:e.spaces.space12,height:e.spaces.space12,marginLeft:e.spaces.space4},newMessageDotRegular:{color:e.colors.primary},newMessageDotHighlighted:{color:e.colors.white},titleContainer:{alignItems:"center",display:"flex",flexDirection:"row",flexGrow:1},titleTextRoot:{flexGrow:1,flexShrink:1},titleTextHighlighted:{color:e.colors.white}})));var ue=n("AQ79"),me=n("OrGc"),pe=n("hACr"),ge=n("fs1G"),ye="DMDrawerHeader",he="DMDrawerHeaderHighlighted",_e="DMDrawer",be=n("Irs7"),ve=n("xKuM");function ke({conversationSubtitle:e,conversationTitle:t,hasNewMessages:n,inboxUnreadCount:a,isHighlighted:s,onDrawerOpen:r,triggerHighlight:o}){const c=l.a.createRef(),d=Object(be.b)(),u=Object(P.c)(),m=Object(P.d)(i.selectDrawerVisibility),p=fe(n,s),g=m===ue.b.EXPANDED;l.a.useEffect((()=>{n&&!s&&o&&o()}),[n,s,o]);const y=()=>{const e=g?ue.b.COLLAPSED:ue.b.EXPANDED;e===ue.b.COLLAPSED?d.scribe({action:"collapse"}):e===ue.b.EXPANDED&&(d.scribe({action:"expand"}),r&&r()),u(i.setDrawerVisibility(e))},h=n?s?[Fe.headerHighlighted]:[Fe.headerActive]:[];return l.a.createElement(pe.a,{enabled:!0,handlers:{[me.e.goLists]:ge.a,[me.e.toggleDMDrawer]:()=>{y(),c&&c.current&&c.current.focus()}}},l.a.createElement(U.a,{ref:c,style:[Fe.headerRoot,!g&&Fe.headerBorderClosed,...h,Fe.cursor],testID:s?he:ye},l.a.createElement(ve.a,{leftControl:t&&g?l.a.createElement(W,{buttonType:p,inboxUnreadCount:a}):null,onMiddleControlClick:y,rightControl:l.a.createElement(ae,{analytics:d,buttonType:p,conversationTitle:t,handleToggleVisibility:y,isExpanded:g}),style:Fe.roundedAppBarCorners,subtitle:e,title:l.a.createElement(ce,{conversationTitle:t,hasNewMessages:n,isHighlighted:s}),withBackground:!s})))}const fe=(e,t)=>e&&t?"onMediaText":"primaryText",Fe=j.a.create((e=>({cursor:{cursor:"pointer"},headerRoot:{borderTopLeftRadius:e.borderRadii.xLarge,borderTopRightRadius:e.borderRadii.xLarge,transition:"all 0.3s ease"},headerBorderClosed:{borderColor:e.colors.navigationBackground},headerActive:{backgroundColor:e.colors.unreadCellBackground},headerHighlighted:{borderColor:e.colors.primary,backgroundColor:e.colors.primary},roundedAppBarCorners:{borderTopLeftRadius:e.borderRadii.xLarge,borderTopRightRadius:e.borderRadii.xLarge}})));var Te=n("zb92");var Se=Object(Te.a)({loader:()=>Promise.all([n.e(0),n.e(289)]).then(n.bind(null,"Rk1B"))}),Ee=n("aWzz"),Ce=n("XnpN"),Ie=n("GSsg"),Re=n("aITJ"),Le=n("yrzJ");class Ke extends l.a.Component{constructor(e,t){super(e,t),this._composer=l.a.createRef(),this._renderConversation=(e,t)=>{const{conversationId:n,history:a,location:s}=this.props;return l.a.createElement(w.a,{conversationId:n,drawerHeader:this._renderHeader(),history:a,isWide:!1,location:s,richTextInputContext:e,typeaheadWrapper:t})},this._isExpanded=()=>{const{visibility:e}=this.props;return e===ue.b.EXPANDED},this._fetchUpdatesIfNeeded=()=>{const{conversationId:e,createLocalApiErrorHandler:t,fetchUpdatesIfNeeded:n,isDmReceiptSettingEnabled:a}=this.props;n(a?{active_conversation_id:e,dm_users:!0}:{}).catch(t())},Object(x.a)()}componentDidMount(){this._updatePolling()}componentDidUpdate(e){e.visibility!==this.props.visibility&&this._updatePolling()}render(){const e=this._isExpanded();return l.a.createElement(l.a.Fragment,null,!e&&this._renderHeader(),e?Re.b.isDesktopOS()?l.a.createElement(Se,null,(({richTextInputContext:e,typeaheadWrapper:t})=>this._renderConversation(e,t))):this._renderConversation():null)}_renderHeader(){const{conversation:e,inboxUnreadCount:t,isHeaderHighlighted:n,isUnread:a,onDrawerOpen:s,perspective:i,triggerHeaderHighlight:r}=this.props,o=n?"white":"text",c=n?"white":"gray700",d=e&&e.type===K.a.ONE_TO_ONE&&i&&Object(Ce.a)(e,i).map((({user:e})=>e.screen_name)),u=d?l.a.createElement(Le.a,{color:c,screenName:d[0]}):void 0;return l.a.createElement(U.a,{style:xe.headerRoot},l.a.createElement(ke,{conversationSubtitle:u,conversationTitle:l.a.createElement(M.b,{conversation:e,perspective:i,textColor:o,withScreenName:!1}),hasNewMessages:a,inboxUnreadCount:t,isHighlighted:n,onDrawerOpen:s,triggerHighlight:r}))}_updatePolling(){this._pollingTimer&&this._pollingTimer.stop(),this.props.visibility===ue.b.COLLAPSED&&(this._pollingTimer=new Ie.a(this._fetchUpdatesIfNeeded,{interval:3e3}),this._pollingTimer.start())}getChildContext(){return{getCustomLocation:null}}}Ke.contextType=s.a,Ke.childContextTypes={getCustomLocation:Ee.func};const xe=j.a.create((e=>({headerRoot:{position:"sticky",top:0,zIndex:e.componentZIndices.appBarZIndex}})));var we=L(Ke),Me=n("4q8G"),Oe=n("6xIQ"),Ae=n("maE+"),De=n("pXKu"),Pe=n("OOE2"),Ue=n("tn7R");const He=A.a.a2f81050;function Ne({dmDrawerOnClick:e,drawerCacheKey:t}){const n=Object(be.b)(),a=Object(P.c)(),s=Object(P.d)(i.selectConversations),r=[];for(const e of Object(Ue.a)(s)){var o;!e.isDeleted&&null!=(o=e.data)&&o.trusted&&r.push(e.data)}r.sort(Me.a);const c=r.map((e=>e.conversation_id)),d=Object(P.d)(F.s),u=Object(P.d)(i.selectUntrustedConversationCount),m=Object(P.d)(Object(Oe.a)((e=>i.selectUntrustedCounts(e)),(e=>e))),p=Object(P.d)(i.selectUntrustedUnreadCount),g=d&&u>0,y=d&&m.newUntrustedWithSocialProof+m.oldUntrustedWithSocialProof+m.newUntrustedWithoutSocialProof+m.oldUntrustedWithoutSocialProof>0,h=()=>l.a.createElement(Pe.a,{allowUntrustedInbox:g,allowUntrustedVDLInbox:y,secondaryInboxCounts:m,untrustedUnreadCount:p});return l.a.createElement(De.a,{accessibilityTitle:He,analytics:n,conversationIds:c,customCellClick:e,fetchInboxHistory:()=>a(i.fetchTrustedInboxHistory()),isDrawer:!0,renderEmptyDMInbox:()=>l.a.createElement(Ae.a,{messageRequestPivot:h()}),renderStickyContent:h,updateLastSeenEventId:()=>a(i.updateTrustedLastSeenEventId()),virtualScrollerCacheKey:t,withPinnedInbox:!0})}var je=n("cFyg"),Be=n("pdDm"),We=n("lAtx"),qe=n("s8G+"),Ve=n("yw4N");const ze="dmDrawerInbox";function Qe({renderHeader:e}){const t=Object(P.c)(),n=Object(qe.a)("dm_evolution_enabled"),a=Object(qe.a)("dm_evolution_inbox_primary_enabled"),s=(e,n)=>{t(i.popOutConversation(n)),e.preventDefault()};return l.a.createElement(U.a,{style:Ge.fill},l.a.createElement(U.a,{style:[Ge.viewportView,je.b.drawerHeaderRadius]},l.a.createElement(Ve.a,{style:[Ge.viewportView,je.b.drawerHeaderRadius]},e(),n&&a?l.a.createElement(Be.a,{dmDrawerCacheKey:ze,dmDrawerOnClick:s,pollInterval:We.POLL_INTERVAL}):l.a.createElement(Ne,{dmDrawerOnClick:s,drawerCacheKey:ze}))))}const Ge=j.a.create((e=>({fill:{flex:1,alignSelf:"stretch"},viewportView:{...j.a.absoluteFillObject,overflowY:"auto"}})));var Ye=n("7JQg");const Xe={page:"messages",section:"inbox_drawer"};function $e({isHeaderHighlighted:e,onDrawerOpen:t,triggerHeaderHighlight:n}){const a=Object(P.d)(b.a),s=Object(P.d)(i.selectDrawerVisibility)===ue.b.EXPANDED,r=a>0;l.a.useEffect((()=>{s&&Object(x.a)()}),[s]);const o=()=>l.a.createElement(U.a,{style:Je.headerRoot},l.a.createElement(ke,{hasNewMessages:r,isHighlighted:e,onDrawerOpen:t,triggerHighlight:n}));return l.a.createElement(Ye.c,{namespace:Xe},l.a.createElement(l.a.Fragment,null,!s&&o(),s&&l.a.createElement(Qe,{renderHeader:o})))}const Je=j.a.create((e=>({headerRoot:{position:"sticky",top:0,zIndex:e.componentZIndices.appBarZIndex}})));var Ze=n("A69o"),et=n("0FVZ"),tt=n("Oe3h"),nt=n("nBUg");const at={isGlobal:!0,isSticky:!0},lt={isGlobal:!0,isSticky:!1};function st({hasConversations:e,isHideDMDrawerPath:t,width:n}){const a=l.a.useRef(null),s=Object(V.f)(),r=Object(V.g)(),c=Object(P.d)(m.s),u=Object(P.d)(i.selectPoppedOutConversationId),p=Object(P.d)(i.selectDrawerVisibility),[g,y]=l.a.useState(!1),[h,_]=l.a.useState(void 0),b=p===ue.b.EXPANDED,v=()=>{g&&(y(!1),clearTimeout(a.current))},k=e=>{const{nativeEvent:{layout:{height:t}}}=e;b||void 0!==h||_(t)},f=l.a.useCallback((()=>{b||g||a.current||(y(!0),a.current=setTimeout((()=>{y(!1),a.current=null}),3e3))}),[b,g]);return l.a.useEffect((()=>()=>{clearTimeout(a.current)}),[a]),(()=>{const n=p===ue.b.CLOSED;return!t()&&e&&!n})()?l.a.createElement(et.a.Drawer,null,l.a.createElement(tt.a,{id:"DMDrawer"},((e,t)=>l.a.createElement(d.a.Provider,{value:{isDrawer:!0}},l.a.createElement(nt.b.Provider,{value:{isDMDrawer:()=>!0}},l.a.createElement(U.a,o()({ref:e()},t({style:[je.b.root,{width:n}],testID:_e})),l.a.createElement(U.a,{onLayout:h?void 0:k,style:[je.b.expandable,{height:h,maxHeight:h},b&&je.b.expanded]},u?l.a.createElement(Ze.a.Provider,{value:lt},l.a.createElement(we,{conversationId:u,history:s,isHeaderHighlighted:g,location:r,onDrawerOpen:v,perspective:c,triggerHeaderHighlight:f})):l.a.createElement(Ze.a.Provider,{value:at},l.a.createElement($e,{isHeaderHighlighted:g,onDrawerOpen:v,triggerHeaderHighlight:f}))))))))):null}st.defaultProps={width:c.a.dmDrawerWidth.max};var it,rt=n("P74S"),ot=n.n(rt),ct=(n("YWiL"),n("PJTX")),dt=n.n(ct);const ut=void 0!==it?it:it=n("IACL");function mt({isHideDMDrawerPath:e,width:t}){const n=Object(f.useCreateLocalApiErrorHandler)("DIRECT_MESSAGES_DRAWER_EVOLUTION"),a=Object(P.c)(),s=dt()(),[r,o]=l.a.useState(!1),[c,d]=l.a.useState(!1),u=l.a.useCallback((()=>{ot()(s,ut,{}).toPromise().then((e=>{var t,n,a,l;null!=(n=((null==e||null==(t=e.dm_convo_list_slice)?void 0:t.items)||[])[0])&&null!=(a=n.dm_conversation_results)&&null!=(l=a.result)&&l.id&&o(!0)})).catch(n({}))}),[n,s]),m=l.a.useCallback((()=>{e()||c||(a(i.loadDrawerVisibilityFromPersistence()),u(),d(!0))}),[a,u,e,c]);return l.a.useEffect((()=>{m()}),[m]),l.a.createElement(st,{hasConversations:r,isHideDMDrawerPath:e,width:t})}var pt=n("YeIG");function gt({isHideDMDrawerPath:e,width:t}){const n=Object(f.useCreateLocalApiErrorHandler)("DIRECT_MESSAGES_DRAWER"),a=Object(P.c)(),[s,r]=l.a.useState(!1),o=Object(P.d)(i.selectConversations),c=!Object(pt.a)(o),d=l.a.useCallback((()=>{e()||s||(a(i.loadDrawerVisibilityFromPersistence()),a(i.fetchInboxIfNeeded()).catch(n({})),r(!0))}),[n,a,s,e]);return l.a.useEffect((()=>{d()}),[d]),l.a.createElement(st,{hasConversations:c,isHideDMDrawerPath:e,width:t})}var yt=n("YlqV");function ht({width:e}){const t=Object(V.g)(),{featureSwitches:n}=l.a.useContext(s.a),a=()=>Object(yt.i)(t.pathname)||t.pathname.startsWith("/i/birdwatch");return n.isTrue("dm_evolution_enabled")&&n.isTrue("dm_evolution_inbox_primary_enabled")?l.a.createElement(mt,{isHideDMDrawerPath:a,width:e}):l.a.createElement(gt,{isHideDMDrawerPath:a,width:e})}},g54k:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var a=n("hqKg"),l=n("s1N3");var s=e=>{const{sender_id:t,by_user_id:n,participants:a=[]}=e;return Object(l.a)(a.map((({user_id:e})=>e)).concat([t,n]).filter(Boolean))},i=n("G6rE"),r=n("oEGd");const o=(e,t)=>({users:s(t).reduce(((t,n)=>(t[n]=e[n],t)),{})}),c=Object(a.createSelector)(i.e.selectAll,((e,t)=>t.entry),o);t.a=Object(r.c)(c)},gEJU:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n("ERkP"),l=n.n(a),s=n("eb3s"),i=n("3XMw"),r=n.n(i);const o=r.a.a219e218,c=r.a.d571e4f9,d=r.a.a551bf7e;function u(e){const{count:t,setShowPinError:n}=e;return l.a.createElement(s.a,{confirmButtonLabel:o,headline:c({count:t}),onConfirm:()=>n(!1),text:d,withCancelButton:!1})}},gbD7:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return o}));n("ERkP");var a=n("aWyx");const l=(e,t)=>({entry:{id:t,time:"",type:e},isActive:!1,isRapidFire:!1,isFirstRapidFire:!1,isLastRapidFire:!1,type:e}),s=l(a.b.CONVERSATION_PROFILE_INFO_HEADER,"conversationProfileInfoHeader"),i="typingIndicator",r=l(a.b.TYPING_INDICATOR,i),o=l(a.b.READ_ONLY_INDICATOR,"readOnlyIndicator")},"hl/W":function(e,t,n){"use strict";var a=n("MMRb"),l=n("P1r1"),s=n("qdEw"),i=n("6xIQ"),r=n("X/yg"),o=n("AQ79"),c=n("z2Pn"),d=n("rxPX"),u=n("0KEI");const m=e=>e===o.d.PRIMARY?a.fetchTrustedInboxHistory:e===o.d.SECONDARY?a.fetchUntrustedInboxHistory:a.fetchUntrustedLowQualityInboxHistory,p=e=>e===o.d.PRIMARY?a.updateTrustedLastSeenEventId:e===o.d.SECONDARY?a.updateUntrustedLastSeenEventId:()=>()=>Promise.resolve();t.a=({inbox:e})=>Object(d.a)().propsFromState((()=>({conversationIds:Object(i.a)((t=>a.selectConversationIdsByInbox(t,e)),(e=>e)),dmNsfwMediaFilter:l.l,isLoadingTop:a.selectIsLoadingTop,isDmNsfwMediaFilterEnabled:l.q,isDmsOpenForAll:l.s,hasConversations:a.selectHasConversations,untrustedUnreadCount:a.selectUntrustedUnreadCount,untrustedCounts:Object(i.a)((e=>a.selectUntrustedCounts(e)),(e=>e)),untrustedCursor:a.selectUntrustedCursor,untrustedConversationCount:a.selectUntrustedConversationCount,untrustedLowQualityConversationCount:a.selectUntrustedLowQualityConversationCount,untrustedLowQualityCursor:a.selectUntrustedLowQualityCursor}))).adjustStateProps((({conversationIds:e,dmNsfwMediaFilter:t,hasConversations:n,isDmNsfwMediaFilterEnabled:a,isDmsOpenForAll:l,isLoadingTop:s,untrustedConversationCount:i,untrustedCounts:r,untrustedCursor:o,untrustedLowQualityConversationCount:c,untrustedLowQualityCursor:d,untrustedUnreadCount:u})=>({dmNsfwMediaFilter:t,isDmNsfwMediaFilterEnabled:a,conversationIds:e,untrustedUnreadCount:u,untrustedCounts:r,allowUntrustedInbox:l&&i>0,allowUntrustedVDLInbox:l&&r.newUntrustedWithSocialProof+r.oldUntrustedWithSocialProof+r.newUntrustedWithoutSocialProof+r.oldUntrustedWithoutSocialProof>0,allowLowQualityUntrustedInbox:l&&c>0,isAtEndOfUntrustedInbox:o&&"AT_END"===o.status}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(u.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_INBOX"),clearSearchCache:a.clearSearchCache,clearSearchSlicesCache:s.b,fetchInboxHistory:m(e),setLastViewedDmInboxPath:c.h,updateLastSeenEventId:p(e),updateDmNsfwMediaFilter:l.L}))).withAnalytics({page:"messages",section:"inbox",component:Object(r.k)(e)})},htvZ:function(e,t,n){"use strict";n.d(t,"b",(function(){return _})),n.d(t,"a",(function(){return b}));var a=n("ERkP"),l=n.n(a),s=n("v6aA"),i=(n("kYxP"),n("8W85"));function r(){const e=l.a.useContext(b),[t,n]=e.activeVoiceMessage,[,a]=e.playerApi,[,s]=e.playerState,[,r]=t;const o={media:r,onEnded:function(){n([null,null]),e.scribeAction&&e.scribeAction.complete()},onPlayerApi:a,onPlayerState:s};return l.a.createElement(i.a,o)}var o=n("X/yg"),c=(n("849X"),n("89tF")),d=n("k89r");function u(e){const t=function(){const e=l.a.useState(g.activeVoiceMessage),t=l.a.useState(g.playerApi),n=l.a.useState(g.playerState),a=function(){const e=Object(d.a)();return l.a.useMemo((()=>{const t={page:"messages",section:"thread",component:"message",element:"voice"};function n({action:e,component:n=t.component}){const{element:a,page:l,section:s}=t;return{page:l,section:s,component:n,element:a,action:e}}const a=(t,a)=>a?a.data?e.scribe({...n({action:t}),data:a.data}):e.scribe({...n({action:t,component:p(a)})}):e.scribe({...n({action:t})});return{impression:e=>a("impression",e),report:e=>a("report",e),play:e=>a("play",e),pause:()=>a("pause"),complete:()=>a("complete")}}),[e])}();return{activeVoiceMessage:e,playerApi:t,playerState:n,scribeAction:a}}();return l.a.createElement(y.Provider,{value:t},e.children)}const m={Timelines:Object(c.a)({message:!0,inbox_timeline:!0,low_quality_timeline:!0,requests_timeline:!0})};function p({isLowQuality:e,isTrusted:t}){return t?m.Timelines.inbox_timeline:e?m.Timelines.low_quality_timeline:m.Timelines.requests_timeline}const g={activeVoiceMessage:[null,null],playerApi:null,playerState:null,scribeAction:null},y=l.a.createContext({activeVoiceMessage:[g.activeVoiceMessage,h],playerApi:[g.playerApi,h],playerState:[g.playerState,h],scribeAction:null});function h(){throw new Error("DMVoiceContext is not initialized")}function _(e){const{featureSwitches:t}=l.a.useContext(s.a);return Object(o.o)(t)?l.a.createElement(u,null,e.children,l.a.createElement(r,null)):e.children}const b=y},"ii+P":function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var a=n("ERkP"),l=n.n(a),s=n("wtru");function i(e){const t=Object(s.b)();return[!!t&&!t.flags[e],l.a.useCallback((()=>{null==t||t.addFlag(e)}),[t,e])]}t.a=i},ijJS:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n("ERkP"),l=n.n(a),s=n("aX4+"),i=n("3XMw"),r=n.n(i),o=n("b5s6"),c=n("MWbm"),d=n("TIdA"),u=n("A91F"),m=n("rHpw"),p=n("t62R"),g=n("4n2h");const y=r.a.ga086a54,h=({accessibilityLabel:e,image:t})=>l.a.createElement(c.a,{style:v.thumbnail},l.a.createElement(d.a,{accessibilityLabel:e,aspectMode:u.a.SQUARE,backgroundColor:m.a.theme.colors.gray300,image:t})),_=({card:e,tweetUserId:t})=>l.a.createElement(s.a,{card:{name:e.name,url:e.url,binding_values:e.binding_values,users:e.users},cardContext:{tweetUserId:t}});function b({accessibilityLabel:e,card:t,content:n,isMessageSearchItem:a=!1,isSelected:s=!1,searchImage:i,tweetId:r,tweetUserId:d,unread:u=!1}){const m=Object(g.a)(u,s),b=Object(g.b)(u);return a&&(i||t||r)?l.a.createElement(c.a,{style:i?v.mediaContainer:void 0},l.a.createElement(c.a,{style:t||r?v.cardMessageText:v.messageText},l.a.createElement(p.b,{color:m,numberOfLines:2,weight:b},n)),t&&d?l.a.createElement(_,{card:t,tweetUserId:d}):null,r?l.a.createElement(o.a,{tweetId:r}):null,i?l.a.createElement(h,{accessibilityLabel:e||y,image:i}):null):l.a.createElement(p.b,{color:m,numberOfLines:a?2:1,style:a?v.messageText:void 0,weight:b},n)}const v=m.a.create((e=>({thumbnail:{height:e.spacesPx.space40,width:e.spacesPx.space40,borderRadius:e.borderRadii.large,marginLeft:`calc(${e.spaces.space8} + ${e.spaces.space2})`,overflow:"hidden"},cardMessageText:{paddingVertical:`calc(${e.spaces.space8} + ${e.spaces.space2})`},messageText:{maxWidth:`calc(100% - (${e.spaces.space48} + ${e.spaces.space2}))`,paddingVertical:e.spaces.space2},mediaContainer:{flexDirection:"row",justifyContent:"space-between"}})))},iunV:function(e,t,n){"use strict";var a,l,s={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"message"},{defaultValue:null,kind:"LocalArgument",name:"target"}],kind:"Fragment",metadata:null,name:"useSendMessageMutation",selections:l=[{alias:null,args:[{kind:"Variable",name:"message",variableName:"message"},{kind:"Literal",name:"s",value:18},{kind:"Variable",name:"target",variableName:"target"}],concreteType:null,kind:"LinkedField",name:"create_dm",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useSendMessageMutation",selections:l},params:{id:"V1X0AqeRDf3jOpVzYKlvdg",metadata:{},name:"useSendMessageMutation",operationKind:"mutation",text:null}};s.hash="9f02923cb63ff1de10d44a45b2029eab",e.exports=s},kb9v:function(e,t,n){"use strict";n("kYxP");var a=n("ERkP"),l=n.n(a),s=n("TIdA"),i=n("t62R"),r=n("A91F"),o=n("/yvb"),c=n("Eqye"),d=n("efqG"),u=n("sgih"),m=n("rHpw"),p=n("MWbm"),g=n("3dyc");const y=m.a.create((e=>({root:{paddingVertical:e.spacesPx.space32},rootWithImage:{paddingTop:0},graphic:{marginBottom:e.spacesPx.space20},icon:{alignSelf:"center",height:e.spacesPx.space64,width:e.spacesPx.space64},container:{paddingHorizontal:e.spacesPx.space32},description:{marginTop:e.spacesPx.space8,marginBottom:e.spacesPx.space4},actionButton:{marginTop:e.spacesPx.space16}})));t.a=({actionPrimary:e,actionSecondary:t,children:n,headline:a,icon:h,iconColor:_,imageUrl:b,onDismiss:v,shouldDisplay:k,text:f,withMask:F=!0})=>{const[T,S]=l.a.useState(!1),E=e=>l.a.createElement(d.a,{onDismiss:w,renderContent:()=>I(w),switchOnlyOnXSmallBreakpoint:!0,visibilityBehavior:g.b.forceVisible,withArrow:!0,withFixedPosition:!0,withMask:F},e),C=()=>l.a.createElement(u.a,{onMaskClick:()=>w(),type:"center",withMask:!0},I(w)),I=n=>l.a.createElement(p.a,{style:[y.root,b&&y.rootWithImage]},R(),l.a.createElement(p.a,{style:y.container},L(),K(),x({action:e,dismiss:n,type:t&&"primaryFilled"}),x({action:t,dismiss:n}))),R=()=>{let e=h&&l.a.createElement(h,{style:_?[y.icon,{color:m.a.theme.colors[_]}]:y.icon});return b&&!c.a.isEnabled&&(e=l.a.createElement(s.a,{accessibilityLabel:"",aspectMode:r.a.exact(2),image:b})),e&&l.a.createElement(p.a,{style:y.graphic},e)},L=()=>l.a.createElement(i.b,{size:"title3",weight:"heavy"},a),K=()=>l.a.createElement(i.b,{color:"gray700",style:y.description},f),x=({action:e,dismiss:t,type:n})=>e&&l.a.createElement(o.a,{link:e.link&&e.link,onPress:e.onClick?e.onClick:t,size:"large",style:y.actionButton,type:n},e.text),w=()=>{v&&v(),S(!0)};return k&&!T?n?E(n):C():n||null}},lAtx:function(e,t,n){"use strict";n.r(t),n.d(t,"POLL_INTERVAL",(function(){return Oe}));var a=n("ERkP"),l=n.n(a),s=n("v6aA"),i=n("Y6L+"),r=n("zCf4"),o=n("MMRb"),c=n("rxPX");const d=(e,t)=>{const n=Object(r.e)(t.location.pathname,{path:`/messages/${i.j}(/.*)?`,exact:!0,strict:!1});return null==n?void 0:n.params.conversationId},u=(e,t)=>{const n=d(0,t);return Object(o.selectInboxTypeByConversation)(e,n)};var m=Object(c.a)().propsFromState((()=>({conversationId:d,inboxType:u}))),p=n("zsGg"),g=n("pdDm"),y=(n("kYxP"),n("hl/W")),h=n("qz2E"),_=n("pXKu"),b=n("jYSG"),v=n("nySH"),k=n("FIs5"),f=n("rHpw");function F(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{header:e.tombstone?"":v.a,message:b.a,style:T.emptyMessage}),e.tombstone)}const T=f.a.create((e=>({emptyMessage:{borderBottomStyle:"solid",borderBottomColor:e.colors.borderColor,borderBottomWidth:e.borderWidths.small,paddingVertical:e.spaces.space16}})));var S=n("AQ79"),E=n("f42t"),C=n("P1r1"),I=n("0KEI");var R=Object(c.a)().propsFromState((()=>({dmNsfwMediaFilter:C.l}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(I.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_INBOX"),updateDmNsfwMediaFilter:C.L}))).withAnalytics({page:"messages",section:"inbox"}),L=n("0yYu"),K=n("3XMw"),x=n.n(K),w=n("Lz2T"),M=n("Irs7");const O=x.a.j24c37b2,A=x.a.f5dc353c,D=x.a.daeda054,P=x.a.fe1eaa96;var U=R((e=>{const{createLocalApiErrorHandler:t,dmNsfwMediaFilter:n,updateDmNsfwMediaFilter:a}=e,{featureSwitches:i}=l.a.useContext(s.a),r=i.isTrue("dm_conversations_nsfw_media_filter_enabled"),[o,c]=l.a.useState(void 0===n&&r),d=Object(M.b)(),u=l.a.useCallback((()=>{c(!1),a(!0).catch(t())}),[a,t]);return l.a.useEffect((()=>()=>{void 0===n&&r&&u()}),[n,r,u]),o?l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{bodyText:P,primaryAction:{onClick:()=>{d.scribe({component:"dm_nsfw_prompt",element:"primary_action",action:"click"}),u()},text:O},secondaryAction:{link:"/settings/direct_messages",onClick:()=>{d.scribe({component:"dm_nsfw_prompt",element:"secondary_action",action:"click"})},text:D},titleText:A}),l.a.createElement(L.a,null)):null})),H=n("5FtR"),N=n("uDfI"),j=n("MWbm"),B=n("t62R"),W=n("cm6r");const q=x.a.eb7de4aa,V=x.a.a0e81a2e;function z(e){const{isAtEndOfUntrustedInbox:t,untrustedConversationIds:n}=e,a=Object(M.b)(),s=Object(N.d)(C.r);l.a.useEffect((()=>{s&&t&&a.scribe({element:"low_quality_pivot",action:"impression"})}),[a,t,s]);return t&&s?l.a.createElement(j.a,null,n.length>0&&l.a.createElement(L.a,null),l.a.createElement(j.a,{style:Q.tombstoneDescription},l.a.createElement(B.b,{color:"gray700",size:"subtext2"},q)),l.a.createElement(W.a,{link:Object(v.b)(S.d.TERTIARY),onPress:()=>{a.scribe({element:"low_quality_pivot",action:"click"})},style:Q.tombstoneContainer},l.a.createElement(B.b,{align:"center",color:"primary",size:"body"},V))):null}const Q=f.a.create((e=>({tombstoneContainer:{borderTopStyle:"solid",borderTopColor:e.colors.borderColor,borderTopWidth:e.borderWidths.small,borderBottomStyle:"solid",borderBottomColor:e.colors.borderColor,borderBottomWidth:e.borderWidths.small,paddingVertical:e.spaces.space12},tombstoneDescription:{paddingHorizontal:e.spaces.space16,paddingVertical:e.spaces.space16}})));var G=n("pxuL"),Y=n("M2mT");const X=x.a.cf2d1048;function $(e){const t=Object(r.f)(),n=Object(r.i)();return l.a.createElement(Y.a,{backLocation:"/messages",onBackClick:()=>{t.push(Object(v.b)(S.d.PRIMARY))},rightControl:Object(v.d)("/settings/direct_messages",!0),screenType:"secondaryRoot",title:l.a.createElement(B.b,{size:"headline2"},X),withDetailOpen:!n.isExact},e.children)}class J extends l.a.Component{constructor(...e){super(...e),this.componentDidMount=()=>{this.context.incrementDmDrawerSuppressorCount()},this.componentWillUnmount=()=>{this.context.decrementDmDrawerSuppressorCount()},this._renderTombstone=()=>{const{allowLowQualityUntrustedInbox:e,conversationIds:t,isAtEndOfUntrustedInbox:n}=this.props;return e?l.a.createElement(z,{isAtEndOfUntrustedInbox:n,untrustedConversationIds:t}):null},this._renderEmptyDMInbox=()=>{const e=this._renderTombstone();return l.a.createElement(F,{tombstone:e})}}render(){const{allowUntrustedInbox:e,analytics:t,conversationIds:n,fetchInboxHistory:a,updateLastSeenEventId:s}=this.props;return e?l.a.createElement($,null,l.a.createElement(U,null),l.a.createElement(_.a,{accessibilityTitle:X,analytics:t,conversationIds:n,fetchInboxHistory:a,footer:this._renderTombstone(),inboxType:S.d.SECONDARY,renderEmptyDMInbox:this._renderEmptyDMInbox,renderStickyContent:()=>Object(v.e)(this.props.conversationIds),updateLastSeenEventId:s,virtualScrollerCacheKey:"dmUntrustedInbox"})):l.a.createElement(H.a,{to:"/messages"})}}J.contextType=G.a,J.defaultProps={conversationIds:[]};var Z=Object(E.a)(Object(y.a)({inbox:S.d.SECONDARY})(J),{directMessages:h.a}),ee=(n("Qavd"),n("lnti"));var te,ne,ae=Object(c.a)().propsFromState((()=>({isDmQualityFilterEnabled:C.r,isDmsOpenForAll:C.s}))).withAnalytics({page:"messages",section:"inbox"}),le=n("Ka95"),se=n("DbJc"),ie=n("TEoO"),re=n("IG4P"),oe=n("Fr3L"),ce=n("GSsg"),de=n("DQzJ"),ue=n("P74S"),me=n.n(ue),pe=(n("YWiL"),n("PJTX")),ge=n.n(pe);const ye=e=>e.__id,he=void 0!==te?te:te=n("XZOd"),_e=void 0!==ne?ne:ne=n("FWve"),be={context:"DM_INBOX_SECONDARY_CONTEXT"},ve=e=>{var t;const{isDmQualityFilterEnabled:n,isDmsOpenForAll:a,pollInterval:s}=e,[i,r]=l.a.useState(!1),o=n?he:_e,{data:c,fetchNext:d,hasNext:u}=Object(de.a)(o,{}),m=Object(I.useCreateLocalApiErrorHandler)("DM_INBOX_SECONDARY_EVOLUTION"),p=ge()(),g=(null==c||null==(t=c.untrusted)?void 0:t.items)||[],y=Object(ee.a)(g.map((e=>{var t;return null==e||null==(t=e.dm_conversation_results)?void 0:t.result}))),h=y.map((e=>e.__id));let _=[];if(n){var b;const e=(null==c||null==(b=c.low_quality)?void 0:b.items)||[];_=Object(ee.a)(e.map((e=>{var t;return null==e||null==(t=e.dm_conversation_results)?void 0:t.result})))}const k=l.a.useCallback((()=>{r(!0),me()(p,he,{}).toPromise().catch(m({})).finally((()=>r(!1)))}),[m,p]);l.a.useEffect((()=>{const e=new ce.a((()=>{k()}),{interval:s});return e.start(),()=>{e.stop()}}),[k,s]);const f=Object(v.e)(h),T=()=>n&&_.length?l.a.createElement(z,{isAtEndOfUntrustedInbox:!u,untrustedConversationIds:h}):null;return a?l.a.createElement($,null,l.a.createElement(U,null),l.a.createElement(re.a,{isRefreshing:i,onRefresh:k},l.a.createElement(ie.a,{accessibilityRole:"tablist",accessibilityTitle:X,anchoring:se.a,assumedItemHeight:100,cacheKey:"dmUntrustedInbox",footer:T(),header:f,identityFunction:ye,items:y,noItemsRenderer:()=>l.a.createElement(F,{tombstone:T()}),onNearEnd:d,renderer:(e,t)=>(t&&t(!0),l.a.createElement(le.a,{conversationIds:h,dm_conversation:e,inboxType:S.d.SECONDARY,isPinned:!1})),withKeyboardShortcuts:!0,withoutHeadroom:!0}))):l.a.createElement(H.a,{to:"/messages"})};var ke=ae((function(e){return l.a.createElement(oe.a,{errorConfig:be},l.a.createElement(ve,e))}));function fe(e){const t=Object(r.f)(),n=Object(r.i)();return l.a.createElement(Y.a,{backLocation:Object(v.b)(S.d.SECONDARY),onBackClick:()=>{t.push(Object(v.b)(S.d.SECONDARY))},rightControl:Object(v.d)("/settings/direct_messages",!0),screenType:"secondaryRoot",title:v.f,withDetailOpen:!n.isExact},e.children)}function Fe(e){return l.a.createElement(k.a,{header:v.a,message:b.a})}var Te=n("WjvF");const Se=x.a.bece84b4,Ee=x.a.ee8c0c8a;class Ce extends l.a.Component{constructor(...e){super(...e),this.componentDidMount=()=>{this.context.incrementDmDrawerSuppressorCount()},this.componentWillUnmount=()=>{this.context.decrementDmDrawerSuppressorCount()},this._renderEmptyDMInbox=()=>l.a.createElement(k.a,{header:Se,imageVariants:Object(Te.b)(Te.a.PaintCoveredHand),message:Ee}),this._handleBackClick=()=>{this.props.history.push(Object(v.b)(S.d.SECONDARY))},this._hasDetailOpen=()=>{const{match:e}=this.props;return!e.isExact}}render(){const{analytics:e,conversationIds:t,fetchInboxHistory:n,updateLastSeenEventId:a}=this.props;return l.a.createElement(fe,null,l.a.createElement(_.a,{accessibilityTitle:v.f,analytics:e,conversationIds:t,fetchInboxHistory:n,inboxType:S.d.TERTIARY,renderEmptyDMInbox:()=>l.a.createElement(Fe,null),renderStickyContent:()=>Object(v.e)(this.props.conversationIds),updateLastSeenEventId:a,virtualScrollerCacheKey:"dmLowQualityUntrustedInbox"}))}}Ce.contextType=G.a;var Ie,Re=Object(E.a)(Object(y.a)({inbox:S.d.TERTIARY})(Ce),{directMessages:h.a});const Le=e=>e.__id,Ke=void 0!==Ie?Ie:Ie=n("SDjT"),xe=e=>{var t;const{pollInterval:n}=e,{data:a,fetchNext:s}=Object(de.a)(Ke,{}),[i,r]=l.a.useState(!1),o=Object(I.useCreateLocalApiErrorHandler)("DM_INBOX_TERTIARY_EVOLUTION"),c=ge()(),d=l.a.useCallback((()=>{r(!0),me()(c,Ke,{}).toPromise().catch(o({})).finally((()=>r(!1)))}),[o,c]);l.a.useEffect((()=>{const e=new ce.a((()=>{d()}),{interval:n});return e.start(),()=>{e.stop()}}),[d,n]);const u=(null==a||null==(t=a.dm_convo_list_slice)?void 0:t.items)||[],m=Object(ee.a)(u.map((e=>{var t;return null==e||null==(t=e.dm_conversation_results)?void 0:t.result}))),p=m.map((e=>e.__id)),g=Object(v.e)(p);return l.a.createElement(fe,null,l.a.createElement(re.a,{isRefreshing:i,onRefresh:d},l.a.createElement(ie.a,{accessibilityRole:"tablist",accessibilityTitle:v.f,anchoring:se.a,assumedItemHeight:100,cacheKey:"dmLowQualityUntrustedInbox",header:g,identityFunction:Le,items:m,noItemsRenderer:()=>l.a.createElement(Fe,null),onNearEnd:s,renderer:(e,t)=>(t&&t(!0),l.a.createElement(le.a,{conversationIds:p,dm_conversation:e,inboxType:S.d.TERTIARY,isPinned:!1})),withKeyboardShortcuts:!0,withoutHeadroom:!0})))};function we(e){return l.a.createElement(oe.a,{errorConfig:{context:"DM_INBOX_TERTIARY_CONTEXT"}},l.a.createElement(xe,e))}var Me=n("Vc8w");const Oe=8e3,Ae=m((e=>{const{conversationId:t,inboxType:n,...a}=e,{location:i}=e,{featureSwitches:r}=l.a.useContext(s.a);return Object(Me.a)(),n===S.d.TERTIARY||"/messages/requests/additional"===i.pathname?r.isTrue("dm_evolution_enabled")&&r.isTrue("dm_evolution_inbox_tertiary_enabled")?l.a.createElement(we,{pollInterval:Oe}):l.a.createElement(Re,a):n===S.d.SECONDARY||"/messages/requests"===i.pathname?r.isTrue("dm_evolution_enabled")&&r.isTrue("dm_evolution_inbox_secondary_enabled")?l.a.createElement(ke,{pollInterval:Oe}):l.a.createElement(Z,a):r.isTrue("dm_evolution_enabled")&&r.isTrue("dm_evolution_inbox_primary_enabled")?l.a.createElement(g.a,{pollInterval:Oe}):l.a.createElement(p.a,a)}));t.default=Ae},lBmi:function(e,t,n){"use strict";var a=n("ERkP"),l=n.n(a),s=n("Lsrn"),i=n("k/Ka");const r=(e={})=>Object(i.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},l.a.createElement("g",null,l.a.createElement("path",{d:"M23.885 19.5c-.762-3.064-3.72-5.206-7.19-5.206-1.17 0-2.27.265-3.258.707 1.246 1.08 2.157 2.5 2.564 4.138.252 1.004.052 2.03-.52 2.86h6.48c.627 0 1.2-.27 1.57-.744.38-.49.51-1.13.355-1.753zm-9.695 1.755c.38-.49.512-1.13.356-1.754-.375-1.506-1.284-2.785-2.52-3.7-1.278-.95-2.905-1.507-4.67-1.507-3.47 0-6.428 2.142-7.19 5.208-.156.626-.025 1.266.356 1.755.37.473.94.744 1.567.744h10.533c.627 0 1.197-.272 1.567-.745zm2.505-8.218c1.185 0 2.51-.132 3.368-1.11.72-.823.952-2.08.715-3.847-.333-2.478-1.86-3.956-4.083-3.956-2.225 0-3.75 1.48-4.084 3.956-.235 1.766 0 3.023.718 3.846.858.98 2.184 1.11 3.368 1.11zm-9.34 0c1.185 0 2.51-.132 3.367-1.11.72-.823.953-2.08.716-3.847-.333-2.478-1.86-3.956-4.083-3.956-2.225 0-3.75 1.48-4.084 3.956-.235 1.766 0 3.023.718 3.846.858.98 2.184 1.11 3.368 1.11z"})));r.metadata={width:24,height:24},t.a=r},"maE+":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n("ERkP"),l=n.n(a),s=n("FIs5"),i=n("3XMw"),r=n.n(i),o=n("Irs7");const c=r.a.a676a876,d=r.a.j2611eac,u=r.a.efe8fda0;function m(e){const t=Object(o.b)();return l.a.createElement(l.a.Fragment,null,e.messageRequestPivot,l.a.createElement(s.a,{buttonLink:"/messages/compose",buttonText:u,header:c,message:d,onImpression:()=>{t.scribe({component:"empty_message",action:"impression"})}}))}},nySH:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"f",(function(){return h})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return k}));var a=n("ERkP"),l=n.n(a),s=n("HPNB"),i=n("jYSG"),r=n("3XMw"),o=n.n(r),c=n("AQ79"),d=n("+Bsv"),u=n("MWbm"),m=n("cHvH"),p=n("t62R"),g=n("rHpw");const y=o.a.bece84b4,h=o.a.e7172d70,_=e=>{switch(e){case c.d.SECONDARY:return"/messages/requests";case c.d.TERTIARY:return"/messages/requests/additional";case c.d.PRIMARY:default:return"/messages"}},b=(e,t,n)=>{const a=n&&t.get(n);if(!a)return;const l=a.getLinkedRecords("items")||[],s=[];let i=!1;l.forEach((t=>{const n=t&&t.getLinkedRecord("dm_conversation_results"),a=n&&n.getDataID();a&&(e===`DMConversation:${a}`&&i||(s.push(t),i||(i=!0)))})),a.setLinkedRecords(s,"items")},v=(e,t)=>l.a.createElement(d.a,{pullRight:t,to:e}),k=e=>l.a.createElement(m.a,null,(({windowWidth:t})=>{const n=s.a.isTwoColumnLayout(t),a=0===e.length;return n||a?null:l.a.createElement(u.a,{style:f.stickyCopyContainer},l.a.createElement(p.b,{style:f.stickyCopy},i.a))})),f=g.a.create((e=>({stickyCopyContainer:{backgroundColor:e.colors.cellBackground,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor,zIndex:1},stickyCopy:{color:e.colors.gray700,padding:e.spaces.space20}})))},pXKu:function(e,t,n){"use strict";n("kYxP");var a=n("ERkP"),l=n.n(a),s=n("BUB3"),i=n("v6aA"),r=n("xZGM"),o=n("rxPX");var c=Object(o.a)().propsFromState((()=>({shouldShowPrompt:(e,t)=>Object(r.E)(e,r.k)}))).propsFromActions((()=>({addFlag:r.A}))).withAnalytics({component:"dm_education_flags_prompt"}),d=n("fs1G"),u=n("t62R"),m=n("feu+"),p=n("3XMw"),g=n.n(p);const y=g.a.fd6150fc,h=l.a.createElement(g.a.I18NFormatMessage,{$i18n:"iac7f92b"},l.a.createElement(u.b,{link:"/privacy"},g.a.ac25e02e)),_=g.a.j24c37b2;var b=c((e=>{const{addFlag:t,analytics:n,shouldShowPrompt:a}=e,{featureSwitches:s}=l.a.useContext(i.a);if(!(a&&s.isTrue("dm_education_flags_prompt")))return!1;return n.scribeAction("impression"),l.a.createElement(m.a,{actionLabel:_,headline:y,onAction:()=>{n.scribeAction("click"),t(r.k)},onClose:d.a,subtext:h,withCloseButton:!1})})),v=n("MMRb"),k=n("kGix"),f=n("0KEI");var F=Object(o.a)().propsFromState((()=>({hasConversations:v.selectHasConversations,fetchStatus:v.selectFetchStatus,isLoadingTop:v.selectIsLoadingTop}))).adjustStateProps((({fetchStatus:e,hasConversations:t,isLoadingTop:n})=>({fetchStatus:t?k.a.LOADED:e,isRefreshing:t&&n}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(f.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_INBOX"),fetchInbox:v.fetchInbox,fetchInboxIfNeeded:v.fetchInboxIfNeeded,fetchUpdates:v.fetchUpdatesIfNeeded}))),T=n("ZYFu"),S=n("1YZw");var E,C,I,R=Object(o.a)().propsFromState((()=>({pinnedConversationIds:v.selectPinnedConversationIds}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(f.createLocalApiErrorHandlerWithContextFactory)("DM_PINNED_INBOX_CONTEXT")}))).withAnalytics({page:"messages",section:"inbox"}),L=n("AQ79"),K=n("oUUt"),x=n("d9IC"),w=n("h3MB"),M=n("QvgI"),O=n("P74S"),A=n.n(O),D=(n("YWiL"),n("q+MS")),P=n("DbJc"),U=n("TEoO"),H=n("NjAB"),N=n("gEJU"),j=n("pHkl"),B=n("IG4P"),W=n("Fr3L"),q=n("uDfI"),V=n("DQzJ"),z=n("MWbm"),Q=n("q8SM"),G=n("HvW7"),Y=n.n(G),X=n("PJTX"),$=n.n(X);const J=g.a.e4b3f520,Z=g.a.ae4d666a,ee=g.a.d98e066c,te=g.a.j302dba8,ne=e=>e,ae=void 0!==E?E:E=n("X8um"),le={context:"DM_PINNED_INBOX"},se=e=>{var t;const a=Object(q.c)(),{accessibilityTitle:s,analytics:r,cacheKey:o,conversationIds:c,createLocalApiErrorHandler:d,footer:u,header:m,onNearEnd:p,pinnedConversationIds:g,renderEmptyDMInbox:y,renderInboxItem:h,showSearchView:_,withKeyboardShortcuts:b}=e,k=$()(),{data:f}=Object(V.a)(ae,{label:L.a.PINNED}),F=l.a.useMemo((()=>{var e;return(null==f||null==(e=f.labeled_conversation_slice)?void 0:e.items)||[]}),[f]),{entities:T}=Object(H.b)(F,[w.a]),{featureSwitches:E}=l.a.useContext(i.a),R=E.getNumberValue("dm_conversation_labels_max_pinned_count"),[x,O]=l.a.useState(!1),[W,z]=l.a.useState(!1),G=(e=>{const t=l.a.useRef();return l.a.useEffect((()=>{t.current=e})),t.current})(f);l.a.useEffect((()=>{var e;const t=(null==G||null==(e=G.labeled_conversation_slice)?void 0:e.items)||[],n=null==t?void 0:t.filter((e=>-1===F.indexOf(e.rest_id)));n.length&&n.forEach((e=>{var t;const n=null==(t=e.labels)?void 0:t.filter((e=>e.label_type!==L.a.PINNED));a(Object(D.a)({conversations:{[e.rest_id]:{...e,labels:n}}}))})),a(Object(D.a)(T,!1))}),[f]);const X=l.a.useCallback((()=>{O(!0);const e=A()(k,ae,{label:L.a.PINNED}).toPromise();Promise.all([e,()=>a(v.fetchInbox())]).then((()=>O(!1))).catch((e=>{d()(e),O(!1)}))}),[d,a,k]),[le]=Y()(void 0!==C?C:C=n("ZH9U")),[se]=Y()(void 0!==I?I:I=n("rQjK")),re=l.a.useCallback(((e,t)=>{le({variables:{conversation_id:e,label:L.a.PINNED},onCompleted(n){var l;switch(null==(l=n.add_dm_conversation_label_v3)?void 0:l.__typename){case"DMConversationLabelInfo":{const{label_type:l,timestamp:s}=n.add_dm_conversation_label_v3;a(Object(D.a)({conversations:{[e]:{...t,labels:[{label_type:l,timestamp:s}]}}})),a(Object(S.b)({ariaOnly:!0,text:ee}));break}case"DMConversationLabelUnavailable":{const{failure_reason:e}=n.add_dm_conversation_label_v3;r.scribe({element:"thread",action:"error_shown",data:{error_type:j.i.MAX_PINS_REACHED}}),"ExceededMaxPinnedConversations"===e&&z(!0);break}}},onError(e){d(Q.a)(e)}})}),[a,d,le,r]),oe=l.a.useCallback(((e,t)=>{se({variables:{conversation_id:e,label_type:L.a.PINNED},onCompleted(n){var l;const s=t?null==t||null==(l=t.labels)?void 0:l.filter((e=>e.label_type!==L.a.PINNED)):[];a(Object(D.a)({conversations:{[e]:{...t,labels:s}}})),a(Object(S.b)({ariaOnly:!0,text:te}))},updater(t){var n,a;const l=null==(n=F.find((t=>t.rest_id===e)))?void 0:n.id,s=null==f||null==(a=f.labeled_conversation_slice)?void 0:a.__id;if(!l||!s)return;const i=t.get(l),r=t.get(s);r&&i&&(Object(K.b)(r,l),t.delete(l))},onError(e){d(Q.b)(e)}})}),[d,F,null==f||null==(t=f.labeled_conversation_slice)?void 0:t.__id,a,se]),ce=null==c?void 0:c.filter((e=>-1===g.indexOf(e))),de=g.length&&ce.length,ue=l.a.createElement(l.a.Fragment,null,m,null!=g&&g.length?l.a.createElement(l.a.Fragment,null,ie(J),g.map(((e,t)=>h({conversationIds:g,pinConversation:re,unpinConversation:oe})(e)))):null,de?ie(Z):null);return null!=c&&c.length?l.a.createElement(l.a.Fragment,null,W?l.a.createElement(N.a,{count:R,setShowPinError:z}):null,_?l.a.createElement(M.a,{accessibilityTitle:s,analytics:r,conversationIds:c,hideRecentSearches:e.hideRecentSearches,onQueryChange:e.onQueryChange,pinConversation:re,query:e.query,unpinConversation:oe}):l.a.createElement(B.a,{isRefreshing:x,onRefresh:X},o&&null!=ce&&ce.length?l.a.createElement(U.a,{accessibilityRole:"tablist",accessibilityTitle:s,anchoring:P.a,assumedItemHeight:100,cacheKey:o,footer:u,header:ue,identityFunction:ne,items:ce,onNearEnd:p,renderer:h({conversationIds:ce,pinConversation:re,unpinConversation:oe}),withKeyboardShortcuts:b,withoutHeadroom:!0}):ue)):y()},ie=e=>l.a.createElement(z.a,null,l.a.createElement(x.a,{headerText:e,isInboxLabelHeader:!0}));function re(e){return l.a.createElement(W.a,{errorConfig:le},l.a.createElement(se,e))}var oe=R(l.a.memo(re)),ce=n("dwig"),de=n("v//M"),ue=n("QB0K"),me=n("Avzu"),pe=n("FRNI");const ge=g.a.h845f282,ye=g.a.f325afc4;function he(){return l.a.createElement(ue.a,{accessibilityLabel:ge,href:"/messages/compose",icon:l.a.createElement(me.a,null),label:ge,scribeComponent:"floating_dm_button",shortLabel:ye,testID:pe.a.message})}var _e=l.a.memo(he),be=n("VwDm"),ve=n("tI3i"),ke=n.n(ve),fe=n("sNn6"),Fe=n("883S"),Te=n("yoO3"),Se=n("4hmp"),Ee=n("GSsg"),Ce=n("TnY3"),Ie=n("2g+p"),Re=n("6OUF"),Le=n("mw9i"),Ke=n("BcsE"),xe=n("+d3d");const we=e=>e,Me=g.a.a66ac766,Oe=g.a.fe61929e,Ae=g.a.a846382a;class De extends l.a.Component{constructor(e,t){var n,a,i,r,o,c,d;super(e,t),this.state={showSearchView:!(null==(n=this.props)||null==(a=n.location)||null==(i=a.state)||!i.searchQuery),searchQuery:null!=(r=null==(o=this.props)||null==(c=o.location)||null==(d=c.state)?void 0:d.searchQuery)?r:""},this._enablePinnedInbox=this.context.featureSwitches.isTrue("dm_conversation_labels_pinned_enabled")&&this.context.featureSwitches.isTrue("direct_messages_incremental_holdback_2022h1"),this._messageSearchEnabled=this.context.featureSwitches.isTrue("dm_inbox_search_message_results_enabled")&&this.context.featureSwitches.isTrue("direct_messages_incremental_holdback_2022h1"),this._modularSearchEnabled=this.context.featureSwitches.isTrue("dm_inbox_search_modular_results_enabled"),this._isVDLEnabled=this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_inbox_p0_enabled"),this._render=()=>{const{withPinnedInbox:e}=this.props;return this._enablePinnedInbox&&e?this._renderPinnedInbox():this._renderInbox()},this._renderFocusedSearch=()=>{const{accessibilityTitle:e,analytics:t,conversationIds:n}=this.props,{searchQuery:a}=this.state;return l.a.createElement(M.a,{accessibilityTitle:e,analytics:t,conversationIds:n,hideRecentSearches:this._hideRecentSearches,onQueryChange:this._handleQueryChange,query:a})},this._renderInbox=()=>{var e,t;const{accessibilityTitle:n,conversationIds:a,footer:s,isDrawer:i,isRefreshing:r,renderEmptyDMInbox:o,virtualScrollerCacheKey:c}=this.props,{showSearchView:d}=this.state;return d||null!=(e=this.props.location)&&null!=(t=e.state)&&t.searchQuery?this._renderFocusedSearch():l.a.createElement(B.a,{isRefreshing:r,onRefresh:this._handlePullToRefresh},c&&a?l.a.createElement(U.a,{accessibilityRole:"tablist",accessibilityTitle:n,anchoring:P.a,assumedItemHeight:100,cacheKey:c,footer:s,header:this._renderHeader(),identityFunction:we,items:a,noItemsRenderer:o,onNearEnd:this._handleNearEnd,renderer:this._renderInboxItem({conversationIds:a}),withKeyboardShortcuts:!i,withoutHeadroom:!0}):null)},this._handleNearEnd=()=>{this._handleHistoryRequest()},this._handleQueryChange=e=>{this.setState({searchQuery:e})},this._handleSearchChange=({currentTarget:{value:e}})=>{this.state.showSearchView||this.setState({showSearchView:!0})},this._handleSearchClick=()=>{const{analytics:e}=this.props;e.scribe({component:"search",action:"click"}),this.setState({showSearchView:!0})},this._hideRecentSearches=()=>{this.setState({showSearchView:!1,searchQuery:""})},this._renderInboxItem=({conversationIds:e,pinConversation:t,unpinConversation:n})=>(a,i)=>{const{loggedInUserId:r}=this.context,{location:o}=this.props,{searchQuery:c}=this.state,d=a,u={pathname:`/messages/${d}`,state:{...null==o?void 0:o.state,entryPoint:null,searchQuery:c}},m=d&&null!=e&&e.length?e.indexOf(d):null,p=Object(Ke.a)(m)?m+1:0;ke()(!!r,"loggedInUserId must be defined"),i&&i(!0);const g=e=>l.a.createElement(T.a,{conversationId:d,inboxType:this.props.inboxType,isActive:e,key:d,link:u,onClick:this._handleConversationClick,perspective:r,pinConversation:t,position:p,searchQuery:c,unpinConversation:n});return this._isVDLEnabled?l.a.createElement(fe.a,{exact:!1,path:u.pathname},g):l.a.createElement(s.a,{exact:!1,path:u.pathname},g)},this._renderPinnedInbox=()=>{const{accessibilityTitle:e,conversationIds:t,footer:n,isDrawer:a,renderEmptyDMInbox:s,virtualScrollerCacheKey:i}=this.props,{searchQuery:r,showSearchView:o}=this.state;return t.length?l.a.createElement(oe,{accessibilityTitle:e,cacheKey:i,conversationIds:t,footer:n,header:this._renderHeader(),hideRecentSearches:this._hideRecentSearches,onNearEnd:this._handleNearEnd,onQueryChange:this._handleQueryChange,query:r,renderEmptyDMInbox:s,renderInboxItem:this._renderInboxItem,showSearchView:o,withKeyboardShortcuts:!a}):s()},this._handleFetchInitialWrapper=()=>{this._handleFetchInitial()},this._handleFetchInitial=()=>{const{createLocalApiErrorHandler:e,fetchInboxIfNeeded:t,fetchUpdates:n}=this.props;return t().then(this._updateLastSeenEventId,e()).then((()=>{this._updatePolling.start()})).then((()=>n().catch(e())))},this._handleConversationClick=(e,t)=>{const{customCellClick:n}=this.props;n&&n(e,t)},this._handleEmptyDMInboxImpression=()=>{const{analytics:e}=this.props;e.scribe({component:"empty_message",action:"impression"})},this._handlePullToRefresh=()=>{const{createLocalApiErrorHandler:e,fetchInbox:t}=this.props;t().then(this._updateLastSeenEventId,e())},this._updateLastSeenEventIdIfActive=()=>{if("background"!==Ie.a.currentState)return this._updateLastSeenEventId()},this._renderHeader=()=>{const{renderStickyContent:e,withDmSearch:t}=this.props,n=[Se.a.searchInput,this._isVDLEnabled?void 0:Se.a.searchInputBorder];return l.a.createElement(l.a.Fragment,null,t?l.a.createElement(z.a,{onClick:this._handleSearchClick,style:n},l.a.createElement(Re.a,{Icon:be.a,autoComplete:"off",isCompact:!0,onChange:this._handleSearchChange,placeholder:this._messageSearchEnabled?Ae:Oe,withClearButton:!0})):null,e?e():null)},this._updateLastSeenEventId=()=>{const{createLocalApiErrorHandler:e,updateLastSeenEventId:t}=this.props;return t().catch(e())},this._fab=l.a.createElement(_e,null)}componentDidMount(){const{createLocalApiErrorHandler:e,fetchInboxHistory:t,fetchUpdates:n}=this.props;return this._updatePolling=new Ee.a((()=>{n().then(this._updateLastSeenEventIdIfActive,e(Fe.a))}),{interval:8e3}),this._handleHistoryRequest=Object(xe.a)(((...n)=>{t(...n).catch(e())}),1e3),this._handleFetchInitial()}componentWillUnmount(){this._updatePolling.stop()}render(){return l.a.createElement(Te.a,{locationKey:"messagesRoot"},l.a.createElement(b,null),l.a.createElement(ce.a,{component:Le.a,fab:this._fab,style:Se.a.root},l.a.createElement(de.a,{accessibilityLabel:Me,fetchStatus:this.props.fetchStatus,onRequestRetry:this._handleFetchInitialWrapper,render:this._render})))}}De.contextType=i.a,De.defaultProps={conversationIds:[],inboxType:L.d.PRIMARY,isDrawer:!1,withDmSearch:!1,withPinnedInbox:!1};t.a=Object(Ce.a)(F(De))},pdDm:function(e,t,n){"use strict";n.d(t,"a",(function(){return ke}));n("kYxP"),n("Qavd");var a,l=n("ERkP"),s=n.n(l),i=n("v6aA"),r=n("lnti"),o=n("V/6K"),c=n("Ka95"),d=n("QvgI"),u=n("maE+"),m=n("qdEw"),p=n("6OUF"),g=n("3XMw"),y=n.n(g),h=n("VwDm"),_=n("d9IC"),b=n("MWbm"),v=n("AQ79"),k=(n("YWiL"),n("CVPS")),f=n.n(k);const F=y.a.e4b3f520,T=y.a.ae4d666a,S=(e,t)=>{var n,a,l,s;const i=null==(n=e.labels)||null==(a=n.find((e=>e.label_type===v.a.PINNED)))?void 0:a.timestamp,r=null==(l=t.labels)||null==(s=l.find((e=>e.label_type===v.a.PINNED)))?void 0:s.timestamp;return i?r?i-r:-1:1},E=void 0!==a?a:a=n("/Kco");function C({dmDrawerOnClick:e,pinnedConversations:t,pinnedSliceId:n,unpinnedConversations:a}){const l=f()(E,t).map((e=>e)).sort(S),i=l.map((e=>e.__id));return t.length?s.a.createElement(s.a.Fragment,null,I(F),l.map(((t,a)=>s.a.createElement(c.a,{conversationIds:i,dmDrawerOnClick:e,dm_conversation:t,inboxType:v.d.PRIMARY,isPinned:!0,key:a,pinnedSliceId:n}))),a?I(T):null):null}const I=e=>s.a.createElement(b.a,null,s.a.createElement(_.a,{headerText:e,isInboxLabelHeader:!0}));var R=n("4hmp"),L=n("uDfI");const K=y.a.fe61929e,x=y.a.a846382a;function w({dmDrawerOnClick:e,handleSearchChange:t,handleSearchClick:n,pinnedConversations:a,pinnedSliceId:l,renderPivot:r,unpinnedConversations:c,withPinnedInbox:d}){const u=Object(L.c)(),{featureSwitches:g}=s.a.useContext(i.a),y=g.isTrue("dm_inbox_search_message_results_enabled")&&g.isTrue("dm_inbox_search_modular_results_enabled")&&g.isTrue("direct_messages_incremental_holdback_2022h1"),_=g.isTrue("dm_vdl_enabled")&&g.isTrue("dm_vdl_inbox_p0_enabled");return s.a.useEffect((()=>()=>{u(m.b)}),[u]),s.a.createElement(o.a.Consumer,null,(({isDrawer:i})=>s.a.createElement(s.a.Fragment,null,i?null:s.a.createElement(b.a,{onClick:n,style:[R.a.searchInput,_?void 0:R.a.searchInputBorder]},s.a.createElement(p.a,{Icon:h.a,autoComplete:"off",isCompact:!0,onChange:t,placeholder:y?x:K,withClearButton:!0})),r(),d?s.a.createElement(C,{dmDrawerOnClick:e,pinnedConversations:a,pinnedSliceId:l,unpinnedConversations:c}):null)))}var M=n("DbJc"),O=n("TEoO"),A=n("MMRb"),D=n("P1r1"),P=n("rxPX");var U,H=Object(P.a)().propsFromState((()=>({isDmsOpenForAll:D.s,lastSeenEventIds:A.selectLastSeenEventIds}))).withAnalytics({page:"messages",section:"inbox"}),N=n("CVqr"),j=n("SOvA"),B=n("t0aI"),W=n("nySH"),q=n("aI6n"),V=n("zsGg"),z=n("Irs7"),Q=n("Znyr"),G=n("csss"),Y=n("t62R"),X=n("j7Bv"),$=n("OOE2");const J=void 0!==U?U:U=n("8fJk");var Z,ee,te=H((e=>{const{isDmsOpenForAll:t,lastSeenEventIds:n}=e,{untrusted_last_seen_event_id:a}=n,l=Object(z.b)(),r=(e=>{let t=0,n=0,l=0,s=0;for(const c of e){var i,r,o;const e=null==c?void 0:c.last_readable_event_id,d=!e||!(a&&Object(B.c)(a,e)),u=(parseInt(null==c||null==(i=c.perspectival_conversation_metadata)||null==(r=i.social_proof)||null==(o=r.mutual_friends)?void 0:o.total_mutual_friends,10)||0)>0;d?u?t+=1:l+=1:u?n+=1:s+=1}return{newUntrustedWithSocialProof:t,oldUntrustedWithSocialProof:n,newUntrustedWithoutSocialProof:l,oldUntrustedWithoutSocialProof:s}})(f()(J,e.untrustedConversations)),o=r.newUntrustedWithSocialProof+r.newUntrustedWithoutSocialProof,{featureSwitches:c}=s.a.useContext(i.a),d=c.isTrue("dm_vdl_enabled")&&c.isTrue("dm_vdl_inbox_p0_enabled"),u=[R.a.requestPivotContainer,d?void 0:R.a.requestPivotContainerBorder],{description:m,showNotificationDot:p,titleWeight:g}=Object(N.a)(r);return t?s.a.createElement(b.a,{style:u},s.a.createElement(G.a,{description:d?m:void 0,label:d?s.a.createElement(Y.b,{weight:g},$.b):$.b,link:Object(W.b)(v.d.SECONDARY),onPress:()=>{l.scribe({element:"requests_pivot",action:"click"})},renderRightContent:d||!o?void 0:()=>s.a.createElement(Q.a,{count:o,standalone:!0,truncatedCountFormatter:V.b,unreadCountLabel:$.c}),thumbnail:d?s.a.createElement(b.a,{testID:q.a.untrustedThumbnail},s.a.createElement(X.a,{Icon:j.a,color:"neutral"}),p?s.a.createElement(Q.a,{count:o,pip:!0,standalone:!0,style:R.a.inboxPip,truncatedCountFormatter:V.b,unreadCountLabel:$.c}):null):null})):null})),ne=n("IG4P"),ae=n("Fr3L"),le=n("GSsg"),se=n("0KEI"),ie=n("zCf4"),re=n("DQzJ"),oe=n("6u/5"),ce=n.n(oe),de=n("P74S"),ue=n.n(de),me=n("PJTX"),pe=n.n(me),ge=n("29EQ");const ye=e=>e.__id,he=void 0!==Z?Z:Z=n("6bmY"),_e=void 0!==ee?ee:ee=n("vU/8"),be={context:"DM_INBOX_PRIMARY_CONTEXT"},ve=({dmDrawerCacheKey:e,dmDrawerOnClick:t,pollInterval:n})=>{var a,l,m,p,g,y,h,_;const b=Object(z.b)(),k=Object(ie.g)(),{data:f,fetchNext:F}=Object(re.a)(he,{}),T=Object(se.useCreateLocalApiErrorHandler)("DM_INBOX_PRIMARY_EVOLUTION"),S=pe()(),E=(null==f||null==(a=f.pinned)?void 0:a.items_results)||[],C=Object(r.a)(E.map((e=>null==e?void 0:e.result))),I=(null==f||null==(l=f.pinned)?void 0:l.__id)||"",R=(null==f||null==(m=f.trusted)?void 0:m.items)||[],L=Object(r.a)(R.map((e=>{var t;return null==e||null==(t=e.dm_conversation_results)?void 0:t.result}))),K=L.map((e=>e.__id)),x=(null==f||null==(p=f.trusted)?void 0:p.__id)||"",A=L.filter((e=>!((null==e?void 0:e.labels)||[]).filter((e=>e.label_type===v.a.PINNED)).length)),D=A.map((e=>e.__id)),P=(null==f||null==(g=f.untrusted)?void 0:g.items)||[],U=Object(r.a)(P.map((e=>{var t;return null==e||null==(t=e.dm_conversation_results)?void 0:t.result}))),H=(null==f||null==(y=f.low_quality)?void 0:y.items)||[],N=Object(r.a)(H.map((e=>{var t;return null==e||null==(t=e.dm_conversation_results)?void 0:t.result}))),{featureSwitches:j}=s.a.useContext(i.a),B=j.isTrue("dm_conversation_labels_pinned_enabled")&&j.isTrue("direct_messages_incremental_holdback_2022h1"),[q,V]=s.a.useState((null==k||null==(h=k.state)?void 0:h.searchQuery)||""),[Q,G]=s.a.useState(!(null==k||null==(_=k.state)||!_.searchQuery)),[Y,X]=s.a.useState(!1),$=s.a.useCallback((()=>{ue()(S,_e,{}).toPromise().then((e=>{var t;const n=L.length?L[0].__id:null;if(!n)return;const a=(null==e||null==(t=e.trusted)?void 0:t.items)||[],l=Object(r.a)(a.map((e=>{var t;return null==e||null==(t=e.dm_conversation_results)?void 0:t.result}))),s=[];for(let e=0;e<l.length&&l[e].__id!==n;e++)s.push(l[e].__id);s.length&&ce()(S,(e=>{s.forEach((t=>{Object(W.c)(t,e,x)}))}))})).catch(T({}))}),[T,S,L,x]),J=s.a.useCallback((()=>{X(!0),ue()(S,he,{}).toPromise().catch(T({})).finally((()=>X(!1)))}),[T,S]);s.a.useEffect((()=>{const e=new le.a((()=>{$()}),{interval:n});return e.start(),()=>{e.stop()}}),[$,n]);const Z=()=>s.a.createElement(u.a,{messageRequestPivot:be()}),ee=(e,n)=>(n&&n(!0),s.a.createElement(c.a,{conversationIds:B?D:K,dmDrawerOnClick:t,dm_conversation:e,inboxType:v.d.PRIMARY,isPinned:!1,pinnedSliceId:I})),ae=s.a.useCallback((({currentTarget:{value:e}})=>{Q||G(!0)}),[G,Q]),oe=s.a.useCallback((()=>{b.scribe({component:"search",action:"click"}),G(!0)}),[b,G]),de=s.a.useCallback((e=>{V(e)}),[V]),me=s.a.useCallback((()=>{G(!1),V("")}),[G,V]),be=()=>U.length||N.length?s.a.createElement(te,{untrustedConversations:U}):null,ve=s.a.createElement(w,{dmDrawerOnClick:t,handleSearchChange:ae,handleSearchClick:oe,pinnedConversations:C,pinnedSliceId:I,renderPivot:be,unpinnedConversations:Boolean(A.length),withPinnedInbox:B}),ke=()=>s.a.createElement(s.a.Fragment,null,Q?s.a.createElement(d.a,{accessibilityTitle:ge.c,analytics:b,conversationIds:K,hideRecentSearches:me,onQueryChange:de,query:q}):s.a.createElement(ne.a,{isRefreshing:Y,onRefresh:J},s.a.createElement(O.a,{accessibilityRole:"tablist",accessibilityTitle:ge.c,anchoring:M.a,assumedItemHeight:100,cacheKey:e||ge.a,header:ve,identityFunction:ye,items:B?A:L,noItemsRenderer:C.length?void 0:Z,onNearEnd:F,renderer:ee,withKeyboardShortcuts:!0,withoutHeadroom:!0})));return s.a.createElement(o.a.Consumer,null,(({isDrawer:e})=>e?ke():s.a.createElement(ge.b,null,ke())))};function ke(e){return s.a.createElement(ae.a,{errorConfig:be},s.a.createElement(ve,e))}},prG5:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n("97Jx"),l=n.n(a),s=(n("kYxP"),n("ERkP")),i=n.n(s),r=n("nT9l"),o=n("3XMw"),c=n.n(o),d="image",u=n("TIdA"),m=n("a6qo");const p=c.a.f93bb3ee;class g extends i.a.Component{constructor(...e){super(...e),this._renderContent=({resourceSelectionHandler:e,useMinimumData:t})=>{const{accessibilityLabel:n,hideAcceptOverlay:a,shouldShowAltLabel:s,...r}=this.props;return i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,l()({},r,{accessibilityLabel:n,onVariantSelection:e,previewMode:t,testID:d})),s?i.a.createElement(m.a,{align:"left",altLabel:n}):null)}}render(){const{hideAcceptOverlay:e,image:t}=this.props;return i.a.createElement(r.a,{acceptLabel:p,hideAcceptOverlay:e,renderContent:this._renderContent,resourceId:"string"==typeof t?t:t.url})}}},"q+MS":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n("kYxP");var a=n("xPna");const l=(e,t=!0)=>{const n={};let l={};return null!=e&&e.conversations&&(Object.values(e.conversations).forEach((e=>{e&&e.users&&Object.assign(n,e.users),t&&(e.isSearchResult=!0)})),l={...l,conversations:null==e?void 0:e.conversations,users:n}),null!=e&&e.entries&&(l={...l,entries:null==e?void 0:e.entries,cards:null==e?void 0:e.cards,tweets:null==e?void 0:e.tweets}),null!=e&&e.users&&(l={...l,users:{...e.users,...l.users||{}}}),Object(a.a)(l)}},q8SM:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u}));var a=n("OIs+"),l=n("3XMw"),s=n.n(l);const i=s.a.cb367658,r=s.a.ie9a7e48,o=s.a.hd3927c6,c=s.a.f1ac0968,d={[a.a.Offline]:{toast:{text:r}},defaultToast:{text:i},showToast:!0},u={[a.a.Offline]:{toast:{text:c}},defaultToast:{text:o},showToast:!0}},rQjK:function(e,t,n){"use strict";var a,l,s={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"conversation_id"},{defaultValue:null,kind:"LocalArgument",name:"label_type"}],kind:"Fragment",metadata:null,name:"DMPinnedInboxDelete_Mutation",selections:l=[{alias:null,args:[{kind:"Variable",name:"conversation_id",variableName:"conversation_id"},{kind:"Variable",name:"label_type",variableName:"label_type"}],kind:"ScalarField",name:"dm_conversation_label_delete",storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"DMPinnedInboxDelete_Mutation",selections:l},params:{id:"_TQxP2Rb0expwVP9ktGrTQ",metadata:{},name:"DMPinnedInboxDelete_Mutation",operationKind:"mutation",text:null}};s.hash="f0ba5e0b671c54ae94c7322d3036a375",e.exports=s},sl05:function(e,t,n){"use strict";var a=n("rHpw");t.a=a.a.create((e=>({root:{flexGrow:1},activity:{flexBasis:e.spacesPx.space1,flexGrow:1,height:"100%"},kaiOSFix:{paddingBottom:e.spaces.space20},dragDrop:{flexGrow:1},scrollView:{flexGrow:1}})))},tZH3:function(e,t,n){"use strict";var a=n("ERkP"),l=n.n(a),s=n("3XMw"),i=n.n(s),r=n("MWbm"),o=n("CKsB"),c=n("/yvb"),d=n("rHpw"),u=n("hiGS"),m=n("pu5c"),p=n("zIWA");const g=i.a.fcd4d489,y=i.a.gbed8594,h=i.a.g9074da4,_=i.a.ad63377e,b=i.a.h09b49f8,v=i.a.i6b19b08,k=i.a.j7bb1a43,f=i.a.ea200ba6,F=i.a.cfd2f35e,T=({dismiss:e,flatBorders:t,isGroup:n,onBlockClick:a,onDeleteClick:s,onReportClick:i,requestorScreenName:d,showBlock:T,showCancel:E,showDelete:C})=>{const I=l.a.useCallback((()=>{i&&i(),e()}),[e,i]),R=l.a.useCallback((()=>{a&&a(),e()}),[e,a]),L=l.a.useCallback((()=>{s&&s(),e()}),[e,s]);return l.a.createElement(r.a,{accessibilityRole:"dialog",style:t?S.flatCorners:S.roundCorners},C?l.a.createElement(o.a,{Icon:u.a,actionSubText:b,actionText:n?h:_,onClick:L,textColor:"red500"}):null,T?l.a.createElement(o.a,{Icon:m.a,actionSubText:y,actionText:g({screenName:d}),onClick:R}):null,l.a.createElement(o.a,{Icon:p.a,actionSubText:f,actionText:n?v:k({screenName:d}),onClick:I}),E?l.a.createElement(c.a,{onPress:e,style:S.cancelButton,type:"primaryOutlined"},F):null)};T.defaultProps={isGroup:!1,flatBorders:!1,showBlock:!1,showCancel:!1,showDelete:!1};const S=d.a.create((e=>({roundCorners:{borderRadius:e.borderRadii.xLarge},flatCorners:{borderRadius:e.borderRadii.none},cancelButton:{marginHorizontal:e.spaces.space16,marginVertical:e.spaces.space16}})));t.a=T},uB9N:function(e,t,n){"use strict";var a=n("97Jx"),l=n.n(a),s=n("ERkP"),i=n.n(s),r=n("1YZw"),o=n("zh9S"),c=n("P1r1"),d=n("AspN"),u=n("rxPX"),m=Object(u.a)().propsFromState((()=>({dataSaverMode:c.j}))).propsFromActions((()=>({addMedia:d.b,addToast:r.b,processMultipleMedia:d.g,removeMediaUpload:d.i,scribeAction:o.c,preUploadMedia:d.e}))),p=n("wpu3"),g=n("cOB2"),y=n("MWbm"),h=n("0FVZ"),_=n("Oe3h"),b=n("rHpw");var v=function(e){const{accessibilityLabel:t,accessibilityRole:n,children:a,onLayout:s,sideNavPresent:r,style:o}=e,c=i.a.useContext(g.a);return r?i.a.createElement(i.a.Fragment,null,i.a.createElement(y.a,{accessibilityLabel:t,accessibilityRole:n,onLayout:s,style:o},a)):i.a.createElement(h.a.BottomComposer,null,i.a.createElement(_.a,{id:"DMComposerWrapper"},((e,r)=>i.a.createElement(y.a,l()({ref:e()},r({accessibilityLabel:t,accessibilityRole:n,onLayout:s,style:o})),a,i.a.createElement(y.a,{style:!1===c.keyboardVisible&&k.offsetBottom})))))};const k=b.a.create((()=>({offsetBottom:{paddingBottom:b.a.iPhoneOffsetBottom}})));n("kYxP");var f=n("HPNB"),F=n("htQn"),T=n("t62R");class S extends i.a.Component{constructor(...e){super(...e),this._handleClick=()=>{const{id:e,label:t,onClick:n}=this.props;n({id:e,label:t})}}render(){const{description:e,isWide:t,label:n}=this.props;return i.a.createElement(F.a,{accessibilityRole:"button",onClick:this._handleClick,style:[E.root,t&&E.isWide,!t&&E.isNarrow]},i.a.createElement(T.b,{weight:"bold"},n),i.a.createElement(T.b,{color:"gray700",size:"subtext2"},e))}}const E=b.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,borderColor:e.colors.borderColor,borderStyle:"solid",paddingLeft:"1rem",paddingVertical:"1rem"},isWide:{borderRadius:e.borderRadii.xLarge,paddingVertical:"0.5rem",borderWidth:e.borderWidths.small},isNarrow:{borderTopWidth:e.borderWidths.small}})));var C=S,I=n("cHvH"),R=n("mw9i");class L extends i.a.Component{constructor(...e){super(...e),this._handleOptionChoose=e=>{const{onOptionChoose:t,quickReplyOptions:{id:n}}=this.props;return t(n,e)}}render(){const{quickReplyOptions:{options:e}}=this.props,t=1===e.length;return i.a.createElement(I.a,null,(({windowWidth:n})=>{const a=f.a.isTwoColumnLayout(n),l=[a&&K.isWide,a&&t&&K.oneButtonOnly,!a&&K.isNarrow];return i.a.createElement(R.a,{style:l,withGutter:a},e.map((e=>this.renderOption(e,a))))}))}renderOption(e,t){return i.a.createElement(C,{description:e.description,id:e.id,isWide:t,key:e.id,label:e.label,onClick:this._handleOptionChoose})}}const K=b.a.create((e=>({oneButtonOnly:{gridTemplateColumns:"1fr"},isWide:{backgroundColor:e.colors.gray0,display:"grid",gridColumnGap:e.spaces.space12,gridRowGap:e.spaces.space12,gridTemplateColumns:"1fr 1fr",paddingVertical:e.spaces.space12},isNarrow:{maxHeight:"168px",overflow:"auto"}})));var x=L,w=n("krmn"),M=n("cIoY"),O=n("w3n3"),A=n("MLl7"),D=n("3XMw"),P=n.n(D),U=n("J2UM"),H=n("VPdC"),N=n("pKoL"),j=n("eyty"),B=n("zTrU"),W=n("JYMr");const q=[{waitMs:1e3,progress:.1},{waitMs:1400,progress:.3},{waitMs:1800,progress:.5},{waitMs:2400,progress:.6},{waitMs:3e3,progress:.9}];class V extends i.a.Component{constructor(...e){super(...e),this.state={currentStepIndex:-1}}componentDidMount(){this._scheduleNextStep(0)}componentWillUnmount(){this._currentTimeoutId&&clearTimeout(this._currentTimeoutId)}render(){const{currentStepIndex:e}=this.state,t=e>=0&&e<q.length?q[e].progress:0;return i.a.createElement(W.a,{progress:t})}_scheduleNextStep(e){e<q.length&&(this._currentTimeoutId=setTimeout((()=>{this._currentTimeoutId=void 0,this.setState({currentStepIndex:e}),this._scheduleNextStep(e+1)}),q[e].waitMs))}}function z({isSending:e,isUploading:t,progress:n}){return e&&!t?i.a.createElement(V,null):i.a.createElement(W.a,{progress:e?Math.max(n,.02):0})}var Q=i.a.memo(z),G=n("Dtul"),Y=n("/yvb"),X=b.a.create((e=>({actionButton:{marginLeft:e.spaces.space4}}))),$="dmComposerAttachments",J="dmComposerTextInput",Z="dmComposerSendButton",ee=n("UgB4");const te=P.a.e3275464,ne=i.a.createElement(ee.a,null);function ae(e){const{showIconInsteadOfLabel:t}=e;return i.a.createElement(Y.a,{accessibilityLabel:te,disabled:e.disabledFunc(),hoverLabel:{label:te},icon:t?ne:void 0,onPress:e.onSend,size:"medium",style:X.actionButton,testID:Z,type:t?"brandText":"brandFilled"},t?null:te)}n("YWiL");var le,se=n("HvW7"),ie=n.n(se);const re=void 0!==le?le:le=n("iunV");var oe=()=>{const[e]=ie()(re);return(t,n)=>e({variables:{message:{text:{text:t}},target:{conversation_id:n}},onCompleted(e){},updater(e,t){},onError(e){throw e}}).dispose()};function ce(e){const{showIconInsteadOfLabel:t}=e,n=oe();return i.a.createElement(Y.a,{accessibilityLabel:te,disabled:e.disabledFunc(),icon:t?ne:void 0,onPress:t=>n(e.messageText,e.conversationId),size:"medium",style:X.actionButton,testID:Z,type:t?"brandText":"brandFilled"},t?null:te)}var de=n("Es6L"),ue=n("GZwR"),me=n("aITJ"),pe=n("6OUF"),ge=n("9Xij"),ye=n("OiMc"),he=n("v6aA"),_e=n("gpVt"),be=n("Lsrn"),ve=n("k/Ka");const ke=(e={})=>Object(ve.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[be.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M19 13.5H5c-.828 0-1.5-.672-1.5-1.5s.672-1.5 1.5-1.5h14c.828 0 1.5.672 1.5 1.5s-.672 1.5-1.5 1.5zm0 6H5c-.828 0-1.5-.672-1.5-1.5s.672-1.5 1.5-1.5h14c.828 0 1.5.672 1.5 1.5s-.672 1.5-1.5 1.5zm0-12H5c-.828 0-1.5-.672-1.5-1.5S4.172 4.5 5 4.5h14c.828 0 1.5.672 1.5 1.5s-.672 1.5-1.5 1.5z"})));ke.metadata={width:24,height:24};var fe=ke;const Fe=(e={})=>Object(ve.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[be.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M19 13H5c-.553 0-1-.447-1-1s.447-1 1-1h14c.553 0 1 .447 1 1s-.447 1-1 1zm0 6H5c-.553 0-1-.447-1-1s.447-1 1-1h14c.553 0 1 .447 1 1s-.447 1-1 1zm0-12H5c-.553 0-1-.447-1-1s.447-1 1-1h14c.553 0 1 .447 1 1s-.447 1-1 1z"})));Fe.metadata={width:24,height:24};var Te=Fe,Se=n("iySH");const Ee=P.a.ee230734,Ce=P.a.ca0ce0e4,Ie=P.a.cdcebd22,Re=P.a.ic8c615e,Le=P.a.a04077c4,Ke=e=>!(!e||!e.media),xe=Object(p.b)({maxNumberOfPhotos:1});class we extends i.a.Component{constructor(e,t){var n;super(e,t),this._handleLayout=e=>{const{onHeightChange:t}=this.props,{mediaButtonsCollapsible:n}=this.state,a=e.nativeEvent.layout;a&&(Object(de.a)()||t&&t(a.height),a.width<=b.a.theme.breakpoints.small&&!n?this.setState({mediaButtonsCollapsible:!0}):a.width>b.a.theme.breakpoints.small&&n&&this.setState({mediaButtonsCollapsible:!1}))},this._renderMainContent=()=>{const{richTextInputContext:e,typeaheadWrapper:t}=this.props,{value:n}=this.state,a=t;return a?i.a.createElement(a,{contextText:n,isInline:!0,onTextUpdated:e?this._handleRichTextChange:this._handlePlainTextChange,onTypeaheadStateChange:this._handleTypeaheadStateChange,source:ue.d.ComposeMessage},this._renderFieldTextInput):this._renderFieldTextInput()},this._renderFieldTextInput=e=>{const{disabled:t,placeholderText:n,richTextInputContext:a}=this.props,s=me.b.isKaiOS()?Ie:n||Ce,{editorState:r,mediaButtonsCollapsible:o,value:c}=this.state,d=!!a,u=a?{editorState:r,element:a.element}:void 0,m=a?{onChange:this._getHandleRichTextChange(e),richTextInputContext:{editorState:r,element:a.element}}:{onChange:this._getHandlePlainTextChange(e),richTextInputContext:void 0};return i.a.createElement(pe.a,l()({contentAbove:this._renderAttachments(),editable:!t,emojiPickerButton:this._renderEmojiPicker(),handleReturn:d?this._handleReturn:void 0,isCompact:!0,leftAligned:!0,maxNumberOfLines:d?8:4,multiline:!0,numberOfLines:1,onBlur:this._handleOnBlur,onFilesAdded:this._handleAddMediaFiles,onFocus:this._handleTextInputFocus,onKeyPress:d?void 0:e=>{this._handleReturn(e)},placeholder:s,ref:this._setTextInputRef,richTextInputContext:t?void 0:u,style:Me.composeInput,testID:J,useCacheForDOMMeasurements:!this._isSendDisabled()&&!o,value:c},m))},this._getHandleRichTextChange=Object(B.a)((e=>t=>{null==e||e(t),this._handleRichTextChange(t)})),this._getHandlePlainTextChange=Object(B.a)((e=>t=>{null==e||e(t),this._handlePlainTextChange(t)})),this._handleTypeaheadStateChange=e=>{this.setState({isTypeaheadActive:e})},this._renderAttachments=()=>{const{attachment:e,conversationId:t,isCardPreviewTombstoned:n,isShareViaDM:a,isUploading:l}=this.props,{value:s}=this.state,{height:r,width:o}=e&&(e.media&&e.media.mediaFile||e.provider&&e.media&&e.media.externalMediaDetails)||{},c=null==e?void 0:e.media,d=null==c?void 0:c.mediaMetadata,u=null==d?void 0:d.altText,m=null==d?void 0:d.defaultAltText,p=Object(_e.b)(s);return i.a.createElement(i.a.Fragment,null,c?i.a.createElement(y.a,{style:Me.attachmentContainer,testID:$},i.a.createElement(ge.a,{ratio:o/r,style:Me.aspectContainer},i.a.createElement(y.a,{style:Me.mediaPreviewContainer},i.a.createElement(N.a,{accessibilityLabel:u||m,mediaItem:c,onClick:this._canEditImage?this._handleClickMediaDetail:void 0,onEdit:this._canEditGif||this._canEditImage||this._canEditVideo?this._handleClickMediaDetail:void 0,onRemove:this._handleRemoveMedia(c.id),resizeIfNeeded:"width",style:Me.mediaPreview,withAltTextLabel:!!u,withCloseButton:!l,withEditButton:(this._canEditGif||this._canEditImage||this._canEditVideo)&&!l,withEditIcon:!0}))),e&&e.provider&&e.gifUrl&&i.a.createElement(y.a,{style:Me.gifAttribution},i.a.createElement(M.a,{gifUrl:e.gifUrl,provider:e.provider}))):p&&!a?i.a.createElement(_e.a,{conversationId:t,isCardPreviewTombstoned:n,style:Me.cardPreviewContainer,urls:p}):null)},this._renderEmojiPicker=()=>{const{withEmojiPicker:e}=this.props;return e&&me.b.isDesktopOS()?i.a.createElement(w.a,{disabled:this.props.disabled,onEmojiSelect:this._handleEmojiSelect,onPress:this._handleTextInputFocus,size:"small",textInputRef:this._textInput||void 0}):null},this._renderPrimaryActionButton=e=>{const{conversationId:t,quickReplyOptions:n}=this.props,a=this._hasMessageText();if(!n||a||e){const n=this.context.featureSwitches.isTrue("dm_evolution_enabled")&&this.context.featureSwitches.isTrue("dm_evolution_message_creation_enabled"),a={disabledFunc:this._isSendDisabled,showIconInsteadOfLabel:!0};return n?i.a.createElement(ce,l()({},a,{conversationId:t||"",messageText:this._getMessageText()})):i.a.createElement(ae,l()({},a,{hasAttachment:e,onSend:this._handlePrimaryAction}))}return i.a.createElement(Y.a,{accessibilityLabel:Re,icon:this.state.isQuickReplyOpen?i.a.createElement(fe,null):i.a.createElement(Te,null),onPress:this._handleQuickReplyPickerToggle,size:"medium",style:Me.actionButton,type:"brandText"})},this._renderSecondaryActionButton=()=>{const{secondaryActionDisabledPopoverRenderer:e,secondaryActionLabel:t,shouldEnableSecondaryActionFunc:n,shouldShowSecondaryActionFunc:a}=this.props;if(a&&!a()||!t)return null;const l=!n||n(),s=i.a.createElement(Y.a,{accessibilityLabel:t,disabled:!l,onPress:this._handleSecondaryAction,style:Me.actionButton,type:"primaryOutlined"},this.props.secondaryActionLabel);return l||!e?s:i.a.createElement(ye.a,{enableHover:!0,preferredVerticalOrientation:"up",renderContent:e,withArrow:!0},s)},this._renderComposer=()=>{const{attachment:e}=this.props,t=Ke(e);return i.a.createElement(y.a,{style:[Me.composer,t&&Me.composerWithAttachment]},t?null:this._renderMediaButtons(),i.a.createElement(y.a,{style:Me.composeBoxContainer},this._renderMainContent()),this._renderSecondaryActionButton(),this._renderPrimaryActionButton(t))},this._renderMediaButtons=()=>{const{conversationId:e,history:t,withGifPicker:n,withMediaPicker:a}=this.props,{mediaButtonsCollapsed:l,mediaButtonsCollapsible:s}=this.state,r=s&&l;return i.a.createElement(y.a,{style:Me.uploadButtons},r?i.a.createElement(Y.a,{accessibilityLabel:Ee,icon:i.a.createElement(Se.a,null),onMouseDown:this._handleShowMediaControlsMouseDown,type:"brandText"}):null,a&&!r?i.a.createElement(H.a,{onChange:this._handleAddMediaFiles,style:Me.mediaPicker,type:"brandText"}):null,n&&!r?i.a.createElement(O.a,{dmConversationId:e,enabled:!0,gifSearchKeySource:A.a.DMComposition,history:t}):null)},this._handleShowMediaControlsMouseDown=()=>{const{scribeAction:e,scribeNamespace:t}=this.props;this.setState({mediaButtonsCollapsed:!1}),e({...t,component:"dm_composer",element:"toggle",action:"expand"})},this._handleReturn=e=>{const{nativeEvent:{ctrlKey:t,key:n,metaKey:a,shiftKey:l}}=e,s="Enter"===n,{isTypeaheadActive:i}=this.state;return!i&&s&&this._keyboardOrMouseDetected&&!(l||a||t)?(e.preventDefault(),this._handlePrimaryAction(e),"handled"):"not-handled"},this._handleClickMediaDetail=()=>{const{attachment:e,conversationId:t,history:n}=this.props;if(this._canEditGif||this._canEditImage||this._canEditVideo){const a=e&&e.media?e.media.id:0,l=this._canEditGif?"alt_text":this._canEditVideo?"trimmer":"crop";n.push("/messages/compose/media",{mediaId:a,conversationId:t,tab:l})}},this._handleAddMediaFiles=e=>{const{addMedia:t,addToast:n,dataSaverMode:a,onAddMedia:l,preUploadMedia:s,processMultipleMedia:i,removeMedia:r,removeMediaUpload:o}=this.props;t(e,{location:j.d.Dm}).then((e=>{const t=e.map((e=>e.id));this._validateMedia(e)?(l&&l(t),i(e,{onFailure:r}).then((e=>{a||s(e.map((e=>e.id)))}))):(n({text:Le}),o(t))}))},this._handleEmojiSelect=e=>{const{editorState:t}=this.state,{richTextInputContext:n}=this.props;if(!n||!t)return;const a=n.insertTextAtCursor(t,e.text);this._handleRichTextChange(a)},this._handleRemoveMedia=e=>()=>{this.props.removeMedia&&this.props.removeMedia(e)},this._handlePrimaryAction=e=>{if(!this._isSendDisabled()){const{onPrimaryAction:e}=this.props;this._textInput&&this._textInput.applyFinalValue((t=>{e({type:"richText"},t)})),this._closeQuickReplyPicker()}},this._handleSecondaryAction=e=>{const{onSecondaryAction:t}=this.props;this._textInput&&this._textInput.applyFinalValue((e=>{t&&t({type:"richText"},e)}))},this._handleRichTextChange=e=>{const{onTyping:t,richTextInputContext:n}=this.props,{value:a}=this.state,l=e.getCurrentContent().getPlainText(),s=n?n.convertEmojiToEntities(e):null;this.setState({editorState:s,value:l}),a!==l&&(null==t||t())},this._handlePlainTextChange=e=>{const{onTyping:t}=this.props,{value:n}=this.state,a=e.target.value;this.setState({value:a}),n!==a&&(null==t||t())},this._handleOnBlur=()=>{const{onBlur:e}=this.props,{mediaButtonsCollapsible:t}=this.state;e&&e(),t&&this.setState({mediaButtonsCollapsed:!1})},this._handleTextInputFocus=()=>{const{quickReplyOptions:e}=this.props,{isQuickReplyOpen:t,mediaButtonsCollapsible:n}=this.state;e&&t&&this._closeQuickReplyPicker(),n&&this.setState({mediaButtonsCollapsed:!0})},this._handleQROptionSelection=(e,t)=>{const{disabled:n,onPrimaryAction:a}=this.props;n||(a({quickReply:{id:e,selected_id:t.id}},t.label),this._closeQuickReplyPicker())},this._handleQuickReplyPickerToggle=()=>{this.setState({isQuickReplyOpen:!this.state.isQuickReplyOpen})},this._validateMedia=e=>!Ke(this.props.attachment)&&xe(e),this._detectKeyboardOrMouse=e=>{const{KEYBOARD:t,MOUSE:n,registerSome:a}=e;a((()=>{this._keyboardOrMouseDetected=!0}),[t,n])},this._isSendDisabled=()=>{const{attachment:e,canSendEmptyMessage:t,disabled:n,isUploading:a}=this.props,l=Ke(e),s=this._hasMessageText()||t,i=!(!e||!e.media)&&(e.media.needsProcessing||a);return n||!s&&!l||i||a},this._getMessageText=()=>(this.state.value||"").trim(),this._hasMessageText=()=>!!this._getMessageText(),this._closeQuickReplyPicker=()=>{this.setState({isQuickReplyOpen:!1})},this.handleAddMediaFiles=e=>this._handleAddMediaFiles(e),this._setTextInputRef=e=>{this._textInput=e};const{prefillText:a,richTextInputContext:s}=e;this.state={isQuickReplyOpen:!0,value:a,editorState:null!=(n=null==s||null==s.initEditorState?void 0:s.initEditorState(a))?n:null,isTypeaheadActive:!1,mediaButtonsCollapsed:!1,mediaButtonsCollapsible:!1}}componentDidMount(){Object(U.a)().then(this._detectKeyboardOrMouse),this._unlockReload=G.a.acquire()}componentWillUnmount(){this._unlockReload&&this._unlockReload()}componentDidUpdate(){this.props.quickReplyOptions&&this.state.isQuickReplyOpen&&this._textInput&&this._textInput.blur()}UNSAFE_componentWillReceiveProps(e){const t=this.props.quickReplyOptions,n=e.quickReplyOptions;t&&!n?this.setState({isQuickReplyOpen:!1}):(!t&&n||t&&n&&t.id!==n.id)&&this.setState({isQuickReplyOpen:!0}),this.props.conversationId!==e.conversationId&&this.clear()}render(){const{dtabBarInfo:e,isSending:t,isUploading:n,mediaUploadProgress:a,placeholderText:l,quickReplyOptions:s,style:r}=this.props,{isQuickReplyOpen:o}=this.state,c=l||Ce,d=Object(de.a)(),u=d&&e&&(e.dtabAll||e.ttsToken)&&!e.hide;return i.a.createElement(v,{accessibilityLabel:c,accessibilityRole:"complementary",onLayout:this._handleLayout,sideNavPresent:d,style:[Me.root,u&&Me.dtabOffset,r]},i.a.createElement(Q,{isSending:t,isUploading:n,progress:t?Math.max(a,.02):0}),this._renderComposer(),s&&o?i.a.createElement(x,{onOptionChoose:this._handleQROptionSelection,quickReplyOptions:s}):null)}get _canEditGif(){var e,t,n,a;return!(null==(e=this.props.attachment)||!e.gifUrl)||!(null==(t=this.props.attachment)||null==(n=t.media)||null==(a=n.mediaFile)||!a.isGif)}get _canEditImage(){var e,t,n;return!(null==(e=this.props.attachment)||null==(t=e.media)||null==(n=t.mediaFile)||!n.isImage)}get _canEditVideo(){var e,t;const{attachment:n}=this.props;let a=null==n||null==(e=n.media)||null==(t=e.mediaFile)?void 0:t.isVideo;return a&&(this._videoTrimmerEnabled=this.context.featureSwitches.isTrue("responsive_web_video_trimmer_enabled"),a=this._videoTrimmerEnabled),!!a}clear(){const{richTextInputContext:e}=this.props;if(e){const{initEditorState:t}=e||{};this.setState({value:"",editorState:t&&t("")})}else this.setState({value:""})}focus(){this._textInput&&this._textInput.focus()}value(){return this.state.value}}we.contextType=he.a,we.defaultProps={prefillText:"",withEmojiPicker:!0,withGifPicker:!0,withMediaPicker:!0};const Me=b.a.create((e=>({root:{backgroundColor:e.colors.navigationBackground,borderTopColor:e.colors.borderColor,borderTopWidth:e.borderWidths.small},attachmentContainer:{maxHeight:"10rem",margin:e.spaces.space12},aspectContainer:{flexShrink:1},cardPreviewContainer:{margin:e.spaces.space12},dtabOffset:{marginBottom:e.spaces.space40},gifAttribution:{flexDirection:"row",marginVertical:e.spaces.space4,marginHorizontal:0},mediaPicker:{margin:0},icon:{color:e.colors.primary,fontSize:"1.5em"},composeBoxContainer:{flexGrow:1,flexShrink:1,alignSelf:"center"},composeInput:{width:"100%"},mediaPreviewContainer:{flexDirection:"row",height:"100%"},mediaPreview:{borderRadius:e.borderRadii.xLarge,overflow:"hidden",minWidth:"10em"},composer:{alignItems:"center",flexDirection:"row",padding:e.spaces.space4,width:"100%"},composerWithAttachment:{paddingLeft:e.spaces.space12},actionButton:{marginLeft:e.spaces.space4},uploadButtons:{flexDirection:"row",marginRight:e.spaces.space4}})));t.a=m.forwardRef(we)},vL4t:function(e,t,n){"use strict";var a,l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"evolutionDMEntryPreview",selections:[{alias:null,args:null,concreteType:"DMEventMetadata",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventDetail",kind:"LinkedField",name:"event_detail",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageInfo",kind:"LinkedField",name:"dm",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"evolutionDMMessageEntry"}],storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"users_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},a],storageKey:null},action:"THROW",path:"legacy.event_detail.users_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spam_hide",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_type",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"initiating_user_results",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[a],storageKey:null},action:"THROW",path:"legacy.initiating_user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"DMEvent",abstractKey:null};l.hash="7b4601839d2e24e344ab6c258a797ce5",e.exports=l},"vU/8":function(e,t,n){"use strict";var a,l,s,i,r,o,c,d,u,m,p,g,y,h,_,b,v,k,f,F,T,S={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"evolutionDMInboxPollQuery",selections:[{alias:"trusted",args:i=[{kind:"Literal",name:"desired_lists",value:["Trusted"]},a={kind:"Literal",name:"known_lists",value:["Trusted","Untrusted","LowQuality"]},l={kind:"Literal",name:"s",value:17},s={kind:"Literal",name:"sort_by",value:"Recency"}],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"evolutionDMInboxItem"}],type:"DMConversation",abstractKey:null},r={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(desired_lists:["Trusted"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'},{alias:"untrusted",args:o=[{kind:"Literal",name:"desired_lists",value:["Untrusted"]},a,l,s],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"evolutionMessageRequestsPivot"}],type:"DMConversation",abstractKey:null}],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(desired_lists:["Untrusted"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'},{alias:"low_quality",args:c=[{kind:"Literal",name:"desired_lists",value:["LowQuality"]},a,l,s],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m={kind:"InlineFragment",selections:u=[d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"DMConversation",abstractKey:null}],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(desired_lists:["LowQuality"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"evolutionDMInboxPollQuery",selections:[{alias:"trusted",args:i,concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[p={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[p,g={kind:"TypeDiscriminator",abstractKey:"__isDMConvoListItem"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[p,{kind:"InlineFragment",selections:[d,{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[p,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"original_img_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_url",storageKey:null}],type:"ApiImage",abstractKey:null}],storageKey:null},d],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[p,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[y={alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null}],storageKey:null},b={alias:null,args:null,filters:null,handle:"defaultScalars",key:"",kind:"LinkedHandle",name:"legacy"},d],type:"User",abstractKey:null}],storageKey:null},v={alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"result"},d],storageKey:null}],storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"last_readable_event_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"conversation_type",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"conversation_id",storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[p,{kind:"InlineFragment",selections:[d,{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},y,F,h,_],storageKey:null},b,k],type:"User",abstractKey:null}],storageKey:null},v,d],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"legacy_conversation_slice",plural:!1,selections:[p,{kind:"TypeDiscriminator",abstractKey:"__isDMEventSliceResult"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMEventItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"DMEvent",kind:"LinkedField",name:"dm_event",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventMetadata",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventDetail",kind:"LinkedField",name:"event_detail",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageInfo",kind:"LinkedField",name:"dm",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachments",plural:!0,selections:[p,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Card",kind:"LinkedField",name:"card",plural:!1,selections:u,storageKey:null}],type:"DMCardAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[p,{kind:"InlineFragment",selections:T=[{alias:null,args:null,kind:"ScalarField",name:"alt_text",storageKey:null}],type:"ApiGif",abstractKey:null},{kind:"InlineFragment",selections:T,type:"ApiImage",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiImage",kind:"LinkedField",name:"preview_image",plural:!1,selections:T,storageKey:null}],type:"ApiVideo",abstractKey:null}],storageKey:null},d],storageKey:null}],type:"DMMediaAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"TweetResults",kind:"LinkedField",name:"tweet_results",plural:!1,selections:u,storageKey:null}],type:"DMTweetAttachment",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},F,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"users_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[p,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[y,F],storageKey:null},b,d],type:"User",abstractKey:null}],storageKey:null},v,d],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spam_hide",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_type",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"initiating_user_results",plural:!1,selections:[k,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[p,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[F],storageKey:null},b,d],type:"User",abstractKey:null}],storageKey:null},v,d],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at_millis",storageKey:null}],storageKey:null},k,d],storageKey:null}],storageKey:null}],type:"DMEventSlice",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"last_read_event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted_due_to_muted_user",storageKey:null}],storageKey:null}],type:"DMConversation",abstractKey:null},r],storageKey:null},d],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(desired_lists:["Trusted"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'},{alias:"untrusted",args:o,concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[p,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[p,g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[p,{kind:"InlineFragment",selections:[f,{alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"SocialProof",kind:"LinkedField",name:"social_proof",plural:!1,selections:[{alias:null,args:null,concreteType:"MutualFriendsSocialProof",kind:"LinkedField",name:"mutual_friends",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"total_mutual_friends",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},d],type:"DMConversation",abstractKey:null}],storageKey:null},d],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(desired_lists:["Untrusted"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'},{alias:"low_quality",args:c,concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[p,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[p,g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[p,m],storageKey:null},d],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(desired_lists:["LowQuality"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'}]},params:{id:"fX_IQIy_2_wh-6Sn0u6CoQ",metadata:{},name:"evolutionDMInboxPollQuery",operationKind:"query",text:null}};S.hash="3962883421aaee924f7a3184c6f5b800",e.exports=S},whlN:function(e,t,n){"use strict";var a,l,s={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"conversation_id"}],kind:"Fragment",metadata:null,name:"evolutionUnpinConversationMutation",selections:l=[{alias:null,args:[{kind:"Variable",name:"conversation_id",variableName:"conversation_id"},{kind:"Literal",name:"label_type",value:"Pinned"}],kind:"ScalarField",name:"dm_conversation_label_delete",storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"evolutionUnpinConversationMutation",selections:l},params:{id:"uZN4IpDCjHJcya7TpOKoNA",metadata:{},name:"evolutionUnpinConversationMutation",operationKind:"mutation",text:null}};s.hash="f4f7a6ace610f9e1ec942cce46c4c778",e.exports=s},y59G:function(e,t,n){"use strict";var a,l,s,i,r,o,c,d,u,m,p,g,y,h,_,b,v,k,f,F,T,S,E,C,I,R,L,K,x,w,M,O,A,D,P,U,H,N,j,B,W,q,V,z,Q,G,Y,X,$,J,Z,ee,te,ne,ae,le,se,ie,re,oe,ce,de,ue,me,pe,ge,ye,he,_e,be,ve,ke,fe,Fe,Te,Se,Ee,Ce,Ie,Re,Le,Ke,xe,we,Me,Oe,Ae,De,Pe,Ue,He,Ne,je,Be,We,qe,Ve,ze,Qe,Ge,Ye,Xe,$e,Je,Ze,et,tt,nt,at,lt,st,it,rt,ot,ct,dt,ut,mt,pt,gt,yt,ht,_t,bt,vt,kt,ft,Ft,Tt,St,Et,Ct,It,Rt,Lt,Kt,xt,wt,Mt,Ot,At,Dt,Pt,Ut,Ht,Nt,jt,Bt,Wt,qt,Vt,zt,Qt,Gt,Yt,Xt,$t,Jt,Zt,en,tn,nn,an,ln,sn,rn,on,cn,dn,un,mn,pn,gn,yn,hn,_n,bn,vn,kn,fn,Fn,Tn,Sn,En,Cn,In,Rn,Ln,Kn,xn,wn,Mn,On,An,Dn,Pn,Un,Hn,Nn,jn,Bn,Wn,qn,Vn,zn,Qn,Gn,Yn,Xn,$n,Jn,Zn,ea,ta,na,aa,la,sa,ia,ra,oa=(a={defaultValue:null,kind:"LocalArgument",name:"cursor"},l={defaultValue:null,kind:"LocalArgument",name:"query"},s={defaultValue:null,kind:"LocalArgument",name:"withAttachments"},i={defaultValue:!1,kind:"LocalArgument",name:"withDmMuting"},r={defaultValue:null,kind:"LocalArgument",name:"withMessageQueryHighlights"},o={defaultValue:null,kind:"LocalArgument",name:"withSafetyModeUserFields"},c={defaultValue:null,kind:"LocalArgument",name:"withSuperFollowsUserFields"},d={kind:"Variable",name:"query",variableName:"query"},u={kind:"Literal",name:"s",value:21},m={alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"affects_sort",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"created_at_millis",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"request_id",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"event_id",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"event_type",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"conversation_id",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"conversation_type",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null},T={alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[f,F],storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"original_img_url",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"original_img_width",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"original_img_height",storageKey:null},I={kind:"InlineFragment",selections:[S,E,C],type:"ApiImage",abstractKey:null},R={alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null},K={alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[R,f,F,L],storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"last_read_event_id",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"join_time_millis",storageKey:null},M={alias:null,args:null,kind:"ScalarField",name:"join_conversation_event_id",storageKey:null},O={alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[x,{alias:null,args:null,kind:"ScalarField",name:"low_quality",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted_due_to_muted_user",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"read_only",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trusted",storageKey:null}],storageKey:null},A={alias:null,args:null,concreteType:"DMInitialLowQualityState",kind:"LinkedField",name:"initial_low_quality_state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_low_quality",storageKey:null}],storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"is_new_one_to_one_convo",storageKey:null},P={alias:null,args:null,kind:"ScalarField",name:"is_spam_hide",storageKey:null},U={alias:null,args:null,kind:"ScalarField",name:"marked_as_abuse",storageKey:null},H={alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},N={alias:null,args:null,kind:"ScalarField",name:"possibly_spam",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"sender_registration_token",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"created_at_sec",storageKey:null},W={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"display_url",storageKey:null},V={alias:null,args:null,kind:"ScalarField",name:"expanded_url",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"indices",storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},G=[q,V,z,Q],Y={alias:null,args:null,concreteType:"EntitySet",kind:"LinkedField",name:"entities",plural:!1,selections:[{alias:null,args:null,concreteType:"UrlsEntity",kind:"LinkedField",name:"urls",plural:!0,selections:G,storageKey:null}],storageKey:null},X={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},$={alias:null,args:null,concreteType:"UrlsEntity",kind:"LinkedField",name:"urls_entity",plural:!0,selections:G,storageKey:null},J={alias:null,args:null,kind:"ScalarField",name:"media_key",storageKey:null},Z={alias:null,args:null,kind:"ScalarField",name:"alt_text",storageKey:null},ee={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},te={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},ne={alias:null,args:null,kind:"ScalarField",name:"percentage",storageKey:null},ae=[{alias:null,args:null,kind:"ScalarField",name:"blue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"green",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"red",storageKey:null}],le=[Z,C,E,S,{alias:null,args:null,concreteType:"ApiMediaRect",kind:"LinkedField",name:"salient_rect",plural:!1,selections:[ee,{alias:null,args:null,kind:"ScalarField",name:"left",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"top",storageKey:null},te],storageKey:null},{alias:null,args:null,concreteType:"MediaColorInfo",kind:"LinkedField",name:"color_info",plural:!1,selections:[{alias:null,args:null,concreteType:"MediaColorPaletteItem",kind:"LinkedField",name:"palette",plural:!0,selections:[ne,{alias:null,args:null,concreteType:"MediaColor",kind:"LinkedField",name:"rgb",plural:!1,selections:ae,storageKey:null}],storageKey:null}],storageKey:null}],se={alias:null,args:null,concreteType:"AspectRatio",kind:"LinkedField",name:"aspect_ratio",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"denominator",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"numerator",storageKey:null}],storageKey:null},ie={alias:null,args:null,kind:"ScalarField",name:"duration_millis",storageKey:null},re={alias:null,args:null,kind:"ScalarField",name:"embeddable",storageKey:null},oe={alias:null,args:null,concreteType:"ApiImage",kind:"LinkedField",name:"preview_image",plural:!1,selections:le,storageKey:null},ce={alias:null,args:null,kind:"ScalarField",name:"content_type",storageKey:null},de={alias:null,args:null,concreteType:"VideoVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"bit_rate",storageKey:null},ce,Q],storageKey:null},ue={kind:"InlineFragment",selections:[$,{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"media",plural:!1,selections:[p,J,{alias:null,args:null,kind:"ScalarField",name:"media_id",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[X,{kind:"InlineFragment",selections:le,type:"ApiImage",abstractKey:null},{kind:"InlineFragment",selections:[se,ie,re,oe,de,{alias:null,args:null,kind:"ScalarField",name:"view_count",storageKey:null}],type:"ApiVideo",abstractKey:null},{kind:"InlineFragment",selections:[Z,se,oe,de],type:"ApiGif",abstractKey:null}],storageKey:null}],storageKey:null}],type:"DMMediaAttachment",abstractKey:null},me={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},pe={alias:null,args:null,concreteType:"ApiMediaEntityColor",kind:"LinkedField",name:"rgb",plural:!1,selections:ae,storageKey:null},ge={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},ye={alias:null,args:null,concreteType:"LegacyCardBinding",kind:"LinkedField",name:"binding_values",plural:!0,selections:[me,{alias:null,args:null,concreteType:"ApiCardBindingValue",kind:"LinkedField",name:"value",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"boolean_value",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"double_value",storageKey:null},{alias:null,args:null,concreteType:"ApiCardBindingImageValue",kind:"LinkedField",name:"image_value",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"alt",storageKey:null},ee,te,Q],storageKey:null},{alias:null,args:null,concreteType:"ApiMediaEntityColorPalette",kind:"LinkedField",name:"image_color_value",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMediaEntityColorPaletteColor",kind:"LinkedField",name:"palette",plural:!0,selections:[pe,ne],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"integer_value",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scribe_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"string_value",storageKey:null},ge,{alias:null,args:null,concreteType:"ApiCardBindingUserValue",kind:"LinkedField",name:"user_value",plural:!1,selections:[R,{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},he={alias:null,args:null,concreteType:"ApiCardPlatform",kind:"LinkedField",name:"card_platform",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiCardPlatformPlatform",kind:"LinkedField",name:"platform",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiCardPlatformAudience",kind:"LinkedField",name:"audience",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bucket",storageKey:null},f],storageKey:null},{alias:null,args:null,concreteType:"ApiCardPlatformDevice",kind:"LinkedField",name:"device",plural:!1,selections:[f,{alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},_e={alias:"urlType",args:null,kind:"ScalarField",name:"url_type",storageKey:null},be={alias:null,args:null,concreteType:"TimelineUrl",kind:"LinkedField",name:"url",plural:!1,selections:[_e,Q],storageKey:null},ve=[Q],ke={alias:null,args:null,concreteType:"BadgeInfo",kind:"LinkedField",name:"badge",plural:!1,selections:ve,storageKey:null},fe={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},Fe={alias:null,args:null,kind:"ScalarField",name:"alignment",storageKey:null},Te={alias:null,args:null,kind:"ScalarField",name:"rtl",storageKey:null},Se={alias:"fromIndex",args:null,kind:"ScalarField",name:"from_index",storageKey:null},Ee={alias:"toIndex",args:null,kind:"ScalarField",name:"to_index",storageKey:null},Ce={alias:null,args:null,kind:"ScalarField",name:"format",storageKey:null},Ie={alias:"type",args:null,kind:"ScalarField",name:"__typename",storageKey:null},Re=[W],Le={kind:"InlineFragment",selections:Re,type:"TimelineRichTextCashtag",abstractKey:null},Ke={kind:"InlineFragment",selections:[p,Q],type:"TimelineRichTextList",abstractKey:null},xe={kind:"InlineFragment",selections:Re,type:"TimelineRichTextHashtag",abstractKey:null},we={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},Me={kind:"InlineFragment",selections:[Q,_e,{alias:"urtEndpointOptions",args:null,concreteType:"TimelineUrtEndpointOptions",kind:"LinkedField",name:"urt_endpoint_options",plural:!1,selections:[{alias:"cacheId",args:null,kind:"ScalarField",name:"cache_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitle",storageKey:null},we,{alias:"requestParams",args:null,concreteType:"RequestParamsEntry",kind:"LinkedField",name:"request_params",plural:!0,selections:[me,{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null}],storageKey:null}],type:"TimelineUrl",abstractKey:null},Oe={alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[F],storageKey:null},Ae={alias:"reason",args:null,kind:"ScalarField",name:"unavailable_reason",storageKey:null},De={alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},Pe={kind:"InlineFragment",selections:[Ae,De],type:"UserUnavailable",abstractKey:null},Ue={alias:"userLabelType",args:null,kind:"ScalarField",name:"user_label_type",storageKey:null},He={condition:"withDmMuting",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"dm_muting",storageKey:null}]},Ne={alias:null,args:null,kind:"ScalarField",name:"has_nft_avatar",storageKey:null},je={alias:null,args:null,kind:"ScalarField",name:"blocked_by",storageKey:null},Be={alias:null,args:null,kind:"ScalarField",name:"blocking",storageKey:null},We={alias:null,args:null,kind:"ScalarField",name:"can_dm",storageKey:null},qe={alias:null,args:null,kind:"ScalarField",name:"can_media_tag",storageKey:null},Ve={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},ze={alias:null,args:null,kind:"ScalarField",name:"default_profile",storageKey:null},Qe={alias:null,args:null,kind:"ScalarField",name:"default_profile_image",storageKey:null},Ge={alias:null,args:null,concreteType:"UrlsEntity",kind:"LinkedField",name:"urls",plural:!0,selections:[q,V,Q,z],storageKey:null},Ye=[Ge],Xe=[{alias:null,args:null,concreteType:"EntitySet",kind:"LinkedField",name:"description",plural:!1,selections:Ye,storageKey:null},{alias:null,args:null,concreteType:"EntitySet",kind:"LinkedField",name:"url",plural:!1,selections:Ye,storageKey:null}],$e={alias:null,args:null,concreteType:"UserEntities",kind:"LinkedField",name:"entities",plural:!1,selections:Xe,storageKey:null},Je={alias:null,args:null,kind:"ScalarField",name:"fast_followers_count",storageKey:null},Ze={alias:null,args:null,kind:"ScalarField",name:"favourites_count",storageKey:null},et={alias:null,args:null,kind:"ScalarField",name:"follow_request_sent",storageKey:null},tt={alias:null,args:null,kind:"ScalarField",name:"follow_request_received",storageKey:null},nt={alias:null,args:null,kind:"ScalarField",name:"followed_by",storageKey:null},at={alias:null,args:null,kind:"ScalarField",name:"followers_count",storageKey:null},lt={alias:null,args:null,kind:"ScalarField",name:"following",storageKey:null},st={alias:null,args:null,kind:"ScalarField",name:"friends_count",storageKey:null},it={alias:null,args:null,kind:"ScalarField",name:"has_custom_timelines",storageKey:null},rt={alias:null,args:null,kind:"ScalarField",name:"is_translator",storageKey:null},ot={alias:null,args:null,kind:"ScalarField",name:"listed_count",storageKey:null},ct={alias:null,args:null,kind:"ScalarField",name:"location",storageKey:null},dt={alias:null,args:null,kind:"ScalarField",name:"media_count",storageKey:null},ut={alias:null,args:null,kind:"ScalarField",name:"muting",storageKey:null},mt={alias:null,args:null,kind:"ScalarField",name:"needs_phone_verification",storageKey:null},pt={alias:null,args:null,kind:"ScalarField",name:"normal_followers_count",storageKey:null},gt={alias:null,args:null,kind:"ScalarField",name:"notifications",storageKey:null},yt={alias:null,args:null,kind:"ScalarField",name:"pinned_tweet_ids_str",storageKey:null},ht={alias:null,args:null,kind:"ScalarField",name:"possibly_sensitive",storageKey:null},_t=[{alias:null,args:null,concreteType:"ApiMediaEntityColorPaletteColor",kind:"LinkedField",name:"palette",plural:!0,selections:[ne,pe],storageKey:null}],bt=[{alias:null,args:null,concreteType:"ApiMediaColorExtension",kind:"LinkedField",name:"mediaColor",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMediaColorExtensionR",kind:"LinkedField",name:"r",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMediaEntityColorPalette",kind:"LinkedField",name:"ok",plural:!1,selections:_t,storageKey:null}],storageKey:null}],storageKey:null}],vt={alias:null,args:null,concreteType:"ApiMediaExtensions",kind:"LinkedField",name:"profile_banner_extensions",plural:!1,selections:bt,storageKey:null},kt={alias:null,args:null,kind:"ScalarField",name:"profile_banner_url",storageKey:null},ft={alias:null,args:null,concreteType:"ApiMediaExtensions",kind:"LinkedField",name:"profile_image_extensions",plural:!1,selections:bt,storageKey:null},Ft={alias:null,args:null,kind:"ScalarField",name:"profile_interstitial_type",storageKey:null},Tt={alias:null,args:null,kind:"ScalarField",name:"protected",storageKey:null},St={alias:null,args:null,kind:"ScalarField",name:"statuses_count",storageKey:null},Et={alias:null,args:null,kind:"ScalarField",name:"time_zone",storageKey:null},Ct={alias:null,args:null,kind:"ScalarField",name:"translator_type",storageKey:null},It={alias:null,args:null,kind:"ScalarField",name:"utc_offset",storageKey:null},Rt={alias:null,args:null,kind:"ScalarField",name:"verified",storageKey:null},Lt={alias:null,args:null,kind:"ScalarField",name:"want_retweets",storageKey:null},Kt={alias:null,args:null,kind:"ScalarField",name:"withheld_description",storageKey:null},xt={alias:null,args:null,concreteType:"UserEntities",kind:"LinkedField",name:"withheld_entities",plural:!1,selections:Xe,storageKey:null},wt={alias:null,args:null,kind:"ScalarField",name:"withheld_in_countries",storageKey:null},Mt={alias:null,args:null,kind:"ScalarField",name:"withheld_scope",storageKey:null},Ot={alias:null,args:null,kind:"ScalarField",name:"professional_type",storageKey:null},At={alias:null,args:null,kind:"ScalarField",name:"display",storageKey:null},Dt={alias:null,args:null,concreteType:"BusinessCategory",kind:"LinkedField",name:"category",plural:!0,selections:[p,f,At],storageKey:null},Pt={alias:null,args:null,concreteType:"Professional",kind:"LinkedField",name:"professional",plural:!1,selections:[m,Ot,Dt],storageKey:null},Ut={condition:"withSafetyModeUserFields",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"smart_blocked_by",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"smart_blocking",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"smart_blocking_expiration",storageKey:null}]},Ht={condition:"withSuperFollowsUserFields",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"super_follow_eligible",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"super_followed_by",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"super_following",storageKey:null}]},Nt={alias:null,args:null,kind:"ScalarField",name:"conversation_muted",storageKey:null},jt={alias:null,args:null,kind:"ScalarField",name:"policy",storageKey:null},Bt={alias:null,args:null,kind:"ScalarField",name:"invite_via_mention",storageKey:null},Wt={alias:null,args:null,kind:"ScalarField",name:"collab_invitation_status",storageKey:null},qt={alias:null,args:null,kind:"ScalarField",name:"conversation_id_str",storageKey:null},Vt={alias:null,args:null,kind:"ScalarField",name:"coordinates",storageKey:null},zt=[ge,Vt],Qt={alias:null,args:null,concreteType:"ApiGeoFeature",kind:"LinkedField",name:"coordinates",plural:!1,selections:zt,storageKey:null},Gt={alias:null,args:null,kind:"ScalarField",name:"display_text_range",storageKey:null},Yt={alias:null,args:null,kind:"ScalarField",name:"ext_alt_text",storageKey:null},Xt={alias:null,args:null,kind:"ScalarField",name:"media_url_https",storageKey:null},$t={alias:null,args:null,kind:"ScalarField",name:"source_status_id_str",storageKey:null},Jt={alias:null,args:null,kind:"ScalarField",name:"source_user_id_str",storageKey:null},Zt={alias:null,args:null,concreteType:"ApiCallToActions",kind:"LinkedField",name:"call_to_actions",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiVisitSiteCallToAction",kind:"LinkedField",name:"visit_site",plural:!1,selections:ve,storageKey:null},{alias:null,args:null,concreteType:"ApiWatchNowCallToAction",kind:"LinkedField",name:"watch_now",plural:!1,selections:ve,storageKey:null},{alias:null,args:null,concreteType:"ApiAppInstallCallToAction",kind:"LinkedField",name:"app_install",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"play_store_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"app_store_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ipad_app_store_id",storageKey:null}],storageKey:null}],storageKey:null},en={alias:null,args:null,kind:"ScalarField",name:"monetizable",storageKey:null},tn={alias:null,args:null,concreteType:"ApiMediaInfo360",kind:"LinkedField",name:"ext_info360",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is360",storageKey:null}],storageKey:null},nn={alias:null,args:null,concreteType:"ApiMediaEntityColorPalette",kind:"LinkedField",name:"ext_media_color",plural:!1,selections:_t,storageKey:null},an={alias:"mediaStats",args:null,concreteType:"ApiMediaEngagementInfo",kind:"LinkedField",name:"ext_media_stats",plural:!1,selections:[{alias:"viewCount",args:null,kind:"ScalarField",name:"view_count",storageKey:null}],storageKey:null},ln={alias:null,args:null,kind:"ScalarField",name:"reason",storageKey:null},sn={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},rn={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"copyright_holder_name",storageKey:null}],type:"ApiMediaUnavailabilityInfoCopyrightViolation",abstractKey:null},on={alias:null,args:null,concreteType:"ApiMediaAvailability",kind:"LinkedField",name:"ext_media_availability",plural:!1,selections:[ln,sn,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"unavailability_info",plural:!1,selections:[rn],storageKey:null}],storageKey:null},cn={alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},dn={alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},un={alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},mn={alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},pn=[{alias:null,args:null,concreteType:"ApiMediaEntityFace",kind:"LinkedField",name:"faces",plural:!0,selections:[cn,dn,un,mn],storageKey:null}],gn={alias:null,args:null,concreteType:"ApiMediaEntityFeatures",kind:"LinkedField",name:"features",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMediaEntityTags",kind:"LinkedField",name:"all",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMediaEntityTag",kind:"LinkedField",name:"tags",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},f,F,ge],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ApiMediaEntityFaces",kind:"LinkedField",name:"large",plural:!1,selections:pn,storageKey:null},{alias:null,args:null,concreteType:"ApiMediaEntityFaces",kind:"LinkedField",name:"medium",plural:!1,selections:pn,storageKey:null},{alias:null,args:null,concreteType:"ApiMediaEntityFaces",kind:"LinkedField",name:"small",plural:!1,selections:pn,storageKey:null},{alias:null,args:null,concreteType:"ApiMediaEntityFaces",kind:"LinkedField",name:"orig",plural:!1,selections:pn,storageKey:null}],storageKey:null},yn={alias:null,args:null,concreteType:"SensitiveMediaWarning",kind:"LinkedField",name:"sensitive_media_warning",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"adult_content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"graphic_violence",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"other",storageKey:null}],storageKey:null},hn=[un,mn,{alias:null,args:null,kind:"ScalarField",name:"resize",storageKey:null}],_n={alias:null,args:null,concreteType:"ApiMediaEntitySizes",kind:"LinkedField",name:"sizes",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMediaEntitySize",kind:"LinkedField",name:"large",plural:!1,selections:hn,storageKey:null},{alias:null,args:null,concreteType:"ApiMediaEntitySize",kind:"LinkedField",name:"medium",plural:!1,selections:hn,storageKey:null},{alias:null,args:null,concreteType:"ApiMediaEntitySize",kind:"LinkedField",name:"small",plural:!1,selections:hn,storageKey:null},{alias:null,args:null,concreteType:"ApiMediaEntitySize",kind:"LinkedField",name:"thumb",plural:!1,selections:hn,storageKey:null}],storageKey:null},bn={alias:null,args:null,concreteType:"ApiMediaEntityOriginalInfo",kind:"LinkedField",name:"original_info",plural:!1,selections:[ee,te,{alias:null,args:null,concreteType:"ApiMediaEntityFocusRect",kind:"LinkedField",name:"focus_rects",plural:!0,selections:[cn,dn,mn,un],storageKey:null}],storageKey:null},vn={alias:null,args:null,concreteType:"ApiMediaEntityVideoInfo",kind:"LinkedField",name:"video_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"aspect_ratio",storageKey:null},ie,{alias:null,args:null,concreteType:"ApiMediaEntityVideoVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"bitrate",storageKey:null},ce,Q],storageKey:null}],storageKey:null},kn={alias:null,args:null,concreteType:"ApiMentionEntity",kind:"LinkedField",name:"user_mentions",plural:!0,selections:[R,f,F,z],storageKey:null},fn=[z,W],Fn={alias:null,args:null,concreteType:"ApiTagEntity",kind:"LinkedField",name:"hashtags",plural:!0,selections:fn,storageKey:null},Tn={alias:null,args:null,concreteType:"ApiTagEntity",kind:"LinkedField",name:"symbols",plural:!0,selections:fn,storageKey:null},Sn={alias:null,args:null,kind:"ScalarField",name:"favorite_count",storageKey:null},En={alias:null,args:null,kind:"ScalarField",name:"favorited",storageKey:null},Cn={alias:null,args:null,kind:"ScalarField",name:"full_text",storageKey:null},In={alias:null,args:null,concreteType:"ApiGeoFeature",kind:"LinkedField",name:"geo",plural:!1,selections:zt,storageKey:null},Rn={alias:null,args:null,kind:"ScalarField",name:"in_reply_to_screen_name",storageKey:null},Ln={alias:null,args:null,kind:"ScalarField",name:"in_reply_to_status_id_str",storageKey:null},Kn={alias:null,args:null,kind:"ScalarField",name:"in_reply_to_user_id_str",storageKey:null},xn={alias:null,args:null,kind:"ScalarField",name:"is_quote_status",storageKey:null},wn={alias:null,args:null,kind:"ScalarField",name:"lang",storageKey:null},Mn={alias:null,args:null,kind:"ScalarField",name:"limited_actions",storageKey:null},On={alias:null,args:null,kind:"ScalarField",name:"possibly_sensitive_editable",storageKey:null},An={alias:null,args:null,concreteType:"ApiPlace",kind:"LinkedField",name:"place",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiGeoAttributes",kind:"LinkedField",name:"attributes",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"factual_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"iso3",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"locality",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"street_address",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"twitter",storageKey:null},Q],storageKey:null},{alias:"bounding_box",args:null,concreteType:"ApiGeoPolygon",kind:"LinkedField",name:"bounding_box_polygon",plural:!1,selections:[Vt,ge],storageKey:null},{alias:null,args:null,concreteType:"ApiPlace",kind:"LinkedField",name:"contained_within",plural:!0,selections:[p],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"country",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"country_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},f,p,{alias:null,args:null,kind:"ScalarField",name:"place_type",storageKey:null},Q],storageKey:null},Dn={alias:null,args:null,concreteType:"ApiTweetPromotedContent",kind:"LinkedField",name:"promoted_content",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"disclosure_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"impression_id",storageKey:null}],storageKey:null},Pn={alias:null,args:null,kind:"ScalarField",name:"quote_count",storageKey:null},Un={alias:null,args:null,kind:"ScalarField",name:"quoted_status_id_str",storageKey:null},Hn={alias:null,args:null,concreteType:"ApiShortenedUrl",kind:"LinkedField",name:"quoted_status_permalink",plural:!1,selections:[Q,{alias:null,args:null,kind:"ScalarField",name:"expanded",storageKey:null},At],storageKey:null},Nn={alias:null,args:null,kind:"ScalarField",name:"reply_count",storageKey:null},jn={alias:null,args:null,kind:"ScalarField",name:"retweet_count",storageKey:null},Bn={alias:null,args:null,kind:"ScalarField",name:"retweeted",storageKey:null},Wn={alias:null,args:null,concreteType:"ApiScopes",kind:"LinkedField",name:"scopes",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"followers",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"place_ids",storageKey:null}],storageKey:null},qn={alias:null,args:null,kind:"ScalarField",name:"source",storageKey:null},Vn={alias:null,args:null,kind:"ScalarField",name:"supplemental_language",storageKey:null},zn={alias:null,args:null,kind:"ScalarField",name:"user_id_str",storageKey:null},Qn={alias:null,args:null,kind:"ScalarField",name:"withheld_text",storageKey:null},Gn={alias:null,args:null,concreteType:"ApiSelfThreadMetadata",kind:"LinkedField",name:"self_thread",plural:!1,selections:[R],storageKey:null},Yn={condition:"withMessageQueryHighlights",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"DMHighlighting",kind:"LinkedField",name:"highlighting",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"query_tokens",storageKey:null}],storageKey:null}]},Xn={alias:null,args:null,concreteType:"SliceInfo",kind:"LinkedField",name:"slice_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"next_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"previous_cursor",storageKey:null}],storageKey:null},$n=[{kind:"Variable",name:"cursor",variableName:"cursor"},d,u],Jn={alias:null,args:null,filters:null,handle:"defaultScalars",key:"",kind:"LinkedHandle",name:"legacy"},Zn={alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"result"},ea=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[p,m,T,Jn],type:"User",abstractKey:null}],storageKey:null},Zn,p],ta=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[Oe,Jn,m,p],type:"User",abstractKey:null},Pe],storageKey:null},p],na={alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[X,{kind:"TypeDiscriminator",abstractKey:"__isTimelineReferenceObject"},Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:ta,storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:ta,storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null},aa=[p,m,{alias:"affiliates_highlighted_label",args:null,concreteType:"HighlightedUserLabelResponse",kind:"LinkedField",name:"identity_profile_labels_highlighted_label",plural:!1,selections:[{alias:null,args:null,concreteType:"HighlightedUserLabel",kind:"LinkedField",name:"label",plural:!1,selections:[be,ke,fe,{alias:"longDescription",args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"long_description",plural:!1,selections:[Fe,Te,W,na],storageKey:null},Ue],storageKey:null}],storageKey:null},He,Ne,{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[je,Be,We,qe,Ve,ze,Qe,fe,$e,Je,Ze,et,tt,nt,at,lt,st,it,rt,ot,ct,dt,ut,f,mt,pt,gt,yt,ht,vt,kt,ft,L,Ft,Tt,F,St,Et,Ct,Q,It,Rt,Lt,Kt,xt,wt,Mt],storageKey:null},Jn,{alias:null,args:null,concreteType:"Professional",kind:"LinkedField",name:"professional",plural:!1,selections:[m,Ot,Dt,p],storageKey:null},Ut,Ht],la={alias:null,args:null,concreteType:"Card",kind:"LinkedField",name:"card",plural:!1,selections:[m,{alias:null,args:null,concreteType:"LegacyCard",kind:"LinkedField",name:"legacy",plural:!1,selections:[ye,he,f,Q,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user_refs",plural:!0,selections:aa,storageKey:null},{alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"user_refs",handleArgs:[{kind:"Literal",name:"isPlural",value:!0}]}],storageKey:null},p],storageKey:null},sa=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:aa,type:"User",abstractKey:null},{kind:"InlineFragment",selections:[De,{alias:null,args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"unavailable_message",plural:!1,selections:[Fe,na,Te,W],storageKey:null},Ae],type:"UserUnavailable",abstractKey:null}],storageKey:null},Zn,p],ia=[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:sa,storageKey:null}],ra=[{alias:null,args:null,concreteType:"ApiMediaEntity",kind:"LinkedField",name:"media",plural:!0,selections:[q,V,Yt,R,z,J,Xt,ht,$t,Jt,ge,Q,{alias:null,args:null,concreteType:"ApiMediaMetadata",kind:"LinkedField",name:"additional_media_info",plural:!1,selections:[we,fe,Zt,re,en,{alias:null,args:null,concreteType:"ApiMediaSourceUser",kind:"LinkedField",name:"source_user",plural:!1,selections:ia,storageKey:null}],storageKey:null},tn,nn,an,{alias:null,args:null,concreteType:"ApiMediaAvailability",kind:"LinkedField",name:"ext_media_availability",plural:!1,selections:[ln,sn,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"unavailability_info",plural:!1,selections:[X,rn],storageKey:null}],storageKey:null},gn,yn,_n,bn,vn],storageKey:null},kn,Ge,Fn,Tn],{fragment:{argumentDefinitions:[a,l,s,i,r,o,c],kind:"Fragment",metadata:null,name:"DMMessageSearchTabQuery",selections:[{alias:"dm_message_slice_result",args:[d,u],concreteType:null,kind:"LinkedField",name:"__DMMessageSearchTabQuery_dm_message_slice_result_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMEvent",kind:"LinkedField",name:"dm_event",plural:!1,selections:[m,p,{alias:null,args:null,concreteType:"DMEventMetadata",kind:"LinkedField",name:"legacy",plural:!1,selections:[g,y,h,_,b,{alias:null,args:null,concreteType:"DMConversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[p,m,{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[v,{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[v,k,f,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"created_by_user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[p,m,{kind:"RequiredField",field:T,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.conversation.legacy.metadata.created_by_user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},y,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"admin_user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[p,m,{kind:"RequiredField",field:T,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.conversation.legacy.metadata.admin_user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[p,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[I],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[p,m,{kind:"RequiredField",field:K,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.conversation.legacy.participants_metadata.user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},x,w,M],storageKey:null},O],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"DMEventDetail",kind:"LinkedField",name:"event_detail",plural:!1,selections:[A,D,P,U,H,f,N,j,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"users_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[p,m,{kind:"RequiredField",field:T,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.users_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"participants_snapshot_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[p,m,{kind:"RequiredField",field:T,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.participants_snapshot_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"initiating_user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[p,m,{kind:"RequiredField",field:T,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.initiating_user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"DirectMessageInfo",kind:"LinkedField",name:"dm",plural:!1,selections:[B,p,W,{condition:"withAttachments",kind:"Condition",passingValue:!0,selections:[Y,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachments",plural:!0,selections:[X,ue,{kind:"InlineFragment",selections:[$,{alias:null,args:null,concreteType:"Card",kind:"LinkedField",name:"card",plural:!1,selections:[m,{alias:null,args:null,concreteType:"LegacyCard",kind:"LinkedField",name:"legacy",plural:!1,selections:[ye,he,f,Q,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user_refs",plural:!0,selections:[p,m,{alias:"affiliates_highlighted_label",args:null,concreteType:"HighlightedUserLabelResponse",kind:"LinkedField",name:"identity_profile_labels_highlighted_label",plural:!1,selections:[{alias:null,args:null,concreteType:"HighlightedUserLabel",kind:"LinkedField",name:"label",plural:!1,selections:[be,ke,fe,{alias:"longDescription",args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"long_description",plural:!1,selections:[Fe,Te,W,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.affiliates_highlighted_label.label.longDescription.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.affiliates_highlighted_label.label.longDescription.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Ue],storageKey:null}],storageKey:null},He,Ne,{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{kind:"RequiredField",field:je,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.blocked_by"},{kind:"RequiredField",field:Be,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.blocking"},We,qe,Ve,ze,Qe,fe,$e,Je,{kind:"RequiredField",field:Ze,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.favourites_count"},{kind:"RequiredField",field:et,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.follow_request_sent"},tt,{kind:"RequiredField",field:nt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.followed_by"},{kind:"RequiredField",field:at,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.followers_count"},{kind:"RequiredField",field:lt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.following"},{kind:"RequiredField",field:st,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.friends_count"},it,rt,ot,ct,{kind:"RequiredField",field:dt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.media_count"},ut,f,mt,pt,gt,yt,ht,vt,kt,ft,L,Ft,{kind:"RequiredField",field:Tt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.protected"},F,{kind:"RequiredField",field:St,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.statuses_count"},Et,Ct,Q,It,{kind:"RequiredField",field:Rt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.verified"},Lt,Kt,xt,wt,Mt],storageKey:null},action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy"},Pt,Ut,Ht],storageKey:null}],storageKey:null}],storageKey:null}],type:"DMCardAttachment",abstractKey:null},{kind:"InlineFragment",selections:[$,{alias:null,args:null,concreteType:"TweetResults",kind:"LinkedField",name:"tweet_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[X,p,m,{alias:null,args:null,concreteType:"Card",kind:"LinkedField",name:"card",plural:!1,selections:[m,{alias:null,args:null,concreteType:"LegacyCard",kind:"LinkedField",name:"legacy",plural:!1,selections:[ye,he,f,Q,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user_refs",plural:!0,selections:[p,m,{alias:"affiliates_highlighted_label",args:null,concreteType:"HighlightedUserLabelResponse",kind:"LinkedField",name:"identity_profile_labels_highlighted_label",plural:!1,selections:[{alias:null,args:null,concreteType:"HighlightedUserLabel",kind:"LinkedField",name:"label",plural:!1,selections:[be,ke,fe,{alias:"longDescription",args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"long_description",plural:!1,selections:[Fe,Te,W,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.affiliates_highlighted_label.label.longDescription.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.affiliates_highlighted_label.label.longDescription.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Ue],storageKey:null}],storageKey:null},He,Ne,{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{kind:"RequiredField",field:je,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.blocked_by"},{kind:"RequiredField",field:Be,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.blocking"},We,qe,Ve,ze,Qe,fe,$e,Je,{kind:"RequiredField",field:Ze,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.favourites_count"},{kind:"RequiredField",field:et,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.follow_request_sent"},tt,{kind:"RequiredField",field:nt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.followed_by"},{kind:"RequiredField",field:at,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.followers_count"},{kind:"RequiredField",field:lt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.following"},{kind:"RequiredField",field:st,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.friends_count"},it,rt,ot,ct,{kind:"RequiredField",field:dt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.media_count"},ut,f,mt,pt,gt,yt,ht,vt,kt,ft,L,Ft,{kind:"RequiredField",field:Tt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.protected"},F,{kind:"RequiredField",field:St,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.statuses_count"},Et,Ct,Q,It,{kind:"RequiredField",field:Rt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.verified"},Lt,Kt,xt,wt,Mt],storageKey:null},action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy"},Pt,Ut,Ht],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"LegacyTweet",kind:"LinkedField",name:"legacy",plural:!1,selections:[Nt,Ve,{alias:null,args:null,concreteType:"ApiConversationControl",kind:"LinkedField",name:"conversation_control",plural:!1,selections:[jt,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"conversation_owner",plural:!1,selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.conversation_control.conversation_owner.legacy"}],storageKey:null},Bt],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collab_control",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"collaborators_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[p,m,{alias:"affiliates_highlighted_label",args:null,concreteType:"HighlightedUserLabelResponse",kind:"LinkedField",name:"identity_profile_labels_highlighted_label",plural:!1,selections:[{alias:null,args:null,concreteType:"HighlightedUserLabel",kind:"LinkedField",name:"label",plural:!1,selections:[be,ke,fe,{alias:"longDescription",args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"long_description",plural:!1,selections:[Fe,Te,W,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.affiliates_highlighted_label.label.longDescription.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.affiliates_highlighted_label.label.longDescription.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Ue],storageKey:null}],storageKey:null},He,Ne,{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{kind:"RequiredField",field:je,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.blocked_by"},{kind:"RequiredField",field:Be,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.blocking"},We,qe,Ve,ze,Qe,fe,$e,Je,{kind:"RequiredField",field:Ze,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.favourites_count"},{kind:"RequiredField",field:et,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.follow_request_sent"},tt,{kind:"RequiredField",field:nt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.followed_by"},{kind:"RequiredField",field:at,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.followers_count"},{kind:"RequiredField",field:lt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.following"},{kind:"RequiredField",field:st,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.friends_count"},it,rt,ot,ct,{kind:"RequiredField",field:dt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.media_count"},ut,f,mt,pt,gt,yt,ht,vt,kt,ft,L,Ft,{kind:"RequiredField",field:Tt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.protected"},F,{kind:"RequiredField",field:St,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.statuses_count"},Et,Ct,Q,It,{kind:"RequiredField",field:Rt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.verified"},Lt,Kt,xt,wt,Mt],storageKey:null},action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy"},Pt,Ut,Ht],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[De,{alias:null,args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"unavailable_message",plural:!1,selections:[Fe,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.unavailable_message.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.unavailable_message.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null},Te,W],storageKey:null},Ae],type:"UserUnavailable",abstractKey:null}],storageKey:null}],storageKey:null}],type:"CollabTweet",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"InvitedCollaborator",kind:"LinkedField",name:"invited_collaborators",plural:!0,selections:[Wt,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"collaborator_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[p,m,{alias:"affiliates_highlighted_label",args:null,concreteType:"HighlightedUserLabelResponse",kind:"LinkedField",name:"identity_profile_labels_highlighted_label",plural:!1,selections:[{alias:null,args:null,concreteType:"HighlightedUserLabel",kind:"LinkedField",name:"label",plural:!1,selections:[be,ke,fe,{alias:"longDescription",args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"long_description",plural:!1,selections:[Fe,Te,W,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.affiliates_highlighted_label.label.longDescription.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.affiliates_highlighted_label.label.longDescription.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Ue],storageKey:null}],storageKey:null},He,Ne,{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{kind:"RequiredField",field:je,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.blocked_by"},{kind:"RequiredField",field:Be,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.blocking"},We,qe,Ve,ze,Qe,fe,$e,Je,{kind:"RequiredField",field:Ze,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.favourites_count"},{kind:"RequiredField",field:et,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.follow_request_sent"},tt,{kind:"RequiredField",field:nt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.followed_by"},{kind:"RequiredField",field:at,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.followers_count"},{kind:"RequiredField",field:lt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.following"},{kind:"RequiredField",field:st,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.friends_count"},it,rt,ot,ct,{kind:"RequiredField",field:dt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.media_count"},ut,f,mt,pt,gt,yt,ht,vt,kt,ft,L,Ft,{kind:"RequiredField",field:Tt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.protected"},F,{kind:"RequiredField",field:St,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.statuses_count"},Et,Ct,Q,It,{kind:"RequiredField",field:Rt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.verified"},Lt,Kt,xt,wt,Mt],storageKey:null},action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy"},Pt,Ut,Ht],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[De,{alias:null,args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"unavailable_message",plural:!1,selections:[Fe,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.unavailable_message.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.unavailable_message.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null},Te,W],storageKey:null},Ae],type:"UserUnavailable",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"CollabInvitation",abstractKey:null}],storageKey:null},qt,Qt,Gt,{alias:null,args:null,concreteType:"EntitySet",kind:"LinkedField",name:"entities",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMediaEntity",kind:"LinkedField",name:"media",plural:!0,selections:[q,V,Yt,R,z,J,Xt,ht,$t,Jt,ge,Q,{alias:null,args:null,concreteType:"ApiMediaMetadata",kind:"LinkedField",name:"additional_media_info",plural:!1,selections:[we,fe,Zt,re,en,{alias:null,args:null,concreteType:"ApiMediaSourceUser",kind:"LinkedField",name:"source_user",plural:!1,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[p,m,{alias:"affiliates_highlighted_label",args:null,concreteType:"HighlightedUserLabelResponse",kind:"LinkedField",name:"identity_profile_labels_highlighted_label",plural:!1,selections:[{alias:null,args:null,concreteType:"HighlightedUserLabel",kind:"LinkedField",name:"label",plural:!1,selections:[be,ke,fe,{alias:"longDescription",args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"long_description",plural:!1,selections:[Fe,Te,W,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.affiliates_highlighted_label.label.longDescription.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.affiliates_highlighted_label.label.longDescription.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Ue],storageKey:null}],storageKey:null},He,Ne,{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{kind:"RequiredField",field:je,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.blocked_by"},{kind:"RequiredField",field:Be,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.blocking"},We,qe,Ve,ze,Qe,fe,$e,Je,{kind:"RequiredField",field:Ze,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.favourites_count"},{kind:"RequiredField",field:et,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.follow_request_sent"},tt,{kind:"RequiredField",field:nt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.followed_by"},{kind:"RequiredField",field:at,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.followers_count"},{kind:"RequiredField",field:lt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.following"},{kind:"RequiredField",field:st,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.friends_count"},it,rt,ot,ct,{kind:"RequiredField",field:dt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.media_count"},ut,f,mt,pt,gt,yt,ht,vt,kt,ft,L,Ft,{kind:"RequiredField",field:Tt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.protected"},F,{kind:"RequiredField",field:St,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.statuses_count"},Et,Ct,Q,It,{kind:"RequiredField",field:Rt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.verified"},Lt,Kt,xt,wt,Mt],storageKey:null},action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy"},Pt,Ut,Ht],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[De,{alias:null,args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"unavailable_message",plural:!1,selections:[Fe,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.unavailable_message.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.unavailable_message.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null},Te,W],storageKey:null},Ae],type:"UserUnavailable",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},tn,nn,an,on,gn,yn,_n,bn,vn],storageKey:null},kn,Ge,Fn,Tn],storageKey:null},{alias:null,args:null,concreteType:"EntitySet",kind:"LinkedField",name:"extended_entities",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMediaEntity",kind:"LinkedField",name:"media",plural:!0,selections:[q,V,Yt,R,z,J,Xt,ht,$t,Jt,ge,Q,{alias:null,args:null,concreteType:"ApiMediaMetadata",kind:"LinkedField",name:"additional_media_info",plural:!1,selections:[we,fe,Zt,re,en,{alias:null,args:null,concreteType:"ApiMediaSourceUser",kind:"LinkedField",name:"source_user",plural:!1,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[p,m,{alias:"affiliates_highlighted_label",args:null,concreteType:"HighlightedUserLabelResponse",kind:"LinkedField",name:"identity_profile_labels_highlighted_label",plural:!1,selections:[{alias:null,args:null,concreteType:"HighlightedUserLabel",kind:"LinkedField",name:"label",plural:!1,selections:[be,ke,fe,{alias:"longDescription",args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"long_description",plural:!1,selections:[Fe,Te,W,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.affiliates_highlighted_label.label.longDescription.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.affiliates_highlighted_label.label.longDescription.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Ue],storageKey:null}],storageKey:null},He,Ne,{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{kind:"RequiredField",field:je,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.blocked_by"},{kind:"RequiredField",field:Be,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.blocking"},We,qe,Ve,ze,Qe,fe,$e,Je,{kind:"RequiredField",field:Ze,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.favourites_count"},{kind:"RequiredField",field:et,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.follow_request_sent"},tt,{kind:"RequiredField",field:nt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.followed_by"},{kind:"RequiredField",field:at,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.followers_count"},{kind:"RequiredField",field:lt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.following"},{kind:"RequiredField",field:st,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.friends_count"},it,rt,ot,ct,{kind:"RequiredField",field:dt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.media_count"},ut,f,mt,pt,gt,yt,ht,vt,kt,ft,L,Ft,{kind:"RequiredField",field:Tt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.protected"},F,{kind:"RequiredField",field:St,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.statuses_count"},Et,Ct,Q,It,{kind:"RequiredField",field:Rt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.verified"},Lt,Kt,xt,wt,Mt],storageKey:null},action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy"},Pt,Ut,Ht],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[De,{alias:null,args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"unavailable_message",plural:!1,selections:[Fe,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.unavailable_message.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.unavailable_message.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null},Te,W],storageKey:null},Ae],type:"UserUnavailable",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},tn,nn,an,on,gn,yn,_n,bn,vn],storageKey:null},kn,Ge,Fn,Tn],storageKey:null},{kind:"RequiredField",field:Sn,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.favorite_count"},{kind:"RequiredField",field:En,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.favorited"},Cn,In,Rn,Ln,Kn,xn,wn,Mn,ht,On,An,Dn,Pn,Un,Hn,{kind:"RequiredField",field:Nn,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.reply_count"},{kind:"RequiredField",field:jn,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.retweet_count"},{kind:"RequiredField",field:Bn,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.retweeted"},Wn,qn,Vn,zn,Mt,R,Qn,Gn],storageKey:null},{alias:null,args:null,concreteType:"TweetCore",kind:"LinkedField",name:"core",plural:!1,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[p,m,{alias:"affiliates_highlighted_label",args:null,concreteType:"HighlightedUserLabelResponse",kind:"LinkedField",name:"identity_profile_labels_highlighted_label",plural:!1,selections:[{alias:null,args:null,concreteType:"HighlightedUserLabel",kind:"LinkedField",name:"label",plural:!1,selections:[be,ke,fe,{alias:"longDescription",args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"long_description",plural:!1,selections:[Fe,Te,W,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.affiliates_highlighted_label.label.longDescription.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.affiliates_highlighted_label.label.longDescription.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Ue],storageKey:null}],storageKey:null},He,Ne,{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{kind:"RequiredField",field:je,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.blocked_by"},{kind:"RequiredField",field:Be,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.blocking"},We,qe,Ve,ze,Qe,fe,$e,Je,{kind:"RequiredField",field:Ze,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.favourites_count"},{kind:"RequiredField",field:et,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.follow_request_sent"},tt,{kind:"RequiredField",field:nt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.followed_by"},{kind:"RequiredField",field:at,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.followers_count"},{kind:"RequiredField",field:lt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.following"},{kind:"RequiredField",field:st,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.friends_count"},it,rt,ot,ct,{kind:"RequiredField",field:dt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.media_count"},ut,f,mt,pt,gt,yt,ht,vt,kt,ft,L,Ft,{kind:"RequiredField",field:Tt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.protected"},F,{kind:"RequiredField",field:St,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.statuses_count"},Et,Ct,Q,It,{kind:"RequiredField",field:Rt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.verified"},Lt,Kt,xt,wt,Mt],storageKey:null},action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy"},Pt,Ut,Ht],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[De,{alias:null,args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"unavailable_message",plural:!1,selections:[Fe,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.unavailable_message.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.unavailable_message.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null},Te,W],storageKey:null},Ae],type:"UserUnavailable",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:"quotedRefResult",args:null,concreteType:"TweetResults",kind:"LinkedField",name:"quoted_tweet_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[m],type:"Tweet",abstractKey:null}],storageKey:null}],storageKey:null}],type:"Tweet",abstractKey:null}],storageKey:null}],storageKey:null}],type:"DMTweetAttachment",abstractKey:null}],storageKey:null}]},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"recipient_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[p,m,{kind:"RequiredField",field:T,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.recipient_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"sender_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[p,m,{kind:"RequiredField",field:T,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.sender_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Yn],type:"DMMessageSearchItem",abstractKey:null}],storageKey:null},Xn],type:"DMMessageSlice",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,l,s,r,c,o,i],kind:"Operation",name:"DMMessageSearchTabQuery",selections:[{alias:null,args:$n,concreteType:null,kind:"LinkedField",name:"dm_message_slice_result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[X,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMEvent",kind:"LinkedField",name:"dm_event",plural:!1,selections:[m,p,{alias:null,args:null,concreteType:"DMEventMetadata",kind:"LinkedField",name:"legacy",plural:!1,selections:[g,y,h,_,b,{alias:null,args:null,concreteType:"DMConversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[p,m,{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[v,{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[v,k,f,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"created_by_user_results",plural:!1,selections:ea,storageKey:null},y,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"admin_user_results",plural:!1,selections:ea,storageKey:null},{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[p,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[X,I],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[p,m,K,Jn],type:"User",abstractKey:null}],storageKey:null},Zn,p],storageKey:null},x,w,M],storageKey:null},O],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"DMEventDetail",kind:"LinkedField",name:"event_detail",plural:!1,selections:[A,D,P,U,H,f,N,j,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"users_results",plural:!0,selections:ea,storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"participants_snapshot_results",plural:!0,selections:ea,storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"initiating_user_results",plural:!1,selections:ea,storageKey:null},{alias:null,args:null,concreteType:"DirectMessageInfo",kind:"LinkedField",name:"dm",plural:!1,selections:[B,p,W,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"recipient_results",plural:!1,selections:ea,storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"sender_results",plural:!1,selections:ea,storageKey:null},{condition:"withAttachments",kind:"Condition",passingValue:!0,selections:[Y,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachments",plural:!0,selections:[X,ue,{kind:"InlineFragment",selections:[$,la],type:"DMCardAttachment",abstractKey:null},{kind:"InlineFragment",selections:[$,{alias:null,args:null,concreteType:"TweetResults",kind:"LinkedField",name:"tweet_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[p,m,la,{alias:null,args:null,concreteType:"LegacyTweet",kind:"LinkedField",name:"legacy",plural:!1,selections:[Nt,Ve,{alias:null,args:null,concreteType:"ApiConversationControl",kind:"LinkedField",name:"conversation_control",plural:!1,selections:[jt,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"conversation_owner",plural:!1,selections:[Oe,Jn,p],storageKey:null},{alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"conversation_owner"},Bt],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collab_control",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"collaborators_results",plural:!0,selections:sa,storageKey:null}],type:"CollabTweet",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"InvitedCollaborator",kind:"LinkedField",name:"invited_collaborators",plural:!0,selections:[Wt,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"collaborator_results",plural:!1,selections:sa,storageKey:null}],storageKey:null}],type:"CollabInvitation",abstractKey:null}],storageKey:null},qt,Qt,Gt,{alias:null,args:null,concreteType:"EntitySet",kind:"LinkedField",name:"entities",plural:!1,selections:ra,storageKey:null},{alias:null,args:null,concreteType:"EntitySet",kind:"LinkedField",name:"extended_entities",plural:!1,selections:ra,storageKey:null},Sn,En,Cn,In,Rn,Ln,Kn,xn,wn,Mn,ht,On,An,Dn,Pn,Un,Hn,Nn,jn,Bn,Wn,qn,Vn,zn,Mt,R,Qn,Gn],storageKey:null},Jn,{alias:null,args:null,concreteType:"TweetCore",kind:"LinkedField",name:"core",plural:!1,selections:ia,storageKey:null},{alias:"quotedRefResult",args:null,concreteType:"TweetResults",kind:"LinkedField",name:"quoted_tweet_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[m,p],type:"Tweet",abstractKey:null}],storageKey:null},p],storageKey:null}],type:"Tweet",abstractKey:null}],storageKey:null},p],storageKey:null}],type:"DMTweetAttachment",abstractKey:null}],storageKey:null}]}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Yn],type:"DMMessageSearchItem",abstractKey:null}],storageKey:null},Xn],type:"DMMessageSlice",abstractKey:null}],storageKey:null},{alias:null,args:$n,filters:["query","s"],handle:"slice",key:"DMMessageSearchTabQuery_dm_message_slice_result",kind:"LinkedHandle",name:"dm_message_slice_result"}]},params:{id:"PiSGvjQPSd_b3-lfeC6Mrg",metadata:{sliceInfoPath:["dm_message_slice_result","slice_info"]},name:"DMMessageSearchTabQuery",operationKind:"query",text:null}});oa.hash="047e679536a37cb5fc5faf0309b35bd1",e.exports=oa},zQEV:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return y}));var a=n("ERkP"),l=n.n(a),s=n("t62R"),i=n("aWyx"),r=n("3XMw"),o=n.n(r);const c=o.a.c1d4ac84,d=o.a.abc7b032,u=o.a.i263b294,m=({children:e,conversationId:t})=>l.a.createElement(s.b,{link:`/messages/${t}/participants`},e),p=(e,t)=>e>=2?l.a.createElement(o.a.I18NFormatMessage,{$i18n:"e3534477"},l.a.createElement(m,{conversationId:t},o.a.i8d5e62b({count:e}))):l.a.createElement(o.a.I18NFormatMessage,{$i18n:"b6656851",count:e}),g=({entry:e,users:t})=>e.participants?l.a.createElement("span",null,e.participants.map((({user_id:e},n)=>{const a=t[e];return a?l.a.createElement("span",{key:n},n>0?", ":null,l.a.createElement(s.b,null,a.name)):null}))):null,y=(e,t,n,a)=>{const r=n===e.by_user_id;let m;switch(t){case i.b.CONVERSATION_AVATAR_UPDATE:return m=e.by_user_id&&a[e.by_user_id]&&a[e.by_user_id].name,m?r?c:(e=>l.a.createElement(o.a.I18NFormatMessage,{$i18n:"bff29c95"},l.a.createElement(s.b,null,e)))(m):d;case i.b.CONVERSATION_NAME_UPDATE:{const t=l.a.createElement(s.b,null,e.conversation_name);return m=e.by_user_id&&a[e.by_user_id]&&a[e.by_user_id].name,m?r?(e=>l.a.createElement(o.a.I18NFormatMessage,{$i18n:"b16e4d45"},e))(t):((e,t)=>l.a.createElement(o.a.I18NFormatMessage,{$i18n:"c5760699"},l.a.createElement(s.b,null,e),t))(m,t):(e=>l.a.createElement(o.a.I18NFormatMessage,{$i18n:"a72730a1"},e))(t)}case i.b.JOIN_CONVERSATION:return m=e.sender_id&&a[e.sender_id]&&a[e.sender_id].name,m?(e=>l.a.createElement(o.a.I18NFormatMessage,{$i18n:"fa95b019"},l.a.createElement(s.b,null,e)))(m):u;case i.b.PARTICIPANTS_LEAVE:return(e=>l.a.createElement(o.a.I18NFormatMessage,{$i18n:"fc10875f"},e))(l.a.createElement(g,{entry:e,users:a}));case i.b.PARTICIPANTS_JOIN:m=e.sender_id&&a[e.sender_id]&&a[e.sender_id].name;return((e,t)=>e?l.a.createElement(o.a.I18NFormatMessage,{$i18n:"a4bc88c3"},l.a.createElement(s.b,null,e),t):l.a.createElement(o.a.I18NFormatMessage,{$i18n:"bfdff0c3"},t))(m,l.a.createElement(g,{entry:e,users:a}));default:return""}}},zsGg:function(e,t,n){"use strict";n.d(t,"b",(function(){return _}));n("kYxP");var a=n("ERkP"),l=n.n(a),s=n("hl/W"),i=n("qz2E"),r=n("pXKu"),o=n("maE+"),c=n("3XMw"),d=n.n(c),u=n("AQ79"),m=n("f42t"),p=n("OOE2"),g=n("pHkl"),y=n("pxuL");var h=n("29EQ");d.a.a74e7c77;const _=d.a.h6beb5fb;class b extends l.a.Component{constructor(...e){super(...e),this._renderPivot=()=>{const{allowUntrustedInbox:e,allowUntrustedVDLInbox:t,untrustedCounts:n,untrustedUnreadCount:a}=this.props;return l.a.createElement(p.a,{allowUntrustedInbox:e,allowUntrustedVDLInbox:t,secondaryInboxCounts:n,untrustedUnreadCount:a})},this._renderEmptyDMInbox=()=>l.a.createElement(o.a,{messageRequestPivot:this._renderPivot()})}componentDidMount(){const{allowUntrustedInbox:e,allowUntrustedVDLInbox:t,analytics:n,location:a,setLastViewedDmInboxPath:l}=this.props;l(a.pathname),(e||t)&&n.scribe({element:"requests_pivot",action:"impression"})}componentWillUnmount(){this.context.featureSwitches.isTrue("dm_inbox_search_modular_results_enabled")&&this.props.clearSearchSlicesCache(g.j),this.props.clearSearchCache()}render(){const{analytics:e,conversationIds:t,fetchInboxHistory:n,updateLastSeenEventId:a}=this.props;return l.a.createElement(h.b,null,l.a.createElement(r.a,{accessibilityTitle:h.c,analytics:e,conversationIds:t,fetchInboxHistory:n,renderEmptyDMInbox:this._renderEmptyDMInbox,renderStickyContent:this._renderPivot,updateLastSeenEventId:a,virtualScrollerCacheKey:h.a,withDmSearch:!0,withPinnedInbox:!0}))}}b.contextType=y.a,b.defaultProps={conversationIds:[],untrustedUnreadCount:0,untrustedCounts:{newUntrustedWithSocialProof:0,newUntrustedWithoutSocialProof:0,oldUntrustedWithSocialProof:0,oldUntrustedWithoutSocialProof:0}};const v=Object(m.a)(Object(s.a)({inbox:u.d.PRIMARY})(b),{directMessages:i.a});t.a=v}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.DMDrawer.71d819b7.js.map