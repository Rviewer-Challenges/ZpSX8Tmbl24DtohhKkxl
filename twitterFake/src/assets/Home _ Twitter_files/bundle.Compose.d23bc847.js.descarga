(window.webpackJsonp=window.webpackJsonp||[]).push([[145,6,7,8,60],{"+/sI":function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return d}));var n=a("ERkP"),i=a.n(n),o=a("TGcR"),r=a("t62R"),s=a("a6qo"),l=a("rHpw");const c="animated_gif",d="video";class u extends i.a.PureComponent{render(){const{durationInMilliseconds:e,type:t}=this.props;let a;if(t===c||"vine"===t)a=t===c?i.a.createElement(r.b,{weight:"bold"},"GIF"):i.a.createElement(o.a,{style:h.icon});else if(t===d&&e){const t=Math.trunc(e/6e4),n=`0${Math.trunc(e%6e4/1e3)}`.slice(-2);a=i.a.createElement(r.b,{color:"white"},`${t}:${n}`)}return a?i.a.createElement(s.a,{align:"left"},a):null}}const h=l.a.create((e=>({icon:{color:e.colors.white}})));t.c=u},"+7q0":function(e,t,a){var n=a("eN33"),i=a("Pz+s"),o=a("zWgn"),r=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:o;e.exports=r},"+fUG":function(e,t,a){var n=a("5pfJ"),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var a=t[e];return"__lodash_hash_undefined__"===a?void 0:a}return i.call(t,e)?t[e]:void 0}},"+ooz":function(e,t,a){var n=a("8Zrg"),i=a("kwr2"),o=a("5VYK"),r=a("Coc+"),s=a("LzM7");function l(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=r,l.prototype.set=s,e.exports=l},"/Imo":function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),o=(a("kYxP"),a("ERkP")),r=a.n(o),s=a("/yvb"),l=a("k/Ka"),c=a("3XMw"),d=a.n(c),u=a("rHpw");const h=d.a.i5450bec,p=d.a.f7432494;class m extends r.a.Component{constructor(...e){super(...e),this._handlePress=e=>{const{onPress:t}=this.props;t&&t(e),this._fileInput&&this._fileInput.click()},this._handleChange=e=>{const{onChange:t}=this.props,a=e.target,n=a.files;n.length&&t&&t(n),a.value=""},this._handleFileInputButtonRef=e=>{this._fileInput=e}}render(){const{accept:e,disabled:t,multiple:a,onChange:n,testID:o,...c}=this.props,d=!(null!=e&&e.includes("video")||null!=e&&e.includes("gif"));return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,i()({hoverLabel:e?{label:d?p:h}:void 0},c,{disabled:t,onPress:this._handlePress})),Object(l.a)("input",{accept:e,disabled:t,multiple:a,onChange:this._handleChange,ref:this._handleFileInputButtonRef,style:g.input,tabIndex:-1,testID:o,type:"file"}))}}m.defaultProps={disabled:!1,multiple:!1};const g=u.a.create((e=>({input:{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1}})));t.a=m},"/Rsk":function(e,t,a){"use strict";a.d(t,"f",(function(){return p})),a.d(t,"e",(function(){return m})),a.d(t,"h",(function(){return g})),a.d(t,"g",(function(){return b})),a.d(t,"d",(function(){return _})),a.d(t,"c",(function(){return y})),a.d(t,"b",(function(){return w})),a.d(t,"a",(function(){return v})),a.d(t,"i",(function(){return E}));var n=a("oEOe"),i=a("kGix");var o=a("M6MT"),r=a("Ssj5"),s=a("qlwE"),l=a("a/ea"),c=a("474o");const d="placePicker",u=Object.freeze({REQUEST:"rweb/placePicker/SEARCH_REQUEST",SUCCESS:"rweb/placePicker/SEARCH_SUCCESS",FAILURE:"rweb/placePicker/SEARCH_FAILURE"}),h=Object.freeze({initial:{fetchStatus:i.a.NONE},lastSearch:{fetchStatus:i.a.NONE},lastSelectedPlace:void 0});const p=e=>e.placePicker.initial.results,m=e=>e.placePicker.initial.fetchStatus,g=e=>e.placePicker.lastSearch.results,b=e=>e.placePicker.lastSearch.fetchStatus,_=e=>((e,t)=>null!=t?t:null==e?void 0:e.places.find((t=>(null==e?void 0:e.autotag_place_id)===t.place.id)))(p(e),(e=>e.placePicker.lastSelectedPlace)(e)),f=(e,t)=>(a,i,{api:o})=>Object(n.b)(a,{request:o.Places.search,params:e})({actionTypes:u,context:"SEARCH_PLACES_ACTION",meta:{resultSet:t}}),y=e=>(t,a,{api:n})=>{const i=Object(l.d)(a());return t(f({query_type:c.a.tweet_compose_location,lat:null==i?void 0:i.coords.latitude,long:null==i?void 0:i.coords.longitude,hacc:null==i?void 0:i.coords.accuracy,search_term:e},c.c.lastSearch))},w=()=>(e,t,{api:a})=>{const n=m(t()),o=p(t());if(n===i.a.LOADING||o)return Promise.resolve();const r=Object(l.d)(t());return r?e(f({lat:r.coords.latitude,long:r.coords.longitude,hacc:r.coords.accuracy,query_type:c.a.tweet_compose_location,count:50},c.c.initial)):Promise.resolve()},v=()=>(e,t,{api:a})=>Object(s.l)(t())&&Object(l.c)(t())===o.b.granted?e(Object(l.b)()).then((()=>e(w()))).then((()=>_(t()))):Promise.resolve(),C="rweb/placePicker/UPDATE_LAST_SELECTED_PLACE",E=e=>({type:C,payload:e});r.a.register({[d]:function(e=h,t){switch(t.type){case u.REQUEST:{const{resultSet:a}=t.meta;return{...e,[a]:{fetchStatus:i.a.LOADING}}}case u.FAILURE:{const{resultSet:a}=t.meta;return{...e,[a]:{fetchStatus:i.a.FAILED}}}case u.SUCCESS:{const{meta:{resultSet:a},payload:n}=t;return{...e,[a]:{fetchStatus:i.a.LOADED,results:n}}}case C:{const{payload:a}=t;return{...e,lastSelectedPlace:null!=a?a:void 0}}default:return e}}})},"07FG":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("cnVF");const i=e=>e===n.B},"0uGn":function(e,t,a){"use strict";a.d(t,"a",(function(){return ie}));a("kYxP");var n=a("ERkP"),i=a.n(n),o=a("xZGM"),r=a("GTeL"),s=a("3XMw"),l=a.n(s),c=a("rHpw");var d=c.a.create((e=>({formTextInput:{width:"100%",backgroundColor:e.colors.navigationBackground,paddingHorizontal:e.spaces.space12,paddingBottom:0,borderTopWidth:e.spaces.space1,borderTopStyle:"solid",borderTopColor:e.colors.borderColor},attachmentContainer:{width:"100%",height:"100%",flexGrow:1},root:{display:"flex",flexDirection:"column",flexWrap:"nowrap",height:"100%",flexGrow:1}}))),u="altTextInput",h="endEditingButton",p="altTextEducationSheetPrimaryAction",m=a("MWbm"),g=a("t62R"),b=a("p+r5");const _=l.a.feabf2a0,f=l.a.e36287c6,y=l.a.cf565d08;class w extends i.a.Component{constructor(...e){super(...e),this._renderInputHelperText=()=>{const{onShowEducation:e}=this.props;return e?i.a.createElement(g.b,{color:"link",onPress:e,withInteractiveStyling:!0},y):null},this._handleChange=e=>{const{currentMediaId:t,mediaItem:a,onChange:n}=this.props,{value:i}=e.target;a?n(i,a.id.toString()):t&&n(i,t)}}render(){const{autofocus:e,maxLength:t,mediaItem:a,orientedImage:n,value:o}=this.props;return i.a.createElement(m.a,{style:d.root},i.a.createElement(m.a,{style:d.attachmentContainer},i.a.createElement(r.a,{mediaItem:a,orientedImage:n}),i.a.createElement(b.a,{accessibilityLabel:_,autoFocus:e,helperText:this._renderInputHelperText(),label:f,maxLength:t,maxNumberOfLines:6,multiline:!0,name:"altTextInput",numberOfLines:2,onChange:this._handleChange,style:d.formTextInput,testID:u,value:o})))}}var v=a("rxPX");const C=(e,t)=>Object(o.E)(e,o.a);var E=Object(v.a)().propsFromState((()=>({showEducationOnMount:C}))).propsFromActions((()=>({addFlag:o.A}))).withAnalytics(),T=a("feu+");const x=l.a.ffe9ec3a,S=l.a.j063b262,I=l.a.e57144f0,k=l.a.f9f9210c;class R extends i.a.Component{constructor(...e){super(...e),this.state={showAltTextEducationSheet:!1},this._handleOpenEducationPrompt=()=>{const{analytics:e}=this.props;this.setState({showAltTextEducationSheet:!0}),e.scribe({component:"education",action:"click"})},this._handleCloseEducationPrompt=()=>{this.setState({showAltTextEducationSheet:!1})},this._handleEducationPromptPrimaryAction=()=>{const{analytics:e}=this.props;this._handleCloseEducationPrompt(),e.scribe({component:"education",element:"alt_text_button",action:"click"})},this._handleEducationPromptSecondaryAction=()=>{const{history:e}=this.props;e.goBack()}}componentDidMount(){const{addFlag:e,analytics:t,showEducationOnMount:a}=this.props;a&&(this.setState({showAltTextEducationSheet:!0}),t.scribe({component:"education",action:"open"}),e(o.a))}render(){const{mediaItem:e,onAltTextChange:t,orientedImage:a,value:n}=this.props,{showAltTextEducationSheet:o}=this.state,r=e&&e.id.toString();return i.a.createElement(m.a,{style:P.root},o?i.a.createElement(T.a,{actionLabel:I,headline:x,onAction:this._handleEducationPromptPrimaryAction,onClose:this._handleCloseEducationPrompt,onSecondaryAction:this._handleEducationPromptSecondaryAction,primaryButtonTestID:p,secondaryActionLabel:k,subtext:S}):null,i.a.createElement(w,{autofocus:!0,currentMediaId:r,maxLength:1e3,mediaItem:e,onChange:t,onShowEducation:this._handleOpenEducationPrompt,orientedImage:a,value:n}))}}const P=c.a.create((e=>({root:{flexGrow:1}})));var L=E(R),M=a("jHSc"),D=a("EeFI"),A=a("7JQg"),O=a("9Q4p"),F=a("PrL8"),B=a("k/OQ"),N=a("/yvb"),U=a("zTrU"),j=e=>{const t=new Map;return e.forEach((([e,a])=>{t.set(e,a)})),t},H=a("mN6z"),z=a("95Se"),V=a("7Mjr"),W=a("Mbn/"),G=a("zIWA"),q=a("1auM"),$=a("eYns");const K={section:"alt_text"},X={section:"crop"},Q={section:"sensitive_media"},Y=l.a.e070024a,J=l.a.i2209530,Z=l.a.i7d24b36,ee=l.a.f96a38a2,te=l.a.hac7c548,ae=l.a.e3dbfba4,ne=l.a.dd4a83a6,ie={crop:"crop",altText:"alt_text",sensitiveMedia:"sensitive_media"};class oe extends i.a.Component{constructor(e){super(e),this._cropper=i.a.createRef(),this._getMemoizedTabMetadata=Object(U.a)(((e,t)=>t&&e===ie.sensitiveMedia?{namespace:Q,title:ne,renderer:this._renderSensitiveMediaTab}:e===ie.altText?{namespace:K,title:ae,renderer:this._renderAltTextTab}:{namespace:X,title:te,renderer:this._renderCropTab})),this._renderTabContent=e=>{var t;const{location:a,sensitiveMediaTabEnabled:n}=this.props,o=this._getMemoizedTabMetadata(e,n),r=!(null!=(t=a.state)&&t.hideTabs),s=r?this._getTabLinks(e):[],l=o.renderer();return r&&s.length>1?i.a.createElement(i.a.Fragment,null,i.a.createElement(B.a,{accessibilityLabel:Y,links:s}),i.a.createElement(m.a,{style:F.a.segmentedControlChildren},l)):l},this._renderAltTextTab=()=>{const{history:e}=this.props,{currentMediaId:t,mediaMetadata:a,orientedImage:n}=this.state,o=this._getCurrentMediaItem(),r=a[t]&&a[t].altText;return i.a.createElement(L,{history:e,key:t,mediaItem:o,onAltTextChange:this._handleAltTextChange,orientedImage:n.get(t),value:r})},this._renderCropTab=()=>{const{cropData:e,currentMediaId:t}=this.state,a=this._getCurrentMediaItem();return i.a.createElement(D.a,{defaultCropData:e.get(t),key:t,media:a,ref:this._cropper,withAspectRatioOptions:!0})},this._renderSensitiveMediaTab=()=>{const{currentMediaId:e,mediaMetadata:t,orientedImage:a}=this.state,n=this._getCurrentMediaItem(),o=t[e]&&t[e].sensitiveMediaWarning;return i.a.createElement(O.a,{currentWarnings:o,key:e,mediaItem:n,onWarningChange:this._handleSensitiveWarningChange,orientedImage:a.get(e)})},this._renderAppBarRightControl=()=>{const{isProcessing:e}=this.state,t=this._getNextMediaIndex(1),a=this._getNextMediaIndex(-1);return i.a.createElement(m.a,{style:F.a.rightControl},this._hasMediaAtIndex(a)||this._hasMediaAtIndex(t)?i.a.createElement(m.a,{style:[F.a.rightControl,F.a.leftRightButtons]},i.a.createElement(N.a,{accessibilityLabel:ee,disabled:!this._hasMediaAtIndex(a),icon:i.a.createElement(z.a,null),onPress:this._handleClickToMediaAtIndex(a),size:"small",style:F.a.prevButton,type:"primaryOutlined"}),i.a.createElement(N.a,{accessibilityLabel:Z,disabled:!this._hasMediaAtIndex(t),icon:i.a.createElement(V.a,null),onPress:this._handleClickToMediaAtIndex(t),size:"small",type:"primaryOutlined"})):null,i.a.createElement(N.a,{disabled:e,onPress:this._handleEndEditingClick,size:"small",style:F.a.saveButton,testID:h,type:"primaryFilled"},J))},this._handleCancelEditingClick=e=>{this._scribeWithNamespace({action:"cancel"}),e()},this._handleClickTab=e=>{const{analytics:t}=this.props;this._handleSaveCropData(),this._scribeWithNamespace({element:e,action:"click"}),t.scribePageImpression()},this._getCurrentMediaItem=()=>{const{media:e}=this.props,{currentMediaId:t}=this.state;return e.find((e=>e.id===t))},this._getNextMediaIndex=e=>{const{media:t}=this.props,a=this._getCurrentMediaItem();return t.indexOf(a)+e},this._hasMediaAtIndex=e=>{const{media:t}=this.props;return e>=0&&e<t.length},this._handleClickToMediaAtIndex=e=>()=>{const{media:t}=this.props;if(this._hasMediaAtIndex(e)){this._handleSaveCropData();const a=t[e].id;this.setState({currentMediaId:a})}},this._saveMediaMetadata=()=>{const{media:e,setMediaMetadata:t}=this.props,{mediaMetadata:a}=this.state;e.forEach((e=>{t(e.id,a[e.id])}))},this._handleEndEditingClick=()=>{const{history:e}=this.props,t=this._cropper&&this._cropper.current,{cropData:a}=this.state;if(t||a.size){const{media:e,processMedia:n,updateMediaUpload:i}=this.props,{currentMediaId:o}=this.state;this.setState({isProcessing:!0});const r=t?j([...a,[o,t.getCropData()]]):a,s=e.map((e=>r.get(e.id)?(i({id:e.id,cropData:r.get(e.id)}),n(e.id)):Promise.resolve()));Promise.all(s).then((()=>{this._scribeWithNamespace({action:"done"})}))}this._saveMediaMetadata(),e.goBack()},this._handleAltTextChange=e=>{this.setState((t=>({mediaMetadata:{...t.mediaMetadata,[t.currentMediaId]:{...t.mediaMetadata[t.currentMediaId],altText:e}}})))},this._handleSensitiveWarningChange=(e,t)=>{this.setState((a=>{const n=a.mediaMetadata[a.currentMediaId]&&a.mediaMetadata[a.currentMediaId].sensitiveMediaWarning||new Set;return t?n.add(e):n.delete(e),{mediaMetadata:{...a.mediaMetadata,[a.currentMediaId]:{...a.mediaMetadata[a.currentMediaId],sensitiveMediaWarning:n}}}}))},this._handleSaveCropData=()=>{const e=this._cropper&&this._cropper.current;if(e){const{currentMediaId:t}=this.state,a=e.getCropData(),n=this._getCurrentMediaItem();if(n&&!Object(H.a)(a,this.state.cropData.get(t))&&(this.setState((e=>({orientedImage:j([...e.orientedImage,[t,null]])}))),n.originalMediaFile&&n.originalMediaFile instanceof q.a)){const{cropData:e}=n;Object($.b)(n.originalMediaFile,{cropData:a||e}).then((e=>new q.a(e).withDimensionsAndOrientation().then((e=>{this.setState((n=>({orientedImage:j([...n.orientedImage,[t,e]]),cropData:j([...n.cropData,[t,a]])})))})))).catch((()=>{this.setState((e=>({orientedImage:j([...e.orientedImage,[t,void 0]])})))}))}this.setState((e=>({cropData:j([...e.cropData,[t,a]])})))}},this._scribeWithNamespace=e=>{const{analytics:t,sensitiveMediaTabEnabled:a}=this.props,n=this._getCurrentTab(),i=this._getMemoizedTabMetadata(n,a);t.scribe({...i.namespace,...e})},this._getMediaMetadata=e=>{const t={};return e.forEach((e=>t[e.id]=e.mediaMetadata)),t};const{initialMediaId:t,media:a}=e,n=this._getMediaMetadata(a);this.state={cropData:new Map,isProcessing:!1,mediaMetadata:n,currentMediaId:t||-1,orientedImage:new Map}}render(){const{history:e,sensitiveMediaTabEnabled:t}=this.props,a=this._getCurrentTab(),n=this._getMemoizedTabMetadata(a,t);return i.a.createElement(A.c,{namespace:n.namespace},i.a.createElement(M.b,{backButtonType:"back",containerStyle:F.a.root,documentTitle:n.title,history:e,onBackClick:this._handleCancelEditingClick,rightControl:this._renderAppBarRightControl(),title:n.title},this._renderTabContent(a)))}_getCurrentTab(){var e;const{location:t,sensitiveMediaTabEnabled:a}=this.props,n=null==(e=t.state)?void 0:e.tab;return a&&n===ie.sensitiveMedia?ie.sensitiveMedia:n===ie.altText?ie.altText:ie.crop}_getTabLinks(e){var t;const{analytics:a,location:n,sensitiveMediaTabEnabled:o}=this.props,r=this._getCurrentMediaItem(),s=[];return null!=r&&null!=(t=r.originalMediaFile)&&t.isImage&&s.push({to:{...n,state:{...n.state,tab:ie.crop}},label:i.a.createElement(W.a,null),key:ie.crop,accessibilityLabel:te,isActive:()=>e===ie.crop,onClick:()=>a.scribePageImpression()}),s.push({to:{...n,state:{...n.state,tab:ie.altText}},label:i.a.createElement(g.b,{weight:"bold"},"ALT"),key:ie.altText,accessibilityLabel:ae,isActive:()=>e===ie.altText,onClick:()=>this._handleClickTab("alt_text_button")}),o&&s.push({to:{...n,state:{...n.state,tab:ie.sensitiveMedia}},label:i.a.createElement(G.a,null),key:ie.sensitiveMedia,accessibilityLabel:ne,isActive:()=>e===ie.sensitiveMedia,onClick:()=>this._handleClickTab("sensitive_media_tab")}),s}}t.b=oe},"1sLo":function(e,t,a){var n=a("JBn+"),i=a("OfKG"),o=a("sCL+"),r=a("H87J"),s=a("SU8Q"),l=a("S0iI"),c=Math.min;e.exports=function(e,t,a){for(var d=a?o:i,u=e[0].length,h=e.length,p=h,m=Array(h),g=1/0,b=[];p--;){var _=e[p];p&&t&&(_=r(_,s(t))),g=c(_.length,g),m[p]=!a&&(t||u>=120&&_.length>=120)?new n(p&&_):void 0}_=e[0];var f=-1,y=m[0];e:for(;++f<u&&b.length<g;){var w=_[f],v=t?t(w):w;if(w=a||0!==w?w:0,!(y?l(y,v):d(b,v,a))){for(p=h;--p;){var C=m[p];if(!(C?l(C,v):d(e[p],v,a)))continue e}y&&y.push(v),b.push(w)}}return b}},"21U8":function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),o=a("/yvb"),r=a("3XMw"),s=a.n(r),l=a("3rX5"),c=a("rHpw"),d=a("MWbm");const u=c.a.create((e=>({mask:{backgroundColor:"transparent",borderWidth:e.spaces.space4,borderColor:e.colors.primary,boxShadow:`0 0 0 9999px ${e.colors.activeFaintGray}`},circle:{borderRadius:e.borderRadii.infinite}})));var h=({circle:e,height:t,width:a})=>i.a.createElement(d.a,{pointerEvents:"none",style:[u.mask,{width:a,height:t},e&&u.circle]}),p=a("ZvMt"),m=a("97Jx"),g=a.n(m),b=a("CHgo"),_=a("7ep7");class f extends i.a.Component{constructor(e){super(e),this._previousTouchDistance=0,this._previousPositionX=0,this._previousPositionY=0,this._centerPosition={x:0,y:0},this._panResponder={},this._setRef=e=>{const{onPanEnd:t,onPanMove:a,onPinchMove:n,onWheel:i}=this.props;if(e){(a||t||n)&&(this._removeTouchMoveToScrollListener=Object(b.a)(e,this._preventDefaultEvent,!1)),i&&(this._removeScrollToScaleListener=Object(b.b)(e,this._preventDefaultEvent,!1));const o=e.getBoundingClientRect();this._centerPosition={x:o.width/2+o.left,y:o.height/2+o.top}}},this._preventDefaultEvent=e=>{e.preventDefault()},this._handlePanResponderMove=(e,t)=>{const{onPanMove:a,onPinchMove:n}=this.props,i=e.nativeEvent.touches;if(2===t.numberActiveTouches){if(n){const e=(o=i[0],r=i[1],Math.sqrt(Math.pow(o.pageY-r.pageY,2)+Math.pow(o.pageX-r.pageX,2))),{pageX:t,pageY:a}=((e,t)=>({pageX:Math.min(t.pageX,e.pageX)+Math.abs(t.pageX-e.pageX)/2,pageY:Math.min(t.pageY,e.pageY)+Math.abs(t.pageY-e.pageY)/2}))(i[0],i[1]),s=this._previousPositionX?t-this._previousPositionX:0,l=this._previousPositionY?a-this._previousPositionY:0,c=this._previousTouchDistance?e-this._previousTouchDistance:0;this._previousPositionX=t,this._previousPositionY=a,this._previousTouchDistance=e;const{x:d,y:u}=this._centerPosition;n(c,d-t,u-a,s,l)}}else a&&a(t.dx,t.dy);var o,r;document.addEventListener("selectstart",this._preventDefaultEvent,!1)},this._handlePanResponderEnd=(e,t)=>{this.props.onPanEnd&&this.props.onPanEnd(t.dx,t.dy),this.props.onPinchMove&&(this._previousTouchDistance=0),this._previousPositionX=0,this._previousPositionY=0,this._removeSelectStartListener()},this._handleWheel=e=>{const{clientX:t,clientY:a,deltaX:n,deltaY:i}=e,{x:o,y:r}=this._centerPosition,s=o-t,l=r-a;this.props.onWheel&&this.props.onWheel(n,i,s,l)},this._panResponder=_.a.create({onStartShouldSetPanResponder:()=>!0,onMoveShouldSetPanResponder:()=>!0,onPanResponderMove:this._handlePanResponderMove,onPanResponderRelease:this._handlePanResponderEnd,onPanResponderTerminate:this._handlePanResponderEnd}),this._removeSelectStartListener=()=>document.removeEventListener("selectstart",this._preventDefaultEvent,!1)}render(){const{children:e,onPanEnd:t,onPanMove:a,onPinchMove:n,onWheel:o,...r}=this.props;return i.a.createElement(d.a,g()({},r,{onWheel:this._handleWheel,ref:this._setRef},this._panResponder.panHandlers),this.props.children)}componentWillUnmount(){this._removeTouchMoveToScrollListener&&this._removeTouchMoveToScrollListener(),this._removeScrollToScaleListener&&this._removeScrollToScaleListener(),this._removeSelectStartListener()}}var y=f,w=a("9RkS"),v=a("rOXj"),C=a("aITJ"),E=a("Lsrn"),T=a("k/Ka");const x=(e={})=>Object(T.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[E.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M19.75 19.944H4.25c-1.24 0-2.25-1.01-2.25-2.25V6.306c0-1.24 1.01-2.25 2.25-2.25h15.5c1.24 0 2.25 1.01 2.25 2.25v11.39c0 1.24-1.01 2.248-2.25 2.248zM4.25 5.556c-.413 0-.75.337-.75.75v11.39c0 .412.337.75.75.75h15.5c.413 0 .75-.338.75-.75V6.305c0-.413-.337-.75-.75-.75H4.25z"})));x.metadata={width:24,height:24};var S=x;const I=(e={})=>Object(T.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[E.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M19.75 19.89H4.25C3.01 19.89 2 18.88 2 17.64v-7.28c0-1.24 1.01-2.25 2.25-2.25h15.5c1.24 0 2.25 1.01 2.25 2.25v7.277c0 1.24-1.01 2.25-2.25 2.25zM4.25 9.61c-.413 0-.75.338-.75.75v7.278c0 .413.337.75.75.75h15.5c.413 0 .75-.337.75-.75V10.36c0-.412-.337-.75-.75-.75H4.25z"})));I.metadata={width:24,height:24};var k=I;const R=(e={})=>Object(T.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[E.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M19.75 22H4.25C3.01 22 2 20.99 2 19.75V4.25C2 3.01 3.01 2 4.25 2h15.5C20.99 2 22 3.01 22 4.25v15.5c0 1.24-1.01 2.25-2.25 2.25zM4.25 3.5c-.413 0-.75.337-.75.75v15.5c0 .413.337.75.75.75h15.5c.413 0 .75-.337.75-.75V4.25c0-.413-.337-.75-.75-.75H4.25z"})));R.metadata={width:24,height:24};var P=R;const L=(e={})=>Object(T.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[E.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"}),i.a.createElement("path",{d:"M15.21 11c0 .41-.34.75-.75.75h-2.71v2.71c0 .41-.34.75-.75.75s-.75-.34-.75-.75v-2.71H7.54c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h2.71V7.54c0-.41.34-.75.75-.75s.75.34.75.75v2.71h2.71c.41 0 .75.34.75.75z"})));L.metadata={width:24,height:24};var M=L;const D=(e={})=>Object(T.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[E.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"}),i.a.createElement("path",{d:"M14.46 11.75H7.54c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h6.92c.415 0 .75.336.75.75s-.335.75-.75.75z"})));D.metadata={width:24,height:24};var A=D;const O=s.a.d85bc1b8,F=s.a.f596ace8,B=s.a.df031fca,N=s.a.b40332c6,U=s.a.e547b368,j=s.a.f7571204,H=s.a.e6e16812,z=Math.log2||function(e){return Math.log(e)*Math.LOG2E};class V extends i.a.Component{constructor(e){var t;super(e),this._previousLeft=0,this._previousTop=0,this._panStyles={top:0,left:0},this._shouldShowZoomControl=()=>(!C.b.isMobileOS()||!v.a.isTouchSupported())&&this.props.withZoomControl,this._renderControls=()=>{const{image:e,withAspectRatioOptions:t}=this.props,{aspectRatio:a}=this.state,n=e.width/e.height,r=this._shouldShowZoomControl();return t||r?i.a.createElement(d.a,{style:W.controlsContainer},t?i.a.createElement(d.a,{style:W.ratioContainer},i.a.createElement(o.a,{accessibilityLabel:F,borderColor:"transparent",color:a===n?"primary":"gray700",hoverLabel:{label:U},icon:i.a.createElement(S,null),onPress:this._setAspectRatio(n),size:"medium"}),i.a.createElement(o.a,{accessibilityLabel:B,borderColor:"transparent",color:a===16/9?"primary":"gray700",hoverLabel:{label:j},icon:i.a.createElement(k,null),onPress:this._setAspectRatio(16/9),size:"medium"}),i.a.createElement(o.a,{accessibilityLabel:N,borderColor:"transparent",color:1===a?"primary":"gray700",hoverLabel:{label:H},icon:i.a.createElement(P,null),onPress:this._setAspectRatio(1),size:"medium"})):null,r?i.a.createElement(d.a,{style:W.zoomContainer},i.a.createElement(w.a,{accessibilityLabel:O,max:this._maxScale,maxIcon:i.a.createElement(M,{style:W.icon}),min:0,minIcon:i.a.createElement(A,{style:W.icon}),onChange:this._handleScaleChange,step:"any",value:this.state.imageScale})):null):null},this._setImageRef=e=>{this._imageRef=e},this._handleScaleChange=e=>{this.setState({imageScale:e})},this._getImageDimensions=()=>{const{imageScale:e}=this.state,t=this.props.image.width/this.props.image.height,{height:a,width:n}=this._getMaskDimensions(),{height:i,width:o}=p.a.getCoverDimensions({width:n,height:a},t);return{width:o*Math.pow(2,e),height:i*Math.pow(2,e)}},this._getMaskDimensions=()=>{const{aspectRatio:e,containerHeight:t,containerWidth:a}=this.state,{height:n,width:i}=p.a.getContainDimensions({width:a-50,height:t-50},e);return{width:i,height:n}},this._handleLayout=e=>{const{height:t,width:a}=e.nativeEvent.layout;this.state.containerHeight||this.state.containerWidth?this.setState({containerHeight:t,containerWidth:a}):(this.setState({containerHeight:t,containerWidth:a}),this._setDefaultCropData())},this._setDefaultCropData=()=>{const{defaultCropData:e,image:t}=this.props;if(!e)return;const{width:a}=this._getImageDimensions(),{width:n}=this._getMaskDimensions(),i=a/t.width,o=z(n/(e.width*i));this.setState({imageScale:o});const{left:r,top:s}=this._getUnscaledCropData();this._panStyles.top=s-e.top*i*Math.pow(2,o),this._previousTop=this._panStyles.top,this._panStyles.left=r-e.left*i*Math.pow(2,o),this._previousLeft=this._panStyles.left,this._updateNativeStyles()},this._handleWheel=(e,t,a,n)=>{const i=-1*t/500;this.setState((({imageScale:e})=>{const t=Math.min(this._maxScale,Math.max(e+i,0));return this._panStyles.left+=a*(t-e),this._panStyles.top+=n*(t-e),this._previousLeft=this._panStyles.left,this._previousTop=this._panStyles.top,{imageScale:t}}))},this._handlePanMove=(e,t)=>{this._panStyles.left=this._previousLeft+e,this._panStyles.top=this._previousTop+t,this._updateNativeStyles(),this._adjustToInBounds()},this._handlePanEnd=(e,t)=>{this._previousLeft=this._panStyles.left,this._previousTop=this._panStyles.top},this._handlePinchMove=(e,t,a,n,i)=>{const o=e/200;this.setState((({imageScale:e})=>{const r=Math.min(this._maxScale,Math.max(e+o,0));return this._panStyles.left+=t*(r-e)+n,this._panStyles.top+=a*(r-e)+i,this._previousLeft=this._panStyles.left,this._previousTop=this._panStyles.top,{imageScale:r}}))},this._adjustToInBounds=()=>{const e=this._getUnscaledCropData(),t=this._getImageDimensions(),a=e.left,n=e.top,i=e.left+e.width-t.width,o=e.top+e.height-t.height;let r=!1;a<0&&(r=!0,this._panStyles.left+=a,this._previousLeft+=a),n<0&&(r=!0,this._panStyles.top+=n,this._previousTop+=n),i>0&&(r=!0,this._panStyles.left+=i,this._previousLeft+=i),o>0&&(r=!0,this._panStyles.top+=o,this._previousTop+=o),r&&this._updateNativeStyles()},this._updateNativeStyles=()=>{const{left:e,top:t}=this._panStyles;this._imageRef&&this._imageRef.setNativeProps({style:{transform:[{translate3d:`${e}px, ${t}px, 0`}]}})},this._getUnscaledCropData=()=>{const{height:e,width:t}=this._getImageDimensions(),{height:a,width:n}=this._getMaskDimensions(),{left:i,top:o}=this._panStyles;return{top:(e-a)/2-o,left:(t-n)/2-i,width:n,height:a}},this._setAspectRatio=e=>()=>{this.setState({aspectRatio:e})},this.state={aspectRatio:e.defaultAspectRatio||e.image.width/e.image.height,imageScale:0,containerHeight:0,containerWidth:0},this._maxScale=(t=e.image,Math.max(Math.min(z(t.width/150),z(t.height/150),3),.5))}render(){const{circle:e,image:t,withZoomControl:a}=this.props,{height:n,width:o}=this._getImageDimensions(),{height:r,width:s}=this._getMaskDimensions(),c=this.state.containerWidth&&this.state.containerHeight;return i.a.createElement(d.a,{style:W.container},i.a.createElement(y,{onLayout:this._handleLayout,onPanEnd:this._handlePanEnd,onPanMove:this._handlePanMove,onPinchMove:a?this._handlePinchMove:void 0,onWheel:a?this._handleWheel:void 0,style:W.root},c?i.a.createElement(i.a.Fragment,null,i.a.createElement(l.a,{ref:this._setImageRef,source:{uri:t.src,width:o,height:n},style:W.image}),i.a.createElement(h,{circle:e,height:r,width:s})):null),c?this._renderControls():null)}componentDidUpdate(e,t){this._updateNativeStyles(),this._adjustToInBounds()}getCropData(){const{width:e}=this._getImageDimensions(),t=this.props.image.width/e,a=this._getUnscaledCropData();return{aspectRatio:this.state.aspectRatio,top:Math.round(t*a.top),left:Math.round(t*a.left),width:Math.round(t*a.width),height:Math.round(t*a.height)}}}V.defaultProps={circle:!1,withZoomControl:!0};const W=c.a.create((e=>({container:{flexGrow:1,flexShrink:1},controlsContainer:{backgroundColor:e.colors.navigationBackground,minHeight:e.spaces.space20,flexDirection:"row",paddingVertical:e.spaces.space4,alignSelf:"stretch",justifyContent:"center",alignItems:"center"},ratioContainer:{flexBasis:0,flexGrow:1,flexShrink:0,flexDirection:"row",justifyContent:"space-around"},zoomContainer:{flexBasis:0,flexGrow:1,flexShrink:1,justifyContent:"center",height:e.spaces.space40,paddingHorizontal:e.spaces.space20,maxWidth:400},root:{flexGrow:1,flexShrink:1,overflow:"hidden",justifyContent:"center",alignItems:"center",cursor:"move"},image:{position:"absolute"},icon:{color:e.colors.gray700}})));t.a=V},"2Fbm":function(e,t,a){var n=a("5pfJ");e.exports=function(){this.__data__=n?n(null):{},this.size=0}},"2q8g":function(e,t,a){var n=a("Dhk8"),i=a("tQYX");e.exports=function(e){if(!i(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},"2qZs":function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),o=a("Lsrn"),r=a("k/Ka");const s=(e={})=>Object(r.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M2.264 22.983c-.322 0-.638-.126-.88-.368-.374-.374-.473-.926-.25-1.405L2.8 17.58c-1.017-1.7-1.55-3.62-1.55-5.58C1.25 6.072 6.072 1.25 12 1.25S22.75 6.072 22.75 12 17.928 22.75 12 22.75c-1.957 0-3.876-.533-5.55-1.54l-3.66 1.657c-.17.078-.35.116-.526.116zm4.158-3.286c.278 0 .558.077.807.23 1.434.864 3.085 1.323 4.77 1.323 5.1 0 9.25-4.15 9.25-9.25S17.1 2.75 12 2.75 2.75 6.9 2.75 12c0 1.688.458 3.338 1.326 4.774.266.44.298.977.086 1.434l-1.384 3.014 3.016-1.386c.2-.093.413-.14.628-.14z"}),i.a.createElement("path",{d:"M12 18.25c-3.446 0-6.25-2.804-6.25-6.25S8.554 5.75 12 5.75s6.25 2.804 6.25 6.25-2.804 6.25-6.25 6.25zm0-11c-2.62 0-4.75 2.13-4.75 4.75s2.13 4.75 4.75 4.75 4.75-2.13 4.75-4.75S14.62 7.25 12 7.25z"}),i.a.createElement("path",{d:"M14.5 12.75c-.414 0-.75-.336-.75-.75 0-.965-.785-1.75-1.75-1.75-.414 0-.75-.336-.75-.75s.336-.75.75-.75c1.792 0 3.25 1.458 3.25 3.25 0 .414-.336.75-.75.75z"})));s.metadata={width:24,height:24},t.a=s},"3KBa":function(e,t,a){var n=a("IBsm")["__core-js_shared__"];e.exports=n},"45mF":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("1YZw"),i=a("pXBW"),o=a("3XMw"),r=a.n(o),s=a("SrIh");const l=r.a.a5d4fda0,c=(e=l,t=!0)=>({customErrorHandler:a=>{const{context:o}=a;return!a instanceof i.a&&(a.message=`Strato error occurred in ${o.id}: ${o.action}`),Object(s.a)(a,{extra:{context:o,isStrato:!0}}),t?Object(n.b)({text:e}):[]}})},"474o":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o}));const n=Object.freeze({profile_location:"profile_location",tweet_compose_location:"tweet_compose_location"}),i=Object.freeze({foursquare:"foursquare",yelp:"yelp"}),o=Object.freeze({initial:"initial",lastSearch:"lastSearch"})},"4bHO":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=(e,t)=>{switch(e.type){case"user":return"users"===t?`@${e.data.screen_name} `:`@${e.data.name} `;case"hashtag":case"topic":case"event":return`${e.data.topic} `;case"dm_conversation":return`${e.data.name} `;case"no_result":return`${e.data.text} `;default:return""}}},"4p/L":function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},"5VYK":function(e,t,a){var n=a("6QIk");e.exports=function(e){var t=this.__data__,a=n(t,e);return a<0?void 0:t[a][1]}},"5emT":function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),o=a("Lsrn"),r=a("k/Ka");const s=(e={})=>Object(r.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M14.548 11.634c-1.207 0-2.188-.98-2.188-2.188 0-.664.302-1.25.77-1.653-.363-.097-.736-.165-1.13-.165-2.416 0-4.375 1.96-4.375 4.376S9.585 16.38 12 16.38c2.418 0 4.377-1.96 4.377-4.376 0-.4-.07-.78-.17-1.146-.402.47-.992.776-1.66.776z"}),i.a.createElement("path",{d:"M12 19.79c-7.228 0-10.12-6.724-10.24-7.01-.254-.466-.254-1.105.035-1.642C1.88 10.923 4.772 4.2 12 4.2s10.12 6.723 10.24 7.01c.254.465.254 1.104-.035 1.64-.085.216-2.977 6.94-10.205 6.94zm0-14c-6.154 0-8.668 5.787-8.772 6.033-.068.135-.068.208-.033.273.137.316 2.65 6.104 8.805 6.104 6.18 0 8.747-5.973 8.772-6.033.07-.136.07-.21.034-.274-.138-.316-2.652-6.103-8.806-6.103z"})));s.metadata={width:24,height:24},t.a=s},"5nKN":function(e,t,a){var n=a("2q8g"),i=a("9vbJ"),o=a("tQYX"),r=a("c18h"),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,u=c.hasOwnProperty,h=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(n(e)?h:s).test(r(e))}},"5pfJ":function(e,t,a){var n=a("vxC8")(Object,"create");e.exports=n},"6QIk":function(e,t,a){var n=a("pPzx");e.exports=function(e,t){for(var a=e.length;a--;)if(n(e[a][0],t))return a;return-1}},"6UKJ":function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},"6XNv":function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),o=a("t62R"),r=a("piX5"),s=a("4r2z"),l=a("FG+G"),c=a("rHpw"),d=a("k/Ka"),u=a("shC7"),h=a("MWbm");const p=i.a.forwardRef(((e,t)=>Object(d.a)("select",{...e,ref:t}))),m=e=>Object(d.a)("option",e);let g=1;class b extends i.a.PureComponent{constructor(e){super(e),this._selectRef=i.a.createRef(),this.state={isFocused:!1},this._handleChange=e=>{const{onChange:t,withEmptyOption:a}=this.props,{selectedIndex:n,value:i}=e.target;t&&t(i,n-(a?1:0))},this._handleBlur=e=>{const{onBlur:t}=this.props;this.setState({isFocused:!1}),t&&t()},this._handleFocus=e=>{const{onFocus:t}=this.props;this.setState({isFocused:!0}),t&&t()},this._id=`SELECTOR_${g}`,this._errorID=`${this._id}_ERROR`,this._helperID=`${this._id}_HELP`,this._labelID=`${this._id}_LABEL`,g+=1}componentDidMount(){this.props.autofocus&&this._selectRef&&this._selectRef.current&&this._selectRef.current.focus()}render(){const{accessibilityDescribedBy:e,disabled:t,errorText:a,hasError:n,helperText:d,options:g,style:b,testID:f,value:y,withEmptyOption:w}=this.props,{isFocused:v}=this.state,C=o.b.getLanguage(),E="ja"===C?c.a.theme.fontFamilies.japan:u.a.getConstants().isRTL||s.a.isLocaleRTL(C)?c.a.theme.fontFamilies.rtl:c.a.theme.fontFamilies.normal,T=void 0===n?!!a:n,x=new Set;a&&x.add(this._errorID),e&&x.add(e),d&&x.add(this._helperID);const S=x.size?[...x].join(" "):void 0;return i.a.createElement(i.a.Fragment,null,i.a.createElement(h.a,{style:[r.a.border,_.container,t&&r.a.disabled,v&&r.a.focusedBorderValid,T&&r.a.invalidBorderColor,v&&T&&r.a.focusedBorderInvalid,b]},this._renderLabel(),i.a.createElement(p,{accessibilityDescribedBy:S,accessibilityInvalid:T,accessibilityLabelledBy:this._labelID,disabled:t,nativeID:this._id,onBlur:this._handleBlur,onChange:this._handleChange,onFocus:this._handleFocus,ref:this._selectRef,style:[_.select,{fontFamily:E},t&&r.a.disabled],testID:f||"",value:y},w?i.a.createElement(m,{disabled:!0,style:_.option,value:""}):null,g.map((e=>{const{disabled:t,label:a,value:n}=e;return i.a.createElement(m,{disabled:t,key:`${a}-${n}`,style:_.option,value:n},a)}))),i.a.createElement(l.a,{style:[_.dropdownCaret,v&&r.a.validColor,(n||a)&&r.a.invalidColor]})),d?this._renderHelperText():null,T&&a?this._renderErrorText():null)}_renderLabel(){const{errorText:e,hasError:t,label:a}=this.props,{isFocused:n}=this.state;return i.a.createElement(o.b,{accessibilityRole:"label",color:t||e?"red500":n?"primary":"gray700",nativeID:this._labelID,style:_.label},a)}_renderHelperText(){return i.a.createElement(h.a,{accessibilityLiveRegion:"polite"},i.a.createElement(o.b,{color:"gray700",nativeID:this._helperID,style:_.helperText},this.props.helperText))}_renderErrorText(){return i.a.createElement(h.a,{accessibilityLiveRegion:"polite"},i.a.createElement(o.b,{color:"red500",nativeID:this._errorID,style:_.helperText},this.props.errorText))}}b.defaultProps={disabled:!1,autofocus:!1,withEmptyOption:!1},b.propTypes={};const _=c.a.create((e=>({container:{backgroundColor:e.colors.cellBackground},dropdownCaret:{color:e.colors.gray700,height:"1.5em",pointerEvents:"none",position:"absolute",marginTop:"-0.75em",top:"50%",right:e.spaces.space12},label:{position:"absolute",fontSize:e.fontSizes.subtext2,paddingHorizontal:e.spaces.space8,paddingTop:e.spaces.space8,pointerEvents:"none",lineHeight:e.lineHeights.subtext2},option:{backgroundColor:e.colors.navigationBackground},select:{appearance:"none",backgroundColor:"transparent",borderRadius:e.borderRadii.none,borderWidth:e.borderWidths.none,color:e.colors.text,cursor:"pointer",fontSize:e.fontSizes.headline2,lineHeight:e.lineHeights.headline2,margin:0,marginTop:e.spaces.space16,outlineStyle:"none",padding:0,paddingTop:e.spaces.space12,paddingBottom:e.spaces.space8,paddingHorizontal:e.spaces.space8},helperText:{fontSize:e.fontSizes.subtext2,paddingHorizontal:e.spaces.space8,paddingTop:e.spaces.space2}})));t.a=b},"6vad":function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a("ERkP"),i=a.n(n),o=a("t62R"),r=a("EHV7"),s=a("rHpw");const l=s.a.create((e=>({icon:{color:e.colors.primary,height:e.fontSizes.title4,paddingRight:e.spaces.space12,width:e.fontSizes.title4}})));var c=a("7Mjr"),d=a("I4+6"),u=a("cm6r"),h=a("MWbm");const p=Object.freeze({TopicFilled:"TOPIC_FILLED"});const m=s.a.create((e=>({root:{justifyContent:"space-between",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},mainContent:{flexDirection:"row"},subtext:{alignSelf:"flex-start"},withSubtext:{alignSelf:"center"},icon:{alignSelf:"flex-start",height:e.spaces.space20,justifyContent:"center"},iconArrow:{color:e.colors.text},rightControlGroup:{flexDirection:"row",justifyContent:"flex-end",flexGrow:1,alignSelf:"center"}})));t.b=function({icon:e,landingUrl:t,nativeID:a,rightControl:n,style:g,subtext:b,testID:_,text:f}){const y=(e=>{switch(e){case p.TopicFilled:return i.a.createElement(r.a,{style:l.icon});default:return null}})(e),w=b?null:m.withSubtext,v=d.a.generate({backgroundColor:s.a.theme.colors.gray0,color:s.a.theme.colors.cellBackground,customFocusBackgroundColor:s.a.theme.colors.gray0,customHoverBackgroundColor:s.a.theme.colors.gray0,customPressedBackgroundColor:s.a.theme.colors.gray0});return i.a.createElement(u.a,{interactiveStyles:t?v:null,link:null==t?void 0:t.url,nativeID:a,style:[m.root,g],testID:_},i.a.createElement(h.a,{accessibilityLevel:2,accessibilityRole:"heading",style:m.mainContent},i.a.createElement(h.a,{style:m.icon},y),i.a.createElement(o.b,{numberOfLines:3,size:"headline1",style:w,weight:"heavy",withHashflags:!0},f),i.a.createElement(h.a,{style:m.rightControlGroup},t?i.a.createElement(h.a,{style:w},i.a.createElement(c.a,{style:m.iconArrow})):null,n?i.a.createElement(h.a,null,n):null)),b?i.a.createElement(o.b,{color:"gray700",numberOfLines:2,size:"subtext2",style:m.subtext,withHashflags:!0},b):null)}},"7Pat":function(e,t,a){var n=a("+7q0"),i=a("kG2z")(n);e.exports=i},"7myi":function(e,t,a){"use strict";a("kYxP"),a("849X");var n=a("ERkP"),i=a.n(n),o=a("oEoC"),r=a("2dXj"),s=a("4bHO"),l=a("dzqK"),c=a("GZwR");class d extends i.a.Component{constructor(...e){super(...e),this._genericWrapperRef=i.a.createRef(),this.state={queryContext:void 0,canShowTypeahead:!1},this.render=()=>{const{children:e,contextText:t,isInline:a,isInlineReply:n,onTypeaheadStateChange:o,source:s}=this.props,{canShowTypeahead:l,queryContext:d}=this.state,u=l&&d?{word:d.word,resultType:d.resultType}:void 0;return i.a.createElement(r.a,{contextText:t,isInline:a,isInlineReply:n,onDismiss:this._handleDismiss,onSelectItem:this._handleSelectItem,onTypeaheadStateChange:o,query:u,ref:this._genericWrapperRef,source:s||c.d.Compose},e(this._handleInputChange))},this._handleSelectItem=e=>{const{onTextUpdated:t}=this.props,{queryContext:a}=this.state;if(a){const n=Object(s.a)(e,a.resultType),{newCursor:i,newTweetText:o}=this._replaceToken(n,a);t({target:{value:o}}),this._updateDOMTextArea(i,o)}this._setQueryContext(void 0)},this._updateDOMTextArea=(e,t)=>{this._textAreaRef&&(this._textAreaRef.value=t,this._textAreaRef.selectionStart=e,this._textAreaRef.selectionEnd=e,this._textAreaRef.focus())},this._handleInputChange=e=>{if(Object(l.a)(e))throw new Error("PlainTextTypeaheadComposeWrapper cannot handle rich text input changes");const t=e&&(e.currentTarget||e.target),{queryContext:a}=this.state;this._textAreaRef=t;const n=a&&a.word,i=t.value,{end:r,start:s,word:c}=o.c(t.selectionStart,i),d=o.e(c||"","compose");if((null==d?void 0:d.q)!==n)if(this._genericWrapperRef.current&&this._genericWrapperRef.current.resetSelectedItem(),-1===s)this._setQueryContext(void 0);else if(d){const{q:e,result_type:a}=d;this._setQueryContext({word:e,resultType:a,fullText:t.value,startIndex:s,endIndex:r})}else this._setQueryContext(void 0)},this._setQueryContext=e=>this.setState({queryContext:e,canShowTypeahead:!!e}),this._handleDismiss=()=>this.setState({canShowTypeahead:!1})}_replaceToken(e,t){const{endIndex:a,fullText:n,startIndex:i}=t,o=n.slice(0,i);return{newTweetText:o+e+n.slice(a),newCursor:o.length+e.length}}}t.a=d},"88ay":function(e,t,a){"use strict";a.d(t,"c",(function(){return B})),a.d(t,"e",(function(){return N})),a.d(t,"f",(function(){return U})),a.d(t,"d",(function(){return j})),a.d(t,"a",(function(){return V}));var n=a("97Jx"),i=a.n(n),o=(a("kYxP"),a("ERkP")),r=a.n(o),s=a("6rlp"),l=a("zh9S"),c=a("G6rE"),d=a("rxPX"),u=a("0KEI");const h=(e,t)=>c.e.select(e,t.userId),p=(e,t)=>t.promotedContent;var m=Object(d.a)().propsFromState((()=>({promotedContent:p,user:h}))).adjustStateProps((({promotedContent:e,user:t})=>({promotedContent:e||(t?t.promoted_content:void 0),user:t}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(u.createLocalApiErrorHandlerWithContextFactory)("USER_CELL_CONTAINER"),log:s.a,scribeAction:l.c}))),g=a("I57f"),b=a("vMjK"),_=a("MWbm"),f=a("IG7M"),y=a("rHpw");const w=e=>{const{children:t,promotedContent:a,user:n}=e;return r.a.createElement(_.a,{style:v.decorationWrapper},t,r.a.createElement(f.a,{renderActionMenu:e=>r.a.createElement(b.b,{onClose:e,promotedContent:a,user:n,view:"follower"}),style:v.actionMenu}))},v=y.a.create((e=>({decorationWrapper:{flexDirection:"row"},actionMenu:{marginLeft:e.spaces.space12}})));var C=a("uIZp"),E=a("mN6z"),T=a("caTy"),x=a("3IPs"),S=a("Rp9C"),I=a("X04g"),k=a("Re5t"),R=a("TnY3"),P=a("hxu0"),L=a("v6aA"),M=a("7JQg"),D=a("nBUg"),A=a("IMA+"),O=a("cFuS");const F=e=>{const{user:t}=e;return t&&t.profile_image_url_https?r.a.createElement(H,i()({},e,{avatarUri:t.profile_image_url_https,description:t.description,entities:t.entities,followRequestReceived:t.follow_request_received,highlightedLabel:t.highlightedLabel,isAutoblocking:t.smart_blocking,isBlockedBy:t.blocked_by,isBlocking:t.blocking,isDeviceFollowing:t.notifications,isFollowedBy:t.followed_by,isFollowing:t.following,isProtected:t.protected,isVerified:t.verified,name:t.name,screenName:t.screen_name,translatorType:t.translator_type,user:t,withheldDescription:t.withheld_description,withheldEntities:t.withheld_entities})):null};F.defaultProps={cellClickable:!0,decoration:null,displayMode:k.a.UserCompact,followRequestReceived:!1,hideBlocked:!1,promotedItemType:O.c.USER,shouldScribeProfileClick:!0,shouldScribeImpression:!1,withFollowsYou:!1};const B=({isDeviceFollowing:e,userId:t})=>r.a.createElement(g.a,{isFollowing:e,style:z.followButton,userId:t}),N=({loggedInUserId:e,onFollowClick:t,promotedContent:a,userId:n})=>e!==n?r.a.createElement(C.a,{onFollowClick:t,promotedContent:a,size:"small",style:z.followButton,userId:n}):null,U=e=>r.a.createElement(w,{promotedContent:e.promotedContent,user:e.user},N(e)),j=e=>r.a.createElement(f.a,{renderActionMenu:t=>r.a.createElement(b.b,{onClose:t,promotedContent:e.promotedContent,user:e.user,view:"rito_flagged_accounts"})});class H extends r.a.Component{constructor(...e){super(...e),this._handleAvatarClick=()=>{const{shouldScribeProfileClick:e}=this.props;this._handleSaveAsRecentSearch(),e&&this._scribeAction({element:"avatar",action:"profile_click"}),this._handleAsyncPromotedEvent(O.b.PROFILE_IMAGE_CLICK)},this._handleCellClick=()=>{const{history:e,onClick:t,screenName:a,user:n}=this.props,i=this._getPromotedTweetState();this._handleSaveAsRecentSearch(),this._handleScreenNameClick(),t?t({user:n,state:i}):e.push({pathname:`/${a}`,state:i||void 0})},this._handleScreenNameClick=()=>{const{shouldScribeProfileClick:e}=this.props;this._handleSaveAsRecentSearch(),e&&this._scribeAction({action:"profile_click"}),this._handleAsyncPromotedEvent(O.b.SCREEN_NAME_CLICK)},this._handleSaveAsRecentSearch=()=>{const{saveAsRecentSearch:e,shouldStoreTypeaheadItem:t,userId:a}=this.props;e&&t&&t(I.a.ItemType.USER)&&e({user:{id:a,type:x.a.User}})},this._scribeAction=e=>{var t;const{promotedContent:a,scribeAction:n,scribeData:i,scribeNamespace:o,user:r,userId:s}=this.props,l=null==i||null==(t=i.items)?void 0:t.find((e=>e.item_type===I.a.ItemType.USER&&e.id===s)),c=i.search_details;n({...o,...e},{items:[{...l,...S.a.getUserItem(r,a)}],profile_id:s,search_details:c})}}componentDidMount(){this._shouldRender()&&this._handleImpression()}shouldComponentUpdate(e){return!Object(E.a)(this.props,e)}render(){const{avatarDecoration:e,bottomControl:t,cellClickable:a,createLocalApiErrorHandler:n,decoration:o,followRequestReceived:s,hideBlocked:l,history:c,isAutoblocking:d,isBlockedBy:u,isBlocking:h,isDeviceFollowing:p,isFollowing:m,isInSidebar:g,location:b,log:_,onClick:f,onFollowClick:y,promotedItemId:w,saveAsRecentSearch:v,scribeAction:C,scribeData:E,scribeNamespace:x,shouldScribeImpression:S,shouldScribeProfileClick:I,shouldStoreTypeaheadItem:k,socialContext:R,user:P,...L}=this.props;return this._shouldRender()?r.a.createElement(D.b.Provider,{value:{socialContextRefreshEnabled:()=>this.context.featureSwitches.isTrue("social_context_and_topic_context_refresh_alignment_enabled")}},r.a.createElement(A.a,i()({},L,{avatarDecoration:e,bottomControl:this._renderBottomControl(),decoration:this._renderDecoration(),highlightedLabel:this._getHighlightedLabel(),isBlocking:P.blocking,onAvatarClick:this._handleAvatarClick,onCellClick:a?this._handleCellClick:void 0,onScreenNameClick:this._handleScreenNameClick,socialContext:R?{contextType:R.contextType,text:R.text,link:R.landingUrl?Object(T.b)(R.landingUrl):void 0}:void 0,withDarkerInteractiveBackground:g}))):null}_renderBottomControl(){return this._renderControl(this.props.bottomControl||null)}_renderDecoration(){const{decoration:e,onFollowClick:t}=this.props;return this._renderControl(e,t)}_renderControl(e,t){const{loggedInUserId:a}=this.context,{displayMode:n,followRequestReceived:i,isAutoblocking:o,isBlocking:r,isDeviceFollowing:s,isFollowing:l,promotedContent:c,screenName:d,user:u,userId:h}=this.props;return"function"==typeof e?e({displayMode:n,followRequestReceived:i,isAutoblocking:o,isBlocking:r,isDeviceFollowing:!!s,isFollowing:!!l,loggedInUserId:a,promotedContent:c,screenName:d,user:u,userId:h,onFollowClick:t}):e}_shouldRender(){const{hideBlocked:e,isBlockedBy:t,isBlocking:a,screenName:n,userId:i}=this.props;return i&&n&&!(e&&(t||a))}_getHighlightedLabel(){const{highlightedLabel:e}=this.props.user,t="AutomatedLabel"===(null==e?void 0:e.userLabelType),a=!!t&&this.context.featureSwitches.isTrue("account_taxonomy_automated_label_enabled");return!t||a?e:void 0}_getPromotedTweetState(){const{promotedContent:e,promotedItemType:t}=this.props;return e&&t===O.c.TWEET?{promotedTweetState:e}:null}_handleAsyncPromotedEvent(e){const{createLocalApiErrorHandler:t,log:a,promotedContent:n,promotedItemId:i,promotedItemType:o,userId:r}=this.props;if(n){const{disclosure_type:s,impression_id:l}=n;a({disclosureType:s,itemId:i||r,itemType:o,params:{event:e,impression_id:l}}).catch(t())}}_handleImpression(){const{createLocalApiErrorHandler:e,log:t,promotedContent:a,promotedItemType:n,shouldScribeImpression:i,userId:o}=this.props;if(a&&n===O.c.USER){const{disclosure_type:n,impression_id:i}=a;t({disclosureType:n,itemId:o,itemType:O.c.USER,params:{event:O.b.IMPRESSION,impression_id:i}}).catch(e())}else i&&this._scribeAction({action:"impression"})}}H.contextType=L.a,H.defaultProps=F.defaultProps;const z=y.a.create((e=>({followButton:{marginLeft:e.spaces.space12}}))),V=Object(R.a)(Object(P.a)(m(F)));t.b=Object(M.a)({element:"user"})(V)},"8Zrg":function(e,t){e.exports=function(){this.__data__=[],this.size=0}},"9B+1":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var n=a("PbbS");const i=e=>({topicId:e.topicId,functionalityType:e.functionalityType}),o=e=>e===n.a.Star?n.a.Star:e===n.a.Favorite?n.a.Favorite:e===n.a.Interested?n.a.Interested:n.a.Default},"9Jxp":function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),o=a("ERkP"),r=a.n(o),s=a("CXUS"),l=a("rHpw"),c=a("MWbm");const d=l.a.create((()=>({hidden:{opacity:0}})));t.a=e=>{const{children:t,disableInteractiveElementBlocking:a,draggableId:n,fromVirtualList:o,index:l,isBeingDragged:u,isDragDisabled:h,lockYAxis:p}=e;return o&&u?r.a.createElement(c.a,{style:d.hidden},t):r.a.createElement(s.b,{disableInteractiveElementBlocking:a,draggableId:n,index:l,isDragDisabled:h},(e=>{const a=e.draggableProps.style,n=p?(e=>{if(e.transform){const t=`translate(0px${e.transform.slice(e.transform.indexOf(","),e.transform.length)}`;return{...e,transform:t}}return e})(a):a;return r.a.createElement("div",i()({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{style:n}),t)}))}},"9Q4p":function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a("ERkP"),i=a.n(n),o=a("GTeL"),r=a("3XMw"),s=a.n(r),l=a("MWbm"),c=a("PbQQ"),d=a("6vad"),u=a("e0ey"),h=a("rHpw"),p=a("ZkMC");const m=s.a.j9cf5950,g=s.a.d69a782e,b=s.a.faf745fa,_=s.a.b96e6682,f=s.a.h2437f26;function y(e){const{currentWarnings:t,mediaItem:a,onWarningChange:n,orientedImage:r}=e,s=[{label:b,value:"adult_content"},{label:_,value:"graphic_violence"},{label:f,value:"other"}],h=c.b.useOpaqueIdentifier(),y=i.a.createElement(o.a,{mediaItem:a,orientedImage:r});return i.a.createElement(l.a,{style:w.root},i.a.createElement(l.a,{style:w.modalContainer},null!=t&&t.size?i.a.createElement(p.a,{revealableTombstoneConfig:p.c,sensitiveMediaWarnings:t,withRoundedCorners:!1},y):y,i.a.createElement(d.b,{nativeID:h,subtext:g,text:m}),i.a.createElement(l.a,{accessibilityLabelledBy:h,accessibilityRole:"group"},s.map((({label:e,value:a})=>i.a.createElement(u.a,{checked:t&&t.has(a),key:a,label:e,name:a,onChange:n}))))))}const w=h.a.create((e=>({modalContainer:{width:"100%",height:"100%",flexGrow:1},root:{display:"flex",flexDirection:"column",flexWrap:"nowrap",height:"100%",flexGrow:1}})))},"9SKQ":function(e,t,a){var n=a("JNqh");e.exports=function(e){return n(this,e).has(e)}},"9gvj":function(e,t,a){"use strict";a("kYxP");var n=a("SV7d"),i=a("ERkP"),o=a.n(i),r=a("TIdA"),s=a("t62R"),l=a("A91F"),c=a("/yvb"),d=a("3XMw"),u=a.n(d),h=a("zTrU"),p=a("rHpw"),m=a("XurV"),g=a("shC7"),b=a("MWbm"),_=a("nb/L"),f=a("hOZg");const y=p.a.create((e=>({root:{borderRadius:e.borderRadii.medium,display:"flex",flexDirection:"row",alignItems:"center",width:"100%",paddingHorizontal:e.spaces.space16,paddingVertical:e.spaces.space12},contentContainer:{display:"flex",flexDirection:"row",flex:1},contentTextContainer:{flex:1,alignItems:"flex-start",justifyContent:"center"},dismissButton:{paddingLeft:e.spaces.space12},icon:{color:e.colors.text,marginRight:e.spaces.space8},illustration:{marginRight:e.spaces.space8,height:e.spaces.space28,width:e.spaces.space28},arrow:{borderStyle:"none"},arrowContainer:{position:"absolute",display:"flex",width:"100%",alignItems:"center"},arrowDirectionUp:{top:`calc(-${e.spaces.space12})`},arrowDirectionDown:{bottom:`calc(${e.spaces.space8} - ${e.spaces.space2} )`},arrowDown:{transform:"rotate(180deg)",position:"absolute"},containerDown:{marginBottom:e.spaces.space16},containerUp:{marginTop:e.spaces.space16}}))),w=p.a.create((e=>({primary:{backgroundColor:e.colors.primary0},purple:{backgroundColor:e.colors.purple0},plum:{backgroundColor:e.colors.plum0}}))),v=p.a.create((e=>({primary:{color:e.colors.primary0},purple:{color:e.colors.purple0},plum:{color:e.colors.plum0}})));t.a=({backgroundColor:e="primary",behavioralEventContext:t,containerRef:a,icon:i,illustration:d,onClose:p,text:C})=>{var E;const T=u.a.af8fa2ae,x=Object(m.useOpaqueIdentifier)(),[S,I]=o.a.useState(void 0),k=g.a.getConstants().isRTL,R=o.a.useRef(0),P=o.a.useRef(0),L=null!=(E=null==t?void 0:t.viewType)?E:"inline_tooltip",M=Object(h.a)((e=>({viewType:e})))(L),D=(()=>{if(null!=a&&a.current&&S){const{left:e,top:t,width:n}=a.current.getBoundingClientRect();R.current=t;const i=e+n/2-S;return{left:k?void 0:i,right:k?i:void 0}}})(),A=P.current<R.current,O=A?[y.arrowDirectionDown]:[y.arrowDirectionUp],F=A?[y.containerDown]:[y.containerUp];return o.a.createElement(o.a.Fragment,null,o.a.createElement(n.a,{behavioralEventContext:M},o.a.createElement(b.a,{onLayout:e=>{const{nativeEvent:{layout:{left:t,top:a,width:n}}}=e;P.current=a;I(t+n/2)},style:[y.root,w[e],(null==a?void 0:a.current)&&F]},null!=a&&a.current?o.a.createElement(b.a,{style:[O,y.arrowContainer,D]},o.a.createElement(_.a,{style:[y.arrow,v[e],A&&y.arrowDown]})):null,o.a.createElement(b.a,{style:y.contentContainer},i&&!d?(N=i,o.a.createElement(N,{style:[y.icon,{alignItem:"flex-start"}]})):null,d&&!i?(B=d,o.a.createElement(b.a,{style:y.illustration},o.a.createElement(r.a,{accessibilityLabel:"",aspectMode:l.a.SQUARE,image:B}))):null,o.a.createElement(b.a,{style:y.contentTextContainer},o.a.createElement(s.b,{nativeID:x},C))),o.a.createElement(b.a,{style:y.dismissButton},o.a.createElement(c.a,{accessibilityDescribedBy:x,accessibilityLabel:T,icon:o.a.createElement(f.a,null),onPress:p,size:"xSmall",type:"primaryText"})))));var B,N}},"9vbJ":function(e,t,a){var n,i=a("3KBa"),o=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!o&&o in e}},"9y2L":function(e,t,a){var n=a("2q8g"),i=a("t0L4");e.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},BLtI:function(e,t,a){"use strict";a.d(t,"a",(function(){return Da}));var n=a("97Jx"),i=a.n(n),o=(a("kYxP"),a("849X"),a("ERkP")),r=a.n(o),s=a("rcen"),l=a("Rp9C"),c=a("MWbm"),d=a("Irs7"),u=a("htQn"),h=a("t62R"),p=a("OOKO"),m=a("/yvb"),g=a("rHpw"),b=a("v6aA"),_=a("Lsrn"),f=a("k/Ka");const y=(e={})=>Object(f.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[_.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M20.937 3.223c-.403-.263-.948-.375-1.48-.195-.726.247-1.906.534-3.457.534-1.38 0-2.286-.225-3.273-.472l-.01-.003c-1.01-.252-2.1-.525-3.717-.525-1.67 0-3.235.484-4.357.946-.16.066-.312.132-.455.197V2.75c0-.518-.42-.938-.938-.938s-.937.42-.937.938v18.5c0 .518.42.938.938.938s.94-.42.94-.938v-2.457c.28-.15.682-.35 1.168-.55 1.002-.414 2.312-.806 3.642-.806 1.38 0 2.286.225 3.273.472l.01.002c1.01.253 2.102.525 3.717.525 2.4 0 4.075-.6 4.804-.922.58-.257.883-.823.883-1.378V4.577c0-.612-.343-1.088-.75-1.354zm-3.28 8.717c-.465.226-1.026.03-1.25-.435-.71-1.462-2.598-1.42-3.234.113l-.307.74c-.145.35-.487.58-.866.58-.38 0-.72-.23-.866-.58l-.308-.74c-.636-1.532-2.525-1.576-3.233-.113-.226.466-.786.66-1.252.435-.465-.226-.66-.786-.434-1.252C7.16 8.1 10.392 7.905 12 9.94c1.608-2.035 4.84-1.84 6.094.748.225.466.03 1.026-.436 1.252z"})));y.metadata={width:24,height:24};var w=y;const v=(e={})=>Object(f.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[_.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M3.25 22c-.414 0-.75-.336-.75-.75V2.75c0-.414.336-.75.75-.75s.75.336.75.75v1.247C5.144 3.453 7.007 2.75 9 2.75c1.592 0 2.655.266 3.682.522.982.246 1.91.478 3.318.478 1.687 0 2.945-.332 3.704-.61.41-.15.87-.086 1.235.168.35.244.56.64.56 1.054V16.21c0 .474-.272.905-.694 1.1-.62.284-2.325.94-4.806.94-1.593 0-2.654-.266-3.682-.522-.983-.246-1.91-.478-3.318-.478-2.147 0-4.203.996-5 1.433v2.567c0 .414-.336.75-.75.75zM4 5.683v11.314c1.144-.544 3.007-1.247 5-1.247 1.592 0 2.655.266 3.682.522.982.245 1.91.478 3.318.478 1.975 0 3.36-.458 4-.725v-11.4c-.887.302-2.246.625-4 .625-1.593 0-2.654-.266-3.682-.522-.983-.246-1.91-.478-3.318-.478-2.147 0-4.203.996-5 1.433z"}),r.a.createElement("path",{d:"M17.925 10.77c-1.23-2.543-4.46-2.65-5.925-.496-1.465-2.153-4.695-2.047-5.925.495-.18.372-.025.82.348 1 .373.182.82.026 1.002-.347.78-1.61 2.878-1.556 3.575.123l.308.74c.116.28.39.464.693.464s.578-.182.694-.463l.306-.74c.697-1.68 2.795-1.734 3.575-.124.18.373.63.53 1.002.348.373-.18.53-.628.348-1z"})));v.metadata={width:24,height:24};var C=v,E=a("OKMS"),T=a("7Mjr");class x extends r.a.Component{constructor(...e){super(...e),this._scribeAction=e=>{const{analytics:t,tweet:a}=this.props,n=l.a.getTweetItem(a);t.scribe({action:e,data:{items:[n]}})},this._handlePivotClick=()=>{this._scribeAction("click")},this._getBirdwatchIcon=e=>{switch(e){case"BirdwatchFlagFill":return r.a.createElement(w,{style:S.birdwatchIcon,testID:"icon-birdwatch-flag"});case"BirdwatchFlagStroke":return r.a.createElement(C,{style:S.birdwatchIcon,testID:"icon-birdwatch-flag-stroke"});default:return r.a.createElement(E.a,{style:S.birdwatchIcon,testID:"icon-birdwatch-fill"})}}}componentDidMount(){this._scribeAction("impression")}render(){const{callToAction:e,destinationUrl:t,footer:a,iconType:n,subtitle:i,title:o}=this.props,l="#"===t?void 0:{pathname:t,anchorless:!0},d=l?this._handlePivotClick:void 0,g=(null==e?void 0:e.destinationUrl)||"#",b="#"===g?void 0:g;return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{link:l,onPress:d,style:S.pivotContainer,testID:"birdwatch-pivot",withInteractiveStyling:!!l},r.a.createElement(c.a,{style:S.headerContainer},r.a.createElement(c.a,{style:[S.headerTextContainer,!e&&S.headerTextAndThumbnailContainer]},this._getBirdwatchIcon(n),r.a.createElement(h.b,{size:"subtext1",style:S.birdwatchLabel,weight:"bold"},o)),e?null:r.a.createElement(T.a,{style:S.icon,testID:"icon-arrow-right"})),i?r.a.createElement(s.a,{entities:i.entities,size:"body",style:S.subtitle,text:i.text}):null,e?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{spacing:"space2"}),r.a.createElement(c.a,{style:S.callToActionContainer},r.a.createElement(h.b,{size:"subtext1"},e.prompt),r.a.createElement(m.a,{link:b,onPress:this._handlePivotClick,size:"small",type:"primaryOutlined"},e.title))):null),a?r.a.createElement(s.a,{color:"gray700",entities:a.entities,size:"subtext2",style:S.footer,text:a.text}):null)}}x.contextType=b.a;const S=g.a.create((e=>({birdwatchLabel:{display:"flex",alignItems:"center"},footer:{paddingVertical:e.spaces.space12},pivotContainer:{borderColor:e.colors.nestedBorderColor,borderWidth:e.borderWidths.small,borderRadius:e.borderRadii.xLarge,marginTop:e.spaces.space12,overflow:"hidden"},headerContainer:{paddingVertical:e.spaces.space12,paddingHorizontal:e.spaces.space12,backgroundColor:e.colors.hoverBlack,justifyContent:"space-between",alignItems:"center",flexDirection:"row",flexGrow:1},headerTextContainer:{flexDirection:"row",width:"100%"},headerTextAndThumbnailContainer:{width:"80%"},callToActionContainer:{paddingVertical:e.spaces.space12,paddingHorizontal:e.spaces.space12,justifyContent:"space-between",alignItems:"center",flexDirection:"row",flexGrow:1},icon:{color:e.colors.text,paddingLeft:e.spaces.space12,flexShrink:0},birdwatchIcon:{marginRight:e.spacesPx.space4,padding:e.spacesPx.space2,color:e.colors.primary,flexShrink:0},thumbnail:{color:e.colors.whiteOnColor},subtitle:{paddingVertical:e.spaces.space12,paddingHorizontal:e.spaces.space12}})));var I=Object(d.a)(x,{element:"birdwatch_pivot"}),k=a("6/RC"),R=a("uIZp"),P=a("3XMw"),L=a.n(P),M=a("5S/X");function D(e){this.name="AssertionError",this.message=e,this.stack=(new Error).stack}D.prototype=Object.create(Error.prototype),D.prototype.constructor=D;var A=(e,t)=>{if(!e)throw new D(t?`Assertion failed: ${t}`:"Assertion failed (also, no message was provided)")},O=a("E6XO"),F=a("sXY3"),B=a("tn7R"),N=a("+d3d"),U=a("oECP"),j=a("fs1G");let H={},z=0;const V={mount:["didMount","willMount"],update:["didUpdate","willUpdate"]},W=()=>{Object(F.a)(H).forEach((([e,t],a)=>{const n=Object(B.a)(t),i=n.length;n.forEach((t=>{Object(F.a)(V).map((([a,[n,o]])=>{(e=>1===e||Math.random()<=.01)(i)&&n in t&&o in t&&Object(O.c)(((e,t)=>`lifecycle:${e.toLowerCase()}:${t}`)(e,a),{duration_ms:t[n]-t[o]})}))}))})),Object(O.a)(),H={}},G=Object(N.a)(W,2e4)||W,q=(e,t=!1)=>{const a=e.constructor.displayName;A(a,`${e.constructor.name} component has "displayName" set.`);let n=e.__lifecycleIdentifier;return!n&&t&&(z+=1,n=e.__lifecycleIdentifier=z),H[a]&&H[a][n]||(H[a]={...H[a],[n]:{}}),[a,n]},$=(e,t,a,n)=>{H[e][t][a]=n};var K=k.canUseDOM?function(e){const t={UNSAFE_componentWillMount:e.prototype.UNSAFE_componentWillMount||j.a,componentDidMount:e.prototype.componentDidMount||j.a,UNSAFE_componentWillUpdate:e.prototype.UNSAFE_componentWillUpdate||j.a,componentDidUpdate:e.prototype.componentDidUpdate||j.a,componentWillUnmount:e.prototype.componentWillUnmount||j.a};return e.prototype.UNSAFE_componentWillMount=function(...e){const[a,n]=q(this,!0);t.UNSAFE_componentWillMount.apply(this,e),$(a,n,"willMount",Date.now())},e.prototype.componentDidMount=function(...e){const[a,n]=q(this);t.componentDidMount.apply(this,e),$(a,n,"didMount",Date.now()),G()},e.prototype.UNSAFE_componentWillUpdate=function(...e){const[a,n]=q(this,!0);t.UNSAFE_componentWillUpdate.apply(this,e),$(a,n,"willUpdate",Date.now())},e.prototype.componentDidUpdate=function(...e){const[a,n]=q(this);t.componentDidUpdate.apply(this,e),$(a,n,"didUpdate",Date.now()),G()},e.prototype.componentWillUnmount=function(...e){t.componentWillUnmount.apply(this,e),G()},e}:U.a,X=a("caTy"),Q=a("Y6L+"),Y=a("zb92");var J=Object(Y.a)({loader:()=>a.e(235).then(a.bind(null,"mL9d"))}),Z=a("xM7j"),ee=a("LKCq");const te="inner_tombstone";function ae({children:e,config:t,nativeID:a}){var n;const o=Object(d.b)();if(M.b)return e;const l=(null==(n=t.richRevealText)?void 0:n.text)||t.revealText,u=t.richText?r.a.createElement(s.a,{alignment:t.richText.alignment,entities:t.richText.entities,onEntityClick:function(){o.scribe({action:"open_link",component:te})},rtl:t.richText.rtl,text:t.richText.text}):t.text;return r.a.createElement(c.a,{nativeID:a},l?r.a.createElement(ee.a,{label:u,onReveal:function(){o.scribe({action:"click",component:te})},render:({onActionClick:e,...t})=>r.a.createElement(Z.a,i()({},t,{inline:!0,onClick:e})),revealLabel:l},e):r.a.createElement(Z.a,{inline:!0},u))}var ne=a("PeW/"),ie=a("3IPs"),oe=a("PbbS"),re=a("LWCC"),se=a("JUsM");const le=g.a.create((e=>({topicFollowPrompt:{marginBottom:e.spaces.space12,marginTop:`-${e.spaces.space8}`}})));var ce=({defaultRef:e,topic:t,topicFollowPrompt:a})=>{const{entities:n,text:i}=(null==a?void 0:a.description)||{};return r.a.createElement(c.a,{style:le.topicFollowPrompt},r.a.createElement(se.a,{containerRef:e,primaryAction:r.a.createElement(re.a,{showRelationshipChangeConfirmation:!0,textMode:oe.a.FollowTopic,topic:t}),text:r.a.createElement(s.a,{entities:n,text:i})}))};var de=Object.freeze({Author:"author",LikedByAuthor:"liked-by-author"}),ue=a("SrIh"),he=a("7JQg"),pe=a("gdQ4"),me=a("qbku"),ge=a("tocL"),be="analyticsButton",_e="promotedIndicator",fe="readerModeBottomBar",ye="socialContext",we="tweet",ve=a("X04g"),Ce=a("v/3V"),Ee=a("RqPI"),Te=a("3zvM"),xe=a("lMB6"),Se=a("iChn");const Ie=Object(Te.e)({namespace:"translationsTweets",fetchOneContext:"FETCH_TWEET_TRANSLATION",fetchOneEndpoint:e=>(t,a)=>e.Tweets.fetchTranslation(t,a).then(ke),fetchOneParams:e=>({id:e})}),ke=e=>{const t=Array.isArray(e)?e:[e];return{entities:{translationsTweets:Object(Se.a)(t,(e=>e.id_str))}}};var Re=xe.a.register(Ie),Pe=a("rxPX"),Le=a("0KEI");const Me=(e,t)=>Re.select(e,t.tweetId),De=(e,t)=>Re.selectFetchStatus(e,t.tweetId);var Ae=Object(Pe.a)().propsFromState((()=>({translation:Me,translationFetchStatus:De,userLanguage:Ee.q}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(Le.createLocalApiErrorHandlerWithContextFactory)("TRANSLATE_TWEET"),fetchTranslation:Re.fetchOneIfNeeded}))),Oe=a("PdwO"),Fe=a("cTG8"),Be=a("zTrU"),Ne=a("YeIG"),Ue=a("Gpeq");const je=L.a.b4947556;class He extends r.a.Component{constructor(...e){super(...e),this._fetchTranslation=()=>{const{createLocalApiErrorHandler:e,fetchTranslation:t,tweetId:a}=this.props;t(a).catch(e())},this._shouldDisableTranslation=()=>{const{disableTranslation:e,displayTextRange:t,entities:a,isFocal:n,lang:i,supplementalLang:o,text:r,userLanguage:s}=this.props;return this._getMemoizedDisableTranslation(e,t,a,r,i,o,s)||!(n||this.context.featureSwitches.isTrue("tweet_translation_timeline_enabled"))},this._renderTranslation=()=>{const{createLocalApiErrorHandler:e,disableTranslation:t,enrichments:a,fetchTranslation:n,header:o,hitHighlights:s,isFocal:l,onMediaTranslation:c,style:d,supplementalLang:u,translation:h,translationFetchStatus:p,tweetId:m,userLanguage:g,weight:b,withOriginalText:_,...f}=this.props;if(h)return r.a.createElement(Fe.a,i()({},f,{displayTextRange:this._getMemoizedDisplayTextRange(h.text),entities:h.entities,lang:h.destinationLanguage,text:h.text}))},this._getMemoizedDisplayTextRange=Object(Be.a)((e=>[0,e.length])),this._getMemoizedDisableTranslation=Object(Be.a)(((e,t,a,n,i,o,r)=>{const s=r&&i&&Object(Ue.c)(i.split("-")[0])!==Object(Ue.c)(r.split("-")[0]);return e||!!o||!s||!Object(Ue.b)({displayTextRange:t,entities:a,text:n,language:i})}))}componentDidUpdate(e){const{onMediaTranslation:t,translation:a}=this.props;if(e.translation!==a&&a){var n;const{featureSwitches:e}=this.context,i={};((null==a||null==(n=a.entities)?void 0:n.media)||[]).forEach((e=>{e.alt_text&&(i[e.id_str]=e.alt_text)})),t&&!Object(Ne.a)(i)&&e.isTrue("responsive_web_alt_text_translations_enabled")&&t(i)}}render(){const{createLocalApiErrorHandler:e,disableTranslation:t,fetchTranslation:a,header:n,isFocal:i,onMediaTranslation:o,style:s,supplementalLang:l,translation:c,translationFetchStatus:d,tweetId:u,userLanguage:h,withOriginalText:p,...m}=this.props;return r.a.createElement(Oe.a,{disableTranslation:this._shouldDisableTranslation(),fetchTranslation:this._fetchTranslation,header:n,key:u,onMediaTranslation:o,originLanguage:c&&c.localizedSourceLanguage,scribeElement:"translate_tweet",style:s,translateButtonText:je,translatedMessage:this._renderTranslation(),translationFetchStatus:d,withOriginalText:p},r.a.createElement(Fe.a,m))}}He.contextType=b.a;var ze=Ae(He),Ve=a("2qZs"),We=a("wwsH");const Ge={viewType:"birdwatch"},qe=g.a.create((e=>({birdwatchIcon:{marginLeft:e.spaces.space12}})));var $e=({onPress:e,onShow:t,tweetId:a})=>{const n={pathname:`/i/birdwatch/t/${a}`,external:!0};return r.a.useEffect((()=>{t&&t()}),[t]),r.a.createElement(We.a,{Icon:Ve.a,accessibilityLabel:"Birdwatch note",activeColor:"primary",behavioralEventContext:Ge,link:n,onPress:e,style:qe.birdwatchIcon})},Ke=a("xXop"),Xe=a("xrkw"),Qe=a("mqpi");const Ye=L.a.e6901eec;class Je extends r.a.PureComponent{constructor(...e){super(...e),this._shouldDisable=Qe.b.bind(null,this.context.featureSwitches)}render(){const{endControl:e,loggedInUserId:t,onAnalyticsClick:a,style:n,tweet:i}=this.props;return!this._shouldDisable(i,Qe.a.Analytics)&&t===i.user.id_str?r.a.createElement(c.a,{style:[Ze.analyticsContainerWithChildren,n]},r.a.createElement(u.a,{link:`${i.permalink}/analytics`,onPress:a,style:Ze.analyticsButton,testID:be},r.a.createElement(Xe.a,{style:Ze.analyticsIcon}),r.a.createElement(h.b,{color:"gray700"},Ye)),e):null}}Je.contextType=b.a;const Ze=g.a.create((e=>({analyticsIcon:{color:e.colors.gray700,paddingRight:e.spaces.space4},analyticsButton:{paddingVertical:e.spaces.space16,flexDirection:"row",flexGrow:1},analyticsContainerWithChildren:{justifyContent:"space-between",borderTopColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:"1px",flexDirection:"row",alignItems:"center"}})));var et=Je,tt=a("tmUV"),at=a("YBcl"),nt=a("k89r");var it=e=>{const t=Object(nt.a)();return r.a.createElement(at.a,i()({},e,{handleAnchorAction:()=>{t.scribe({component:"conversation_control_prompt",element:"see_conversation",action:"click"})},handleAnchorOpen:e=>{t.scribe({element:e,action:"click"})},handleAnchorSecondaryAction:()=>{t.scribe({component:"conversation_control_prompt",element:"ok",action:"click"})},handleHeadsUpImpression:(e,a)=>{t.scribe({element:"heads_up_context",action:a,data:{tweet_id:e}})}}))},ot=a("uFYP");const rt=L.a.g6237a1e,st=L.a.d6b5949e,lt=e=>{switch(e){case"paused":return st;case"in-progress":default:return rt}};var ct=e=>{const{nativeID:t,status:a,style:n}=e,i="paused"===a;return r.a.createElement(c.a,{style:[dt.root,n]},r.a.createElement(ot.a,{style:[dt.icon,i?dt.withGray700:null]}),r.a.createElement(h.b,{color:i?"gray700":"text",nativeID:t,size:"subtext2"},lt(a)))};const dt=g.a.create((e=>({root:{alignItems:"center",flexDirection:"row"},icon:{color:e.colors.buttonBlack,height:"1em",marginRight:e.spaces.space4,flexShrink:0},withGray700:{color:e.colors.gray700}})));var ut=a("TuTd");const ht=(e,t)=>Object(ut.a)(e,t.tweetId);var pt=Object(Pe.a)().propsFromState((()=>({liveCounts:ht}))).adjustStateProps((({liveCounts:e})=>({liveLikeCount:e&&e.likeCount,liveQuoteCount:e&&e.quoteCount,liveRetweetCount:e&&e.retweetCount}))),mt=a("Jkc4"),gt=a("855f"),bt=a("MtXG"),_t=a("de1q"),ft=a("cHvH");const yt=L.a.fd80ffb0,wt=g.a.theme.spacesPx.space20;class vt extends r.a.PureComponent{constructor(e,t){super(e,t),this._reactionsLegacyHeartEnabled=this.context.featureSwitches.isTrue("responsive_web_reactions_legacy_heart"),this._renderQuoteTweetTimelinePivot=()=>{const{permalink:e}=this.props;return r.a.createElement(u.a,{link:`${e}/retweets/with_comments`,onPress:this._handleQuoteTweetPivotScribeOnClick,style:Ct.quoteTweetPivot,withDarkerInteractiveBackground:!1},r.a.createElement(h.b,{color:"primary"},yt))},this._updateStateIfChanged=(e,t)=>a=>{const{nativeEvent:{layout:{width:n}}}=a;n!==e()&&t(n)},this._handleQuoteTweetStatLayout=this._updateStateIfChanged((()=>this.state.quoteTweetLabelWidth),(e=>this.setState({quoteTweetLabelWidth:e}))),this._handleRetweetStatLayout=this._updateStateIfChanged((()=>this.state.retweetLabelWidth),(e=>this.setState({retweetLabelWidth:e}))),this._handleLikeStatLayout=this._updateStateIfChanged((()=>this.state.likeLabelWidth),(e=>this.setState({likeLabelWidth:e}))),this._handleStatGroupLayout=this._updateStateIfChanged((()=>this.state.groupWidth),(e=>this.setState({groupWidth:e}))),this._handleRetweetScribeOnClick=()=>{const{analytics:e}=this.props;e.scribe({element:"retweet_stat",action:"click"})},this._handleQuoteTweetScribeOnClick=()=>{const{analytics:e}=this.props;e.scribe({element:"quote_tweet_stat",action:"click"})},this._handleQuoteTweetPivotScribeOnClick=()=>{const{analytics:e}=this.props;e.scribe({element:"quote_tweet_pivot",action:"click"})},this.state={retweetLabelWidth:void 0,likeLabelWidth:void 0,quoteTweetLabelWidth:void 0,groupWidth:void 0}}componentDidMount(){const{analytics:e,isNonCompliantTweet:t,quoteTweetCount:a}=this.props;t&&e.scribe({element:"quote_tweet_pivot",action:"impression"}),a&&a>0&&e.scribe({element:"quote_tweet_stat",action:"impression"})}render(){const{isNonCompliantTweet:e}=this.props;return e?this._renderQuoteTweetTimelinePivot():this._renderStats()}_renderReaction(e){const{permalink:t}=this.props,a=gt.a.getTruncatedCount(e.count),n={pathname:`${t}/reactions`,state:{reactionType:e.type}};return r.a.createElement(c.a,{key:e.type},r.a.createElement(mt.a,null,(t=>r.a.createElement(bt.a,{count:e.count,link:n,onPress:t()},r.a.createElement(c.a,{style:Ct.reactionStat},r.a.createElement(_t.a,{legacyHeart:this._reactionsLegacyHeartEnabled,reactionType:e.type,style:Ct.reaction}),r.a.createElement(bt.a.Value,{animated:!0,count:e.count,weight:"normal"},a))))))}_renderReactionsStatsGroup(){const{permalink:e,reactionCount:t}=this.props,a=t&&t.reduce(((e,t)=>(t.count||0)+e),0)||0;if(!a||!t)return null;const n=gt.a.getTruncatedCount(a),i=t.sort(((e,t)=>t.count-e.count)).filter((e=>e.count>0));return r.a.createElement(ft.a,null,(({windowWidth:t})=>r.a.createElement(bt.a.Group,{style:[Ct.detailItemContainer,Ct.detailItem]},t>g.a.theme.breakpoints.small?r.a.createElement(c.a,null,r.a.createElement(mt.a,null,(t=>r.a.createElement(bt.a,{count:a,link:`${e}/reactions`,onPress:t()},r.a.createElement(L.a.I18NFormatMessage,{$i18n:"d01be6d9"},r.a.createElement(bt.a.Value,{animated:!0,count:a},L.a.d2100fb5({displayCountAll:n})),r.a.createElement(bt.a.Label,null,L.a.g692ffe2({count:a}))))))):null,i.map((e=>this._renderReaction(e))))))}_renderLikesStat(e){const t=gt.a.getTruncatedCount(e),{permalink:a}=this.props;return r.a.createElement(c.a,{onLayout:this._handleLikeStatLayout},r.a.createElement(mt.a,null,(n=>r.a.createElement(bt.a,{count:e,link:`${a}/likes`,onPress:n()},r.a.createElement(L.a.I18NFormatMessage,{$i18n:"e4eeeeff"},r.a.createElement(bt.a.Value,{animated:!0,count:e},L.a.e8866a55({displayCount:t})),r.a.createElement(bt.a.Label,null,L.a.eb3abe45({count:e})))))))}_renderRetweetsStat(e){const t=gt.a.getTruncatedCount(e),{permalink:a}=this.props;return r.a.createElement(c.a,{onLayout:this._handleRetweetStatLayout},r.a.createElement(mt.a,null,(n=>r.a.createElement(bt.a,{count:e,link:`${a}/retweets`,onPress:n(this._handleRetweetScribeOnClick)},r.a.createElement(L.a.I18NFormatMessage,{$i18n:"b07c7c03"},r.a.createElement(bt.a.Value,{animated:!0,count:e},L.a.d71de0c1({displayCount:t})),r.a.createElement(bt.a.Label,null,L.a.c42234da({count:e})))))))}_renderQuoteTweetsStat(e){const t=gt.a.getTruncatedCount(e),{permalink:a}=this.props;return r.a.createElement(c.a,{onLayout:this._handleQuoteTweetStatLayout},r.a.createElement(mt.a,null,(n=>r.a.createElement(bt.a,{count:e,link:`${a}/retweets/with_comments`,onPress:n(this._handleQuoteTweetScribeOnClick)},r.a.createElement(L.a.I18NFormatMessage,{$i18n:"f0259953"},r.a.createElement(bt.a.Value,{animated:!0,count:e},L.a.f6e12707({displayCount:t})),r.a.createElement(bt.a.Label,null,L.a.e2414185({count:e})))))))}_renderStats(){const{containerStyle:e,likeCount:t,quoteTweetCount:a,reactionCount:n,retweetCount:i,style:o,withReactions:s}=this.props,{groupWidth:l,likeLabelWidth:d,quoteTweetLabelWidth:u,retweetLabelWidth:h}=this.state,p=h&&u&&d&&l&&h+wt+(s?0:d+wt)+u>l,m=l,g=s?void 0:t;return i||g||a||n?r.a.createElement(c.a,{onLayout:this._handleStatGroupLayout,style:m?e:Ct.hidden},s?this._renderReactionsStatsGroup():null,i||g||a?r.a.createElement(bt.a.Group,{style:[Ct.detailItemContainer,Ct.detailItem,Ct.noWrap,o]},i?this._renderRetweetsStat(i):null,a?this._renderQuoteTweetsStat(a):null,g&&!p?this._renderLikesStat(g):null):null,p&&g?r.a.createElement(bt.a.Group,{style:[Ct.detailItemContainer,Ct.detailItem,o]},this._renderLikesStat(g)):null):null}}vt.contextType=b.a;const Ct=g.a.create((e=>({detailItem:{paddingHorizontal:e.spaces.space4,paddingVertical:e.spaces.space16},detailItemContainer:{borderTopColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:"1px",flexDirection:"row"},hidden:{visibility:"hidden"},noWrap:{flexWrap:"nowrap"},quoteTweetPivot:{borderTopColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:"1px",paddingVertical:e.spaces.space16},reaction:{width:"1.2em",height:"1.2em",marginRight:"0.5em"},reactionStat:{flexDirection:"row",alignItems:"center",display:"inline-flex"}})));var Et=Object(d.a)(vt);var Tt=pt((function(e){const{containerStyle:t,isNonCompliantTweet:a,liveLikeCount:n,liveQuoteCount:i,liveRetweetCount:o,tweetLikeCount:s,tweetPermalink:l,tweetQuoteTweetCount:c,tweetReactionCount:d,tweetRetweetCount:u,withReactions:h}=e;return r.a.createElement(Et,{containerStyle:t,isNonCompliantTweet:a,likeCount:n||s,permalink:l,quoteTweetCount:i||c,reactionCount:d,retweetCount:o||u,withReactions:h})})),xt=a("avOP");var St=e=>{const{children:t}=e;return M.b?r.a.createElement(xt.a,{itemProp:"articleBody"},t):t},It=a("M0jS");const kt=(e,t)=>Object(It.c)(e,t.userId);var Rt=Object(Pe.a)().propsFromState((()=>({userSpace:kt}))),Pt=a("Sksh"),Lt=a("dgjd"),Mt=a("1I0O"),Dt=a("oSwX");const At=e=>{const{avatarRef:t,imageLayoutCache:a,nativeID:n,onClick:o,onHoverCardScreenNameClick:s,promotedContent:l,screenName:c,size:d,style:u,uri:h,userId:p,userSpace:m,withHoverCard:g,withLink:b}=e;r.a.useEffect((()=>(Pt.a.registerUserInApp(p),()=>{Pt.a.deregisterUserInApp(p)})),[p]);const _=m&&m.spaceId||"",{space:f}=Object(Lt.a)(_);return m&&f&&"Running"===f.state?r.a.createElement(Mt.a,i()({avatarRef:t,imageLayoutCache:a,nativeID:n,onClick:o,onHoverCardScreenNameClick:s,promotedContent:l,screenName:c,size:d,style:u,uri:h,withHoverCard:g,withLink:b},m)):r.a.createElement(Dt.default,{avatarRef:t,imageLayoutCache:a,nativeID:n,onClick:o,onHoverCardScreenNameClick:s,promotedContent:l,screenName:c,size:d,style:u,uri:h,withHoverCard:g,withLink:b})};var Ot=Rt(r.a.memo(At)),Ft=a("FGLp"),Bt=a("TIdA"),Nt=a("DNho");const Ut=Bt.a.createLayoutCache(),jt=g.a.create((e=>({avatar:{display:"block"},avatarWrapper:{flexShrink:1,flexGrow:0,width:"100%"}})));var Ht=e=>{const t=Object(d.b)(),{featureSwitches:a}=r.a.useContext(b.a),{avatarRef:n,nativeID:i,onClick:o,onHoverCardScreenNameClick:s,promotedContent:l,screenName:u,uri:h,userId:p,withHoverCard:m=!0,withLink:g=!0,withNftAvatar:_,withUserPresence:f=!1}=e;return Object(Ft.a)((()=>{_&&a.isTrue("responsive_web_nft_avatar")&&t.scribe({element:"nft_avatar",action:"impression"})})),r.a.createElement(c.a,{style:jt.avatarWrapper},r.a.createElement(Nt.a.Consumer,null,(({avatarSize:e})=>f?r.a.createElement(Ot,{avatarRef:n,imageLayoutCache:Ut,nativeID:i,onClick:o,onHoverCardScreenNameClick:s,promotedContent:l,screenName:u,size:e,style:jt.avatar,uri:h,userId:p,withHoverCard:m,withLink:g}):r.a.createElement(Dt.default,{avatarRef:n,imageLayoutCache:Ut,nativeID:i,onClick:o,onHoverCardScreenNameClick:s,promotedContent:l,screenName:u,size:e,style:jt.avatar,uri:h,userId:p,withHoverCard:m,withLink:g}))))},zt=a("aITJ"),Vt=a("E0cF"),Wt=a("Z6aJ"),Gt=a("dCqJ"),qt=a("Olb6"),$t=a("nBUg"),Kt=a("r7g+"),Xt=a("PbQQ"),Qt=a("JWUO"),Yt=a("9VO7"),Jt=a("GBcw"),Zt=a("jV+4"),ea=a("ir4X"),ta=a("aA1u"),aa=a("uK4q"),na=a("kY28"),ia=a("6nXH");function oa(e,t,a){var n;const i=Vt.a.getOriginalTweet(e),o=null==i||null==(n=i.entities)?void 0:n.hashtags;if(!Array.isArray(o)||o.length<1)return;const r=o[0];return a&&function(e){const t=Vt.a.getOriginalTweet(e),a=t.extended_entities&&t.extended_entities.media;return!!(a&&a.length>0)&&a.some((e=>"animated_gif"===e.type))}(e)&&t.isTrue("responsive_web_hashtag_highlight_is_enabled")?r.text:void 0}var ra=a("9B+1"),sa=a("YICZ"),la=a("21zW"),ca=a("8bWS");const da=L.a.gf5e9ea6,ua=L.a.e2f2b658,ha=Object.freeze({see_more:L.a.ffd9cfe6,discover_more:L.a.d172116a,more:L.a.h63a5c3c,more_tweets:L.a.iac074c4,more_suggestions:L.a.g11ebd34,browse:L.a.g4a6901a,browse_tweets:L.a.b1abb17e});const pa=({onUndoTopicNotInterestedClick:e})=>r.a.createElement(c.a,{style:ba.tombstone},r.a.createElement(Z.a,{actionText:da,children:ua,inline:!0,onClick:e})),ma=Object(d.a)((e=>{const{analytics:t,bannerText:a,label:n,link:i,linkText:o,onNotInterestedPress:l,topic:d,withRightControl:u}=e,p=a&&""===a.text,m=o&&""===o.text,g=!m,b=!(p||m);return r.a.createElement(c.a,{style:ba.topicActions},b&&r.a.createElement(la.a,null),g&&r.a.createElement(h.b,{color:"primary",link:i,onClick:()=>{t.scribeAction("click")},size:"subtext2",weight:"bold"},o?r.a.createElement(s.a,o):n),u?r.a.createElement(c.a,{style:ba.notInterestedButtonWrapper},r.a.createElement(sa.a,{onPress:l,size:"small",topicId:d.id,type:"brandText",withIconOnly:!0})):null)})),ga=e=>{const{isExpanded:t,onNotInterestedPress:a,topic:n}=e,i=n.following?ba.followingTopicButtonWrapper:ba.followTopicButtonWrapper,o=[t&&i,!t&&ba.followTopicButtonWrapperNotExpanded],s=t?ba.largeNotInterestedButtonWrapper:ba.notInterestedButtonWrapper;return r.a.createElement(c.a,{style:ba.topicActions},t?null:r.a.createElement(la.a,{style:ba.topicMiddot}),r.a.createElement(c.a,{style:o},r.a.createElement(re.a,{isTransparent:!t,showRelationshipChangeConfirmation:!0,size:t?"small":"xSmall",style:ba.followTopicButton,textMode:oe.a.FollowTopic,topic:n})),a||t&&!n.following?r.a.createElement(c.a,{style:s},r.a.createElement(sa.a,{onPress:a,size:"small",topicId:n.id,type:t?"primaryOutlined":"brandText",withIconOnly:!t})):null)};const ba=g.a.create((e=>({tombstone:{paddingBottom:e.componentDimensions.gutterVertical},iconStyle:{paddingBottom:`calc(${e.spaces.space2} + ${e.spaces.space1})`,marginBottom:e.spaces.space4},topicActions:{flexDirection:"row",flexGrow:1,alignItems:"center",minHeight:e.spaces.space32},topicMiddot:{alignSelf:"center",paddingRight:0},followTopicButton:{marginTop:e.spaces.space1},followTopicButtonWrapperNotExpanded:{marginBottom:e.spaces.space2},followTopicButtonWrapper:{marginVertical:e.spaces.space4,paddingRight:e.spaces.space4,width:"50%"},followingTopicButtonWrapper:{marginVertical:e.spaces.space4,width:"100%"},notInterestedButtonWrapper:{alignItems:"flex-end",flexGrow:1},largeNotInterestedButtonWrapper:{marginVertical:e.spaces.space4,paddingLeft:e.spaces.space4,width:"50%"}})));var _a=a("0zXz");const fa=(e={})=>Object(f.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[_.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M22.76 6.69c0 3.035-2.43 5.447-5.465 5.447-.233 0-.292.02-.428 0L11.85 7.12c-.02-.177-.02-.254-.02-.43 0-3.013 2.45-5.483 5.465-5.483 3.034 0 5.465 2.47 5.465 5.484zm-7.235 6.574l-.136.117-11.63 9.415c-1.13-.467-2.064-1.36-2.51-2.51l-.02-.02L10.7 8.48l.02-.02 4.803 4.804z"})));fa.metadata={width:24,height:24};var ya=fa;const wa=L.a.aaad27c8;function va({color:e="magenta500",name:t}){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ya,{accessibilityLabel:wa,style:[Ca.icon,{backgroundColor:g.a.theme.colors[e]}]}),t)}const Ca=g.a.create((({borderRadii:e,colors:t,fontSizes:a,primaryColorName:n,spaces:i})=>({icon:{borderRadius:e.infinite,color:t.whiteOnColor,fontSize:a.subtext3,marginRight:i.space4,padding:i.space2}}))),Ea=g.a.theme.aspectRatios.maxTimelineImage,Ta=g.a.theme.aspectRatios.minTimelineImage,xa=["magenta500","orange500","purple500"],Sa=L.a.f277e94a,Ia=L.a.ee79367b,ka=L.a.a2a3824a,Ra=L.a.c14cdb18,Pa=L.a.e8adeec8,La=L.a.i093db9c,Ma={element:"user_recommendation"};class Da extends r.a.Component{constructor(...e){super(...e),this._defaultInlinePromptRef=r.a.createRef(),this._iconContainerRef=r.a.createRef(),this.state={mediaAltTranslations:{}},this._transformPromotedUrl=Ce.a.bind(null,this.context.featureSwitches),this._isEdgeToEdgeEnabled=this.context.featureSwitches.isTrue("media_edge_to_edge_content_enabled"),this._getWithTopLine=()=>{const{conversationTreeMetadata:e,isFocal:t,tweet:a}=this.props,n=Vt.a.getOriginalTweet(a),i=this._getConversationPosition(),o=this._getIsConversationStart(),r=e&&e.ancestorConnector,s=e&&e.indents,l=t&&!!n.in_reply_to_status_id_str||i&&!o;return s?"top"===r:l},this._getWithBottomLine=()=>{const{conversationTreeMetadata:e,tweet:t}=this.props,a=Vt.a.getOriginalTweet(t),n=this._getConversationPosition(),i=e&&e.indents,o=e&&e.descendantConnector,r=n&&!n.isEnd;return i?o:!(!a.in_reply_to_status_id_str&&"ancestor"!==(null==n?void 0:n.position)&&this._isEdgeToEdgeEnabled)&&r},this._isEditTweetConsumptionEnabled=()=>this.context.featureSwitches.isTrue("responsive_web_edit_tweet_enabled")||this.context.featureSwitches.isTrue("subscriptions_feature_labs_1004"),this._isTweetInConversation=()=>{const e=this._getWithTopLine(),t=this._getWithBottomLine();return!!e||!!t},this._getFeatureConfigurationContextProviderValue=()=>{const{onMediaHashtagHighlightClick:e,promotedContent:t,promotedContentAdvertiser:a,tweet:n}=this.props,{featureSwitches:i}=this.context,o={highlightedHashtag:()=>oa(n,i,Wt.a.isPromoted(t)),avatarURIForHashtagHighlight:()=>function(e,t){if(e&&t.isTrue("responsive_web_hashtag_highlight_show_avatar"))return e.profile_image_url_https}(a,i),shouldUseSmallFontForHashtagHighlight:()=>i.isTrue("responsive_web_hashtag_highlight_use_small_font"),onMediaHashtagHighlightClick:e},r=i.isTrue("trusted_friends_consumption_enabled"),s=i.isTrue("trusted_friends_tweet_creation_enabled"),l={c9sEnabled:()=>i.isTrue("c9s_enabled"),trustedFriendsEnabled:()=>r,trustedFriendsCreationEnabled:()=>s},c=!this.props.isFocal&&this._isTweetInConversation();return{...o,...l,isVibeTweetConsumptionEnabled:()=>i.isTrue("vibe_tweet_context_enabled"),withEdgeToEdgeContent:()=>!c&&i.isTrue("media_edge_to_edge_content_enabled"),withEdgeToEdgeTweetAnatomy:()=>i.isTrue("media_edge_to_edge_content_enabled"),headsUpVariant:()=>i.getStringValue("conversational_safety_heads_up_treatment_A_enabled"),isCollaborativeTweetConsumptionEnabled:()=>i.isTrue("responsive_web_cotweet_consumption_enabled"),isCopyrightDisputeLinkEnabled:()=>i.isTrue("ecd_dispute_form_link_enabled"),isEditTweetConsumptionEnabled:this._isEditTweetConsumptionEnabled,misinfoLabelRevampTweaksEnabled:()=>i.isTrue("responsive_web_misinfo_label_revamp_tweaks_enabled"),mixedMediaEnabled:()=>i.isTrue("responsive_web_mixed_media_consumption_enabled"),sensitiveMediaWarningsEnabled:()=>i.isTrue("sensitive_tweet_warnings_enabled"),tweetRendersPromotedContentBadgeBelowHeader:()=>i.isTrue("responsive_web_promoted_badge_below_header"),socialContextRefreshEnabled:()=>this.context.featureSwitches.isTrue("social_context_and_topic_context_refresh_alignment_enabled"),trustedFriendsInfo:()=>r&&r?n.trusted_friends_info:void 0,twitterArticleLearnMoreBannerEnabled:()=>i.isTrue("responsive_web_twitter_article_view_enabled")}},this._renderPromotedDetails=e=>{const{onPoliticalSponsorWebsiteClick:t,onPromotedDisclaimerLearnMoreClick:a,onPromotedIndicatorClick:n,promotedContent:i,promotedContentAdvertiser:o,tweet:s}=this.props;return a&&t&&n?r.a.createElement(Gt.a,{onPoliticalSponsorWebsiteClick:t,onPromotedDisclaimerLearnMoreClick:a,onPromotedIndicatorClick:n,promotedContent:i,promotedContentAdvertiser:o,style:Aa.promotedDetails,testID:_e,tweet:s,withCircleIcon:e}):null},this._getPromoteButtonOnPress=e=>{const{onPromoteAgainButtonClick:t,onPromoteButtonClick:a}=this.props;return"EligibleWithPreviousCampaign"===e?t:a},this._renderBirdwatchPivot=()=>{const{tweet:e,withBirdwatchPivots:t}=this.props,a=Vt.a.getOriginalTweet(e);return a.birdwatch_pivot&&t&&this.context.featureSwitches.isTrue("responsive_web_birdwatch_pivots_enabled")?r.a.createElement(I,i()({},a.birdwatch_pivot,{tweet:e})):null},this._renderModeratedRepliesIcon=()=>{const{hasModeratedReplies:e,onModeratedIconClick:t,tweet:a}=this.props;return e?r.a.createElement(qt.a,{link:`${a.permalink}/hidden`,onPress:t}):null},this._renderBirdwatchNotesIcon=()=>{const{onBirdwatchNotesIconClick:e,onBirdwatchNotesIconShown:t,tweet:a}=this.props;return!(a.birdwatch_pivot&&!0===this.context.featureSwitches.getValueWithoutScribeImpression("responsive_web_birdwatch_pivots_enabled"))&&a.has_birdwatch_notes&&this.context.featureSwitches.isTrue("responsive_web_birdwatch_consumption_enabled")&&this.context.featureSwitches.isTrue("responsive_web_birdwatch_contribution_enabled")?r.a.createElement($e,{onPress:e,onShow:t,tweetId:a.id_str}):null},this._getUsernameStackedLayoutEnabled=()=>this.props.isFocal||this._isEdgeToEdgeEnabled,this._handleSocialContextClick=()=>{const{saveAsRecentSearch:e,shouldStoreTypeaheadItem:t,socialContext:a}=this.props;if(e&&a&&t&&t(ve.a.ItemType.USER)){var n;const t=(null==(n=a.landingUrl)?void 0:n.url.match(Q.A.id))||"",i=a.text||"";e({topic:{id:t&&t[0],name:i,description:ka,type:ie.a.Topic}})}},this._renderTweetTextHWTweet=e=>{const{excludeCardUrl:t,hitHighlights:a,isFocal:n,linkify:o,onEntityClick:s,tweet:l,tweetTextSize:c,withCardLinks:d,withInlineMedia:u,withQuotedTweetLinks:h}=this.props,p=Vt.a.getOriginalTweet(l),m=Vt.a.hasInteractiveText(p),g=c||(m?"title4":e.size),b=this._shouldShowLikedByAuthor(),_={...e,excludeCardUrl:t,hitHighlights:a,linkify:o,onEntityClick:s,size:g,transformUrl:this._transformUrl,unmentionedUserIds:p.unmentioned_user_ids,weight:m?"heavy":void 0,withCardLinks:d,withMediaLinks:!u,withQuoteLinks:h||Vt.a.isQuotedTweetUnavailable(p),withUnicodeEmojis:M.b};return r.a.createElement(St,null,r.a.createElement(ze,i()({},_,{disableTranslation:p.user.protected,isFocal:n,lang:p.lang,onMediaTranslation:this._handleMediaTranslations,supplementalLang:p.supplemental_language,text:p.text,tweetId:p.id_str,withLikedByAuthor:b,withOriginalText:n})))},this._renderTweetText=e=>{const{excludeCardUrl:t,hitHighlights:a,isFocal:n,linkify:i,onEntityClick:o,tweet:s,tweetTextSize:l,withCardLinks:c,withInlineMedia:d,withQuotedTweetLinks:u}=this.props,h=Vt.a.getOriginalTweet(s),p=Vt.a.hasInteractiveText(h),m=l||(n||p?"title4":"body"),g=p&&Aa.interactiveHighlightSpacer||this._isEdgeToEdgeEnabled&&Aa.edgeToEdgeTextSpacer,b=n?Aa.expandedTweetText:g;return r.a.createElement(St,null,r.a.createElement(ze,{disableTranslation:h.user.protected,displayTextRange:h.display_text_range,enrichments:h.enrichments,entities:h.entities,excludeCardUrl:t,hitHighlights:n?void 0:a,isFocal:n,lang:h.lang,linkify:!!n||i,nativeID:e,onEntityClick:o,onMediaTranslation:this._handleMediaTranslations,quotedTweetId:h.quoted_status&&h.quoted_status.id_str,quotedTweetPermalink:h.quoted_status_permalink,size:m,style:b,supplementalLang:h.supplemental_language,text:h.text,transformUrl:this._transformUrl,tweetId:h.id_str,unmentionedUserIds:h.unmentioned_user_ids,weight:p?"heavy":void 0,withCardLinks:n?void 0:c,withMediaLinks:n?void 0:!d,withOriginalText:n,withQuoteLinks:!n&&u||Vt.a.isQuotedTweetUnavailable(h),withUnicodeEmojis:M.b}))},this._handleMediaTranslations=e=>{this.setState({mediaAltTranslations:e})},this._transformUrl=e=>{var t;return this._transformPromotedUrl(e,null==(t=this.props.promotedContent)?void 0:t.click_tracking_info)}}render(){var e;const{conversationTreeMetadata:t,forwardPivotInfo:a,hideConversationControlsEducationText:n,hideExclusivityInfoEducationTextInReplies:o,hideTrustedFriendsEducationTextInReplies:s,isFocal:l,loggedInUser:d,onBlur:u,onClick:p,onFocus:b,onPromotedUserProfileCardClick:_,promotedContent:f,quotedTweetTombstoneInfo:y,readerModeAvailable:w,renderCurationActionMenu:v,showConversationHeadsUp:C,showLongformNotesLearnMoreBanner:E,socialContext:T,to:x,tweet:S,withReaderModeBottomBar:I,withTimestamp:P,withUnreadStyles:L}=this.props,M=Vt.a.getOriginalTweet(S),{has_super_follower:D,quick_promote_eligibility:A,user:O}=M,F=null==A?void 0:A.eligibility,B=this._getIsQuickPromoteEligible(F),N=Wt.a.isPromoted(f),U="true"===(null==f||null==(e=f.experiment_values)?void 0:e.pac_in_timeline)&&!M.card&&this.context.featureSwitches.isTrue("responsive_web_promoted_account_card_enabled"),j=!!N&&this.context.featureSwitches.isTrue("responsive_web_promoted_badge_below_header"),H=!!N&&this.context.featureSwitches.isTrue("responsive_web_promoted_badge_use_circle_icon"),z=!(!O.professional||!B),V="IneligibleCampaignRunning"===F||"IneligibleCampaignPaused"===F,W=t&&t.ancestorConnector,G=t&&t.indents,q=this._isTweetInConversation()&&!l||!this._isEdgeToEdgeEnabled;return l?r.a.createElement(Xt.c.UseTweetA11yIds,{tweet:S},(([e,i])=>{const l=V?r.a.createElement(ct,{nativeID:e.promotionStatusLabel,status:this._getTweetPromotionStatus(F),style:Aa.promotionStatus}):null,m=t?r.a.createElement(h.b,{nativeID:e.conversationLevel,style:g.a.visuallyHidden},Ia({conversationTreeDepth:t.depth.toString()})):null,y=M.tombstoneInfo||S.tombstoneInfo,T=r.a.createElement(r.a.Fragment,null,y?this._renderTombstone(e.tombstone,y):null,this._renderReplyContext({nativeID:e.replyContext}),r.a.createElement(c.a,null,this._renderTweetText(e.text)),r.a.createElement(c.a,null,this._renderRichContent({nativeID:e.richContent,withRoundMediaCorners:q})),r.a.createElement(c.a,null,U?r.a.createElement(he.c,{namespace:Ma},r.a.createElement(Kt.a.PromotedUserProfileCard,{followButton:r.a.createElement(R.a,{promotedContent:f,userId:M.user.id_str}),isUserProtected:M.user.protected,isUserVerified:M.user.verified,link:{pathname:`/${M.user.screen_name}`,anchorless:!0},onClick:_,onScreenNameClick:_,promotedContent:f,style:Aa.promotedUserCard,userDescription:M.user.description,userId:M.user.id_str,userName:M.user.name,userScreenName:M.user.screen_name})):null));return r.a.createElement($t.b.Provider,{value:this._getFeatureConfigurationContextProviderValue()},r.a.createElement(tt.a,{forwardPivotInfo:a,tweet:S},r.a.createElement(Qt.a,{a11yDomIds:i,actionMenu:v&&k.canUseDOM?v():null,avatar:this._renderAvatar(e.avatar),footer:this._renderFooter(),header:this._renderHeader(e),indents:G,onBlur:u,onFocus:b,onPress:p,testID:we,timestamp:N||this._getUsernameStackedLayoutEnabled()||!P?null:this._renderTweetRelativeTimestamp(e.timestamp),userFollowIndicators:D?r.a.createElement(Yt.a,{type:"superFollower"}):void 0,userLabel:this._renderUserLabel(O,e.userLabel),userName:this._renderUserName(e.username,e.timestamp),userVibe:this._renderVibePill(),withBottomLine:this._getWithBottomLine(),withElbow:G?"side"===W:void 0,withFooterGap:!1,withFullWidthChildren:!0,withTopLine:this._getWithTopLine(),withUnreadStyles:L},j?this._renderPromotedDetails(H):null,m,T,this._renderFocalContent(j,z,l),S.isPreview?r.a.createElement(J,{previewTweetId:S.id_str}):this._renderTweetActions({actionSize:"large",displayStyle:"block",nativeID:e.actionsBar,style:[Aa.actionBarFocalTweet,!w&&Aa.actionBarWithInlineReply],withAnalyticsAction:!1,withCount:!1}),this._renderReaderModeButton(),r.a.createElement(it,{conversationControlLabelNativeID:e.conversationControlLabel,displayStyle:"detail",exclusivityInfoLabelNativeID:e.exclusivityInfoLabel,hideConversationControlsEducationText:!!n,hideExclusivityInfoEducationTextInReplies:!!o,hideTrustedFriendsEducationTextInReplies:!!s,loggedInUser:d,longformNotesLabelNativeID:e.longformNotesLabel,showConversationHeadsUp:C,showLongformNotesLearnMoreBanner:E,trustedFriendsLabelNativeID:e.trustedFriendsLabel,tweet:S}),I?r.a.createElement(c.a,{style:Aa.readerBottomBar,testID:fe}):null)))})):r.a.createElement($t.b.Provider,{value:this._getFeatureConfigurationContextProviderValue()},r.a.createElement(tt.a,{forwardPivotInfo:a,tweet:S},r.a.createElement(Kt.a,{conversationTreeMetadata:t?{ancestorConnector:t.ancestorConnector,depth:t.depth,indents:t.indents}:void 0,link:k.canUseDOM?this._getMaybeRedirectedTweetLink(x,!0):void 0,onBlur:u,onFocus:b,onPress:p,promotedContent:f,quotedTweetTombstoneInfo:y,renderActionMenu:v&&k.canUseDOM?v:_a.a,renderActionsBar:S.isPreview?()=>r.a.createElement(J,{previewTweetId:S.id_str}):e=>r.a.createElement(r.a.Fragment,null,this._renderTweetActions({actionSize:e.actionSize,displayStyle:e.displayStyle,nativeID:e.nativeID,style:e.style,withCount:e.withCount,withAnalyticsAction:!0}),this.props.withReaderModeBottomBar?r.a.createElement(c.a,{style:Aa.readerBottomBar,testID:fe}):null),renderEducation:e=>r.a.createElement(r.a.Fragment,null,z&&r.a.createElement(m.a,{link:`${S.permalink}/quick_promote_web/intro`,onPress:this._getPromoteButtonOnPress(F),style:Aa.promoteButton,type:"primaryOutlined"},this._getPromoteButtonText(F)),r.a.createElement(it,i()({},e,{hideConversationControlsEducationText:!!n,hideExclusivityInfoEducationTextInReplies:!!o,hideTrustedFriendsEducationTextInReplies:!!s,loggedInUser:d,showLongformNotesLearnMoreBanner:E}))),renderHighlightedUserLabel:e=>{var t;return"AutomatedLabel"!==(null==(t=e.label)?void 0:t.userLabelType)||this.context.featureSwitches.isTrue("account_taxonomy_automated_label_enabled")?r.a.createElement(Kt.a.HighlightedUserLabel,e):null},renderPromotedIndicator:e=>r.a.createElement(Kt.a.PromotedIndicator,i()({},e,{withCircleIcon:H})),renderPromotedUserProfileCard:e=>U?r.a.createElement(he.c,{namespace:Ma},r.a.createElement(Kt.a.PromotedUserProfileCard,i()({},e,{followButton:r.a.createElement(R.a,{promotedContent:f,userId:e.userId}),link:{pathname:`/${M.user.screen_name}`,anchorless:!0},onClick:_,onScreenNameClick:_,style:Aa.promotedUserCard}))):null,renderPromotionStatusBadge:V?e=>r.a.createElement(ct,{nativeID:e.nativeID,status:this._getTweetPromotionStatus(F),style:Aa.promotionStatus}):()=>null,renderReplyContext:e=>this._renderReplyContext({nativeID:e.nativeID}),renderRichContent:e=>this._renderRichContent({nativeID:e.nativeID,withRoundMediaCorners:q}),renderSelfThreadCTA:()=>this._renderSelfThreadCTA(),renderSocialContext:e=>this._renderSocialContext({nativeID:e.nativeID}),renderText:e=>this._renderTweetTextHWTweet(e),renderTimestamp:e=>this._renderTweetTimestamp(e),renderTombstone:e=>this._renderTombstoneHWTweet(e),renderUserAvatar:e=>this._renderAvatar(e.nativeID),renderUserName:e=>this._renderUserNameHWTweet(e),renderVibePill:e=>this._renderVibePillHWTweet(e),socialContext:T?{contextType:T.contextType,isSelfRetweet:T.isSelfRetweet,link:T.landingUrl?Object(X.b)(T.landingUrl):void 0,name:T.name,screenName:T.screenName,text:T.text}:void 0,staticLinkConfig:null,testID:we,tweet:S,withBottomLine:this._getWithBottomLine(),withTopLine:this._getWithTopLine(),withUnreadStyles:L})))}_getMaybeRedirectedTweetLink(e,t){const{tweet:a}=this.props,n=this.context.history,i=Vt.a.getOriginalTweet(a);let o="string"==typeof e?{pathname:e,state:{}}:e;if(o&&i.isStaleEdit&&this._isEditTweetConsumptionEnabled()){var r,s;if(!!(null==(r=a.edit_control)||null==(s=r.edit_tweet_ids)||!s.find((e=>n.location.pathname.includes(`/${e}/history`))))){var l,c;const e=Vt.a.getTweetLatestVersionId(i);o={...o,pathname:Vt.a.getTweetLatestVersionPermalink(i),state:{...o.state,focal:null!=(l=o.state)&&l.focal?e:void 0,contextTweetId:null!=(c=o.state)&&c.contextTweetId?e:void 0}}}}return o?{...o,anchorless:t}:void 0}_renderTweetTimestamp(e){const{withTimestamp:t,withTimestampLink:a}=this.props,{link:n,nativeID:o}=e;return t?r.a.createElement(Kt.a.Timestamp,i()({},e,{link:a?this._getMaybeRedirectedTweetLink(n,!1):void 0,nativeID:this._isEdgeToEdgeEnabled?void 0:o})):null}_renderTweetRelativeTimestamp(e){const{promotedContent:t,tweet:a,withTimestampLink:n}=this.props,i=Vt.a.getOriginalTweet(a);return r.a.createElement(Jt.a,{link:n?{pathname:i.permalink,state:{contextTweetId:i.id_str,promotedContent:t}}:void 0,nativeID:e,timestamp:i.created_at})}_getAuthorLabelUserNameColor(){return xa.includes(g.a.theme.primaryColorName)?"blue500":"magenta500"}_shouldRenderAuthorLabel(){const{replyBadge:e,rootTweetAuthorId:t,tweet:a}=this.props,{user:n}=Vt.a.getOriginalTweet(a);return e===de.Author||n.id_str===t}_renderUserNameHWTweet(e){const{onAvatarClick:t,onScreenNameClick:a,tweet:n,withUserHoverCard:o,withUserName:s}=this.props;if(!s)return null;const{user:l}=Vt.a.getOriginalTweet(n),{featureSwitches:c}=this.context,d=this._shouldRenderAuthorLabel()&&c.isTrue("responsive_web_author_labels_handle_label_enabled"),u=d?this._getAuthorLabelUserNameColor():void 0;return r.a.createElement(Kt.a.UserName,i()({},e,{color:u,onAvatarClick:t,onLinkClick:a,onScreenNameClick:a,renderUserNameHighlights:d?()=>r.a.createElement(va,{color:u,name:l.name}):void 0,withHoverCard:o&&!l.blocking,withLink:!!a}))}_renderUserName(e,t){const{isFocal:a,onAvatarClick:n,onScreenNameClick:i,promotedContent:o,tweet:s,withUserHoverCard:l,withUserName:c}=this.props;if(!c)return null;const{user:d}=Vt.a.getOriginalTweet(s),{featureSwitches:u}=this.context,h=Wt.a.isPromoted(o),p=this._shouldRenderAuthorLabel()&&u.isTrue("responsive_web_author_labels_focal_label_enabled"),m=p?this._getAuthorLabelUserNameColor():void 0;return r.a.createElement(Zt.a,{color:m,isProtected:d.protected,isVerified:d.verified,name:d.name,nativeID:e,onAvatarClick:n,onLinkClick:i,onScreenNameClick:i,promotedContent:o,renderUserNameHighlights:p?()=>r.a.createElement(va,{color:m,name:d.name}):void 0,screenName:d.screen_name,screenNameSuffix:h||a||!this._isEdgeToEdgeEnabled?null:this._renderTweetRelativeTimestamp(),userId:null==d?void 0:d.id_str,withHoverCard:l&&!d.blocking,withLink:!!i,withStackedLayout:this._getUsernameStackedLayoutEnabled()})}_renderUserLabel(e,t){const{highlightedLabel:a}=e,n="AutomatedLabel"===(null==a?void 0:a.userLabelType),i=!!n&&this.context.featureSwitches.isTrue("account_taxonomy_automated_label_enabled");return!a||n&&!i?null:r.a.createElement(ea.a,{label:a,nativeID:t})}_renderVibePill(){const{featureSwitches:e}=this.context;if(!e.isTrue("vibe_tweet_context_enabled"))return null;const{tweet:t}=this.props,a=Vt.a.getOriginalTweet(t),{vibeTag:n}=a;return n?r.a.createElement(Kt.a.VibePill,{isActive:n.isAuthorActiveVibe,text:n.vibe.text,verb:n.vibe.verb}):null}_renderVibePillHWTweet(e){return this._isTweetInConversation()?null:r.a.createElement(Kt.a.VibePill,e)}_renderFocalContent(e,t,a){const{onAnalyticsClick:n,tweet:o}=this.props,s=Vt.a.getOriginalTweet(o),{created_at:l,place:d,quick_promote_eligibility:u,source:p,source_name:g}=s,b=null==u?void 0:u.eligibility,_=this.context.featureSwitches.isTrue("responsive_web_reactions_enabled"),f=s.isEdited&&this._isEditTweetConsumptionEnabled(),y=s.isStaleEdit&&this._isEditTweetConsumptionEnabled();return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,{style:Aa.footerContainer},r.a.createElement(c.a,{style:Aa.footerContent},r.a.createElement(ta.a,{linkColor:"gray700",place:d&&d.full_name,placeLink:d&&d.id?`/places/${d.id}`:void 0,renderEditCallout:f?e=>r.a.createElement(aa.a,i()({},e,{link:Vt.a.getTweetEditHistoryRoute(s)})):e=>null,source:p&&g?g:void 0,sourceLink:"https://help.twitter.com/using-twitter/how-to-tweet#source-labels",style:Aa.timeLocSource,timestamp:l,timestampLink:s.permalink}),r.a.createElement(c.a,{style:Aa.footerIcons},this._renderModeratedRepliesIcon(),this._renderBirdwatchNotesIcon())),e?null:this._renderPromotedDetails(),a),y&&r.a.createElement(c.a,{style:[Aa.detailItemContainer,Aa.detailItem]},r.a.createElement(c.a,{style:Aa.staleTweetCallout},r.a.createElement(aa.a,{displayMode:"detailedSentence"})),r.a.createElement(h.b,{link:Vt.a.getTweetLatestVersionPermalink(s),style:Aa.staleEditCalloutLink},La)),r.a.createElement(et,{endControl:t?r.a.createElement(m.a,{link:`${o.permalink}/quick_promote_web/intro`,onPress:this._getPromoteButtonOnPress(b),style:Aa.tweetAnalyticsPromoteButton,type:"primaryFilled"},this._getPromoteButtonText(b)):null,loggedInUserId:this.context.loggedInUserId,onAnalyticsClick:n,tweet:s}),r.a.createElement(Tt,{isNonCompliantTweet:"non_compliant"===s.limited_actions,tweetId:s.id_str,tweetLikeCount:s.favorite_count,tweetPermalink:s.permalink,tweetQuoteTweetCount:s.quote_count,tweetReactionCount:s.reaction_count,tweetRetweetCount:s.retweet_count,withReactions:_}))}_renderFooter(){const{isFocal:e,topic:t,topicFollowPrompt:a}=this.props;return r.a.createElement(r.a.Fragment,null,this._renderSelfThreadCTA(),!e&&t&&a&&this.context.featureSwitches.isTrue("topics_context_controls_inline_prompt_enabled")?ce({defaultRef:this._defaultInlinePromptRef,topic:t,topicFollowPrompt:a}):null)}_renderHeader(e){const{isFocal:t,topic:a,topicFollowPrompt:n}=this.props;return r.a.createElement(r.a.Fragment,null,t&&n&&a&&this.context.featureSwitches.isTrue("topics_context_controls_inline_prompt_enabled")?ce({defaultRef:this._defaultInlinePromptRef,topic:a,topicFollowPrompt:n}):this._renderSocialContext({nativeID:e.socialContext}))}_renderSelfThreadCTA(){const{onSelfThreadClick:e,onSelfThreadImpression:t,tweet:a}=this.props,n=Vt.a.getOriginalTweet(a),i=this._shouldShowSelfThreadWithAvatar();return this._shouldShowSelfThread()?r.a.createElement(pe.a,{avatarUrl:i?n.user.profile_image_url_https:void 0,onClick:e,onImpression:t,style:Aa.selfThreadCTA,to:a.permalink,userName:n.user.screen_name,withConversationLine:i}):null}_shouldShowSelfThread(){const{conversationPosition:e,tweet:t,withSelfThread:a}=this.props,n=Vt.a.getOriginalTweet(t);return a&&!e&&n.self_thread&&!t.isPreview}_shouldShowSelfThreadWithAvatar(){const{shouldSelfThreadIncludeAvatar:e,tweet:t}=this.props,a=Vt.a.getOriginalTweet(t);return this._shouldShowSelfThread()&&e&&!a.in_reply_to_status_id_str}_shouldShowLikedByAuthor(){const{replyBadge:e}=this.props;return e===de.LikedByAuthor&&this.context.featureSwitches.isTrue("responsive_web_like_by_author_enabled")}_getConversationPosition(){return this._shouldShowSelfThreadWithAvatar()?{isStart:!0,isEnd:!1}:this.props.conversationPosition}_getIsConversationStart(){const{tweet:e}=this.props,t=this._getConversationPosition(),a=Vt.a.getOriginalTweet(e);return t&&(t.isStart||!a.in_reply_to_status_id_str)}_getIsQuickPromoteEligible(e){switch(e){case"Eligible":case"EligibleWithPreviousCampaign":return!0;default:return!1}}_getPromoteButtonText(e){switch(e){case"Eligible":return Ra;case"EligibleWithPreviousCampaign":return Pa;default:return Object(ue.a)(new Error(`Tweet promote button should never render when quick promote eligibility is ${e||"null"}`),{level:"warning"}),Ra}}_getTweetPromotionStatus(e){switch(e){case"IneligibleCampaignRunning":return"in-progress";case"IneligibleCampaignPaused":return"paused";default:return Object(ue.a)(new Error(`Tweet promotion badge should never render when quick promote eligibility is ${e||"null"}`),{level:"warning"}),"in-progress"}}_renderSocialContext({nativeID:e}){const{conversationPosition:t,injectedFeedbackItem:a,isFocal:n,onUndoTopicNotInterestedClick:o,promotedContent:l,socialContext:c,socialContextColor:d,topic:u,withSocialContext:h}=this.props;if(!h||!c||Wt.a.isPromoted(l))return null;const{featureSwitches:p}=this.context,m=t&&!this._getIsConversationStart(),{contextType:g,isSelfRetweet:b,landingUrl:_,name:f,screenName:y,text:w,topicContext:v}=c,C=_?Object(X.b)(_):void 0;if(v&&u&&function({featureSwitches:e,isExpanded:t,topic:a,topicContext:n}){return Object(ca.c)(n)&&t&&a.not_interested&&(!(e.getStringValue("topics_context_controls_implicit_variation")in ha)||e.isTrue("topics_context_controls_implicit_context_x_enabled"))}({featureSwitches:p,isExpanded:n,topic:u,topicContext:v}))return r.a.createElement(pa,{onUndoTopicNotInterestedClick:o});const E={contextType:g,iconSize:"large",withLeftPadding:this.context.featureSwitches.isTrue("social_context_and_topic_context_refresh_alignment_enabled")?m||!1:!m&&!n,text:w},T=v&&u?function(e){var t;const{featureSwitches:a,iconSize:n,injectedFeedbackItem:i,isExpanded:o,socialContext:l,topic:c,withLeftPadding:d}=e,{contextType:u,landingUrl:h,topicContext:p}=l,m=h?Object(X.b)(h):void 0,g=p&&Object(ca.b)(p),b=p&&Object(ca.c)(p),_=a.isTrue("media_edge_to_edge_content_enabled"),f=_?ge.a.TextOnly:ge.a.Topic,y=null==i||null==(t=i.markNotInterestedTopic)?void 0:t.onClick,w=p?Object(ra.a)(p):void 0,v=null!=p&&p.bannerText?r.a.createElement(s.a,p.bannerText):l.text;if(g&&a.getStringValue("topics_context_controls_followed_variation")in ha){const e=ha[a.getStringValue("topics_context_controls_followed_variation")];return{iconSize:n,contextType:f,rightControl:r.a.createElement(ma,{bannerText:l.topicContext&&l.topicContext.bannerText,label:e,link:m,linkText:l.topicContext&&l.topicContext.linkText,topic:c}),withBottomBorder:!1,withLeftPadding:!(a.isTrue("social_context_and_topic_context_refresh_alignment_enabled")||_),topicData:w,text:v}}if(b){if(a.getStringValue("topics_context_controls_implicit_variation")in ha){var C;const e=ha[a.getStringValue("topics_context_controls_implicit_variation")];return{iconSize:n,contextType:f,rightControl:r.a.createElement(ma,{bannerText:l.topicContext&&l.topicContext.bannerText,label:e,link:m,linkText:null==(C=l.topicContext)?void 0:C.linkText,onNotInterestedPress:y,topic:c,withRightControl:a.isTrue("topics_context_controls_implicit_context_x_enabled")}),topicData:w,text:v,withBottomBorder:!1,withLeftPadding:!(a.isTrue("social_context_and_topic_context_refresh_alignment_enabled")||_)}}{const e=r.a.createElement(ga,{isExpanded:o,onNotInterestedPress:y,topic:c});return o?{bottomControl:e,contextType:u,iconSize:"xLarge",iconStyle:ba.iconStyle,textColor:"text",textSize:"headline1",text:l.text,topicData:void 0,withBottomBorder:!0,withLeftPadding:d}:{contextType:u,iconSize:n,iconStyle:ba.iconStyle,rightControl:e,topicData:w,text:l.text,withBottomBorder:!0,withLeftPadding:d}}}return{contextType:u,iconSize:n,text:l.text,withLeftPadding:d}}({featureSwitches:p,iconSize:E.iconSize,injectedFeedbackItem:a,isExpanded:n,socialContext:c,topic:u,withLeftPadding:E.withLeftPadding}):E;return r.a.createElement(me.a,i()({},T,{iconColor:d,link:C,nativeID:e,onClick:g===ge.a.Topic?this._handleSocialContextClick:void 0,retweetData:{name:f,screenName:y,isSelfRetweet:b},style:Aa.socialContext,testID:ye,textColor:d,weight:"bold"}))}_renderReplyContext({nativeID:e}){var t;const{conversationPosition:a,conversationTreeMetadata:n,isFocal:i,onReplyContextClick:o,replyContext:s,tweet:l}=this.props,c=Vt.a.getOriginalTweet(l),d=c.self_thread;return this._shouldShowSelfThread()||s!==na.a.ReplyContextTypes.Isolated||!c.in_reply_to_status_id_str||n&&!i||d&&a&&!a.isStart||d&&i?null:r.a.createElement(na.a,{displayTextRange:c.display_text_range,inReplyToName:c.in_reply_to_name,inReplyToScreenName:c.in_reply_to_screen_name,inReplyToStatusIdStr:c.in_reply_to_status_id_str,inReplyToUserIdStr:c.in_reply_to_user_id_str,nativeID:e,onClick:o,style:[Aa.replyContext,i&&Aa.replyContextBig],tweetPermalink:c.permalink,unmentionedUserIds:c.unmentioned_user_ids,userMentionsEntities:null==(t=c.entities)?void 0:t.user_mentions})}_renderReaderModeButton(){const{readerModeAvailable:e,tweet:t}=this.props;return e?r.a.createElement(c.a,{style:Aa.actionBarWithInlineReply},r.a.createElement(ne.a,{focalTweet:t,isExpanded:!0,readerModeAvailable:!!e})):null}_renderTweetActions({actionSize:e,displayStyle:t,nativeID:a,style:n,withAnalyticsAction:i,withCount:o}){const{allowDownvote:s,bookmarkFolderId:l,contextTweet:c,contextualClientEventInfo:d,enableKeyboardShortcuts:u,forwardPivotInfo:h,nudges:p,onLikeSuccess:m,onReplyPress:g,promotedContent:b,socialContext:_,tweet:f,withActionsDisabled:y,withRemoveFromBookmarks:w}=this.props;return this.props.withActions?r.a.createElement(Ke.a,{actionSize:e,allowDownvote:s,bookmarkFolderId:l,contextualClientEventInfo:d,displayStyle:t,enableKeyboardShortcuts:u,forwardPivotInfo:f.softIntervention||h,likeActionIconContainerRef:this._iconContainerRef,nativeID:a,nudges:p,onLikeSuccess:m,onReplyPress:g,promotedContent:b,socialContext:_,style:n,tweet:c||f,withActionsDisabled:y,withAnalyticsAction:i,withCount:o,withRemoveFromBookmarks:w}):null}_renderAvatar(e){const{onAvatarClick:t,onScreenNameClick:a,promotedContent:n,tweet:i,withAvatarLink:o,withUserAvatar:s,withUserHoverCard:l,withUserPresence:c}=this.props,d=Vt.a.getOriginalTweet(i),{user:u}=d,h=Vt.a.getOriginalTweet(i).user.id_str;return s?r.a.createElement(Ht,{avatarRef:this._defaultInlinePromptRef,nativeID:e,onClick:t,onHoverCardScreenNameClick:a,promotedContent:n,screenName:u.screen_name,uri:u.profile_image_url_https,userId:h,withHoverCard:l&&!u.blocking,withLink:o,withNftAvatar:u.has_nft_avatar,withUserPresence:c}):null}_renderTombstoneHWTweet({actionLink:e,actionText:t,children:a,nativeID:n,style:i}){const{conversationTreeMetadata:o,onClick:s}=this.props;return r.a.createElement(c.a,{nativeID:n,style:i},r.a.createElement(Z.a,{actionLink:e,actionText:t,conversationTreeMetadata:o,inline:!0,onClick:s},a))}_renderTombstone(e,t){const{conversationTreeMetadata:a,isFocal:n,onClick:i,tweet:o}=this.props,l=Vt.a.getOriginalTweet(o),{richText:d}=t;return l&&t&&d?r.a.createElement(c.a,{nativeID:e,style:Aa.spacingVertical},r.a.createElement(Z.a,{actionLink:n?void 0:l.permalink,actionText:n?void 0:Sa,conversationTreeMetadata:a,inline:!0,onClick:n?void 0:i},r.a.createElement(s.a,{entities:d.entities,rtl:d.rtl,text:d.text}))):null}_hasPhoto(){const{tweet:e}=this.props,t=Vt.a.getOriginalTweet(e),a=t.extended_entities&&t.extended_entities.media;return!!(a&&a.length>0)&&a.some((e=>"photo"===e.type))}_quoteTweetHasPhoto(){const{tweet:e}=this.props,t=Vt.a.getOriginalTweet(e);return!!(t.quoted_status&&t.quoted_status.entities&&t.quoted_status.entities.media&&t.quoted_status.entities.media.length>0&&t.quoted_status.entities.media.some((e=>"photo"===e.type)))}_renderRichContent({nativeID:e,withRoundMediaCorners:t}){const{featureSwitches:a}=this.context;let{withActionsDisabled:n}=this.props;const{enableKeyboardShortcuts:i,forwardPivotInfo:o,inlineCalloutInfo:s,innerForwardPivotInfo:l,isFocal:c,linkableQuotedTweet:d,onCardLinkClick:u,onMediaClick:h,onQuoteTweetClick:p,preventVideoPlayback:m,promotedContent:g,quoteTweetSocialContextProps:b,quotedTweetTombstoneInfo:_,tweet:f,withAltTextBadge:y,withCardLinks:w,withInlineMedia:v,withUserHoverCard:C}=this.props,E=c?"DETAIL":"TIMELINE",T=(this._hasPhoto()||this._quoteTweetHasPhoto())&&!!zt.b.isDesktopOS()&&!c,x=this.context.featureSwitches.isTrue("responsive_web_reactions_enabled"),S=Vt.a.getOriginalTweet(f);return n=n||Object(Qe.b)(a,S,Qe.a.VoteOnPoll),r.a.createElement(r.a.Fragment,null,r.a.createElement(ia.a,{cardCacheLocationKey:E,displayMediaMetadata:c,enableKeyboardShortcuts:i,forwardPivotInfo:f.softIntervention||o,inlineCalloutInfo:s,innerForwardPivotInfo:l,isMediaMaxHeightEnabled:T,loggedInUserId:this.context.loggedInUserId,mediaAltTranslations:this.state.mediaAltTranslations,mediaCacheLocationKey:E,nativeID:e,onCardLinkClick:u,onMediaClick:h,onQuoteTweetClick:p,preventVideoPlayback:m,promotedContent:g,quoteTweetSingleImageMinAspectRatio:Ta,quoteTweetSocialContextProps:b,quotedTweetTombstoneInfo:_,renderQuoteTweetTombstone:e=>r.a.createElement(ae,e),singleImageMaxAspectRatio:Ea,singleImageMinAspectRatio:c?.1:Ta,style:Aa.richContent,tweet:f,withActionsDisabled:n,withAltTextBadge:y,withCardLinks:w,withCenterCrop:!0,withCondensedQuoteTweet:!c&&Vt.a.hasMedia(S,!v),withMediaTagsIcon:c,withQuoteTweetHeaderLinks:!k.canUseDOM,withQuoteTweetLink:d,withQuoteTweetMedia:v,withReactions:x,withRoundMediaCorners:t,withTweetMedia:v,withUserHoverCard:C}),this._renderBirdwatchPivot())}}Da.contextType=b.a,Da.displayName="Tweet",Da.defaultProps={displayBlocked:!1,isFocal:!1,linkify:!0,onBirdwatchNotesIconClick:j.a,onModeratedIconClick:j.a,onModeratedIconShown:j.a,replyContext:na.a.ReplyContextTypes.Isolated,withActions:!1,withAltTextBadge:!0,withAvatarLink:!0,withBirdwatchPivots:!0,withCardLinks:!1,withInlineMedia:!0,withQuotedTweetLinks:!1,withRemoveFromBookmarks:!1,withSocialContext:!1,withTimestampLink:!0,withUserHoverCard:!0,withUserAvatar:!0,withUserName:!0,withTimestamp:!0};const Aa=g.a.create((e=>({replyContextBig:{marginTop:e.spaces.space12,marginBottom:0},replyContext:{marginBottom:e.spaces.space2},selfThreadCTA:{marginHorizontal:`calc(-1 * ${e.componentDimensions.gutterHorizontal})`},innerRow:{alignItems:"baseline",flexDirection:"row",flexShrink:1},actionBar:{marginTop:e.spaces.space12},actionBarFocalTweet:{borderTopColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:e.borderWidths.small,height:e.spaces.space48},actionsBarNarrow:{minWidth:250,marginRight:"auto"},actionBarWithInlineReply:{borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},promoteButton:{marginTop:e.spaces.space12},tweetAnalyticsPromoteButton:{marginVertical:e.spaces.space8},promotedIndicator:{marginTop:e.spaces.space12},promotedIndicatorBelowHeader:{marginBottom:e.spaces.space8},promotedIndicatorBelowHeaderWithInteractiveHighlights:{marginBottom:e.spaces.space4},promotedDetails:{marginTop:e.spaces.space4},promotionStatus:{marginTop:e.spaces.space12},promotedUserCard:{marginTop:e.spaces.space8},richContent:{marginTop:e.spaces.space12},socialContext:{marginBottom:e.spaces.space4,marginTop:`-${e.spaces.space4}`},spacingVertical:{marginVertical:e.spaces.space4},detailItem:{paddingHorizontal:e.spaces.space4},detailItemContainer:{borderTopColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:e.borderWidths.small,flexDirection:"row",paddingVertical:e.spaces.space16},staleEditCalloutLink:{color:e.colors.blue500},staleTweetCallout:{marginRight:"0.5em"},followTopicButton:{justifyContent:"center"},expandedTweetText:{marginTop:e.spaces.space12},footerContainer:{marginVertical:e.spaces.space16},footerContent:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},footerIcons:{flexDirection:"row"},interactiveHighlightSpacer:{marginTop:e.spaces.space8},edgeToEdgeTextSpacer:{marginTop:e.spaces.space4},readerBottomBar:{borderBottomColor:e.colors.nestedBorderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,marginTop:e.spaces.space20,width:e.spaces.space32},timeLocSource:{marginRight:e.spaces.space12},topicFollowPrompt:{marginBottom:e.spaces.space12,marginTop:`-${e.spaces.space8}`}})));t.b=K(Da)},CDB5:function(e,t,a){"use strict";a.d(t,"m",(function(){return f})),a.d(t,"l",(function(){return w})),a.d(t,"f",(function(){return C})),a.d(t,"d",(function(){return T})),a.d(t,"g",(function(){return x})),a.d(t,"e",(function(){return I})),a.d(t,"i",(function(){return R})),a.d(t,"j",(function(){return P})),a.d(t,"k",(function(){return L})),a.d(t,"h",(function(){return M})),a.d(t,"a",(function(){return A})),a.d(t,"b",(function(){return F})),a.d(t,"c",(function(){return U}));a("kYxP");var n=a("AspN"),i=a("xPna"),o=a("oEOe"),r=a("xCUF"),s=a("ude7"),l=a("07FG"),c=a("Ssj5"),d=a("fEA7"),u=a.n(d),h=a("uKEd"),p=a("lnti"),m=a("/NU0");const g="dmComposer",b={};const _=e=>{const{conversation_id:t,id:a,localMediaId:n,recipient_ids:i,sender_id:o,text:r,attachment:s={},error:l}=e,c=Date.now().toString();return{conversation_id:t,recipient_ids:i,error:l,id:a,is_draft:!0,message_data:{attachment:s,localMediaId:n,sender_id:o,text:r,time:c},type:"message",time:c}},f=e=>(t,a,{api:c})=>{const{senderId:d,cardUrl:g,conversationId:b,localMediaId:f,recipients:y=[],requestId:w=u.a.v1(),tweetAttachment:v,quickReply:C,text:E}=e||{};t(H(b));const x=a();let S=f||k(a(),b);null===S&&(S=[]);const[I]=n.k(x,S),{mediaFile:R,mediaMetadata:P}=I||{},L=y.length>0&&y.join(","),D={};R&&R.isGif?D.extraInitParams="&media_category=dm_gif":R&&R.isVideo&&(D.extraInitParams="&media_category=dm_video");const A=n.p(S,D),O=[t(A)],F=M(x,b),{found_media_origin:B}=F||{};return R&&R.isGif&&O.push(Object(s.a)(R)),Promise.all(O).then((([[a],s])=>{const u=(null==P?void 0:P.altText)||(null==P?void 0:P.defaultAltText)||"",f=!!u;return(a&&(B||f)?t(n.m({media_id:a.uploadId,found_media_origin:B,...!!f&&{alt_text:{text:u||""}}})):Promise.resolve()).then((()=>{const{id_str:n}=v||{},u={};if(a){const{mediaFile:e={}}=a,t={original_info:{width:e.width,height:e.height},sizes:[{h:e.height,w:e.width,resize:"fit"}]};e.isImage?u.photo={...t,media_url_https:e.url}:e.isGif?u.animated_gif={...t,media_url_https:s,type:"animated_gif"}:e.isVideo&&(u.video={...t,media_url_https:e.url,type:"video"})}else v&&(u.tweet={status:n});const{uploadId:f}=a||{},y=_({attachment:u,conversation_id:b,error:!1,id:w,localMediaId:null,recipient_ids:L,sender_id:d,text:E}),x={...Object(l.a)(g)&&{card_uri:g},conversation_id:b,...!n&&{media_id:f},recipient_ids:L,request_id:w,text:e.text,tweet_id:n};C&&(x["quick_reply_response[options][id]"]=C.id,x["quick_reply_response[options][selected_id]"]=C.selected_id);const I=Object(p.a)([V(b),{type:r.c.REQUEST},{type:"rweb/dmComposer/SEND_MESSAGE_REQUEST"},b&&Object(h.b)(b,w,y)]);return t(I),c.DirectMessages.sendMessage(x).then((a=>{const{cards:n,entries:o,tweets:s,users:l}=a.entities,{conversations:c}=a.result;Object(m.a)(S)&&t(U(b,S));const d=Object(p.a)([{type:r.c.SUCCESS},...Object(i.a)({conversations:c,entries:o,users:l,tweets:s,cards:n}),{type:"rweb/dmComposer/SEND_MESSAGE_SUCCESS"},b&&Object(h.j)(b,w,e),T(b)]);return t(d),Promise.resolve(Object.values(a.entities.entries)[0].conversation_id)}),(e=>{const a=_({attachment:u,conversation_id:b,error:!0,id:w,localMediaId:S,recipient_ids:L,sender_id:d,text:E}),n=Object(p.a)([{type:r.c.SUCCESS},{type:"rweb/dmComposer/SEND_MESSAGE_FAILURE"},b&&Object(h.b)(b,w,a)]);return t(n),Object(o.e)(t,e,"ACTION_SEND_DM")}))}),(e=>(t(G(b)),e.type="metadata",Promise.reject(e))))}),(e=>(t(Object(p.a)([Object(m.a)(S)&&U(b,S),G(b)])),Promise.reject(e))))},y=(e,t)=>e.dmComposer[t],w=(e,t)=>{const a=y(e,t);return a?a.text:null},v="rweb/dmComposer/SAVE_TEXT",C=(e,t)=>({type:v,conversationId:e,text:t}),E="rweb/dmComposer/REMOVE_TEXT",T=e=>({type:E,conversationId:e}),x=(e,t)=>{const a=y(e,t);return a?a.cardUrl:null},S="rweb/dmComposer/SAVE_CARD_URL",I=(e,t)=>({type:S,conversationId:e,cardUrl:t}),k=(e,t)=>{const a=y(e,t);return a&&void 0!==a.mediaId?a.mediaId:null},R=(e,t)=>{const a=n.k(e,k(e,t)||[]);return a.length>0?a[0]:null},P=(e,t)=>{const a=y(e,t);return!!a&&a.isUploading},L=(e,t)=>n.l(e,k(e,t)||0),M=(e,t)=>{const a=y(e,t);return a&&a.gifMetadata?a.gifMetadata:null},D="rweb/dmComposer/ADD_MEDIA",A=(e,[t],a)=>({payload:{isUploading:!1,mediaId:t,gifMetadata:a},type:D,conversationId:e}),O="rweb/dmComposer/CANCEL_UPLOAD",F=e=>({type:O,conversationId:e}),B="rweb/dmComposer/REMOVE_MEDIA",N=e=>({type:B,conversationId:e}),U=(e,t)=>a=>{a(n.i(t)),a([F(e),N(e)])},j="rweb/dmComposer/UPLOAD_REQUEST",H=e=>({type:j,conversationId:e}),z="rweb/dmComposer/UPLOAD_SUCCESS",V=e=>({type:z,conversationId:e}),W="rweb/dmComposer/UPLOAD_FAILURE",G=e=>({type:W,conversationId:e});c.a.register({[g]:function(e=b,t){const a=t.conversationId||"new_group",n=e[a]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaId:null,text:null};switch(t.type){case D:return{...e,[a]:{...n,...t.payload}};case j:return{...e,[a]:{...n,isUploading:!0}};case O:return{...e,[a]:{...n,isUploading:!1}};case W:case z:case B:return{...e,[a]:{...n,isUploading:!1,mediaId:null,gifMetadata:void 0}};case v:return{...e,[a]:{...n,text:t.text}};case S:return{...e,[a]:{...n,cardUrl:t.cardUrl}};case E:return{...e,[a]:{...n,text:null}};default:return e}}})},"Coc+":function(e,t,a){var n=a("6QIk");e.exports=function(e){return n(this.__data__,e)>-1}},DVtB:function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return h})),a.d(t,"c",(function(){return p}));a("kYxP");var n=a("oEOe"),i=a("kGix"),o=a("Ssj5");const r="trustedFriends",s=Object.freeze({REQUEST:"rweb/trustedFriendsLists/FETCH_TRUSTED_FRIENDS_LISTS_REQUEST",SUCCESS:"rweb/trustedFriendsLists/FETCH_TRUSTED_FRIENDS_LISTS_SUCCESS",FAILURE:"rweb/trustedFriendsLists/FETCH_TRUSTED_FRIENDS_LISTS_FAILURE"}),l=Object.freeze({REQUEST:"rweb/trustedFriendsLists/CREATE_TRUSTED_FRIENDS_LIST_REQUEST",SUCCESS:"rweb/trustedFriendsLists/CREATE_TRUSTED_FRIENDS_LIST_SUCCESS",FAILURE:"rweb/trustedFriendsLists/CREATE_TRUSTED_FRIENDS_LIST_FAILURE"}),c="rweb/trustedFriendsLists/SET_TRUSTED_FRIENDS_LIST",d=e=>e.trustedFriends.lists,u=()=>(e,t,{api:a})=>n.b(e,{request:a.TrustedFriends.createTrustedFriendsList})({actionTypes:l,context:"CREATE_TRUSTED_FRIENDS_LIST"}),h=()=>(e,t)=>{const a=t(),i=d(a);(i.length?i[0]:void 0)||e(((e,t,{api:a})=>n.b(e,{request:a.TrustedFriends.fetchAuthenticatedUserTFLists})({actionTypes:s,context:"FETCH_TRUSTED_FRIENDS_LISTS"}))).then((t=>{!t.authenticated_user_trusted_friends_lists.length&&u&&e(u())}))},p=e=>(t,a)=>{const n=a(),[i]=d(n);if(i){const a={...i,member_count:e};t({payload:a,type:c})}},m=Object.freeze({lists:[],fetchStatus:i.a.NONE});o.a.register({[r]:function(e=m,t){switch(t.type){case s.REQUEST:return{...e,fetchStatus:i.a.LOADING};case s.FAILURE:return{...e,error:t.payload,fetchStatus:i.a.FAILED};case s.SUCCESS:if(t.payload)return{...e,lists:t.payload.authenticated_user_trusted_friends_lists,error:null,fetchStatus:i.a.LOADED};break;case l.REQUEST:return{...e,fetchStatus:i.a.LOADING};case l.FAILURE:return{...e,error:t.payload,fetchStatus:i.a.FAILED};case l.SUCCESS:if(t.payload)return{...e,lists:[t.payload.trusted_friends_list_create],error:null,fetchStatus:i.a.LOADED};break;case c:if(t.payload)return{...e,lists:[t.payload]};break;default:return e}return e}})},Dhk8:function(e,t,a){var n=a("Syyo"),i=a("KCLV"),o=a("kHoZ"),r=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?i(e):o(e)}},Drq4:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),o=a("Lsrn"),r=a("k/Ka");const s=(e={})=>Object(r.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("circle",{cx:"12",cy:"6.674",r:"1.889"}),i.a.createElement("path",{d:"M9.828 14.817l-1.62 3.342c-.138.41.083.857.495.995s.858-.083.996-.495l1.602-3.176c.28-.557 1.076-.556 1.356 0l1.608 3.195c.138.41.584.632.996.494.412-.138.633-.584.495-.996l-1.62-3.342.032.07-.123-.262c-.483-1.027-.535-2.19-.16-3.24.106-.302.392-.505.712-.505h2.032c.434 0 .786-.353.786-.787 0-.434-.352-.786-.786-.786H7.37c-.435 0-.787.352-.787.786 0 .434.352.786.786.786h1.985c.32 0 .606.2.713.503.374 1.05.323 2.214-.158 3.24l-.125.263"}),i.a.createElement("path",{d:"M12 22.75C6.072 22.75 1.25 17.928 1.25 12S6.072 1.25 12 1.25 22.75 6.072 22.75 12 17.928 22.75 12 22.75zm0-20C6.9 2.75 2.75 6.9 2.75 12S6.9 21.25 12 21.25s9.25-4.15 9.25-9.25S17.1 2.75 12 2.75z"})));s.metadata={width:24,height:24},t.a=s},DuXo:function(e,t){e.exports=function(e,t,a,n){for(var i=e.length,o=a+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},EeFI:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),o=a("ERkP"),r=a.n(o),s=a("3XMw"),l=a.n(s),c=a("MWbm"),d=a("Qwev"),u=a("21U8"),h=a("rHpw"),p=a("1auM"),m=a("eYns");const g=l.a.gff1f69e;class b extends r.a.Component{constructor(e){super(e),this.state={orientedImage:null}}componentDidMount(){const{media:e}=this.props,{originalMediaFile:t={}}=e||{};t&&t instanceof p.a&&Object(m.b)(t).then((e=>new p.a(e).withDimensionsAndOrientation().then((e=>{this.setState({orientedImage:e})}))))}render(){return this.state.orientedImage?this._renderCropper():r.a.createElement(d.a,{accessibilityLabel:g,style:_.activityIndicator})}_renderCropper(){const{cropperRef:e,defaultAspectRatio:t,defaultCropData:a,media:n,withAspectRatioOptions:i,withZoomControl:o}=this.props,{orientedImage:s}=this.state,{cropData:l,originalMediaFile:d={}}=n||{};return s?r.a.createElement(c.a,{style:_.cropper},r.a.createElement(u.a,{circle:this.props.circle,defaultAspectRatio:a&&a.aspectRatio||l&&l.aspectRatio||t,defaultCropData:a||l,image:{src:s.url,width:d.width,height:d.height},ref:e,withAspectRatioOptions:i,withZoomControl:o})):null}}const _=h.a.create((e=>({cropper:{backgroundColor:e.colors.navigationBackground,flexGrow:1},activityIndicator:{flexGrow:1}})));t.a=r.a.forwardRef(((e,t)=>r.a.createElement(b,i()({},e,{cropperRef:t}))))},G31s:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("ERkP"),i=a.n(n),o=a("pKoL"),r=a("MWbm"),s=a("rHpw"),l=a("ZvMt"),c=a("9Xij"),d=a("v6aA");class u extends i.a.Component{render(){const{media:e,style:t}=this.props;return i.a.createElement(r.a,{style:t},this._renderImageGroup(e.length))}_renderImageGroup(e){switch(e){case 1:return this._renderGroupOf1();case 2:return this._renderGroupOf2();case 3:return this._renderGroupOf3();case 4:return this._renderGroupOf4();default:return null}}_renderGroupOf1(){const{media:e}=this.props,t=e&&!!e[0].mediaFile,{height:a,width:n}=e&&!t&&e[0].externalMediaDetails||{};let o=s.a.theme.aspectRatios.landscape;if(t){var d,u;const t=s.a.theme.aspectRatios.minTimelineImage,a=s.a.theme.aspectRatios.maxTimelineImage;o=l.a.getImageAspectRatio(t,a,{width:null==(d=e[0].mediaFile)?void 0:d.width,height:null==(u=e[0].mediaFile)?void 0:u.height})}return i.a.createElement(c.a,{ratio:t?o:n/a},i.a.createElement(r.a,{style:h.mediaPreviewWrapper},this._renderMediaAtIndex(0)))}_renderGroupOf2(){return i.a.createElement(c.a,{ratio:s.a.theme.aspectRatios.landscape},i.a.createElement(r.a,{style:h.mediaPreviewWrapper},this._renderMediaAtIndex(0,h.gutterRight),this._renderMediaAtIndex(1)))}_renderGroupOf3(){return i.a.createElement(c.a,{ratio:s.a.theme.aspectRatios.landscape},i.a.createElement(r.a,{style:h.mediaPreviewWrapper},this._renderMediaAtIndex(0,h.gutterRight),this._renderColumnWithIndices([1,2])))}_renderGroupOf4(){return i.a.createElement(c.a,{ratio:s.a.theme.aspectRatios.landscape},i.a.createElement(r.a,{style:h.mediaPreviewWrapper},this._renderColumnWithIndices([0,2],h.gutterRight),this._renderColumnWithIndices([1,3])))}_renderColumnWithIndices(e,t){return i.a.createElement(r.a,{style:[h.column,t]},this._renderMediaAtIndex(e[0],h.gutterBottom),this._renderMediaAtIndex(e[1]))}_renderMediaAtIndex(e,t){var a,n,r,s;const{editable:l,isActive:c,media:d,onClickMedia:u,onEditMedia:p,onEditSensitiveWarning:m,onRemoveMedia:g,onSetMediaPreviewRef:b}=this.props,_=d[e],f=null==(a=_.mediaMetadata)?void 0:a.altText,y=null==(n=_.mediaMetadata)?void 0:n.defaultAltText,w=!(null==(r=_.mediaMetadata)||null==(s=r.sensitiveMediaWarning)||!s.size),v=p&&l&&c,C=v&&w&&!!m;return i.a.createElement(o.a,{accessibilityLabel:f||y,accessibilityRole:"group",enableGif:c,key:_.id,mediaItem:_,onClick:u?u(_.id):void 0,onEdit:p?p(_.id):void 0,onEditSensitiveWarning:m&&C?m(_.id):void 0,onRemove:g(_.id),ref:b,style:[h.mediaContainer,t],withAltTextLabel:!!f,withCloseButton:l&&c,withEditButton:v,withEditSensitiveWarningButton:C})}}u.contextType=d.a;const h=s.a.create((e=>({column:{flexDirection:"column",flexGrow:1,flexBasis:0},gutterRight:{marginRight:e.spaces.space12},gutterBottom:{marginBottom:e.spaces.space12},mediaContainer:{borderRadius:e.borderRadii.xLarge,transitionProperty:"width",transitionDuration:"0.1s",transitionTimingFunction:"ease-out",overflow:"hidden",flexGrow:1,flexBasis:0},mediaPreviewWrapper:{flexDirection:"row",height:"100%",width:"100%"}})))},GTeL:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),o=a("3XMw"),r=a.n(o),s=a("pKoL"),l=a("Qwev"),c=a("rHpw"),d=a("U+bB"),u=a("MWbm");const h=r.a.gff1f69e;const p=c.a.create((e=>({activityIndicator:{height:"100%",width:"100%"},image:{width:"100%",flexGrow:1},mediaContainer:{overflow:"hidden",flexGrow:1,flexBasis:0,width:"100%"},mediaPreviewWrapper:{flexDirection:"column",flexGrow:1,alignItems:"center",width:"100%",paddingVertical:25,paddingHorizontal:25,backgroundColor:e.colors.gray0}})));t.a=function({mediaItem:e,orientedImage:t}){return i.a.createElement(u.a,{style:p.mediaPreviewWrapper},void 0===t&&e?i.a.createElement(s.a,{imageResizeMode:"contain",mediaItem:e,style:p.mediaContainer,withCloseButton:!1}):t?i.a.createElement(d.a,{resizeMode:"contain",source:t.url,style:p.image}):i.a.createElement(l.a,{accessibilityLabel:h,style:p.activityIndicator}))}},H87J:function(e,t){e.exports=function(e,t){for(var a=-1,n=null==e?0:e.length,i=Array(n);++a<n;)i[a]=t(e[a],a,e);return i}},IBsm:function(e,t,a){var n=a("e93E"),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();e.exports=o},"IMA+":function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),o=(a("kYxP"),a("SV7d")),r=a("ERkP"),s=a.n(r),l=a("TIdA"),c=a("t62R"),d=a("5mJL"),u=a("DNho"),h=a("nBUg"),p=a("qjak"),m=a("ir4X"),g=a("htQn"),b=a("e5HP"),_=a("FBXD"),f=a("Nqmc"),y=a("rHpw"),w=a("oSwX"),v=a("1I0O"),C=a("pBrB"),E=a("jV+4"),T=a("MWbm");const x=Object.freeze({TWEET:"tweets",USER:"users"}),S=Object.freeze({UserCompact:"UserCompact",UserConcise:"UserConcise",UserDetailed:"UserDetailed",ExperimentalUserTypeahead:"ExperimentalUserTypeahead"}),I=l.a.createLayoutCache(),k={viewType:"user_cell"};class R extends s.a.PureComponent{constructor(...e){super(...e),this._renderUserName=()=>{const{badgeContext:e,disabledMessage:t,displayNameLabel:a,isBlocking:n,isDisabled:i,isFollowedBy:o,isProtected:r,isVerified:l,name:d,onScreenNameClick:u,promotedContent:h,promotedItemType:p,screenName:m,screenNameSuffix:g,translatorType:b,withFollowsYou:_,withLink:f}=this.props,y=s.a.createElement(E.a,{badgeContext:e,displayNameLabel:a,isProtected:r,isVerified:l,name:d,onLinkClick:u,promotedContent:p===x.TWEET?h:void 0,screenName:m,screenNameSuffix:g,translatorType:b,withFollowsYou:_&&o,withHoverCard:!n&&!i&&f,withLink:!i&&f,withScreenName:!t,withStackedLayout:!0});return t?s.a.createElement(T.a,{style:P.disabledMessageContainer},y,s.a.createElement(c.b,{color:"gray700"},t)):y},this._renderSocialContext=()=>{const{avatarSize:e,displayMode:t,socialContext:a}=this.props;return a?s.a.createElement(h.b.UseProps,null,(n=>s.a.createElement(f.a,{avatarSize:e,contextType:a.contextType,iconSize:"large",link:a.link,style:P.socialContext,text:a.text,weight:"bold",withLeftPadding:!n.socialContextRefreshEnabled()&&t!==S.ExperimentalUserTypeahead}))):null},this._renderUserTypeaheadSocialContext=()=>{const{socialContext:e}=this.props,{Icon:t,text:a}=e&&Object(p.a)({link:e.link,text:e.text,iconSize:"small",contextType:e.contextType})||{};return e?s.a.createElement(T.a,{style:P.userTypeaheadSocialContext},s.a.createElement(T.a,{style:P.userTypeaheadSocialContextIcon},t),s.a.createElement(c.b,{color:"gray700",numberOfLines:1,style:P.userTypeaheadSocialContextText},a)):null},this._renderHighlightedUserLabel=()=>{const{highlightedLabel:e}=this.props;return e?s.a.createElement(m.a,{label:e}):null},this._isEligibleForBio=()=>{const{displayMode:e}=this.props;return-1!==[S.UserDetailed,S.UserConcise].indexOf(e)},this._handleKeyPress=e=>{e.defaultPrevented||"Enter"!==e.key||this._handleClick(e)},this._handleClick=Object(_.a)((e=>{const{onCellClick:t}=this.props;e.preventDefault(),t&&t()}))}render(){const{accessibilityLabel:e,accessibilityState:t,avatarDecoration:a,avatarSize:n,avatarUri:r,bottomControl:l,decoration:c,displayMode:h,isBlocking:p,isDisabled:m,onAvatarClick:_,onCellClick:f,onScreenNameClick:y,presenceIndicator:C,promotedContent:E,promotedItemType:R,screenName:L,style:M,testID:D,userId:A,withDarkerInteractiveBackground:O,withInteractiveStyling:F,withLink:B,withUsernameCenterAligned:N}=this.props,U=B&&!p,j=h===S.UserCompact||N,H=h===S.ExperimentalUserTypeahead,z=E&&R===x.USER&&"earned"!==(E.disclosure_type&&E.disclosure_type.toLowerCase())?s.a.createElement(b.a,{contentAuthorId:A,promotedContent:E,style:P.promotedIndicator}):null,V={accessibilityHidden:!0,decoration:a,focusable:!1,imageLayoutCache:I,onClick:_,onHoverCardScreenNameClick:y,promotedContent:E,screenName:L,style:P.avatar,uri:r,withHoverCard:U,withLink:B},W=s.a.createElement(u.a.Consumer,null,(({avatarSize:e})=>C?s.a.createElement(v.a,i()({},V,C,{size:e})):s.a.createElement(w.default,i()({size:e},V)))),G=t&&"boolean"==typeof t.checked,q=void 0!==f,$=(G?"radio":q&&"button")||"listitem",K=this._renderUserName(),X=this._renderHighlightedUserLabel(),Q=this._renderBio(),Y=X||Q||z||l,J=s.a.createElement(s.a.Fragment,null,X,Q,z,l?s.a.createElement(T.a,{style:P.bottomControl},l):null);return s.a.createElement(o.a,{behavioralEventContext:k},s.a.createElement(g.a,{accessibilityLabel:e,accessibilityRole:$,accessibilityState:t,disabled:!!m,focusable:G||q,onClick:this._handleClick,onKeyPress:this._handleKeyPress,pointerEvents:m?"none":void 0,style:[P.root,M],testID:D,withDarkerInteractiveBackground:O,withInteractiveStyling:null!=F?F:!!f},H?null:this._renderSocialContext(),s.a.createElement(d.a,{avatarCell:W,avatarCellStyle:[P.avatarColumn,j&&P.bodyColumnCentered],avatarSize:H?"xxxLarge":n,cellStyle:[P.bodyColumn,j&&P.bodyColumnCentered]},s.a.createElement(T.a,{style:P.body},K,c),j?null:J,H?this._renderUserTypeaheadSocialContext():null),Y&&j?s.a.createElement(d.a,{avatarCell:null,avatarCellStyle:P.avatarColumn,cellStyle:P.bodyColumn},J):null))}_renderBio(){const{description:e,displayMode:t,entities:a,userId:n,withheldDescription:i,withheldEntities:o}=this.props;return a&&e&&this._isEligibleForBio()?s.a.createElement(C.a,{description:e,entities:a,isConcise:t===S.UserConcise,style:P.bio,userId:n,withheldDescription:i,withheldEntities:o}):null}}R.defaultProps={testID:"UserCell",withLink:!0};const P=y.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},avatarColumn:{justifyContent:"flex-start"},bodyColumn:{flexGrow:1},bodyColumnCentered:{justifyContent:"center"},avatar:{display:"block",width:"100%"},bio:{paddingTop:e.spaces.space4,whiteSpace:"normal"},socialContext:{marginBottom:e.spaces.space4},userTypeaheadSocialContext:{alignItems:"center",flexDirection:"row",textColor:e.colors.gray700},userTypeaheadSocialContextIcon:{flexShrink:0},userTypeaheadSocialContextText:{paddingLeft:e.spaces.space2},body:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},promotedIndicator:{margin:0,paddingTop:e.spaces.space4,paddingBottom:0,paddingHorizontal:0},bottomControl:{paddingTop:e.spaces.space4},disabledMessageContainer:{flexShrink:1}})));t.a=R},"JBn+":function(e,t,a){var n=a("hyzI"),i=a("qjF7"),o=a("cEmw");function r(e){var t=-1,a=null==e?0:e.length;for(this.__data__=new n;++t<a;)this.add(e[t])}r.prototype.add=r.prototype.push=i,r.prototype.has=o,e.exports=r},JFx8:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),o=a("Lsrn"),r=a("k/Ka");const s=(e={})=>Object(r.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.a.root,e.style],viewBox:"0 0 158 20"},i.a.createElement("g",null,i.a.createElement("path",{d:"M1.29 9.333v3.992H0V4.31h3.412c.876 0 1.443.22 1.88.593.54.464.89 1.147.89 1.92 0 .772-.35 1.454-.89 1.918-.437.375-1.004.593-1.88.593H1.29M3.35 8.11c.618 0 .953-.155 1.185-.4.22-.23.36-.54.36-.888s-.142-.657-.36-.888c-.232-.245-.567-.4-1.185-.4H1.29V8.11h2.06zm6.155-.966c1.79 0 3.13 1.352 3.13 3.155 0 1.802-1.34 3.154-3.13 3.154-1.79 0-3.13-1.352-3.13-3.155 0-1.803 1.34-3.156 3.13-3.156m0 5.152c1.12 0 1.906-.89 1.906-1.996 0-1.108-.785-1.996-1.905-1.996S7.6 9.192 7.6 10.3c0 1.107.784 1.996 1.905 1.996zm9.025-5.021l1.662 4.134 1.66-4.134h1.263l-2.46 6.053h-.85l-1.7-4.25-1.7 4.25h-.85l-2.458-6.053h1.262l1.66 4.134 1.66-4.134h.85m6.091 3.284c.065 1.017.903 1.83 1.958 1.83.902 0 1.39-.44 1.738-.825l.8.76c-.452.58-1.315 1.133-2.55 1.133-1.765 0-3.13-1.34-3.13-3.155 0-1.816 1.236-3.155 2.95-3.155 1.686 0 2.91 1.365 2.91 3.155 0 .05 0 .142-.013.258H24.62m.104-1.03h3.297c-.18-.774-.875-1.315-1.596-1.315-.786 0-1.494.528-1.7 1.314zm9.066-1.173c-.143-.04-.284-.052-.477-.052-.63 0-1.3.438-1.636 1.018v4.006h-1.223V7.273h1.185v.695c.295-.412.926-.824 1.815-.824.13 0 .335.013.476.04l-.14 1.17m1.647 2.203c.064 1.017.902 1.83 1.957 1.83.902 0 1.39-.44 1.738-.825l.8.76c-.452.58-1.314 1.133-2.55 1.133-1.765 0-3.13-1.34-3.13-3.155 0-1.816 1.236-3.155 2.95-3.155 1.686 0 2.91 1.365 2.91 3.155 0 .05 0 .142-.013.258h-4.663m.103-1.03h3.297c-.18-.774-.876-1.315-1.597-1.315-.786 0-1.494.528-1.7 1.314zm10.534 3.244c-.49.438-1.146.682-1.867.682-.54 0-1.108-.154-1.52-.4-.915-.54-1.545-1.544-1.545-2.755 0-1.212.645-2.23 1.56-2.77.41-.245.913-.386 1.48-.386.657 0 1.314.206 1.854.657V4.183h1.223v9.143h-1.185v-.553m-.038-3.606c-.373-.49-.992-.863-1.726-.863-1.172 0-1.945.94-1.945 1.996 0 1.08.837 1.995 2.01 1.995.617 0 1.248-.31 1.66-.863V9.166zm7.815 4.159h-1.185V4.182h1.224v3.62c.54-.452 1.196-.658 1.853-.658.567 0 1.07.142 1.48.386.915.54 1.56 1.558 1.56 2.77 0 1.21-.632 2.214-1.546 2.755-.412.245-.98.4-1.52.4-.72 0-1.378-.245-1.867-.683v.554m.04-1.893c.41.554 1.042.863 1.66.863 1.172 0 2.01-.914 2.01-1.996 0-1.056-.773-1.996-1.946-1.996-.734 0-1.352.374-1.725.863v2.266zm6.296 4.983l1.635-3.72-2.588-5.423h1.313l1.893 3.992 1.74-3.992h1.287l-3.98 9.143h-1.3m39.407-8.563v1.223H96.63v4.25h-1.288V4.31h5.15v1.225H96.63v2.318h2.962m4.223-.709c1.79 0 3.13 1.352 3.13 3.155 0 1.802-1.34 3.154-3.13 3.154-1.79 0-3.13-1.352-3.13-3.155 0-1.803 1.34-3.156 3.13-3.156m0 5.152c1.12 0 1.906-.89 1.906-1.996 0-1.108-.784-1.996-1.905-1.996-1.12 0-1.906.89-1.906 1.996 0 1.107.785 1.996 1.905 1.996zm4.841.143c-.374-.464-.554-1.056-.554-2.073v-3.09h1.223v3.283c0 .618.13.953.348 1.21.27.322.708.528 1.172.528.747 0 1.352-.45 1.7-.863v-4.16h1.223v6.052h-1.185v-.554c-.27.258-.94.682-1.777.682-.862.002-1.648-.384-2.15-1.015m10.25-4.082c-.142-.04-.283-.052-.476-.052-.63 0-1.3.438-1.636 1.018v4.006h-1.223V7.273h1.186v.695c.297-.412.927-.824 1.816-.824.13 0 .335.013.477.04l-.144 1.17m1.48 3.362c.567.438 1.185.67 1.79.67.528 0 1.056-.283 1.056-.76 0-.695-1.005-.734-1.893-1.03-.735-.244-1.392-.708-1.392-1.558 0-1.3 1.16-1.893 2.24-1.893.89 0 1.533.283 2.01.67l-.63.876c-.374-.282-.812-.475-1.302-.475-.592 0-1.095.283-1.095.76 0 .412.477.554 1.083.708.953.245 2.202.67 2.202 1.92 0 1.145-1.07 1.853-2.254 1.853-.965 0-1.776-.296-2.446-.837l.632-.904m8.228 1.738c-.54 0-1.108-.154-1.52-.4-.914-.54-1.545-1.544-1.545-2.755 0-1.212.644-2.23 1.558-2.77.412-.245.914-.386 1.48-.386.684 0 1.34.206 1.894.682v-.553h1.185v9.143h-1.224v-3.62c-.49.427-1.107.658-1.828.658m1.828-4.288c-.373-.49-.99-.863-1.726-.863-1.172 0-1.944.94-1.944 1.996 0 1.08.837 1.995 2.01 1.995.617 0 1.248-.31 1.66-.863V9.166zm3.45 3.272c-.374-.464-.554-1.056-.554-2.073v-3.09h1.223v3.283c0 .618.128.953.347 1.21.27.322.708.528 1.172.528.747 0 1.352-.45 1.7-.863v-4.16h1.223v6.052h-1.185v-.554c-.27.258-.94.682-1.777.682-.862.002-1.647-.384-2.15-1.015m11.333.335c-.49.438-1.146.682-1.867.682-.54 0-1.107-.154-1.52-.4-.914-.54-1.545-1.544-1.545-2.755 0-1.212.644-2.23 1.558-2.77.413-.245.916-.386 1.482-.386.683 0 1.34.206 1.893.682v-.553h1.185v6.052h-1.185v-.553m-.04-3.606c-.372-.49-.99-.863-1.724-.863-1.17 0-1.944.94-1.944 1.996 0 1.08.837 1.995 2.01 1.995.617 0 1.248-.31 1.66-.863V9.166zm6.232-.81c-.142-.04-.283-.052-.476-.052-.63 0-1.3.438-1.636 1.018v4.006h-1.223V7.273h1.185v.695c.297-.412.927-.824 1.816-.824.13 0 .335.013.477.04l-.142 1.17m1.905 2.203c.065 1.017.902 1.83 1.957 1.83.903 0 1.392-.44 1.74-.825l.797.76c-.45.58-1.313 1.133-2.55 1.133-1.764 0-3.13-1.34-3.13-3.155 0-1.816 1.237-3.155 2.95-3.155 1.687 0 2.91 1.365 2.91 3.155 0 .05 0 .142-.013.258h-4.66m.102-1.03h3.297c-.18-.774-.876-1.315-1.597-1.315-.785 0-1.493.528-1.7 1.314zM86.48 0H75.813C74.34 0 73.91 1.107 73.91 1.805v16.947c0 .786.42 1.077.658 1.173.237.097.892.177 1.284-.276 0 0 5.105-5.863 5.188-5.954.08-.09.17-.092.22-.092h3.234c1.37 0 1.59-.992 1.732-1.567.12-.48 1.455-7.32 1.9-9.488C88.466.89 88.046 0 86.48 0m-.254 12.037c.12-.48 1.455-7.32 1.9-9.488m-2.275.337l-.447 2.333c-.053.253-.302.49-.596.49l-4.156-.005c-.467 0-.87.352-.87.82v.508c0 .467.38.85.85.85h3.524c.33 0 .608.31.537.663-.07.353-.438 2.216-.48 2.41-.04.192-.246.454-.576.454h-2.878c-.598.02-.726.023-1.077.46-.352.435-3.506 4.222-3.506 4.222-.03.037-.062.026-.062-.014V2.852c0-.298.26-.648.648-.648h8.56c.317 0 .61.296.53.683z"})));s.metadata={width:158,height:20},t.a=s},JNqh:function(e,t,a){var n=a("6UKJ");e.exports=function(e,t){var a=e.__data__;return n(t)?a["string"==typeof t?"string":"hash"]:a.map}},JUsM:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),o=a("t62R"),r=a("rHpw"),s=a("shC7"),l=a("MWbm");const c=r.a.create((e=>({root:{flexDirection:"row",backgroundColor:e.colors.navigationBackground,borderStyle:"solid",borderWidth:e.borderWidths.small,borderRadius:e.borderRadii.large,borderColor:e.colors.gray50,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical,justifyContent:"space-between"},containerDown:{marginTop:e.spaces.space12},containerUp:{marginTop:e.spaces.space20},text:{flexShrink:1,alignSelf:"center",alignItems:"flex-start"},actionsContainer:{flexDirection:"row",alignItems:"center",marginLeft:e.spaces.space12},arrowContainer:{position:"absolute",display:"flex",width:"100%",alignItems:"center"},arrowDirectionUp:{top:`calc(-${e.spaces.space8} + ${e.spaces.space1})`},arrowDirectionDown:{bottom:`calc(-${e.spaces.space8} + ${e.spaces.space1})`},arrow:{borderStyle:"solid",borderTopWidth:0,borderRightWidth:e.spaces.space1,borderBottomWidth:e.spaces.space1,borderLeftWidth:0,borderColor:e.colors.gray50,width:e.spaces.space12,height:e.spaces.space12,backgroundColor:e.colors.navigationBackground}})));t.a=({containerRef:e,primaryAction:t,secondaryAction:a,text:n})=>{const[r,d]=i.a.useState(void 0),u=s.a.getConstants().isRTL,h=i.a.useRef(0),p=i.a.useRef(0),m=(()=>{if(null!=e&&e.current&&r){const{left:t,top:a,width:n}=e.current.getBoundingClientRect();h.current=a;const i=t+n/2-r;return{left:u?void 0:i,right:u?i:void 0}}})(),g=p.current<h.current,b=g?[c.arrowDirectionDown]:[c.arrowDirectionUp],_=g?u?{transform:"rotate(-45deg)"}:{transform:"rotate(45deg)"}:u?{transform:"rotate(135deg)"}:{transform:"rotate(-135deg)"},f=g?[c.containerDown]:[c.containerUp];return i.a.createElement(l.a,{accessibilityRole:"text",onLayout:e=>{const{nativeEvent:{layout:{left:t,top:a,width:n}}}=e;p.current=a;d(t+n/2)},style:[c.root,f]},null!=e&&e.current?i.a.createElement(l.a,{style:[b,c.arrowContainer,m]},i.a.createElement(l.a,{style:[c.arrow,_]})):null,i.a.createElement(o.b,{style:c.text},n),i.a.createElement(l.a,{style:c.actionsContainer},t,a))}},KCLV:function(e,t,a){var n=a("Syyo"),i=Object.prototype,o=i.hasOwnProperty,r=i.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),a=e[s];try{e[s]=void 0;var n=!0}catch(e){}var i=r.call(e);return n&&(t?e[s]=a:delete e[s]),i}},KqB4:function(e,t,a){"use strict";var n=a("IGGJ");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var a=[],n=(0,i.default)(e,t),o=0;o<n.length;o++)a.push(n[o].url);return a};var i=n(a("vwfs"));e.exports=t.default},LCtV:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));a("kYxP");var n=a("ERkP"),i=a.n(n),o=a("3XMw"),r=a.n(o),s=a("mN6z"),l=a("Qwev"),c=a("rHpw"),d=a("1auM"),u=a("ude7"),h=a("U+bB"),p=a("MWbm");const m=r.a.gff1f69e,g=Object.freeze({INFINITE:"infinite",MEDIUM:"medium",NONE:"none"});class b extends i.a.Component{constructor(...e){super(...e),this.state={imagePreviewUrl:null},this._getImageSrc=()=>{const{enableGif:e,mediaItem:t}=this.props,{imagePreviewUrl:a}=this.state;if(t&&t.mediaFile)return t.mediaFile.isGif&&!e?a:t.mediaFile.url}}componentDidUpdate(){const{enableGif:e,mediaItem:{mediaFile:t}}=this.props,{imagePreviewUrl:a}=this.state;e||a||t instanceof d.a&&t.isGif&&Object(u.a)(t).then((e=>{this.setState({imagePreviewUrl:e})}))}shouldComponentUpdate(e,t){return!Object(s.a)(e,this.props)||!Object(s.a)(t,this.state)}render(){const{borderRadius:e,enableGif:t,mediaItem:a,onClick:n,resizeMode:o}=this.props,{imagePreviewUrl:r}=this.state||{},s=a.mediaFile&&a.mediaFile.isGif&&!t&&!r,c=a.needsProcessing||s,d=[f.root,_[e],c&&f.loadingBorder],u=this._getImageSrc();return i.a.createElement(p.a,{onClick:n,style:d},c||!u?i.a.createElement(l.a,{accessibilityLabel:m,style:f.activityIndicator}):i.a.createElement(h.a,{resizeMode:o,source:u,style:f.image}))}}b.defaultProps={borderRadius:g.NONE,enableGif:!0,resizeMode:"cover"};const _=c.a.create((e=>({[g.INFINITE]:{borderRadius:e.borderRadii.infinite},[g.MEDIUM]:{borderRadius:e.borderRadii.small},[g.NONE]:{borderRadius:e.borderRadii.none}}))),f=c.a.create((e=>({root:{borderRadius:e.borderRadii.xLarge,borderStyle:"solid",borderWidth:e.borderWidths.none,borderColor:"transparent",maxWidth:"100%",height:"100%",overflow:"hidden"},image:{display:"block",height:"100%",width:"100%"},loadingBorder:{borderColor:e.colors.gray300},activityIndicator:{height:"100%"}})));t.b=b},LWCC:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),o=a("Zejx"),r=a("rxPX"),s=a("0KEI");var l=Object(r.a)().propsFromActions((()=>({createLocalApiErrorHandler:Object(s.createLocalApiErrorHandlerWithContextFactory)("FOLLOW_TOPIC_BUTTON"),follow:o.a.follow,unfollow:o.a.unfollow}))).withAnalytics(),c=a("CGyZ"),d=a("PbbS"),u=a("3XMw"),h=a.n(u),p=a("sUoZ"),m=a("Tp1h"),g=a("Jkc4"),b=a("TnY3");const _=Object.freeze({follow:h.a.i79ab12a,following:h.a.d960b55c,unfollow:h.a.c0f56044}),f=Object.freeze({follow:h.a.fcf51fe6,following:h.a.e9a90d72,unfollow:h.a.bf403716,confirmationHeadline:h.a.c9f08e29,confirmationSheetText:h.a.abc600f4}),y=Object.freeze({follow:h.a.cd876e02,following:h.a.f2816e02,unfollow:h.a.f5b04fbc,confirmationHeadline:h.a.c481ae3f,confirmationSheetText:h.a.aa3ba124}),w=Object.freeze({follow:h.a.e0e730b0,following:h.a.e0e730b0,unfollow:h.a.b1850062,confirmationHeadline:h.a.gd3f996f,confirmationSheetText:h.a.i36c403c});class v extends i.a.Component{constructor(...e){super(...e),this._getDisplayMode=e=>void 0===this._getFollowButtonIcon(e)?"only-text":"icon-text",this._getFollowButtonIcon=e=>{switch(e){case d.a.Favorite:case d.a.Star:case d.a.Interested:return i.a.createElement(p.a,null);case d.a.FollowTopic:case d.a.Default:default:return}},this._getFollowingButtonIcon=e=>"icon-text"===this._getDisplayMode(e)?i.a.createElement(i.a.Fragment,null):void 0,this._getButtonText=e=>{const{topic:t}=this.props;switch(e){case d.a.FollowTopic:return{follow:_.follow,unfollow:_.unfollow,following:_.following};case d.a.Favorite:return{follow:y.follow,unfollow:y.unfollow,following:y.following,confirmationHeadline:y.confirmationHeadline&&y.confirmationHeadline({title:t.name}),confirmationSheetText:y.confirmationSheetText};case d.a.Star:return{follow:f.follow,unfollow:f.unfollow,following:f.following,confirmationHeadline:f.confirmationHeadline&&f.confirmationHeadline({title:t.name}),confirmationSheetText:f.confirmationSheetText};case d.a.Interested:return{follow:w.follow,unfollow:w.unfollow,following:w.following,confirmationHeadline:w.confirmationHeadline&&w.confirmationHeadline({title:t.name}),confirmationSheetText:w.confirmationSheetText};case d.a.Default:default:return}},this._handleOnFollow=()=>{const{createLocalApiErrorHandler:e,educateOnFollow:t,follow:a,history:n,topic:i}=this.props;a(i.id).catch(e()),this._handleScribe("follow"),t&&i&&n.push({pathname:"/i/topics/education",state:{topicName:i.name}})},this._handleOnUnfollow=()=>{const{createLocalApiErrorHandler:e,topic:t,unfollow:a}=this.props;a(t.id).catch(e()),this._handleScribe("unfollow")}}render(){const{ariaDescribedBy:e,isTransparent:t,nativeID:a,showRelationshipChangeConfirmation:n,size:o,style:r,textMode:s,topic:{following:l,name:d}}=this.props;return i.a.createElement(g.a,{customText:d,displayMode:m.a.topic},(u=>i.a.createElement(c.a,{accessibilityDescribedBy:e,buttonIcons:{followIcon:this._getFollowButtonIcon(s),followingIcon:this._getFollowingButtonIcon(s)},buttonText:this._getButtonText(s),displayMode:this._getDisplayMode(s),isFollowing:l,isTransparent:t,name:d,nativeID:a,onFollow:u(this._handleOnFollow),onUnfollow:u(this._handleOnUnfollow),showRelationshipChangeConfirmation:n,size:o,style:r,type:"topic",withConfirmationSheetText:l})))}_handleScribe(e){const{analytics:t}=this.props;t.scribe({element:"topic",action:e})}}v.defaultProps={size:"small",textMode:d.a.Default};t.a=Object(b.a)(l(v))},LtQU:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),o=a("Lsrn"),r=a("k/Ka");const s=(e={})=>Object(r.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M19 10H5c-.553 0-1-.447-1-1s.447-1 1-1h14c.553 0 1 .447 1 1s-.447 1-1 1zm0 6H5c-.553 0-1-.447-1-1s.447-1 1-1h14c.553 0 1 .447 1 1s-.447 1-1 1z"})));s.metadata={width:24,height:24},t.a=s},LzM7:function(e,t,a){var n=a("6QIk");e.exports=function(e,t){var a=this.__data__,i=n(a,e);return i<0?(++this.size,a.push([e,t])):a[i][1]=t,this}},M6MT:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));const n=Object.freeze({granted:"granted",denied:"denied",prompt:"prompt"}),i=Object.freeze({PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2,TIMEOUT:3})},MLl7:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o}));const n=Object.freeze({Composition:"composition",DMComposition:"dm_composition"}),i=e=>Object.values(n).indexOf(e)>=0,o=(e,t)=>"boolean"==typeof e?e:t},"Mbn/":function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),o=a("Lsrn"),r=a("k/Ka");const s=(e={})=>Object(r.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M3.5 5.25H2c-.414 0-.75.336-.75.75s.336.75.75.75h1.5c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm18.5 12H7.5c-.414 0-.75-.337-.75-.75V2c0-.414-.336-.75-.75-.75s-.75.336-.75.75v14.5c0 1.24 1.01 2.25 2.25 2.25H22c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-4 2.5c-.414 0-.75.336-.75.75V22c0 .414.336.75.75.75s.75-.336.75-.75v-1.5c0-.414-.336-.75-.75-.75z"}),i.a.createElement("path",{d:"M8.5 6.75h8c.414 0 .75.337.75.75v8c0 .414.336.75.75.75s.75-.336.75-.75v-8c0-1.24-1.01-2.25-2.25-2.25h-8c-.414 0-.75.336-.75.75s.336.75.75.75z"})));s.metadata={width:24,height:24},t.a=s},Ndl3:function(e,t,a){var n=a("9y2L"),i=a("tLQN");e.exports=function(e){return i(e)&&n(e)}},Nsha:function(e,t,a){var n=a("H87J"),i=a("1sLo"),o=a("R3TX"),r=a("VZDm"),s=o((function(e){var t=n(e,r);return t.length&&t[0]===e[0]?i(t):[]}));e.exports=s},ODCi:function(e,t,a){"use strict";a.r(t),a.d(t,"Recipients",(function(){return F}));a("kYxP");var n=a("ERkP"),i=a.n(n),o=a("RqPI"),r=a("xVN5"),s=a("wpu3"),l=a("hqKg"),c=a("o52z"),d=a("oEGd");const u=(e,t)=>t.location.state,h=(e,t)=>{const a=u(0,t);return a&&a.inReplyToStatus},p=Object(l.createSelector)(h,o.s,((e,t)=>{if(e&&t){return Object(s.a)({inReplyToStatus:e,loggedInUserId:t,excludeReplyUser:!0}).map((e=>e.id_str))}return Object(c.a)()})),m=Object(l.createSelector)(p,((e,t)=>{const a=u(0,t);return a&&a.excludedRecipients||Object(c.a)()}),h,((e,t,a)=>({recipientIds:e,initialExcludedRecipients:t,inReplyToStatus:a}))),g={updateExcludedRecipientsV2:r.u};var b=Object(d.f)(m,g),_=a("jHSc"),f=a("3XMw"),y=a.n(f),w=a("5FtR"),v=a("7JQg"),C=a("s1N3"),E=a("88ay"),T=a("hqDb"),x=a("MWbm"),S=a("0yYu"),I=a("6vad"),k=a("XiMS"),R=a("t62R"),P=a("/yvb");const L=y.a.c55eed72,M=y.a.b772cd66,D=y.a.caca3102,A=y.a.c6a6dc2f,O={page:"compose",section:"recipients"},F=({history:e,inReplyToStatus:t,initialExcludedRecipients:a,recipientIds:n,updateExcludedRecipientsV2:o})=>{const[r,s]=i.a.useState(a);if(!t)return i.a.createElement(w.a,{to:"/compose/tweet"});const{user:l}=t.retweeted_status||t,d=e=>{s(e?Object(c.a)():n)},u=e=>()=>{const t=-1!==r.indexOf(e);s(t?r.filter((t=>t!==e)):Object(C.a)([...r,e]))},h=()=>{o(r),e.goBack()},p=()=>n.length>1?i.a.createElement(k.a,{checked:0===r.length,onChange:d}):null,m=({isBlocking:e,screenName:t})=>e?i.a.createElement(R.b,{color:"magenta500",size:"subtext2"},A({screenName:t})):null,g=e=>{if(!t)return null;const{user:a}=t.retweeted_status||t,n=-1!==r.indexOf(e),o=e===a.id_str,s=i.a.createElement(k.a,{checked:!n,disabled:o,onChange:u(e)});return i.a.createElement(E.b,{bottomControl:m,cellClickable:!o,decoration:s,key:e,onClick:u(e),promotedItemType:"users",userId:e,withLink:!1})};return i.a.createElement(v.c,{namespace:O},i.a.createElement(_.b,{backLocation:"/compose/tweet",history:e,onBackClick:h,rightControl:i.a.createElement(P.a,{onPress:h,size:"xSmall",type:"brandFilled"},M),title:L},g(l.id_str),n.length?i.a.createElement(x.a,null,i.a.createElement(S.a,null),i.a.createElement(I.b,{rightControl:p(),text:D}),i.a.createElement(T.a,{renderUserCell:g,userIds:n})):null))};t.default=b(F)},OKMS:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),o=a("Lsrn"),r=a("k/Ka");const s=(e={})=>Object(r.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M17.296 2.642c-2.068-1.17-4.464-1.62-6.816-1.283C8.13 1.692 5.956 2.8 4.3 4.5c-1.658 1.707-2.704 3.91-2.976 6.27-.27 2.357.245 4.738 1.468 6.77.005.01.008.02.01.03 0 .01-.002.017-.004.025L1.12 21.2c-.11.232-.145.49-.103.742.043.254.162.488.343.67.18.184.412.307.665.353.253.047.514.014.747-.094l3.63-1.67h.01l.01.01.01.005c1.68 1.01 3.606 1.542 5.567 1.537 2.373 0 4.68-.783 6.562-2.232 1.882-1.45 3.23-3.482 3.836-5.778.604-2.298.432-4.73-.49-6.92-.925-2.188-2.548-4.01-4.614-5.178zM12 7.25c-2.623 0-4.75 2.127-4.75 4.75s2.127 4.75 4.75 4.75 4.75-2.127 4.75-4.75S14.623 7.25 12 7.25zM5.75 12c0-3.452 2.798-6.25 6.25-6.25s6.25 2.798 6.25 6.25-2.798 6.25-6.25 6.25S5.75 15.452 5.75 12zm5.5-2.5c0-.414.336-.75.75-.75 1.794 0 3.25 1.455 3.25 3.25 0 .413-.337.75-.75.75-.415 0-.75-.337-.75-.75 0-.967-.784-1.75-1.75-1.75-.414 0-.75-.336-.75-.75z"})));s.metadata={width:24,height:24},t.a=s},OOKO:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a("ERkP"),i=a.n(n),o=a("rHpw"),r=a("MWbm");function s({spacing:e}){return i.a.createElement(r.a,{accessibilityRole:"separator",style:[l.divider,{marginVertical:null!=e?o.a.theme.spaces[e]:void 0}]})}const l=o.a.create((e=>({divider:{backgroundColor:e.colors.borderColor,height:e.borderWidths.small}})))},OfKG:function(e,t,a){var n=a("c7Qd");e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},Olb6:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),o=a("3XMw"),r=a.n(o),s=a("5cUs"),l=a("wwsH");const c=r.a.d9fd5570,d={viewType:"hidden_replies"};t.a=({link:e,onPress:t})=>i.a.createElement(l.a,{Icon:s.a,accessibilityLabel:c,activeColor:"primary",behavioralEventContext:d,link:e,onPress:t})},PKbs:function(e,t,a){"use strict";a.d(t,"a",(function(){return x}));var n=a("ERkP"),i=a.n(n),o=a("t62R"),r=a("3XMw"),s=a.n(r),l=a("MWbm");const c=i.a.createElement(s.a.I18NFormatMessage,{$i18n:"i5ba24f5"},i.a.createElement(o.b,{link:"https://help.twitter.com/en/rules-and-policies/twitter-rules",withInteractiveStyling:!1},s.a.g3631342));var d=({containerStyle:e,explanation:t,explanationStyle:a,heading:n})=>i.a.createElement(l.a,{style:e},n,i.a.createElement(o.b,{color:"gray700",style:a},t||c)),u=a("csss");var h=({getPivotLink:e,renderBadge:t,rules:a})=>i.a.createElement(i.a.Fragment,null,a.map(((a,n)=>{const{description:r,name:s,rest_id:l}=a,c=e(a),d=t(n+1),h=i.a.createElement(o.b,{weight:"bold"},s);return i.a.createElement(u.a,{description:r,key:l,label:h,link:c,thumbnail:d})}))),p=a("97Jx"),m=a.n(p),g=(a("kYxP"),a("9Jxp")),b=a("LtQU"),_=a("rHpw");const f=_.a.create((e=>({icon:{color:e.colors.gray300,flexShrink:0,paddingLeft:e.spaces.space12}})));var y=e=>{const{badge:t,rule:a}=e,{description:n,name:r}=a,s=i.a.createElement(o.b,{weight:"bold"},r);return i.a.createElement(u.a,{description:n,label:s,renderRightContent:()=>i.a.createElement(b.a,{style:f.icon}),thumbnail:t})},w=a("CXUS");var v=e=>{const{onReorder:t,renderBadge:a,rules:n}=e;return i.a.createElement(w.a,{onDragEnd:e=>{if(!e.destination)return;const a=((e,t,a)=>{const n=Array.from(e),[i]=n.splice(t,1);return n.splice(a,0,i),n})(n,e.source.index,e.destination.index);t(a)}},i.a.createElement(w.c,{droppableId:"droppable"},((e,t)=>i.a.createElement("div",m()({},e.droppableProps,{ref:e.innerRef}),n.map(((e,n)=>{const{rest_id:o}=e;return i.a.createElement(g.a,{draggableId:o,index:n,isBeingDragged:t.draggingFromThisWith===o,key:o},i.a.createElement(y,{badge:a(n+1),rule:e}))})),e.placeholder))))},C=a("C6f5"),E=a("X00g"),T=a("h0NW");const x=Object.freeze({Default:"Default",Pivot:"Pivot",Reorder:"Reorder"}),S=(e,t)=>{const{badgeStyle:a,theme:n}=t,r=E.a.getCommunityBackgroundColor(n);return i.a.createElement(l.a,{style:[I.badge,{backgroundColor:r},a]},i.a.createElement(o.b,{align:"center",color:"white",weight:"bold"},e))},I=_.a.create((e=>({badge:{backgroundColor:e.colors.primary,borderRadius:e.borderRadii.infinite,justifyContent:"center",overflow:"hidden",height:e.spaces.space32,width:e.spaces.space32},bottomMargin:{marginBottom:C.a}})));t.b=({badgeStyle:e,displayType:t=x.Default,explanation:a,getPivotLink:n,headerContainerStyle:o,headerExplanationStyle:r,heading:s,limit:c,onReorder:u,ruleContainerStyle:p,rules:m,theme:g,withBottomMargin:b=!1,withHeader:_=!0})=>{const f={theme:g,badgeStyle:e},y=((e,t,a)=>(t?e.slice(0,t):e).map(((e,t)=>({label:e.name,description:e.description,decoration:S(t+1,a)}))))(m,c,f),w=e=>S(e,f);return y.length>0?i.a.createElement(l.a,{style:b?I.bottomMargin:null},_?i.a.createElement(d,{containerStyle:o,explanation:a,explanationStyle:r,heading:s}):null,t===x.Pivot&&n?i.a.createElement(h,{getPivotLink:n,renderBadge:w,rules:m}):t===x.Reorder&&u?i.a.createElement(v,{onReorder:u,renderBadge:w,rules:m}):i.a.createElement(T.a,{containerStyle:p,items:y})):null}},PbbS:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("ERkP");const n=Object.freeze({Default:"default",FollowTopic:"follow",Star:"star",Interested:"interested",Favorite:"favorite"})},PrL8:function(e,t,a){"use strict";const n=a("rHpw").a.create((e=>({root:{flexGrow:1,flexShrink:1,paddingBottom:e.spaces.space12},rightControl:{display:"flex",flexDirection:"row"},prevButton:{marginEnd:e.spaces.space2},saveButton:{marginStart:e.spaces.space12},segmentedControlChildren:{flexGrow:1},leftRightButtons:{alignItems:"center"},videoTrimmerWrapper:{flexGrow:1,flexShrink:1,marginBottom:e.spaces.space20}})));t.a=n},"Pz+s":function(e,t,a){var n=a("vxC8"),i=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},QMz8:function(e,t,a){var n=a("5pfJ"),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}},R3TX:function(e,t,a){var n=a("zWgn"),i=a("UAs9"),o=a("7Pat");e.exports=function(e,t){return o(i(e,t,n),e+"")}},S0iI:function(e,t){e.exports=function(e,t){return e.has(t)}},SU8Q:function(e,t){e.exports=function(e){return function(t){return e(t)}}},Sksh:function(e,t,a){"use strict";a("849X");var n=a("SrIh"),i=a("M0jS"),o=a("+d3d"),r=a("VY6S");t.a=new class{constructor(){this.usersInApp={},this._throttledInitialFetch=Object(o.a)((()=>{this.store.dispatch(i.b.fetchManyIfNeeded(Object.keys(this.usersInApp)))}),1500)}init(e){this.store=e}registerUserInApp(e){Object.keys(this.usersInApp).length>50&&(this.usersInApp={},Object(n.a)(new Error("Registered users in app has exceeded 50"),{level:"warning"})),this.usersInApp[e]?this.usersInApp[e]=this.usersInApp[e]+1:(this.usersInApp[e]=1,Object(r.a)(this._throttledInitialFetch(),100))}deregisterUserInApp(e){this.usersInApp[e]&&this.usersInApp[e]>1?this.usersInApp[e]=this.usersInApp[e]-1:delete this.usersInApp[e]}}},Syyo:function(e,t,a){var n=a("IBsm").Symbol;e.exports=n},Tv3l:function(e,t,a){var n=a("2Fbm"),i=a("VPai"),o=a("+fUG"),r=a("QMz8"),s=a("mUsV");function l(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=r,l.prototype.set=s,e.exports=l},UAs9:function(e,t,a){var n=a("zaNA"),i=Math.max;e.exports=function(e,t,a){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,r=-1,s=i(o.length-t,0),l=Array(s);++r<s;)l[r]=o[t+r];r=-1;for(var c=Array(t+1);++r<t;)c[r]=o[r];return c[t]=a(l),n(e,this,c)}}},UgB4:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),o=a("Lsrn"),r=a("k/Ka");const s=(e={})=>Object(r.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M21.13 11.358L3.614 2.108c-.29-.152-.64-.102-.873.126-.23.226-.293.577-.15.868l4.362 8.92-4.362 8.92c-.143.292-.08.643.15.868.145.14.333.212.523.212.12 0 .24-.028.35-.087l17.517-9.25c.245-.13.4-.386.4-.664s-.155-.532-.4-.662zM4.948 4.51l12.804 6.762H8.255l-3.307-6.76zm3.307 8.26h9.498L4.948 19.535l3.307-6.763z"})));s.metadata={width:24,height:24},t.a=s},VPai:function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},VPdC:function(e,t,a){"use strict";a.d(t,"b",(function(){return f}));var n=a("97Jx"),i=a.n(n),o=a("ERkP"),r=a.n(o),s=a("3XMw"),l=a.n(s),c=a("cjZk"),d="fileInput",u=a("sjK1"),h=a("/Imo"),p=a("rHpw"),m=a("9HgX");const g=l.a.b9960f32,b={viewType:"media_picker"},_=r.a.createElement(c.a,null),f=({acceptGifs:e,acceptImages:t=!0,acceptVideo:a})=>(t?m.b:[]).concat(e?[m.a]:[]).concat(a?u.a:[]);class y extends r.a.PureComponent{render(){const{acceptGifs:e,acceptImages:t,acceptVideo:a,customMimeTypes:n,icon:o,style:s,withIcon:l,...c}=this.props,u=f({acceptGifs:e,acceptImages:t,acceptVideo:a}).concat(n).join(",");return r.a.createElement(h.a,i()({},c,{accept:u,behavioralEventContext:b,icon:l?o:void 0,style:[w.root,s],testID:d}))}}y.defaultProps={acceptGifs:!0,acceptImages:!0,acceptVideo:!0,customMimeTypes:[],accessibilityLabel:g,icon:_,size:"medium",withIcon:!0};const w=p.a.create((e=>({root:{margin:`-${e.spaces.space12}`}})));t.a=y},VZDm:function(e,t,a){var n=a("Ndl3");e.exports=function(e){return n(e)?e:[]}},WOwf:function(e,t,a){"use strict";function n(e,t){return Math.min(1,1-e/t)}a.d(t,"a",(function(){return n}))},XpKj:function(e,t,a){"use strict";a.d(t,"d",(function(){return l})),a.d(t,"b",(function(){return d})),a.d(t,"f",(function(){return p})),a.d(t,"e",(function(){return m})),a.d(t,"c",(function(){return g})),a.d(t,"a",(function(){return b}));var n=a("oEOe"),i=a("kGix"),o=a("Ssj5");const r="scheduledTweets",s={fetchStatus:i.a.NONE,scheduledTweets:[]},l="FETCH_SCHEDULED_TWEETS",c=Object.freeze({REQUEST:"rweb/scheduledTweets/FETCH_SCHEDULED_TWEETS_REQUEST",SUCCESS:"rweb/scheduledTweets/FETCH_SCHEDULED_TWEETS_SUCCESS",FAILURE:"rweb/scheduledTweets/FETCH_SCHEDULED_TWEETS_FAILURE"}),d="DELETE_SCHEDULED_TWEET",u=Object.freeze({REQUEST:"rweb/scheduledTweets/DELETE_SCHEDULED_TWEET_REQUEST",SUCCESS:"rweb/scheduledTweets/DELETE_SCHEDULED_TWEET_SUCCESS",FAILURE:"rweb/scheduledTweets/DELETE_SCHEDULED_TWEET_FAILURE"});function h(e=s,t){switch(t.type){case c.SUCCESS:if(t.payload)return{...e,fetchStatus:i.a.LOADED,scheduledTweets:t.payload};break;case c.FAILURE:return{...e,fetchStatus:i.a.FAILED};case c.REQUEST:return{...e,fetchStatus:i.a.LOADING};case u.SUCCESS:{const{meta:i}=t;return i&&i.deleteScheduledTweetId?{...e,scheduledTweets:(a=i.deleteScheduledTweetId,n=e.scheduledTweets,n.filter((e=>e.rest_id!==a)))}:e}default:return e}var a,n;return e}o.a.register({[r]:h});const p=e=>e.scheduledTweets.scheduledTweets,m=e=>e.scheduledTweets.fetchStatus,g=()=>(e,t,{api:a})=>Object(n.b)(e,{request:a.Scheduling.fetchScheduledTweets,params:{}})({actionTypes:c,context:l}).then((()=>{})),b=e=>(t,a,{api:i})=>Object(n.b)(t,{request:i.Scheduling.deleteScheduledTweet,params:{scheduled_tweet_id:e}})({actionTypes:u,context:d,meta:{deleteScheduledTweetId:e}})},YICZ:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),o=a("Zejx"),r=a("rxPX"),s=a("0KEI");var l=Object(r.a)().propsFromActions((()=>({createLocalApiErrorHandler:Object(s.createLocalApiErrorHandlerWithContextFactory)("TOPIC_NOT_INTERESTED_CONTEXT"),setNotInterested:o.a.notInterested}))),c=a("3XMw"),d=a.n(c),u=a("hOZg"),h=a("Jkc4"),p=a("Irs7"),m=a("/yvb"),g=a("rHpw");const b=d.a.d9b417c4,_=d.a.c29d6806,f=d.a.e839db3a,y=e=>{const{createLocalApiErrorHandler:t,nativeID:a,onPress:n,setNotInterested:o,size:r,style:s,text:l,topicId:c,type:d,withIconOnly:u}=e,g=Object(p.b)(),_=i.a.useCallback((e=>{e.preventDefault(),n?n(e):(g.scribe({element:"topic",action:"not_interested"}),o(c).catch(t()))}),[g,t,n,o,c]);return i.a.createElement(h.a,null,(e=>i.a.createElement(m.a,{accessibilityLabel:b,hoverLabel:{label:f},icon:u?v:void 0,nativeID:a,onPress:e(_),pullRight:u,size:r,style:s,type:d},u?null:l)))};y.defaultProps={size:"small",text:_,type:"brandText",withIconOnly:!0};const w=g.a.create((e=>({closeIcon:{color:e.colors.gray700}}))),v=i.a.createElement(u.a,{style:w.closeIcon}),C=l(y);t.a=C},"a/ea":function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return d})),a.d(t,"a",(function(){return h})),a.d(t,"b",(function(){return p}));var n=a("M6MT"),i=a("Ssj5");const o="geoLocation",r=Object.freeze({permissionStatus:void 0,position:void 0});const s=e=>e.geoLocation.permissionStatus,l=e=>e.geoLocation.position,c="rweb/geoLocation/SET_PERMISSION_STATUS",d=e=>({payload:e,type:c}),u="rweb/geoLocation/SET_POSITION",h=()=>(e,t)=>m().then((t=>e({payload:t,type:u}))).catch((t=>(e(d(n.b.denied)),Promise.reject(t)))),p=()=>(e,t)=>l(t())?Promise.resolve():e(h()),m=()=>new Promise(((e,t)=>navigator.geolocation.getCurrentPosition((t=>{const a={timestamp:t.timestamp,coords:{latitude:t.coords.latitude,longitude:t.coords.longitude,altitude:t.coords.altitude,accuracy:t.coords.accuracy,altitudeAccuracy:t.coords.altitudeAccuracy,heading:t.coords.heading,speed:t.coords.speed}};return e(a)}),t)));i.a.register({[o]:function(e=r,t){switch(t.type){case c:return{...e,permissionStatus:t.payload};case u:return{...e,position:t.payload};default:return e}}})},aA1u:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),o=a("t62R"),r=a("21zW"),s=a("rHpw"),l=a("3XMw"),c=a.n(l);class d extends i.a.Component{constructor(...e){super(...e),this._formatTimestamp=e=>{const t=c.a.jade381b,a=c.a.d725a289,n=new Date(e),i=t(n);return`${a(n)} · ${i}`}}render(){const{style:e}=this.props;return i.a.createElement(o.b,{color:"gray700",style:e},this._maybeRenderEditedTag(),this._renderTimestampAndMaybePlace(),this._maybeRenderSource())}_renderTimestampAndMaybePlace(){const{linkColor:e,onPlaceClick:t,onTimestampClick:a,place:n,placeLink:r,timestamp:s,timestampLink:l}=this.props,d=this._formatTimestamp(s);return n?i.a.createElement(c.a.I18NFormatMessage,{$i18n:"ba64a3b3"},i.a.createElement(o.b,{color:l?e:void 0,link:l,onClick:a},c.a.e62214cc({date:d})),i.a.createElement(o.b,{color:r?e:void 0,link:r,onClick:t},c.a.bd4e9341({place:n}))):i.a.createElement(o.b,{color:l?e:void 0,link:l,onClick:a},d)}_maybeRenderEditedTag(){const{renderEditCallout:e}=this.props,t=e?e({displayMode:"compact"}):null;return t?i.a.createElement(i.a.Fragment,null,t):null}_maybeRenderSource(){const{linkColor:e,onSourceClick:t,source:a,sourceLink:n}=this.props;return a?i.a.createElement(i.a.Fragment,null,i.a.createElement(r.a,null),i.a.createElement(o.b,{color:n?e:void 0,link:n,onClick:t,style:u.source},a)):null}}d.defaultProps={linkColor:"link"};const u=s.a.create((e=>({source:{whiteSpace:"normal"}})));t.a=d},b5s6:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),o=a("ERkP"),r=a.n(o),s=a("v6aA"),l=a("XOJV"),c=a("eSoz"),d=a("rxPX"),u=a("0KEI");const h=(e,t)=>t.tweetId,p=(e,t)=>{const a=t.tweetId,n=a&&l.a.select(e,a);return n?Object(c.g)(e,n):void 0};var m=Object(d.a)().propsFromState((()=>({community:p,hydratedTweet:l.a.createHydratedTweetSelector(h)}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(u.createLocalApiErrorHandlerWithContextFactory)("QUOTE_TWEET_CONTAINER"),fetchCommunityIfNeeded:c.c.fetchOneIfNeeded}))),g=a("YeIG"),b=a("uCxL"),_=a("Irs7"),f=a("x5Pi");const y=m((({community:e,createLocalApiErrorHandler:t,fetchCommunityIfNeeded:a,hydratedTweet:n,onPress:o,tweetId:l,...c})=>{const{featureSwitches:d,loggedInUserId:u}=r.a.useContext(s.a),h=Object(_.b)(),p=null==n?void 0:n.community_id_str;r.a.useEffect((()=>{p&&Object(g.a)(e)&&a(p).catch(t())}),[e,p,t,a]);const m=r.a.useCallback((e=>{h.scribeAction("click"),o&&o(e)}),[o,h]),y=n&&Object(f.f)(n,u,e),w=y&&Object(f.e)(y),v=d.isTrue("responsive_web_reactions_enabled");return r.a.createElement(b.a,i()({},c,{loggedInUserId:u,onPress:m,shouldShowAltLabelAlways:!0,socialContextProps:w,tweet:n,withReactions:v}))}));t.a=y},c0ZR:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("849X");const n=e=>new Promise(((t,a)=>{const n=new window.XMLHttpRequest;n.responseType="blob",n.onreadystatechange=()=>{n.readyState===window.XMLHttpRequest.DONE&&(200===n.status?t(n.response):a(new Error("Unexpected status code")))},n.onerror=e=>a(e),n.ontimeout=e=>a(e),n.open("GET",e,!0),n.send()}))},c18h:function(e,t){var a=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return a.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},c7Qd:function(e,t,a){var n=a("DuXo"),i=a("z9Jh"),o=a("n1QJ");e.exports=function(e,t,a){return t==t?o(e,t,a):n(e,i,a)}},cEmw:function(e,t){e.exports=function(e){return this.__data__.has(e)}},cIoY:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),o=a("1YZw"),r=a("rxPX"),s=Object(r.a)().propsFromActions((()=>({addToast:o.b}))),l=(a("kYxP"),a("k/Ka")),c=a("3XMw"),d=a.n(c),u=a("sgih"),h=a("t62R"),p=a("/yvb"),m=a("rHpw");const g=d.a.cfd2f35e;class b extends i.a.Component{constructor(...e){super(...e),this._handleOnFocus=e=>{e.currentTarget.select()}}render(){const{cancelButtonLabel:e,description:t,headerText:a,link:n,onCancel:o}=this.props,r=Object(l.a)("input",{autoFocus:!0,onFocus:this._handleOnFocus,readOnly:!0,style:_.linkInput,value:n});return i.a.createElement(u.a,{onMaskClick:o,style:_.container,type:"center",withMask:!0},a&&i.a.createElement(h.b,{align:"center",style:_.headerText,weight:"bold"},a),t&&i.a.createElement(h.b,{align:"center",color:"gray700",style:_.labelText},t),r,i.a.createElement(p.a,{onPress:o,size:"xLarge",style:_.cancelButton,type:"brandText"},e))}}b.defaultProps={cancelButtonLabel:g};const _=m.a.create((e=>({container:{alignItems:"center",paddingVertical:e.spaces.space32,paddingHorizontal:e.spaces.space12,position:"relative"},headerText:{marginBottom:e.spaces.space16},labelText:{marginBottom:e.spaces.space16,width:"100%"},linkInput:{backgroundColor:e.colors.gray0,borderColor:"transparent",color:e.colors.gray700,fontSize:e.fontSizes.body,marginBottom:e.spaces.space12,paddingVertical:e.spaces.space12,paddingHorizontal:e.spaces.space20},cancelButton:{width:"100%"}})));var f=b,y=a("I/9y"),w=a("mjJ+"),v=a("cm6r"),C=a("CaKu"),E=a("U+bB");const T=d.a.e05c00b4,x=d.a.eabf2209,S=d.a.a613e720,I=d.a.f88553c8,k={riffsy:"https://abs.twimg.com/a/1501527574/img/t1/icon_riffsy.png",giphy:"https://abs.twimg.com/a/1501527574/img/t1/icon_giphy.png"};class R extends i.a.PureComponent{constructor(e){super(e),this._renderMenu=e=>i.a.createElement(w.a,{items:[{text:S,Icon:y.a,onClick:this._handleCopyGifLinkButtonClick}],onCloseRequested:e}),this._handleCopyGifLinkButtonClick=e=>{const{addToast:t,gifUrl:a}=this.props;C.a.isAvailable()?(C.a.setString(a),t({text:I})):this.setState({showCopyLinkSheet:!0}),e&&e()},this._handleCopyLinkSheetCancel=()=>{this.setState({showCopyLinkSheet:!1})},this.state={showCopyLinkSheet:!1}}render(){const{showCopyLinkSheet:e}=this.state,{gifUrl:t,provider:a}=this.props,{display_name:n,name:o}=a,r=k[o];return r?i.a.createElement(i.a.Fragment,null,e?i.a.createElement(f,{description:x({providerName:n}),headerText:T,link:t,onCancel:this._handleCopyLinkSheetCancel}):null,i.a.createElement(h.b,{align:"center",color:"gray700",style:P.root},i.a.createElement(d.a.I18NFormatMessage,{$i18n:"e2e6ea0d"},this._renderAttribution(n,r)))):null}_renderAttribution(e,t){return i.a.createElement(v.a,{interactiveStyles:null,renderMenu:this._renderMenu},i.a.createElement(h.b,{weight:"bold",withInteractiveStyling:!0},i.a.createElement(E.a,{source:{uri:t},style:P.image}),i.a.createElement(h.b,null,e.toUpperCase())))}}const P=m.a.create((e=>({button:{marginLeft:e.spaces.space12},image:{display:"inline-block",height:e.spaces.space16,marginHorizontal:e.spaces.space4,width:e.spaces.space16},root:{marginHorizontal:e.spaces.space12}})));var L=R;const M=s((({addToast:e,gifUrl:t,provider:a})=>i.a.createElement(L,{addToast:e,gifUrl:t,provider:a})));t.a=M},d0UJ:function(e,t,a){var n=a("JNqh");e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},dCqJ:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),o=a("cm6r"),r=(a("kYxP"),a("t62R")),s=a("rHpw"),l=a("3XMw"),c=a.n(l);const d=c.a.d7e50a66,u="INDIRECT",h="NO_SPONSORSHIP",p="ISSUE";class m extends i.a.Component{constructor(...e){super(...e),this._renderDisclaimerDetails=()=>{const{onPoliticalSponsorWebsiteClick:e,promotedContent:t}=this.props;if(!t.adMetadataContainer)return null;const{disclaimerType:a,sponsorshipCandidate:n,sponsorshipOrganization:o,sponsorshipOrganizationWebsite:s,sponsorshipType:l}=t.adMetadataContainer,d=s&&a!==p?i.a.createElement(r.b,{link:s,onClick:e}):i.a.createElement(r.b,{color:"gray700",size:"subtext2"});if(!o)return null;const m=i.a.createElement(c.a.I18NFormatMessage,{$i18n:"e1e348dd"},i.a.cloneElement(d,null,c.a.hdd29d51({sponsorshipOrganization:o}))),g=i.a.createElement(c.a.I18NFormatMessage,{$i18n:"c7dea0d1"},i.a.cloneElement(d,null,c.a.b97f7079({sponsorshipOrganization:o}))),b=n?i.a.createElement(c.a.I18NFormatMessage,{$i18n:"b5c2371b",sponsorshipCandidate:n},i.a.cloneElement(d,null,c.a.b02627a9({sponsorshipOrganization:o}))):null;return i.a.createElement(r.b,{color:"gray700",size:"subtext2"},a===p?m:l===h?g:l===u?b:m)},this._renderLearnMoreLink=()=>{const{onPromotedDisclaimerLearnMoreClick:e,promotedContent:t,tweet:a}=this.props,{disclaimerType:n}=t.adMetadataContainer||{},o=n===p?"issue_ad":"political_ad",s=`http://ads.twitter.com/transparency/ads/${a.user.screen_name}/tweet/${a.id_str}`;return i.a.createElement(r.b,{link:s,onClick:e(o),size:"subtext2",style:g.learnMore},d)}}render(){return i.a.createElement(i.a.Fragment,null,this._renderDisclaimerDetails(),this._renderLearnMoreLink())}}const g=s.a.create((e=>({learnMore:{alignSelf:"flex-start"}})));var b=a("e5HP"),_=a("Z6aJ"),f=a("MWbm");t.a=function(e){const{onPoliticalSponsorWebsiteClick:t,onPromotedDisclaimerLearnMoreClick:a,onPromotedIndicatorClick:n,promotedContent:r,promotedContentAdvertiser:s,style:l,testID:c,tweet:d,withCircleIcon:u}=e,h=_.a.isPromoted(r),p=!!r&&(r.adMetadataContainer&&("POLITICAL"===r.adMetadataContainer.disclaimerType||"ISSUE"===r.adMetadataContainer.disclaimerType)||"political"===_.a.getDisclosureType(r)||"issue"===_.a.getDisclosureType(r));return h?i.a.createElement(f.a,{style:l,testID:c},s&&r?i.a.createElement(o.a,{interactiveStyles:null,link:{pathname:`https://twitter.com/${s.screen_name}`,state:{promotedTweetState:r}},onPress:n},i.a.createElement(b.a,{promotedContent:r,withCircleIcon:u})):!!r&&i.a.createElement(b.a,{promotedContent:r}),p&&r?i.a.createElement(m,{onPoliticalSponsorWebsiteClick:t,onPromotedDisclaimerLearnMoreClick:a,promotedContent:r,tweet:d}):null):null}},dzqK:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("ERkP");var n=a("zpdM");function i(e){return e instanceof n.EditorState}},e63W:function(e,t,a){var n=a("JNqh");e.exports=function(e,t){var a=n(this,e),i=a.size;return a.set(e,t),this.size+=a.size==i?0:1,this}},e93E:function(e,t,a){(function(t){var a="object"==typeof t&&t&&t.Object===Object&&t;e.exports=a}).call(this,a("fRV1"))},eN33:function(e,t){e.exports=function(e){return function(){return e}}},eask:function(e,t,a){var n=a("JNqh");e.exports=function(e){return n(this,e).get(e)}},gdQ4:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));a("kYxP");var n=a("ERkP"),i=a.n(n),o=a("tRj+"),r=a("3XMw"),s=a.n(r),l=a("zTrU"),c=a("MWbm"),d=a("htQn"),u=a("5mJL"),h=a("oSwX"),p=a("/yvb"),m=a("t62R"),g=a("rHpw");const b=s.a.e3a24e4c,_=s.a.i569ff3e;class f extends i.a.PureComponent{constructor(...e){super(...e),this._getMemoizedBehavioralEventContext=Object(l.a)((e=>({viewType:e})))}componentDidMount(){const{onImpression:e}=this.props;e&&e()}render(){const{avatarUrl:e,onClick:t,style:a,to:n,userName:r,withButton:s,withConversationLine:l}=this.props,g=e&&r,f=s?"add_tweet":"see_more",w=this._getMemoizedBehavioralEventContext(f);return i.a.createElement(o.a,{behavioralEventContext:w},i.a.createElement(d.a,{link:n,onClick:t,style:[y.root,a]},i.a.createElement(u.a,{avatarCell:g?i.a.createElement(c.a,{style:[y.avatarColumn,!l&&y.avatarColumnWithoutLine]},l?i.a.createElement(c.a,{style:y.conversationLine}):null,i.a.createElement(h.default,{size:"large",uri:e})):null,avatarCellStyle:y.conversationConnector,cellStyle:s?y.buttonContainer:g?y.labelWithAvatar:y.label},s?i.a.createElement(p.a,{accessibilityRole:"none",size:"xSmall",style:y.button,type:"brandOutlined"},b):i.a.createElement(m.b,{color:"link",style:y.enlargeTouchTarget},_))))}}f.defaultProps={withButton:!1,withConversationLine:!1};const y=g.a.create((e=>({root:{overflow:"hidden",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space2},avatarColumn:{flexDirection:"column",flexGrow:0,alignItems:"center",paddingBottom:e.spaces.space4},avatarColumnWithoutLine:{paddingTop:e.spaces.space12},conversationConnector:{alignItems:"center",display:"flex",position:"relative"},label:{flexGrow:1,paddingVertical:e.spaces.space4},labelWithAvatar:{flexGrow:1,justifyContent:"center"},conversationLine:{backgroundColor:e.colors.gray200,flexGrow:1,flexShrink:1,width:e.componentDimensions.conversationLineWidth,marginBottom:e.spaces.space4},buttonContainer:{paddingVertical:e.spaces.space4,flexDirection:"row",flexGrow:1},button:{marginVertical:e.spaces.space4},enlargeTouchTarget:{paddingVertical:e.spaces.space8}})))},gpVt:function(e,t,a){"use strict";a.d(t,"b",(function(){return I}));var n=a("ERkP"),i=a.n(n),o=(a("kYxP"),a("CDB5")),r=a("xVN5"),s=a("vjRr"),l=a("rxPX"),c=a("0KEI");const d=(e,t)=>{const{urls:a}=t,n=[...a];let i;for(const t of n.reverse())if(i=s.a.select(e,t),i)break;return i};var u=Object(l.a)().propsFromState((()=>({card:d}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(c.createLocalApiErrorHandlerWithContextFactory)("COMPOSER_CARD_PREVIEW"),fetchCardPreviewIfNeeded:s.a.fetchCardPreviewIfNeeded,updateDMComposer:o.e,updateTweetComposer:r.w}))),h=a("KqB4"),p=a.n(h),m=a("aX4+"),g=a("3XMw"),b=a.n(g),_=a("hOZg"),f=a("cnVF"),y=a("MWbm"),w=a("v6aA"),v=a("/yvb"),C=a("rHpw"),E=a("VY6S"),T=a("mN6z");const x=b.a.f6fec9f6,S=/^https?:\/\//i,I=e=>{const t=p()(e);if(t.length)return t.map((e=>!S.test(e)&&`http://${e}`||e))};class k extends i.a.Component{constructor(e,t){super(e,t),this._fetchCardPreviewIfNeeded=()=>{const{createLocalApiErrorHandler:e,fetchCardPreviewIfNeeded:t,urls:a}=this.props;a.forEach((a=>{t(a).catch(e())}))},this._handleCardPreviewDismissal=e=>this._updateSingleComposer({cardUrl:f.B}),this._updateSingleComposer=e=>{const{conversationId:t,index:a,updateDMComposer:n,updateTweetComposer:i}=this.props,{cardUrl:o}=e||{};this._isDMComposer?t&&n(t,o):i({updates:{cardUrl:o},index:a})},this._debouncedFetchCardPreview=Object(E.a)(this._fetchCardPreviewIfNeeded,1e3),this._isDMComposer=!!e.conversationId}componentDidMount(){this._debouncedFetchCardPreview()}componentDidUpdate(e){const{urls:t}=this.props;Object(T.a)(e.urls,t)||this._debouncedFetchCardPreview()}componentWillUnmount(){this._updateSingleComposer()}render(){const{card:e,isCardPreviewTombstoned:t,style:a}=this.props,{loggedInUserId:n}=this.context;return e&&!t&&n?i.a.createElement(y.a,{style:a},i.a.createElement(m.a,{card:{name:e.name,url:e.url,binding_values:e.binding_values},cardContext:{tweetUserId:n},isInteractive:!1,preventVideoPlayback:!0}),i.a.createElement(v.a,{accessibilityLabel:x,icon:i.a.createElement(_.a,null),onPress:this._handleCardPreviewDismissal,size:"xSmall",style:R.closeButton,type:"onMediaDominantColorFilled"})):null}}k.contextType=w.a;const R=C.a.create((e=>({closeButton:{position:"absolute",top:e.spaces.space4,left:e.spaces.space4}}))),P=u(k);t.a=P},h5NW:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),o=(a("kYxP"),a("MvUL"),a("urw/"),a("ERkP")),r=a.n(o),s=a("dDSG"),l=a("pXBW"),c=a("6/RC"),d=a("wpu3"),u=a("+Kfv"),h=a("eSoz"),p=a("rxPX");const m=(e,{communityId:t})=>t?h.c.select(e,t):void 0;var g=Object(p.a)().propsFromState((()=>({community:m}))),b=a("MtXG"),_=a("t62R"),f=a("CKsB"),y=a("rHpw"),w=a("3XMw"),v=a.n(w);const C=v.a.d58baa7f;var E=g(r.a.memo((e=>{const{clickHandler:t,community:a,communityId:n,selectedCommunityId:i}=e;if(!a)return null;const{member_count:o}=a;return r.a.createElement(f.a,{actionSubText:(()=>{const e=C(o);return r.a.createElement(b.a.Group,null,r.a.createElement(b.a,null,r.a.createElement(_.b,{color:"white"},r.a.createElement(v.a.I18NFormatMessage,{$i18n:"b38e130b"},r.a.createElement(b.a.Value,null,v.a.ibd0106e({formattedCount:e})),r.a.createElement(b.a.Label,null,v.a.cface2d1({count:o}))))))})(),actionText:a.name,isSelected:i===n,key:n,media:a.media,onClick:t({_type:"community_members",communityIdValue:n,conversationControlsValue:"community_members"}),selectable:!0,style:T.menuItem})})));const T=y.a.create((e=>({menuItem:{alignItems:"center"}})));var x=a("0zXz"),S=a("FS1z"),I=a("Irs7"),k=a("MWbm"),R=a("yw4N"),P=a("/yvb"),L=a("+Eiw"),M=a("Zg3A"),D=a("EyD/"),A=a("5wO0");const O=v.a.e815fc34,F=v.a.c63602d4,B=v.a.aa4209e8,N=v.a.d0748dae,U=v.a.abd845fe,j={viewType:"everyone"},H={viewType:"community"},z=v.a.d58baa7f,V=y.a.create((e=>({hidden:{visibility:"hidden"},title:{flexDirection:"column",paddingVertical:e.spaces.space4,paddingHorizontal:e.spaces.space12},root:{flex:1,flexDirection:"column",paddingTop:e.spaces.space12,paddingBottom:e.spaces.space12},menuItem:{alignItems:"center"},superFollowsIcon:{backgroundImage:L.a.getBackgroundImage()},viewport:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge,flexGrow:1,flexShrink:1,overflow:"auto",zIndex:void 0}})));var W=e=>{var t,a,n;const{audienceControlsValue:i,dismiss:o,everyoneLabel:s,hasMemberships:l,history:c,isC9sParticipationEnabled:d,isSuperFollowsCreator:h,isTrustedFriendsEnabled:p,onAudienceControlsValueChange:m,sliceModule:g,updateSingleComposer:y}=e,w=i.communityIdValue||void 0,C=i.exclusivityControlValue||void 0,T=i.trustedFriendsValue||void 0,L=null==(t=e.trustedFriendsList)?void 0:t.rest_id,W=null!=(a=null==(n=e.trustedFriendsList)?void 0:n.member_count)?a:0,G=Object(I.b)(),q=r.a.useCallback((e=>()=>{m(e),["super_followers_exclusive","community_members","trusted_friends_tweet"].indexOf(e._type)>-1&&y({updates:{scheduledFor:void 0,scheduledTweetId:void 0}}),o()}),[m,y,o]),$=r.a.useCallback((()=>{if(L)return G.scribe({section:"audience_selector",component:"trusted_friends",element:"edit_list_button",action:"click"}),c.push(`/i/circles/${L}/members`)}),[G,c,L]);return r.a.createElement(k.a,{style:V.root},r.a.createElement(R.a,{style:V.viewport},r.a.createElement(r.a.Fragment,null,r.a.createElement(_.b,{size:"headline1",style:V.title,weight:"bold"},O),r.a.createElement(u.a,{behavioralEventContext:j},r.a.createElement(f.a,{Icon:M.a,actionText:s,isSelected:!C&&!w&&!T,onClick:q({_type:"conversation_controls",conversationControlsValue:"all"}),selectable:!0,style:V.menuItem,withIconAsThumbnail:!0})),h?r.a.createElement(f.a,{Icon:D.a,actionText:B,iconThumbnailColor:"exclusive",isSelected:!!C,onClick:q({_type:"super_followers_exclusive",conversationControlsValue:"super_followers_exclusive",exclusivityControlValue:{}}),selectable:!0,style:V.menuItem,withIconAsThumbnail:!0}):null,p&&e.trustedFriendsList&&L?r.a.createElement(f.a,{Icon:A.a,actionSubText:(e=>{const t=z(e);return r.a.createElement(b.a.Group,null,r.a.createElement(b.a,null,r.a.createElement(_.b,{color:"white"},r.a.createElement(v.a.I18NFormatMessage,{$i18n:"g8ffaf17"},r.a.createElement(b.a.Value,null,v.a.a5f7b700({formattedCount:t})),r.a.createElement(b.a.Label,null,v.a.a7daec1e({count:e})))),r.a.createElement(P.a,{onPress:$,size:"xSmall",type:"primaryText"},U)))})(W),actionText:N,iconThumbnailColor:"success",isSelected:!!T,onClick:q({_type:"trusted_friends_tweet",conversationControlsValue:"trusted_friends_tweet",trustedFriendsMemberCount:W,trustedFriendsValue:{trusted_friends_list_id:L}}),selectable:!0,style:V.menuItem,withIconAsThumbnail:!0}):null),l&&g&&d?r.a.createElement(k.a,null,r.a.createElement(u.a,{behavioralEventContext:H},r.a.createElement(_.b,{style:V.title,weight:"bold"},F),r.a.createElement(S.a,{module:g,noItemsRenderer:x.a,renderer:e=>r.a.createElement(E,{clickHandler:q,communityId:e,dismiss:o,key:e,selectedCommunityId:w}),withoutHeadroom:!0}))):null))},G=a("xVN5"),q=a("wa7Z"),$=a("hqKg"),K=a("li/m"),X=a("RqPI"),Q=a("xZGM"),Y=a("0KEI"),J=a("DVtB");const Z=(e,t)=>{const a=t.audienceControlsValue.communityIdValue||void 0;return a?h.c.select(e,a):void 0},ee=(e,t)=>Object(Q.E)(e,Q.f),te=(e,t)=>Object(Q.E)(e,Q.x),ae=e=>{const t=Object(J.b)(e);return t.length?t[0]:void 0};var ne=Object(p.a)().propsFromState((()=>({communities:h.f,educationalVisibilityFlag:ee,trustedFriendsEducationVisibilityFlag:te,hasMemberships:K.d,selectedCommunity:Z,sliceModule:Object($.createSelector)(X.s,(e=>e?Object(q.b)(e):void 0)),selectTrustedFriendsList:ae}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(Y.createLocalApiErrorHandlerWithContextFactory)("COMMUNITIES_CONTROLS"),addEducationFlag:()=>Object(Q.A)(Q.f),addTrustedFriendsEducationFlag:()=>Object(Q.A)(Q.x),updateSingleComposer:G.w,fetchOrCreateTrustedFriendsList:J.a}))),ie=a("FG+G"),oe=a.p+"twitter-circle.b1a74a97.svg",re=a("TIdA"),se=a("A91F");const le=v.a.f0598964,ce=v.a.ceec051c,de=v.a.fc5bfd96,ue=v.a.f5b3dc1e,he=y.a.create((e=>({root:{flexDirection:"column",paddingBottom:e.spaces.space4,borderRadius:e.borderRadii.xLarge},modal:{borderRadius:e.borderRadii.none},title:{flexDirection:"column",paddingHorizontal:e.spaces.space16,paddingTop:e.spaces.space12},createButton:{marginTop:e.spaces.space16,marginHorizontal:e.spaces.space16},cancelButton:{marginHorizontal:e.spaces.space16,marginVertical:e.spaces.space16},coverContainer:{height:"170px",width:"100%"}})));var pe=e=>{const{onAction:t,setShowTrustedFriendsModal:a}=e;return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{accessibilityDescribedBy:"trusted-friends-education-popover",accessibilityLabelledBy:"trustd-friends-education-title",accessibilityRole:"dialog",style:he.root},r.a.createElement(k.a,{style:he.coverContainer},r.a.createElement(re.a,{accessibilityLabel:"",aspectMode:se.a.COVER,image:oe})),r.a.createElement(k.a,{style:he.title},r.a.createElement(_.b,{nativeID:"conversation-controls-title",size:"title3",style:he.title,weight:"bold"},le),r.a.createElement(_.b,{color:"gray700",nativeID:"conversation-controls-details",size:"body",style:he.createButton},ce),r.a.createElement(P.a,{onPress:()=>{t(),a(!0)},size:"xLarge",style:he.createButton,type:"primaryFilled"},de),r.a.createElement(P.a,{key:"button_cancel",onPress:()=>{t()},size:"xLarge",style:he.cancelButton,type:"primaryOutlined"},ue))))},me=a("7JQg"),ge=a("feu+"),be=a("cOhU"),_e=a("a5gf"),fe=a("Lsrn"),ye=a("k/Ka");const we=(e={})=>Object(ye.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[fe.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M1 7c0-.552.448-1 1-1h9.38c.545-2.275 2.83-3.678 5.104-3.135 1.552.37 2.764 1.583 3.135 3.135H22c.552 0 1 .448 1 1s-.448 1-1 1h-2.38c-.545 2.275-2.83 3.678-5.104 3.135-1.552-.37-2.764-1.583-3.135-3.135H2c-.552 0-1-.448-1-1zm21 9h-9.38c-.545-2.275-2.83-3.678-5.104-3.135-1.552.37-2.764 1.583-3.135 3.135H2c-.552 0-1 .448-1 1s.448 1 1 1h2.38c.545 2.275 2.83 3.678 5.104 3.135 1.552-.37 2.764-1.583 3.135-3.135H22c.552 0 1-.448 1-1s-.448-1-1-1z"})));we.metadata={width:24,height:24};var ve=we;const Ce=v.a.e76b4486,Ee=v.a.j24c37b2,Te=v.a.bb55e8ee,xe=v.a.h3fad86e,Se=v.a.g31872be,Ie=v.a.b28ec850,ke=v.a.h031847a;function Re(e){const{changeAudienceToTrustedFriends:t,history:a,setShowModal:n,trustedFriendsListId:i}=e,o=r.a.useCallback((()=>{t(),i&&(n(!1),a.push(`/i/circles/${i}/members/suggested`))}),[a,n,i,t]),s=r.a.useCallback((()=>{n(!1),t()}),[n,t]),l=r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{style:Pe.contentWrapper},r.a.createElement(k.a,null,r.a.createElement(be.a,{style:Pe.icon})),r.a.createElement(k.a,{style:Pe.subtextContainer},r.a.createElement(_.b,{align:"left",color:"text",style:Pe.subtextContainer,weight:"bold"},Te),r.a.createElement(_.b,{align:"left",color:"gray700"},xe))),r.a.createElement(k.a,{style:Pe.contentWrapper},r.a.createElement(k.a,null,r.a.createElement(_e.a,{style:Pe.icon})),r.a.createElement(k.a,{style:Pe.subtextContainer},r.a.createElement(_.b,{color:"text",weight:"bold"},Se),r.a.createElement(_.b,{color:"gray700"},Ie))),r.a.createElement(k.a,{style:Pe.contentWrapper},r.a.createElement(k.a,null,r.a.createElement(ve,{style:Pe.icon})),r.a.createElement(k.a,{style:Pe.subtextContainer},r.a.createElement(_.b,{color:"text",weight:"bold"},ke),r.a.createElement(_.b,{color:"gray700"},r.a.createElement(v.a.I18NFormatMessage,{$i18n:"c97dfde5"},r.a.createElement(_.b,{color:"text",link:"https://help.twitter.com/using-twitter/twitter-circle",style:Pe.learnMore,weight:"bold",withUnderline:!0},v.a.i08a2509))))));return r.a.createElement(me.c,null,r.a.createElement(ge.a,{actionLabel:Ee,headline:Ce,onAction:o,onClose:s,subtext:l,withCloseButton:!0}))}const Pe=y.a.create((e=>({subtextContainer:{display:"flex",flexDirection:"column",width:"100%"},icon:{color:e.colors.green500,paddingTop:e.spaces.space4,paddingRight:e.spaces.space24},learnMore:{whiteSpace:"nowrap"},contentWrapper:{display:"flex",flexDirection:"row",paddingTop:e.spaces.space32}})));var Le=a("FGLp"),Me=a("X00g"),De=a("Sp5X"),Ae=a("efqG");let Oe=v.a.baffe39a;const Fe=v.a.e815fc34,Be=v.a.aa4209e8,Ne=v.a.d0748dae,Ue=v.a.c33a97d6,je=v.a.a68885de,He=v.a.c64974fc,ze={viewType:"communities_controls"};const Ve=y.a.create((e=>({button:{paddingHorizontal:e.spaces.space4},container:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.space12},hidden:{visibility:"hidden"},icon:{marginLeft:e.spaces.space4,width:e.spaces.space16,height:e.spaces.space16},root:{flexDirection:"column",paddingTop:e.spaces.space16,paddingBottom:e.spaces.space16}})));var We=ne((function(e){const[t,a]=r.a.useState(!1),[n,o]=r.a.useState(!1),{addEducationFlag:s,addTrustedFriendsEducationFlag:l,audienceControlsValue:c,disabled:d,educationalVisibilityFlag:h,hasMemberships:p,isAccountProtected:m,isC9sParticipationEnabled:g,isSuperFollowsCreator:b,isTrustedFriendsEnabled:_,onAudienceControlsValueChange:f,selectTrustedFriendsList:y,selectedCommunity:w,sliceModule:v,trustedFriendsCopyVariantValue:C,trustedFriendsEducationVisibilityFlag:E,updateSingleComposer:T}=e,x=c.communityIdValue||!1,S=c.exclusivityControlValue||!1,I=c.trustedFriendsValue||!1,R=null==y?void 0:y.rest_id,L=_&&E,M=h&&!w||L;_&&("followers"!==C&&"all_followers"!==C||m?"followers"===C&&m?Oe=He:"all_followers"===C&&m&&(Oe=je):Oe=Ue);let D,A=Oe;if(x&&null!=w&&w.name?A=w.name:S?A=Be:I&&(A=Ne),S)D={color:"plum500",borderColor:"plum500",backgroundColor:"transparent"};else if(I)D={color:"green500",borderColor:"green500",backgroundColor:"transparent"};else if(x&&null!=w&&w.theme){const e=Me.a.getCommunityUIColorName(w.theme);D={color:e,borderColor:e,backgroundColor:"transparent"}}else D={type:"brandOutlined"};Object(Le.a)((()=>{const{fetchOrCreateTrustedFriendsList:t}=e;_&&(null==t||t())}));const O=r.a.useCallback((()=>{o(!1),s(),l()}),[s,l]),F=r.a.useCallback((e=>L&&!x?r.a.createElement(pe,{history:De.a,onAction:e,setShowTrustedFriendsModal:a}):r.a.createElement(W,{audienceControlsValue:c,dismiss:e,everyoneLabel:Oe,hasMemberships:p,history:De.a,isC9sParticipationEnabled:g,isSuperFollowsCreator:b,isTrustedFriendsEnabled:_,onAudienceControlsValueChange:e=>{O(),f(e)},sliceModule:v,trustedFriendsList:y,updateSingleComposer:T})),[O,v,T,c,p,g,b,y,f,x,L,_]),B=r.a.useCallback((()=>{R&&f({_type:"trusted_friends_tweet",conversationControlsValue:"trusted_friends_tweet",trustedFriendsMemberCount:null==y?void 0:y.member_count,trustedFriendsValue:{trusted_friends_list_id:R}})}),[f,R,y]);return b||p||_&&e.selectTrustedFriendsList?r.a.createElement(u.a,{behavioralEventContext:ze},r.a.createElement(k.a,{style:Ve.container},t?r.a.createElement(Re,{changeAudienceToTrustedFriends:B,history:De.a,setShowModal:a,trustedFriendsListId:R}):null,r.a.createElement(Ae.a,{onDismiss:O,onOpen:()=>{o(!0)},renderContent:F,visibilityBehavior:M&&!t?"forceVisible":"interactive"},r.a.createElement(P.a,i()({accessibilityExpanded:n,accessibilityHasPopup:"menu",accessibilityLabel:Fe,accessibilityRole:"button",disabled:d,size:"xSmall"},D),A,r.a.createElement(ie.a,{style:Ve.icon}))))):null})),Ge=a("PKbs");const qe=(e,t)=>{const a=t.selectedCommunityId;return a?h.c.select(e,a):void 0};var $e=Object(p.a)().propsFromState((()=>({community:qe}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(Y.createLocalApiErrorHandlerWithContextFactory)("COMMUNITY_RULES"),fetchCommunityIfNeeded:h.c.fetchOneIfNeeded}))),Ke=a("YeIG"),Xe=a("21zW");const Qe=v.a.gfca5254,Ye=v.a.f510c8b2,Je=r.a.createElement(_.b,{weight:"bold"},Ye),Ze=y.a.create((e=>({button:{paddingHorizontal:e.spacesPx.space8+e.spacesPx.space2},badgeStyle:{marginRight:e.spaces.space12},container:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.space12,alignItems:"baseline"},rulesHeader:{marginHorizontal:e.spaces.space16,marginVertical:e.spaces.space12},ruleContainerStyle:{paddingHorizontal:e.spaces.space16,fontWeight:"normal"}})));var et=$e((({community:e,createLocalApiErrorHandler:t,fetchCommunityIfNeeded:a,selectedCommunityId:n,showMiddot:o})=>{r.a.useEffect((()=>{n&&Object(Ke.a)(e)&&a(n).catch(t())}),[e,n,t,a]);const[s,l]=r.a.useState(!1),c=r.a.useCallback((t=>{if(null!=e&&e.rules){const{rules:t,theme:a}=e;return r.a.createElement(Ge.b,{badgeStyle:Ze.badgeStyle,headerContainerStyle:Ze.rulesHeader,heading:Je,ruleContainerStyle:Ze.ruleContainerStyle,rules:t,theme:a})}return null}),[e]);if(null!=e&&e.rules&&e.rules.length>0){const{theme:t}=e,a={color:Me.a.getCommunityUIColorName(t),borderColor:"transparent",backgroundColor:"transparent"};return r.a.createElement(k.a,{style:Ze.container},o?r.a.createElement(Xe.a,null):null,r.a.createElement(Ae.a,{onDismiss:()=>l(!1),onOpen:()=>l(!0),renderContent:c},r.a.createElement(P.a,i()({accessibilityExpanded:s,accessibilityHasPopup:"dialog",accessibilityRole:"button",size:"xSmall",style:Ze.button},a),Qe)))}return null})),tt=a("ii+P"),at=a("4zmP");const nt=v.a.g46f363e,it={viewType:"rule_education"},ot=()=>{const[e,t]=Object(tt.b)(Q.g);return r.a.useEffect((()=>t),[t]),e?r.a.createElement(k.a,{style:rt.container},r.a.createElement(at.a,{behavioralEventContext:it,onClose:t,text:nt,withCloseButton:!0})):null},rt=y.a.create((e=>({container:{marginBottom:e.spaces.space8}})));var st=r.a.memo(ot),lt=a("H7Rt"),ct=a("yZqq"),dt=a("v6aA");const ut=(e,t)=>Object(Q.E)(e,Q.s);var ht=Object(p.a)().propsFromState((()=>({shouldShowEducation:ut}))).propsFromActions((()=>({addEducationFlag:()=>Object(Q.A)(Q.s)}))),pt=a("9gvj");const mt=v.a.aa65a44a,gt={viewType:"persistent_conversation_controls_education"};const bt=y.a.create((e=>({container:{width:"100%"}})));var _t=ht((function({addEducationFlag:e,buttonRef:t,shouldShowEducation:a}){const{featureSwitches:n}=r.a.useContext(dt.a),i=()=>{e()};return r.a.useEffect((()=>i),[]),!0===n.getValueWithoutScribeImpression("conversation_controls_persistence_enabled")&&a?r.a.createElement(k.a,{style:bt.container},r.a.createElement(pt.a,{behavioralEventContext:gt,containerRef:t,onClose:i,text:mt})):null})),ft=a("DlMI"),yt=a("gBde"),wt=a("gUPl");const vt=r.a.createElement(ft.a,null),Ct=r.a.createElement(yt.a,null),Et=r.a.createElement(wt.a,null),Tt=r.a.createElement(be.a,null),xt=r.a.createElement(_e.a,null),St="conversation_control",It={viewType:St};Object.freeze(["community","by_invitation"]);var kt=Object(I.a)((e=>{const{analytics:t,...a}=e,{disabled:n,isReply:i,trustedFriendsTweetAuthorScreenName:o,value:s}=e,l=v.a.bea21405;let c=v.a.c0857cce;i&&s===lt.a.trusted_friends_tweet&&(c=o?l({screenName:o}):v.a.d3922d78);const d=Object.freeze({all:{icon:vt,label:v.a.i8ea6d4e},community:{icon:Et,label:v.a.ec5a4a26},by_invitation:{icon:Ct,label:v.a.b454300a},community_members:{icon:Tt,label:v.a.i13be5a0},super_followers_exclusive:{icon:vt,label:v.a.f8393bda},trusted_friends_tweet:{icon:xt,label:c}}),{icon:h,label:p}=d[s],[m,g]=r.a.useState(!1),b=r.a.useRef(null);Object(Le.a)((()=>{s!==lt.a.all&&s!==lt.a.community_members&&g(!0)}));const _=r.a.useCallback((e=>{t.scribe({element:St,action:"click"})}),[t]);return r.a.createElement(u.a,{behavioralEventContext:It},r.a.createElement(k.a,{style:Rt.educationContainer},m?r.a.createElement(_t,{buttonRef:b}):null,r.a.createElement(k.a,{style:Rt.controlsContainer},r.a.createElement(ct.a,a,r.a.createElement(P.a,{disabled:n,icon:h,onPress:_,ref:b,size:"xSmall",style:Rt.button,type:"brandText"},p)))))}));const Rt=y.a.create((e=>({button:{paddingHorizontal:e.spacesPx.space8+e.spacesPx.space2},educationContainer:{display:"inline-flex",flexDirection:"column"},controlsContainer:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.space12}})));var Pt=a("krmn"),Lt=a("cIoY"),Mt=a("w3n3"),Dt=a("MLl7"),At=a("1auM"),Ot=a("Nsha"),Ft=a.n(Ot),Bt=a("07FG"),Nt=a("Q8CU"),Ut=a("QbaN"),jt=a("VPdC"),Ht=a("WPfJ");var zt=y.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal},avatarContainerExpanded:{paddingTop:e.spaces.space4},avatarContainer:{justifyContent:"center"},avatar:{width:"100%"},controlsContainer:{marginLeft:-e.spacesPx.space8,borderBottomColor:e.colors.borderColor,borderBottomWidth:e.spaces.space1,flexWrap:"wrap",width:"100%"},mobileControlsLayout:{flexDirection:"column"},controlsLayout:{flexDirection:"row",alignItems:"center"},rightColumn:{paddingTop:e.spaces.space4,justifyContent:"center",position:"static",transitionProperty:"opacity, color",transitionDuration:"0.1s",transitionTimingFunction:"ease-out"},composeBoxContainer:{display:"flex",flexDirection:"column",flexGrow:1,flexShrink:1,position:"static",zIndex:1},inputArea:{zIndex:1},dragDrop:{borderColor:e.colors.transparent,borderRadius:e.borderRadii.small,borderStyle:"solid",borderWidth:e.borderWidths.medium},textInputArea:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",zIndex:Ht.f},textInputStyle:{paddingHorizontal:0},textInputMobileCollapsed:{maxHeight:e.fontSizes.title4,padding:0,overflow:"hidden"},tweetAttachmentArea:{zIndex:Ht.e},iconEmojiPicker:{zIndex:Ht.c},toolBar:{alignItems:"center",backgroundColor:e.colors.cellBackground,flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",marginHorizontal:e.spaces.space2,zIndex:Ht.a},firstToolBarButton:{marginLeft:`-${e.spaces.space8}`},toolBarButton:{marginHorizontal:0},toolBarIconsContainer:{alignItems:"center",flexDirection:"row",marginTop:e.spaces.space12},separator:{width:"1px",backgroundColor:e.colors.gray300,height:e.fontSizes.title2,marginRight:e.spaces.space12,marginLeft:`calc(${e.spaces.space12} - 2px)`},conversationLine:{alignSelf:"center",backgroundColor:e.colors.gray200,flexGrow:1,flexShrink:1,minHeight:0,width:e.componentDimensions.conversationLineWidth,marginTop:e.spaces.space4,marginBottom:e.spaces.space4},conversationLineWithOverflow:{marginTop:`-${e.spaces.space4}`},attachmentContainer:{marginTop:e.spaces.space4,marginBottom:e.spaces.space4},mediaPreview:{marginTop:e.spaces.space4},quoteTweet:{backgroundColor:e.colors.transparent,marginTop:e.spaces.space4,marginBottom:0},addImageTextContainer:{alignSelf:"flex-start",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},addImageActionIcon:{marginHorizontal:e.spaces.space4},addImageTextPadding:{marginEnd:e.spaces.space48},imageActions:{alignItems:"center",flexDirection:"row",flexWrap:"wrap",marginTop:e.spaces.space4},blurStyle:{opacity:.5},inputStyle:{width:"100%"},collapsedInputStyle:{flexGrow:1,flexShrink:1},highlightedText:{borderRadius:e.borderRadii.large,paddingVertical:e.spaces.space12,paddingLeft:e.spaces.space12,marginTop:0,marginBottom:0},highlightedTextInner:{marginHorizontal:e.spaces.space4},taggedLocationButton:{paddingLeft:e.spacesPx.space8+e.spacesPx.space2,paddingRight:e.spacesPx.space8+e.spacesPx.space2,maxWidth:"100%"},taggedLocationContainer:{display:"inline-flex",flexDirection:"row",minWidth:0,flexShrink:1,paddingBottom:e.spaces.space12}})));const Vt=v.a.bdbcdd94;var Wt=({media:e,mediaAttachDisabled:t,onFilesAdded:a,setActiveParentKey:n})=>{const i=t||e.length>=4,o=e.length<3;return r.a.createElement(jt.a,{acceptGifs:0===e.length,acceptVideo:0===e.length,accessibilityLabel:e.length>0?Vt:void 0,disabled:i,multiple:o,onChange:a,onPress:n,style:[zt.toolBarButton,zt.firstToolBarButton],type:"brandText"})},Gt=a("zTrU"),qt=a("p+r5"),$t=a("GWvE");class Kt extends r.a.Component{constructor(...e){super(...e),this._setInputRef=e=>{this._inputRef=e}}render(){const{autoFocus:e,defaultValue:t,editable:a,label:n,name:i,onBlur:o,onChange:s}=this.props;return r.a.createElement(k.a,{style:Xt.root},r.a.createElement(qt.a,{autoCapitalize:"none",autoCorrect:!1,autoFocus:e,defaultValue:t,editable:a,label:n,maxLength:25,name:i,onBlur:o,onChange:s,ref:this._setInputRef,spellCheck:"false",style:Xt.formTextInput}))}get value(){return this._inputRef&&this._inputRef.getValue()}get isValid(){const{optional:e}=this.props;return!this.value&&e||this.value&&!Object($t.a)(this.value)&&this._inputRef&&this._inputRef.isValidLength()}}Kt.defaultProps={autoFocus:!1,editable:!0,optional:!1};const Xt=y.a.create((e=>({root:{flexDirection:"row",flexShrink:1},action:{width:e.spaces.space40},addButton:{flexGrow:1,minHeight:"100%",padding:0},formTextInput:{flexGrow:1,flexShrink:1,marginVertical:0,paddingTop:0,paddingHorizontal:0,paddingBottom:e.spaces.space12}})));var Qt=Kt,Yt=a("mtvn"),Jt=a("6XNv");class Zt extends r.a.PureComponent{render(){const{editable:e,label:t,last:a,max:n,min:i,onChange:o,testID:s,value:l}=this.props,c=!e||i===n,d=l.toString(),u=Object(Yt.a)(i,n+1).map((e=>({label:`${v.a.ia24dc8d(e)}`,value:`${e}`})));return r.a.createElement(Jt.a,{disabled:c,label:t,onChange:o,options:u,style:[ea.selector,!a&&ea.rightMargin],testID:s,value:d})}}Zt.defaultProps={last:!1};const ea=y.a.create((e=>({rightMargin:{marginRight:e.spaces.space20},selector:{flexGrow:1}})));var ta=Zt,aa="addPollChoice",na="selectPollDays",ia="selectPollHours",oa="selectPollMinutes",ra="removePollButton";const sa=v.a.caf8edc4,la=v.a.g93586be,ca=v.a.d073b644,da=v.a.a2f0728e;class ua extends r.a.Component{constructor(e,t){super(e,t),this._handleDaysChange=e=>{const{onChange:t}=this.props,a=parseInt(e,10);this.setState((e=>{const{hours:n,minutes:i}=e.duration,o=0===a&&0===n&&0===i?1:7===a?0:n,r={days:a,hours:o,minutes:7===a?0:0===a&&0===o&&i<5?5:i};return t&&t(r),{duration:r}}))},this._handleHoursChange=e=>{const{onChange:t}=this.props,a=parseInt(e,10);this.setState((e=>{const{days:n,minutes:i}=e.duration,o={days:n,hours:a,minutes:0===n&&0===a&&i<5?5:i};return t&&t(o),{duration:o}}))},this._handleMinutesChange=e=>{const{onChange:t}=this.props,a=parseInt(e,10);this.setState((e=>{const{days:n,hours:i}=e.duration,o={days:n,hours:i,minutes:a};return t&&t(o),{duration:o}}))},this.state={duration:e.initialDuration}}render(){const{isActive:e,style:t}=this.props;return r.a.createElement(k.a,{style:t},r.a.createElement(_.b,{style:ha.durationLabel},e?sa:""),this._renderPicker())}_renderPicker(){const{editable:e,isActive:t}=this.props,{duration:{days:a,hours:n,minutes:i}}=this.state;return r.a.createElement(k.a,{style:ha.durationControls},r.a.createElement(ta,{editable:e&&t,label:la,max:7,min:0,onChange:this._handleDaysChange,testID:na,value:a}),r.a.createElement(ta,{editable:e&&t,label:ca,max:7===a?0:23,min:0,onChange:this._handleHoursChange,testID:ia,value:n}),r.a.createElement(ta,{editable:e&&t,label:da,last:!0,max:7===a?0:59,min:0===a&&0===n?5:0,onChange:this._handleMinutesChange,testID:oa,value:i}))}get duration(){return this.state.duration}}ua.defaultProps={editable:!0,initialDuration:{days:1,hours:0,minutes:0}};const ha=y.a.create((e=>({durationControls:{flexDirection:"row",justifyContent:"space-between"},durationLabel:{marginBottom:e.spaces.space4}})));var pa=ua,ma=a("iY63"),ga=a("jtO7");const ba=v.a.g589c2e2,_a=v.a.a1e6c3a2,fa=v.a.a739e006,ya=v.a.d89a5b92,wa=v.a.c2a8118e,va=v.a.a8ede1de,Ca=v.a.af40a8e0;class Ea extends r.a.Component{constructor(e,t){super(e,t),this._setChoice1Ref=e=>{this._choice1=e},this._setChoice2Ref=e=>{this._choice2=e},this._setChoice3Ref=e=>{this._choice3=e},this._setChoice4Ref=e=>{this._choice4=e},this._setDurationPickerRef=e=>{this._durationPicker=e},this._handleValidation=()=>{const{onChange:e,onInvalid:t,onValid:a}=this.props,n=this.choices,{_choice1:i,_choice2:o,_choice3:r,_choice4:s}=this,l=[i,o,r,s].filter(Boolean).every((e=>e.isValid));n&&n.length>=2&&l?a():t(),e&&e({choices:n,duration:this.duration})},this._handleAdd=()=>{const{analytics:e}=this.props;e.scribe({element:"add_poll_option",action:"click"}),this.setState((({choiceCount:e})=>({autoFocus:!0,choiceCount:e+1})))},this._handleDurationChange=e=>{const{onChange:t}=this.props;t&&t({choices:this.choices,duration:e})},this._handleBlur=()=>{const{onBlur:e}=this.props;null==e||e()};const{initialChoices:a}=e,n=void 0===a,i=(a||[]).length,o=i>2?i:2;this.state={autoFocus:n,choiceCount:o}}_renderChoices(){const{editable:e,initialChoices:t=[],isActive:a}=this.props,{autoFocus:n,choiceCount:i}=this.state,o=r.a.createElement(k.a,{style:Ta.rightColumn},i<4?r.a.createElement(P.a,{accessibilityLabel:va,disabled:!(e&&a),hoverLabel:{label:Ca},icon:r.a.createElement(ma.a,null),onPress:this._handleAdd,size:"medium",style:Ta.addButton,testID:aa,type:"brandText"}):null);return r.a.createElement(k.a,{style:Ta.choicesAndAddButton},r.a.createElement(k.a,{style:Ta.choices},r.a.createElement(Qt,{autoFocus:n,defaultValue:t[0],editable:e&&a,label:ba,name:"Choice1",onBlur:this._handleBlur,onChange:this._handleValidation,ref:this._setChoice1Ref}),r.a.createElement(Qt,{defaultValue:t[1],editable:e&&a,label:_a,name:"Choice2",onBlur:this._handleBlur,onChange:this._handleValidation,ref:this._setChoice2Ref}),i>=3?r.a.createElement(Qt,{autoFocus:n,defaultValue:t[2],editable:e&&a,label:fa,name:"Choice3",onBlur:this._handleBlur,onChange:this._handleValidation,optional:!0,ref:this._setChoice3Ref}):null,4===i?r.a.createElement(Qt,{autoFocus:n,defaultValue:t[3],editable:e&&a,label:ya,name:"Choice4",onBlur:this._handleBlur,onChange:this._handleValidation,optional:!0,ref:this._setChoice4Ref}):null),o)}render(){const{editable:e,initialDuration:t,isActive:a,onRemove:n}=this.props;return r.a.createElement(k.a,{style:Ta.root},this._renderChoices(),r.a.createElement(pa,{editable:e,initialDuration:t,isActive:a,onChange:this._handleDurationChange,ref:this._setDurationPickerRef,style:Ta.durationPicker}),r.a.createElement(k.a,{style:Ta.removePollButton},r.a.createElement(ga.a,{color:"red500",label:wa,onPress:n,testID:ra})))}get choices(){const{_choice1:e,_choice2:t,_choice3:a,_choice4:n}=this;return[e&&e.value,t&&t.value,a&&a.value,n&&n.value].filter(Boolean)}get duration(){return this._durationPicker?this._durationPicker.duration:void 0}}const Ta=y.a.create((e=>({root:{backgroundColor:e.colors.transparent,borderColor:e.colors.nestedBorderColor,borderRadius:e.borderRadii.xLarge,borderStyle:"solid",borderWidth:e.borderWidths.small,flexDirection:"column",overflow:"hidden",paddingTop:e.spaces.space12},choicesAndAddButton:{paddingHorizontal:e.spaces.space12,flexDirection:"row"},choices:{flexGrow:1,flexShrink:1},removePollButton:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge},rightColumn:{flexDirection:"column-reverse"},addButton:{marginBottom:e.spaces.space24,marginLeft:e.spaces.space4},durationPicker:{borderTopColor:e.colors.nestedBorderColor,borderTopWidth:e.borderWidths.small,borderBottomColor:e.colors.nestedBorderColor,borderBottomWidth:e.borderWidths.small,padding:e.spaces.space12}})));var xa=Object(I.a)(Ea),Sa=a("+d3d");var Ia=({composerIndex:e,editable:t,initialChoices:a,initialDuration:n,isActive:o,isPollValid:s,updateComposer:l})=>{const c=Object(I.b)(),{onChange:d,...u}=r.a.useMemo((()=>({onChange(t){l({pollChoices:null==t?void 0:t.choices,pollDuration:null==t?void 0:t.duration},e)},onValid(){!s&&l({pollValid:!0},e)},onInvalid(){s&&l({pollValid:!1},e)},onRemove(){c.scribe({element:"remove_poll",action:"click"}),l({pollActive:!1},e)}})),[c,s,l,e]),h=r.a.useMemo((()=>Object(Sa.a)((({choices:e,duration:t})=>{d({choices:e,duration:t})}),200,{leading:!0,trailing:!0})),[d]),p=r.a.useCallback((()=>{h.flush()}),[h]);return r.a.createElement(xa,i()({editable:t,initialChoices:a,initialDuration:n,isActive:o,onBlur:p,onChange:h},u))};const ka=y.a.create((e=>({container:{marginBottom:e.spaces.space4},link:{color:"black"}}))),Ra=v.a.i859676c,Pa=r.a.createElement(v.a.I18NFormatMessage,{$i18n:"a02c8d75"},r.a.createElement(_.b,{link:"/settings/audience_and_tagging",style:ka.link,withInteractiveStyling:!0,withUnderline:!0},v.a.i3a8d60a));function La(){return r.a.createElement(k.a,{style:ka.container},r.a.createElement(at.a,{headline:Ra,text:Pa}))}var Ma=a("b5s6"),Da=a("rcen"),Aa=a("zmS9"),Oa="addButton",Fa="addSubtitlesLabel",Ba="altTextLabel",Na="altTextWrapper",Ua="tagPeopleLabel",ja="attachments",Ha="createPollButton",za="geoButton",Va="gifSearchButton",Wa="scheduleOption",Ga="taggedUsersLabel",qa="tweetTextarea_",$a="toolBar",Ka="scheduledTweetIndicator",Xa=a("xM7j"),Qa=a("6OUF"),Ya=a("tZIO"),Ja=a("5mJL"),Za=a("DNho"),en=a("oSwX"),tn=a("rFBM"),an=a("zfvc"),nn=a("Ujvi"),on=a("yTN1"),rn=a("gpVt"),sn=a("hOZg"),ln=a("ll3R"),cn=a("J0mu"),dn=a("EfHu"),un=a("KrGU"),hn=a("boUI"),pn=a("6ZHn"),mn=a("/WPq"),gn=a("wpLu"),bn=a("pHub"),_n=a("8A5z"),fn=a("G31s"),yn=a("S1qy"),wn=a.n(yn),vn=a("cjAp"),Cn=a.n(vn);const En=v.a.f0afcc0e,Tn=v.a.ha5e2e7a,xn=v.a.a3de3b68,Sn=v.a.cc2b28fc,In=v.a.g45af04e,kn=v.a.j1d5791c,Rn=v.a.ee9c4014,Pn=v.a.af40a8e0,Ln=v.a.e68b09b4,Mn=v.a.ec10ee02,Dn=v.a.h735a98e,An=v.a.c4ccfbe2,On=v.a.j499fbcb,Fn=v.a.b7d8e3f1,Bn=v.a.d1175c78,Nn=v.a.bf4e9d7a,Un=v.a.e0342f98,jn=v.a.e349147c,Hn=v.a.e3a24e4c,zn=v.a.fbd24526,Vn=v.a.de4669e2,Wn=v.a.d2c7a41c,Gn=v.a.f7364fa2,qn=["ja","zh-cn","zh-tw","ko"],$n=v.a.ia24dc8d,Kn=r.a.createElement(sn.a,null),Xn=r.a.createElement(ma.a,null),Qn=r.a.createElement(ln.a,null),Yn=r.a.createElement(cn.a,null),Jn={viewType:"schedule_tweet"},Zn={viewType:"add_poll"},ei={viewType:"add_composer"},ti={viewType:"tag_location"};class ai extends r.a.Component{constructor(e,t){super(e,t),this._handleConversationControlsValueChange=e=>{this._handleAudienceControlsValueChange({_type:"conversation_controls",conversationControlsValue:e})},this._handleAudienceControlsValueChange=e=>{this.props.updateAudienceControlsValue(e)},this._triggerConversationControlsImpression=Object(Gt.a)((()=>this.context.featureSwitches.isTrue("conversation_controls_limited_replies_creation_enabled"))),this._shouldRenderControls=(e,t)=>{const{isFocused:a}=this.state,{audienceControlsValue:n,isActive:i,isInline:o,isReply:r}=this.props;if("conversation"===t&&(n.conversationControlsValue===lt.a.community_members||n.conversationControlsValue===lt.a.super_followers_exclusive||n.conversationControlsValue===lt.a.trusted_friends_tweet)&&r)return!0;return i&&!r&&(!o||(a||e))},this._renderConversationControls=e=>{const{isFocused:t}=this.state,{audienceControlsValue:a,isEdit:n,isInline:i,isReply:o,trustedFriendsTweetAuthorScreenName:s}=this.props;if(o||!t&&i||this._triggerConversationControlsImpression(),!this._conversationControlsCreationEnabled)return null;const l=a.conversationControlsValue,c=this._shouldRenderControls(e,"conversation"),d=!(l!==lt.a.community_members&&l!==lt.a.super_followers_exclusive&&l!==lt.a.trusted_friends_tweet&&!n)||this._isScheduled();return c?r.a.createElement(kt,{disabled:d,isReply:o,onChange:this._handleConversationControlsValueChange,trustedFriendsTweetAuthorScreenName:s,value:l}):null},this._renderTaggedLocation=e=>r.a.createElement(k.a,{style:zt.taggedLocationContainer},r.a.createElement(P.a,{icon:r.a.createElement(dn.a,null),onPress:this._handleGeoButtonClick,size:"xSmall",style:zt.taggedLocationButton,type:"brandText"},e.place.full_name)),this._renderMainContent=()=>{const{additionalToolbarContent:e,data:t,index:a,isExpanded:n,isInline:i,isInlineReply:o,onTypeaheadStateChange:s,richTextInputContext:l}=this.props,{cardUrl:c,media:d,pollActive:u,quotedStatus:h,text:p}=t,m=Object(rn.b)(p)||c&&!Object(Bt.a)(c)&&[c],g=!!d.length||u||!!h,b=this.props.typeaheadWrapper,_=!this._isEmpty();return r.a.createElement(k.a,{style:zt.textInputArea},r.a.createElement(k.a,{style:n?zt.inputStyle:zt.collapsedInputStyle},this._renderAudienceControls(_),r.a.createElement(b,{contextText:p,isInline:i,isInlineReply:o,onTextUpdated:l?this._handleRichTextChange:this._handlePlainTextChange,onTypeaheadStateChange:s},this._renderFieldTextInput),m&&!g?r.a.createElement(rn.a,{index:a,isCardPreviewTombstoned:Object(Bt.a)(c),urls:m}):null),n?null:e)},this._renderFieldTextInput=e=>{const{autoFocus:t,data:a,editable:n,index:o,isActive:s,isExpanded:l,isInline:c,isInlineReply:d,isLast:u,keyCommandHandlers:h,onTextInputBlur:p,positionCursorAtBeginning:m,richTextInputContext:g}=this.props,{isFocused:b}=this.state,{text:_}=a,f=0===o&&u,y=!!g,{dismissComposerCommandName:w,element:v,sendTweetCommandName:C}=g||{},E=d&&!g&&!l,T=g?{onChange:this._getHandleRichTextChange(e),richTextInputContext:{dismissComposerCommandName:w,editorState:this.state.editorState,element:v,sendTweetCommandName:C}}:{onChange:this._getHandlePlainTextChange(e)};return r.a.createElement(Qa.a,i()({appTextSize:"headline1",ariaLabel:xn,autoFocus:t||s&&!c,closeButton:s&&(this._deleteNonemptyTweetstormComposerEnabled||this._isEmpty())&&!f?this._renderCloseButton():void 0,contentBelow:this._renderTweetAttachment(),editable:n,inputStyle:[zt.textInputStyle,E&&zt.textInputMobileCollapsed],keyCommandHandlers:h,maxNumberOfLines:y?30:10,multiline:!0,numberOfLines:this._calcNumberOfLines(),onBlur:p,onFilesAdded:this._handleFilesAdded,placeholder:this._getPlaceHolderText(),positionCursorAtBeginning:m,positionCursorAtEnd:!m,ref:this._setTextInputRef,styleType:"selection",testID:`${qa}${o}`,useCacheForDOMMeasurements:b,value:_},T))},this._getHandleRichTextChange=Object(Gt.a)((e=>t=>{e(t),this._handleRichTextChange(t)})),this._getHandlePlainTextChange=Object(Gt.a)((e=>t=>{e(t),this._handlePlainTextChange(t)})),this._renderCommunityTweetFromProtectedUserCallout=()=>{const{index:e,isCommunityTweetFromProtectedUser:t}=this.props;return 0===e&&t?r.a.createElement(La,null):null},this._renderAudienceControls=e=>{const{audienceControlsValue:t,index:a,isAccountProtected:n,isEdit:i,isSuperFollowsCreator:o}=this.props,s=this.context.featureSwitches.isTrue("c9s_participation_enabled"),l=this.context.featureSwitches.isTrue("super_follow_exclusive_tweet_creation_api_enabled"),c=this.context.featureSwitches.isTrue("trusted_friends_tweet_creation_enabled"),d=this.context.featureSwitches.getStringValue("trusted_friends_copy_variant");return this._shouldRenderControls(e,"audience")&&0===a&&(s||l||c)?r.a.createElement(We,{audienceControlsValue:t,disabled:i,isAccountProtected:n,isC9sParticipationEnabled:s,isSuperFollowsCreator:o&&l,isTrustedFriendsEnabled:c,onAudienceControlsValueChange:this._handleAudienceControlsValueChange,trustedFriendsCopyVariantValue:d}):null},this._renderCommunitiesRulesEducation=()=>this.shouldRenderCommunitiesRules?r.a.createElement(st,null):null,this._renderCommunitiesRules=e=>{const{audienceControlsValue:t}=this.props,a=t.communityIdValue||void 0;return this.shouldRenderCommunitiesRules&&a?r.a.createElement(et,{selectedCommunityId:a,showMiddot:!e}):null},this._calcNumberOfLines=()=>{const{data:e,isActive:t,isInline:a,richTextInputContext:n}=this.props,i=!!n,{media:o,pollActive:r,quotedStatus:s}=e,l=!!o.length||!!r||!!s;return i&&(a||l)||!t?1:4},this._renderScheduledTweetLegend=()=>{const{scheduledFor:e}=this.props;return r.a.createElement(Aa.a,{onPress:this._handlePressScheduledTweetLegend,scheduledFor:e,testID:Ka})},this._handlePressScheduledTweetLegend=()=>{const{analytics:e,history:t,setActiveParentKey:a}=this.props;t.push("/compose/tweet/schedule"),e.scribe({element:"tweet_legend",action:"click"}),a()},this._renderEmojiPicker=()=>r.a.createElement(Pt.a,{onEmojiSelect:this._handleInsertEmoji,size:"medium",style:this._getEmojiPickerButtonStyles(),textInputRef:this._textInputRef||void 0}),this._getEmojiPickerButtonStyles=Object(Gt.a)((()=>[zt.iconEmojiPicker,zt.toolBarButton])),this._isSchedulingDisabled=()=>{const{audienceControlsValue:e,data:{media:t,mediaTags:a,pollActive:n,quotedStatus:i,text:o},index:r,isEdit:s,isLast:l}=this.props,c=0===r&&l,d=e.conversationControlsValue!==lt.a.all;return Boolean(n||s||!c||i&&""===o&&!t.length||d||a.length>0)},this._renderSchedulingButton=()=>r.a.createElement(P.a,{accessibilityLabel:Tn,behavioralEventContext:Jn,disabled:this._isSchedulingDisabled(),hoverLabel:{label:Dn},icon:Yn,onClick:this._handleClickScheduler,size:"medium",style:zt.toolBarButton,testID:Wa,type:"brandText"}),this._handleClickScheduler=()=>{const{analytics:e,history:t,setActiveParentKey:a}=this.props;t.push("/compose/tweet/schedule"),e.scribe({element:"schedule_tweet",action:"click"}),a()},this._renderCloseButton=()=>{const{onRemoveComposer:e}=this.props;return r.a.createElement(P.a,{accessibilityLabel:Rn,hoverLabel:{label:Ln},icon:Kn,onPress:e,size:"xSmall",type:"brandText"})},this._renderTweetAttachment=()=>{const{data:e,editable:t,index:a,isActive:n,updateSingleComposer:i}=this.props,{media:o,pollActive:s,pollChoices:l,pollDuration:c,quotedStatus:d}=e;if(0===o.length&&!s&&!d)return null;const u=this.hasAttachedVideo&&(this._videoTrimmerEnabled?"trimmer":"subtitles"),h=this.hasAttachedImage?this._handleClickMediaDetail("crop"):void 0,p=this.hasAttachedImage||this.hasAttachedVideo?this._handleClickMediaDetail("sensitive_media"):void 0,m=this.hasAttachedImage?this._handleClickMediaDetail("crop"):u?this._handleClickMediaDetail(u):void 0;return r.a.createElement(k.a,{onClick:this._handleFocus,style:[zt.attachmentContainer,zt.tweetAttachmentArea],testID:ja},o.length>0?r.a.createElement(fn.a,{editable:t,isActive:n,media:o,onClickMedia:this.isEditMediaEnabled?h:void 0,onEditMedia:this.isEditMediaEnabled?m:void 0,onEditSensitiveWarning:this.isEditMediaEnabled?p:void 0,onRemoveMedia:this._handleMediaRemoveFactory,onSetMediaPreviewRef:this._handleSetMediaPreviewRef,style:zt.mediaPreview}):null,n?this._renderMediaActions():null,s?r.a.createElement(Ia,{composerIndex:a,editable:t,initialChoices:l,initialDuration:c,isActive:n,isPollValid:e.pollValid,updateComposer:i}):null,d?this._renderQuoteTweet(d):null)},this._renderQuoteTweet=e=>{const{data:{media:t}}=this.props,a=e.tombstoneInfo;return a&&a.richText?r.a.createElement(Xa.a,null,r.a.createElement(Da.a,{entities:a.richText.entities,rtl:a.richText.rtl,text:a.richText.text})):r.a.createElement(Ma.a,{isCondensed:t.length>0,style:zt.quoteTweet,tweetId:e.id_str,withLink:!1,withUserHoverCard:!1})},this._renderToolbar=e=>{const{additionalToolbarContent:t,data:{media:a},hidePoll:n,hideScheduling:i,isInlineReply:o,isReply:s,isSelfThreadReply:l,richTextInputContext:c,setActiveParentKey:d}=this.props,u=!!c,h=!o&&!n,p=!o&&!i,m=this.context.featureSwitches.isTrue("responsive_web_reply_storm_enabled"),g=e&&(!s||l||m);return r.a.createElement(k.a,{style:zt.toolBar,testID:$a},r.a.createElement(k.a,{style:zt.toolBarIconsContainer},r.a.createElement(Wt,{media:a,mediaAttachDisabled:this.mediaAttachDisabled,onFilesAdded:this._handleFilesAdded,setActiveParentKey:d}),this._renderGifButton(),h?this._renderPollButton():null,u?this._renderEmojiPicker():null,p?this._renderSchedulingButton():null,this._renderGeoButton()),r.a.createElement(k.a,{style:zt.toolBarIconsContainer},e?this._renderCountdownCircle():null,g&&r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{style:zt.separator}),this._renderAddComposerButton()),t))},this._addOverflowStyle=e=>{const{richTextInputContext:t}=this.props;if(!t)return;const a=e.getCurrentContent().getPlainText(),n=a.length,i=this._getParsedTweet(a).validRangeEnd,o=i+1<n;if(this.state.hasOverflowStyle||o){const a=o?i+1:-1;return{editorState:t.updateOverflowStyle&&t.updateOverflowStyle(e,a,this.state.hasOverflowStyle),hasOverflowStyle:o}}return{editorState:e,hasOverflowStyle:o}},this._handleRichTextChange=e=>{const{richTextInputContext:t}=this.props,a=e.getCurrentContent().getPlainText();if(t){const a=t.convertEmojiToEntities(e);this.setState(this._addOverflowStyle(a))}this._handleTextValueChange(a)},this._handlePlainTextChange=e=>{const t=Ya.a.replaceCarriageReturns(e.target.value);this._handleTextValueChange(t)},this._handleTextValueChange=e=>{const{data:{key:t,text:a},onTextChange:n}=this.props;a!==e&&n(e,t)},this._handleClickAltTextShortcut=()=>{const{analytics:e}=this.props;e.scribe({element:"alt_text_button",action:"click"})},this._handleClickSubtitlesShortcut=()=>{const{analytics:e}=this.props;e.scribe({element:"subtitles_button",action:"click"})},this._handleClickMediaDetail=e=>t=>()=>{const{analytics:a,history:n}=this.props;a.scribe({element:"media_detail_button",action:"click"}),(this.hasAttachedImage||this.hasAttachedVideo)&&n.push("/compose/tweet/media",{mediaId:t,tab:e})},this._handleFilesAdded=e=>{const{addToast:t,data:{pollActive:a},onFilesAdded:n}=this.props;a?t({text:Sn}):this.isEditMediaEnabled&&n(e)},this._handleMediaRemoveFactory=e=>()=>{this.props.onRemoveMedia(this.props.index,e)},this._handleInsertEmoji=e=>{const{editorState:t}=this.state,{richTextInputContext:a}=this.props;if(!a||!t)return;const n=a.insertTextAtCursor(t,e.text);this._handleRichTextChange(n)},this._validateMedia=e=>{const{data:{media:t}}=this.props;return d.c(t.concat(e))},this._handlePollAdd=()=>{const{analytics:e,index:t,updateSingleComposer:a}=this.props;e.scribe({element:"add_poll",action:"click"}),a({pollActive:!0},t)},this._handleGeoButtonClick=()=>{const{analytics:e,history:t,setActiveParentKey:a}=this.props;t.push("/compose/tweet/place_picker"),e.scribe({element:"tag_location",action:"click"}),a()},this._handleWrapperClick=e=>{e.target instanceof Element&&e.target.closest('[role="button"],a,input,textarea,select')||this.focus()},this._handleFocus=()=>{const{index:e,isActive:t,onFocus:a,setActiveParentKey:n}=this.props;n(),t||(window.requestAnimationFrame((()=>{this._mediaPreviewRef&&this._mediaPreviewRef.playVideo()})),a(e))},this._handleEditorFocus=()=>this.setState({isFocused:!0}),this._formatCountdownNumber=e=>$n(Math.ceil(e/this._userLanguageWeight)),this._getPlaceHolderText=()=>{const{data:{pollActive:e,quotedStatus:t},index:a,isReply:n,isSelfThreadReply:i}=this.props;return t?Vn:e?Gn:this.isReplyOrReplyThread&&0===a?Wn:n&&!i&&a>0?zn:i||a>0?Hn:jn},this._getNumberOfAltTextEntries=()=>{const{data:{media:e}}=this.props;return e.reduce(((e,t)=>{var a;return null!=(a=t.mediaMetadata)&&a.altText?e+1:e}),0)},this._getParsedTweet=Object(Gt.a)((e=>{const t=Cn.a[this.props.twitterTextConfigurationVersion];return wn()(e,t)})),this._isEmpty=()=>{const{data:e}=this.props;return Object(Nt.c)(e)},this._isScheduled=()=>{const{data:{scheduledFor:e}}=this.props;return Object(Ut.h)(e)},this._autotagLocationIfNeeded=()=>{const{data:{taggedLocation:e},fetchAutotaggedLocationIfNeeded:t,index:a,updateSingleComposer:n}=this.props;t().then((t=>{void 0===e&&n({taggedLocation:null!=t?t:null},a)}))},this._handleSetMediaPreviewRef=e=>{this._mediaPreviewRef=e},this._setTextInputRef=e=>{this._textInputRef=e};const{data:{text:a},richTextInputContext:n,userLanguage:o}=e,{initEditorState:s}=n||{};this._conversationControlsCreationEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),this._deleteNonemptyTweetstormComposerEnabled=this.context.featureSwitches.isTrue("responsive_web_delete_nonempty_tweetstorm_composer_enabled"),this._userLanguageWeight=o&&qn.indexOf(o)>-1?2:1,this._autotagLocationIfNeeded(),this.state={editorState:s?s(a):null,hasOverflowStyle:!1,isFocused:!1}}componentDidUpdate(e){(this.hasExternalMedia||this.props.data.media.some((e=>e.mediaFile&&!(e.mediaFile instanceof At.a)&&e.mediaFile.isVideo)))&&e.isActive&&!this.props.isActive&&this._mediaPreviewRef&&this._mediaPreviewRef.pauseVideo()}focus(){this._textInputRef&&this._textInputRef.focus()}render(){const{data:{taggedLocation:e},isActive:t,isExpanded:a,isInline:n,isLast:i,loggedInUser:o,windowWidth:s,withAvatar:l}=this.props,c=!this._isEmpty(),d=this._shouldRenderControls(c),u=s<y.a.theme.breakpoints.small;return r.a.createElement(k.a,{onClick:this._handleWrapperClick,onFocus:this._handleFocus,style:[zt.root,!t&&zt.blurStyle]},this._renderCommunityTweetFromProtectedUserCallout(),r.a.createElement(Ja.a,{avatarCell:r.a.createElement(r.a.Fragment,null,l?r.a.createElement(Za.a.Consumer,null,(({avatarSize:e})=>r.a.createElement(en.default,{accessibilityLabel:o?o.name:void 0,screenName:o?o.screen_name:void 0,size:e,style:zt.avatar,uri:o?o.profile_image_url_https:void 0,withLink:n}))):null,i?null:r.a.createElement(k.a,{style:[zt.conversationLine,!l&&zt.conversationLineWithOverflow]})),avatarCellStyle:a?zt.avatarContainerExpanded:zt.avatarContainer,cellStyle:zt.rightColumn},this._renderScheduledTweetLegend(),r.a.createElement(k.a,{onFocus:this._handleEditorFocus,style:zt.inputArea},r.a.createElement(tn.a,{allowDragDrop:!this.mediaAttachDisabled,onDragEnter:this._handleFocus,onFilesAdded:this._handleFilesAdded,style:zt.dragDrop},(e=>r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{style:zt.composeBoxContainer},this._renderMainContent()))))),this._renderCommunitiesRulesEducation(),r.a.createElement(k.a,{style:[(d||e)&&zt.controlsContainer,u?zt.mobileControlsLayout:zt.controlsLayout]},this._renderConversationControls(c),this._renderCommunitiesRules(u),e?this._renderTaggedLocation(e):null),r.a.createElement(an.a,{show:t&&a},this._renderToolbar(c))))}_renderGifButton(){const{data:{media:e,pollActive:t},history:a,loggedInUser:n,setActiveParentKey:i}=this.props,o=t||e.length||!n||!this.isEditMediaEnabled;return r.a.createElement(Mt.a,{enabled:!o,gifSearchKeySource:Dt.a.Composition,history:a,onPress:i,testID:Va})}_renderPollButton(){const{data:{media:e,pollActive:t,quotedStatus:a},isEdit:n,loggedInUser:i}=this.props,o=this._isScheduled(),s=!!(t||e.length||a||o||!i||n);return r.a.createElement(P.a,{accessibilityLabel:En,behavioralEventContext:Zn,disabled:s,hoverLabel:{label:Mn},icon:Qn,onPress:this._handlePollAdd,size:"medium",style:zt.toolBarButton,testID:Ha,type:"brandText"})}_renderGeoButton(){const{data:{taggedLocation:e},geoEnabled:t,loggedInUser:a}=this.props,n=!(t&&a),i=e?r.a.createElement(dn.a,null):r.a.createElement(un.a,null);return r.a.createElement(P.a,{accessibilityLabel:An,behavioralEventContext:ti,disabled:n,hoverLabel:{label:An},icon:i,onPress:this._handleGeoButtonClick,size:"medium",style:zt.toolBarButton,testID:za,type:"brandText"})}_renderMediaActions(){const{data:{gifMetadata:e,media:t,mediaTags:a}}=this.props,n=0!==a.length,i=t.some((e=>e.mediaFile&&e.mediaFile.isGif))||this.hasExternalMedia;if(!(this.hasAttachedImage||this.hasAttachedVideo||e||i))return null;const o=this.context.featureSwitches.isTrue("rweb_video_tagging_enabled");return r.a.createElement(k.a,{style:zt.imageActions},e&&e.url&&e.provider?r.a.createElement(k.a,{style:zt.addImageTextPadding},r.a.createElement(Lt.a,{gifUrl:e.url,provider:e.provider})):null,!this.hasAttachedImage&&!o||this._isScheduled()?null:r.a.createElement(_.b,{accessibilityLabel:Bn,color:"gray700",link:"/compose/tweet/tags",style:[zt.addImageTextContainer,zt.addImageTextPadding]},n?this._renderTaggedUsers():this._renderTagPeopleLabel()),this.hasAttachedImage||i?r.a.createElement(_.b,{accessibilityLabel:On({numberOfImages:t.length}),color:"gray700",link:this.isEditMediaEnabled?{pathname:"/compose/tweet/media",state:{mediaId:t[0].id,tab:"alt_text"}}:void 0,onPress:this.isEditMediaEnabled?this._handleClickAltTextShortcut:void 0,style:zt.addImageTextContainer,testID:Na},this._renderAltTextLabel()):null,this.hasAttachedVideo?this._renderSubtitlesLabel():null)}_renderTagPeopleLabel(){return r.a.createElement(_.b,{color:"gray700",size:"subtext2",testID:Ua},r.a.createElement(hn.a,{style:zt.addImageActionIcon}),Bn)}_renderTaggedUsers(){const{data:{mediaTags:e},loggedInUser:t}=this.props,a=e.map((e=>({name:e.data.name,screen_name:e.data.screen_name,type:e.type,user_id:e.data.id_str})));return r.a.createElement(_.b,{color:"gray700",size:"subtext2",testID:Ga},r.a.createElement(pn.a,{style:zt.addImageActionIcon}),r.a.createElement(nn.a,{loggedInUserId:null==t?void 0:t.id_str,users:a}))}_renderAltTextLabel(){const{data:{media:e}}=this.props,t=e[0].mediaMetadata;return this.hasAttachedAltText?e.length>1?r.a.createElement(_.b,{size:"subtext2",testID:Ba},r.a.createElement(gn.a,{style:zt.addImageActionIcon}),Fn({numberOfAltTextEntries:this._getNumberOfAltTextEntries()})):r.a.createElement(_.b,{numberOfLines:1,size:"subtext2",testID:Ba},r.a.createElement(gn.a,{style:zt.addImageActionIcon}),null==t?void 0:t.altText):r.a.createElement(_.b,{size:"subtext2",testID:Ba},r.a.createElement(mn.a,{style:zt.addImageActionIcon}),On({numberOfImages:e.length}))}_renderSubtitlesLabel(){const{data:{media:e}}=this.props,t=this.attachedSubtitles?bn.a:_n.a;return r.a.createElement(_.b,{accessibilityRole:"button",color:"gray700",link:{pathname:"/compose/tweet/media",state:{mediaId:e[0].id,tab:"subtitles"}},onPress:this._handleClickSubtitlesShortcut,size:"subtext2",style:zt.addImageTextContainer,testID:Fa},r.a.createElement(t,{accessibilityLabel:this.attachedSubtitles?Un:void 0,style:zt.addImageActionIcon}),this.attachedSubtitles?this.attachedSubtitles.displayName:Nn)}_renderCountdownCircle(){const{data:{text:e},twitterTextConfigurationVersion:t}=this.props,a=Cn.a[t],n=this._getParsedTweet(e).weightedLength;return r.a.createElement(on.a,{count:n,formatNumber:this._formatCountdownNumber,maxCount:a.maxWeightedTweetLength,warningCount:260})}_renderAddComposerButton(){const{addComposerLink:e,disableAddTweet:t,isCommunityTweetFromProtectedUser:a,isEdit:n,loggedInUser:i,onAddComposer:o}=this.props,s=this._isEmpty(),l=this._isScheduled(),c=n||t||s||l||!i||a;return r.a.createElement(P.a,{accessibilityLabel:this.isReplyOrReplyThread?kn:In,behavioralEventContext:ei,disabled:c,hoverLabel:{label:Pn},icon:Xn,link:c?void 0:e,onPress:o,size:"xSmall",testID:Oa,type:"brandOutlined"})}get isEditMediaEnabled(){const{data:{media:e},isEdit:t,previousMedia:a}=this.props;if(t){const t=null==a?void 0:a.map((e=>e.uploadId)),n=e.map((e=>e.uploadId));return!(Ft()(t,n).length>0)}return!0}get mediaAttachDisabled(){const{data:{media:e,pollActive:t},loggedInUser:a}=this.props,n=e.length,i=e.some((e=>{var t;return null==(t=e.mediaFile)?void 0:t.isGif})),o=e.some((e=>e.mediaFile&&!(e.mediaFile instanceof At.a)&&e.mediaFile.isVideo)),r=4===n,s=i||o||this.hasExternalMedia;return r||s||t||!a||!this.isEditMediaEnabled}get hasAttachedImage(){const{data:{media:e}}=this.props;return e.some((e=>{var t;return null==(t=e.mediaFile)?void 0:t.isImage}))}get hasAttachedVideo(){const{data:{media:e}}=this.props,t=e.some((e=>{var t;return null==(t=e.mediaFile)?void 0:t.isVideo}));return t&&(this._videoTrimmerEnabled=this.context.featureSwitches.isTrue("responsive_web_video_trimmer_enabled")),t}get attachedSubtitles(){var e;const{data:{media:t}}=this.props;if(!this.hasAttachedVideo)return;const a=t.find((e=>e.mediaFile&&!(e.mediaFile instanceof At.a)&&e.mediaFile.isVideo));return null==a||null==(e=a.mediaMetadata)?void 0:e.subtitles}get hasAttachedAltText(){return this._getNumberOfAltTextEntries()>0}get hasExternalMedia(){const{data:{media:e}}=this.props;return e.some((e=>!!e.externalMediaDetails))}get shouldRenderCommunitiesRules(){const{audienceControlsValue:e}=this.props,t=this.context.featureSwitches.isTrue("c9s_enabled"),a=e.communityIdValue||void 0,n=t&&a,i=this._shouldRenderControls(!1,"conversation");return Boolean(i&&n)}get isReplyOrReplyThread(){const{isReply:e,isSelfThreadReply:t}=this.props;return e&&!t}}ai.contextType=dt.a,ai.defaultProps={twitterTextConfigurationVersion:"defaults",withAvatar:!0};var ni=Object(I.a)(ai);const ii=r.a.createElement(_.b,{weight:"bold"}),oi=r.a.createElement(_.b,{color:"link",dir:"ltr"}),ri=e=>`@${e}`;var si=a("SrIh");const li=e=>(null==e?void 0:e.screen_name)||"",ci=({communityName:e,excludedRecipients:t,inReplyToStatus:a,loggedInUserId:n})=>{var i;const o={replyToOne:({userName:e})=>r.a.createElement(v.a.I18NFormatMessage,{$i18n:"e34022a7"},r.a.cloneElement(oi,null,v.a.b50e199a({userName:ri(e)}))),replyToTwo:({userOneName:e,userTwoName:t})=>r.a.createElement(v.a.I18NFormatMessage,{$i18n:"bfd9c99b"},r.a.cloneElement(oi,null,v.a.c3033e8a({replyUserName:ri(e),otherUserName:ri(t)}))),replyToThree:({userOneName:e,userThreeName:t,userTwoName:a})=>r.a.createElement(v.a.I18NFormatMessage,{$i18n:"g7a1000f"},r.a.cloneElement(oi,null,v.a.e50dae2a({userOneName:ri(e),userTwoName:ri(a),userThreeName:ri(t)}))),replyToMany:({othersCount:e,userOneName:t,userTwoName:a})=>r.a.createElement(v.a.I18NFormatMessage,{$i18n:"i558c201"},r.a.cloneElement(oi,null,v.a.h758cd23({userOneName:ri(t),userTwoName:ri(a),othersCount:e}))),communityReplyToOne:({communityName:e,userName:t})=>r.a.createElement(v.a.I18NFormatMessage,{$i18n:"j935bcdf",communityName:e},r.a.cloneElement(oi,null,v.a.fba61ad6({userName:ri(t)}))),communityReplyToTwo:({communityName:e,userOneName:t,userTwoName:a})=>r.a.createElement(v.a.I18NFormatMessage,{$i18n:"i7bd9c8f",communityName:e},r.a.cloneElement(oi,null,v.a.ce87c872({replyUserName:ri(t),otherUserName:ri(a)}))),communityReplyToThree:({communityName:e,userOneName:t,userThreeName:a,userTwoName:n})=>r.a.createElement(v.a.I18NFormatMessage,{$i18n:"cfa0049d",communityName:e},r.a.cloneElement(oi,null,v.a.b45fa506({userOneName:ri(t),userTwoName:ri(n),userThreeName:ri(a)}))),communityReplyToMany:({communityName:e,othersCount:t,userOneName:a,userTwoName:n})=>r.a.createElement(v.a.I18NFormatMessage,{$i18n:"jfc8e4b5",communityName:e},r.a.cloneElement(oi,null,v.a.b8168f25({userOneName:ri(a),userTwoName:ri(n),othersCount:t}))),exclusiveReplyToOne:({userName:e})=>r.a.createElement(v.a.I18NFormatMessage,{$i18n:"a4e11011"},r.a.cloneElement(oi,null,v.a.c7f99090({userName:ri(e)})),r.a.cloneElement(ii,null,v.a.b977ae10)),exclusiveReplyToTwo:({userOneName:e,userTwoName:t})=>r.a.createElement(v.a.I18NFormatMessage,{$i18n:"cf1b3321"},r.a.cloneElement(oi,null,v.a.g7d5e986({replyUserName:ri(e),otherUserName:ri(t)})),r.a.cloneElement(ii,null,v.a.af82725c)),exclusiveReplyToThree:({userOneName:e,userThreeName:t,userTwoName:a})=>r.a.createElement(v.a.I18NFormatMessage,{$i18n:"c83d647f"},r.a.cloneElement(oi,null,v.a.af4c2858({userOneName:ri(e),userTwoName:ri(a),userThreeName:ri(t)})),r.a.cloneElement(ii,null,v.a.h2949686)),exclusiveReplyToMany:({othersCount:e,userOneName:t,userTwoName:a})=>r.a.createElement(v.a.I18NFormatMessage,{$i18n:"fec57cab"},r.a.cloneElement(oi,null,v.a.bc9dd515({userOneName:ri(t),userTwoName:ri(a),othersCount:e})),r.a.cloneElement(ii,null,v.a.de5071ba)),trustedFriendsReplyToOne:({trustedFriendsTweetOwner:e,userName:t})=>r.a.createElement(v.a.I18NFormatMessage,{$i18n:"b392dda9",trustedFriendsTweetOwner:ri(e)},r.a.cloneElement(oi,null,v.a.e39e1360({userName:ri(t)}))),trustedFriendsReplyToTwo:({trustedFriendsTweetOwner:e,userOneName:t,userTwoName:a})=>r.a.createElement(v.a.I18NFormatMessage,{$i18n:"c1378cbb"},r.a.cloneElement(oi,null,v.a.b1bf4831({userOneName:ri(t),userTwoName:ri(a)})),r.a.cloneElement(oi,null,v.a.ba60bdab({trustedFriendsTweetOwner:ri(e)}))),trustedFriendsReplyToThree:({trustedFriendsTweetOwner:e,userOneName:t,userThreeName:a,userTwoName:n})=>r.a.createElement(v.a.I18NFormatMessage,{$i18n:"g390bde1"},r.a.cloneElement(oi,null,v.a.i17c4d36({userOneName:ri(t),userTwoName:ri(n),userThreeName:ri(a)})),r.a.cloneElement(oi,null,v.a.bfa3b3d3({trustedFriendsTweetOwner:ri(e)}))),trustedFriendsReplyToMany:({othersCount:e,trustedFriendsTweetOwner:t,userOneName:a,userTwoName:n})=>r.a.createElement(v.a.I18NFormatMessage,{$i18n:"d1b80c9d"},r.a.cloneElement(oi,null,v.a.e4625c2b({userOneName:ri(a),userTwoName:ri(n),othersCount:e})),r.a.cloneElement(oi,null,v.a.b6c63977({trustedFriendsTweetOwner:ri(t)})))},s=d.a({inReplyToStatus:a,loggedInUserId:n}).filter((({id_str:e})=>t.indexOf(e)<0)),{exclusivity_info:l,trusted_friends_info:c,user:u}=a.retweeted_status||a,[h,p]=s.filter((({id_str:e})=>e!==u.id_str)),[m,g,b]=[u,h,p].map(li),_=s.length-2,f=null==a||null==(i=a.trusted_friends_info)?void 0:i.screen_name;switch(s.length){case 0:return Object(si.a)("Compose reply context should not have 0 recipients"),null;case 1:return e?o.communityReplyToOne({communityName:e,userName:m}):l?o.exclusiveReplyToOne({userName:m}):c&&f?o.trustedFriendsReplyToOne({userName:m,trustedFriendsTweetOwner:f}):o.replyToOne({userName:m});case 2:return e?o.communityReplyToTwo({communityName:e,userOneName:m,userTwoName:g}):l?o.exclusiveReplyToTwo({userOneName:m,userTwoName:g}):c&&f?o.trustedFriendsReplyToTwo({userOneName:m,userTwoName:g,trustedFriendsTweetOwner:f}):o.replyToTwo({userOneName:m,userTwoName:g});case 3:return e?o.communityReplyToThree({communityName:e,userOneName:m,userTwoName:g,userThreeName:b}):l?o.exclusiveReplyToThree({userOneName:m,userTwoName:g,userThreeName:b}):c&&f?o.trustedFriendsReplyToThree({userOneName:m,userTwoName:g,userThreeName:b,trustedFriendsTweetOwner:f}):o.replyToThree({userOneName:m,userTwoName:g,userThreeName:b});default:return e?o.communityReplyToMany({communityName:e,userOneName:m,userTwoName:g,othersCount:_}):l?o.exclusiveReplyToMany({userOneName:m,userTwoName:g,othersCount:_}):c&&f?o.trustedFriendsReplyToMany({userOneName:m,userTwoName:g,othersCount:_,trustedFriendsTweetOwner:f}):o.replyToMany({userOneName:m,userTwoName:g,othersCount:_})}};var di=r.a.memo(ci),ui=a("fs1G"),hi=a("BLtI"),pi=a("kY28");function mi(e){null==e||e.preventDefault()}const gi=y.a.create((e=>({replyUsersContainer:{flexDirection:"row",minHeight:e.spaces.space12,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:0},grid:{flexGrow:1,flexShrink:1},repliesTextContainer:{flexGrow:1},repliesMessage:{flexGrow:1,paddingBottom:e.spaces.space16,paddingTop:e.spaces.space4},conversationLineContainer:{alignItems:"center"},conversationLine:{backgroundColor:e.colors.gray200,flexGrow:1,minHeight:0,width:e.componentDimensions.conversationLineWidth,marginBottom:e.spaces.space4}})));var bi=({communityName:e,excludedRecipients:t,inReplyToStatus:a,loggedInUserId:n,onPress:i,shouldDisplayRepliesText:o,showParentTweet:s=!0})=>r.a.createElement(k.a,null,s?r.a.createElement(hi.b,{conversationPosition:{isStart:!0},linkableQuotedTweet:!1,linkify:!1,onAnalyticsClick:ui.a,onAvatarClick:mi,onEntityClick:mi,onMediaClick:mi,onReplyContextClick:mi,replyContext:pi.a.ReplyContextTypes.None,tweet:a,withAvatarLink:!1,withCardLinks:!0,withInlineMedia:!1,withQuotedTweetLinks:!0,withSocialContext:!1,withTimestampLink:!1,withUserHoverCard:!1}):null,r.a.createElement(k.a,{style:gi.replyUsersContainer},r.a.createElement(Ja.a,{avatarCell:s?r.a.createElement(k.a,{style:gi.conversationLine}):null,avatarCellStyle:gi.conversationLineContainer,cellStyle:gi.repliesTextContainer,style:gi.grid},o?r.a.createElement(_.b,{accessibilityRole:"button",color:"gray700",onPress:i,style:s&&gi.repliesMessage},r.a.createElement(di,{communityName:e,excludedRecipients:t,inReplyToStatus:a,loggedInUserId:n})):null))),_i=a("Tb0w"),fi=a("1YZw"),yi=a("pidX"),wi=a("5oBF"),vi=a("JYYi"),Ci=a("/Rsk"),Ei=a("lsKC"),Ti=a("u7LJ"),xi=a("XOJV"),Si=a("G6rE"),Ii=a("AspN"),ki=a("oEGd"),Ri=a("2iUg"),Pi=a("P1r1");const Li=e=>e.parentTweetId||(e.isInline?vi.a.homeTimeline:vi.a.modal),Mi=(e,t)=>{const a=Li(t);return G.k(e,a)},Di=(e,t)=>{const a=Li(t);return G.l(e,a)},Ai=(e,t)=>{const a=zi(e,t),n=oo(e,t).communityIdValue||void 0,i=(null==a?void 0:a.community_id_str)||n,o=i?h.c.select(e,i):void 0;return o?o.name:void 0},Oi=(e,t)=>{const a=Li(t);return G.m(e,a)},Fi=(e,t)=>{const a=Li(t);return G.i(e,a)},Bi=e=>(t,a)=>{const n=((e,t)=>t.location.state)(0,a);return n?e(n):void 0},Ni=Object($.createSelector)(((e,t)=>t.activeUser),Si.e.selectLoggedInUser,((e,t)=>e||t)),Ui=(e,t)=>t.parentTweetId||ji(e,t)||Hi(e,t),ji=(e,t)=>{const{location:{query:a}}=t;return a&&"string"==typeof a.in_reply_to?a.in_reply_to:void 0},Hi=Bi((e=>e.inReplyToStatusId)),zi=(e,t)=>{const a=Ui(e,t);return a?xi.a.selectHydrated(e,a):void 0},Vi=(e,t)=>t.location.pathname.indexOf("/intent/")>-1,Wi=Bi((e=>e.hasArticleNudge)),Gi=Bi((e=>e.convoCardData)),qi=Bi((e=>e.externalMedia)),$i=Bi((e=>e.externalMediaFiles)),Ki=Bi((e=>e.previewTweetId)),Xi=Bi((e=>e.defaultText)),Qi=(e,t)=>{const a=Xi(e,t),n=Object(yi.a)(t.location);return(Vi(0,t)||((e,t)=>t.location.pathname.indexOf("/compose/tweet")>-1)(0,t))&&n?n:a},Yi=Bi((e=>e.quotedStatusId)),Ji=Bi((e=>e.quotedStatus)),Zi=(e,t)=>((e,t)=>t.quotedStatus?t.quotedStatus:Ji(e,t))(e,t)||((e,t)=>{const a=Yi(e,t);return a?xi.a.selectHydratedMemoized(e,a):void 0})(e,t),eo=Bi((e=>e.isSelfThreadReply)),to=Bi((e=>e.positionCursorAtBeginning)),ao=Bi((e=>e.previousTweetId)),no=(e,t)=>{const a=ao(e,t);return a?xi.a.selectHydratedMemoized(e,a):null},io=Object($.createSelector)(no,(e=>{var t;const a=null==e||null==(t=e.extended_entities)?void 0:t.media;return a?a.map((({ext_alt_text:e,id_str:t,media_url_https:a})=>({url:a,uploadId:t,altText:null!=e?e:""}))):[]})),oo=Object($.createSelector)(no,((e,t)=>G.j(e,Li(t))),J.b,((e,t,a)=>e?Object(Ei.a)(e,a):t)),ro=Bi((e=>e.promotedContent)),so=({mediaIds:e,...t})=>t,lo={addComposer:G.a,addToast:fi.b,createLocalApiErrorHandler:Object(Y.createLocalApiErrorHandlerWithContextFactory)("SCREEN_COMPOSE_V2"),checkTweetForNudge:G.b,deletePreviewTweet:wi.c,fetchAltTextPromptPreferenceIfNeeded:Ri.a,fetchAutotaggedLocationIfNeeded:Ci.a,fetchTweetIfNeeded:xi.a.fetchOneIfNeeded,removeComposer:G.e,resetDraft:G.f,retweet:xi.a.retweet,schedule:G.h,draftTweet:G.d,send:G.q,updateActiveComposerIndex:G.s,updateAudienceControlsValue:G.t,updateConvoCardState:_i.b,preUploadMedia:Ii.e,addMedia:Ii.b,processMultipleMedia:Ii.g,removeMediaUpload:Ii.i,removeToast:fi.c,updateSingleComposer:G.w,setActiveParentKey:G.r,copyDataFromInlineComposerToModalComposer:G.c};var co=Object(ki.e)((()=>Object($.createStructuredSelector)({activeComposerIndex:Fi,activeUser:Ni,altTextNudgeType:Ri.b,audienceControlsValue:oo,composerData:Object($.createSelector)(Mi,Qi,Zi,Ii.j,((e,t,a,n)=>e.map(((e,i)=>({...so(e),media:n.filter((t=>e.mediaIds.some((e=>e===t.id)))),quotedStatus:0===i?a:void 0,text:0===i&&t?t:e.text}))))),dataSaverMode:Pi.j,excludedRecipients:Di,externalMedia:qi,externalMediaFiles:$i,geoEnabled:Pi.o,hasArticleNudge:Wi,inReplyToStatus:zi,inReplyToStatusId:Ui,isIntentRoute:Vi,isSelfThreadReply:eo,isSending:Oi,isSuperFollowsCreator:X.m,positionCursorAtBeginning:to,loggedInUser:Si.e.selectLoggedInUser,prepopulatedText:Qi,previewTweetId:Ki,previousTweetId:ao,previousTweetMedia:io,promotedContent:ro,scheduledFor:G.n,selectedCommunityName:Ai,sendingProgress:G.o,convoCardData:Gi,undoTweetSettings:Ti.d,userLanguage:X.q,quotedStatusId:Yi})),lo),uo=a("45mF"),ho=a("c0ZR"),po=a("W5XZ"),mo=a("9HgX"),go=a("Drq4"),bo=a("0uGn"),_o=a("I8M8"),fo=a("7myi"),yo=a("7nmT"),wo=a.n(yo),vo=a("vbWy"),Co=a("Rp9C"),Eo=a("Q5Mu"),To=a("N5qz"),xo="tweetButton",So="tweetButtonInline",Io=Object(p.a)().propsFromState((()=>({loggedInUser:Si.e.selectLoggedInUser}))).adjustStateProps((({loggedInUser:e})=>({userName:e&&e.name,userProfileImageUrl:e&&e.profile_image_url_https,userScreenName:e&&e.screen_name}))).withAnalytics(),ko=a("cHvH"),Ro=a("sgih"),Po=a("xKuM"),Lo=a("5Vk4");const Mo=y.a.create((e=>({mainCard:{marginHorizontal:"auto",paddingVertical:e.spaces.space16,textAlign:"center",alignItems:"center"},largeScreenCard:{width:"70%"},smallScreenCard:{width:"85%"},sheetStyle:{justifyContent:"center"}})));var Do=({actionButtonType:e,children:t,onActionButtonClick:a,onMaskClick:n,sheetType:i,showActionButton:o})=>r.a.createElement(ko.a,null,(({windowWidth:s})=>{const l=s>y.a.theme.breakpoints.small;return r.a.createElement(Ro.a,{onMaskClick:n,style:Mo.sheetStyle,type:i,withMask:!0},o&&r.a.createElement(Po.a,{leftControl:r.a.createElement(Lo.a,{backButtonType:e,onClick:a}),position:"absolute"}),r.a.createElement(k.a,{style:[Mo.mainCard,l?Mo.largeScreenCard:Mo.smallScreenCard]},t))}));const Ao=v.a.cb7c0988,Oo=v.a.de3bcf28,Fo=v.a.e710ce76,Bo=v.a.h11e5910,No=v.a.b7ec04f4,Uo=v.a.i62a03aa,jo=y.a.create((e=>({itemPadding:{marginVertical:e.spaces.space8},buttonContainer:{paddingHorizontal:e.spaces.space20,width:"100%"}})));var Ho=({onBack:e,onNo:t,onYes:a})=>r.a.createElement(Do,{actionButtonType:"back",onActionButtonClick:e,onMaskClick:e,sheetType:"full",showActionButton:!0},r.a.createElement(_.b,{size:"title4",style:jo.itemPadding,weight:"heavy"},Ao),r.a.createElement(_.b,{color:"gray700",style:jo.itemPadding},Oo),r.a.createElement(_.b,{color:"gray700",style:jo.itemPadding},Fo),r.a.createElement(k.a,{style:jo.buttonContainer},r.a.createElement(_.b,{size:"title4",style:jo.itemPadding,weight:"heavy"},Bo),r.a.createElement(P.a,{onPress:a,style:jo.itemPadding,type:"brandOutlined"},No),r.a.createElement(P.a,{onPress:t,style:jo.itemPadding,type:"brandOutlined"},Uo))),zo=a("cm6r");const Vo=y.a.create((e=>({button:{width:e.spaces.space72,height:e.spaces.space72,marginBottom:e.spaces.space12}})));var Wo=({icon:e,label:t,onPress:a})=>r.a.createElement(zo.a,{interactiveStyles:null,onPress:a},(a=>r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{icon:e,interactivityState:a,size:"xLarge",style:Vo.button,type:"primaryOutlined"}),r.a.createElement(_.b,{color:"gray700"},t)))),Go=a("sjK1"),qo=a("FDY4"),$o=a("tevE"),Ko=a("jV+4"),Xo=a("UgB4"),Qo=a("TW8A"),Yo=a("hiGS"),Jo=a("WtWS");const Zo=(e={})=>Object(ye.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[fe.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M17.928 9.026l.095 3.545H19l.1-3.544h-1.172zm.586 5.394c.414 0 .667-.238.667-.623 0-.388-.252-.626-.666-.626-.41 0-.667.24-.667.627 0 .385.257.623.667.623zm-4.57-.11h.813l.278-1.384h.89l.15-.813h-.883l.198-.96h.875l.15-.805h-.864l.268-1.326h-.813l-.27 1.326h-.946l.263-1.326h-.81l-.27 1.326h-.846l-.154.806h.846l-.2.96h-.83l-.15.812h.824l-.278 1.384h.81l.277-1.384h.952l-.28 1.384zm-.578-2.124l.227-1.102h1.055l-.23 1.102h-1.052zm-5.889-.941c.388 0 .634.32.634.835s-.244.835-.636.835c-.385 0-.615-.315-.615-.835-.002-.524.23-.835.617-.835zM7.595 9C5.763 9 4.5 10.245 4.5 12.054c0 1.838 1.25 3.05 3.157 3.05.388 0 .765-.047 1.05-.13v-.598c-.204.073-.603.12-.995.12-1.556 0-2.542-.937-2.542-2.423 0-1.46.985-2.48 2.402-2.48 1.392 0 2.307.865 2.307 2.19 0 .744-.24 1.213-.61 1.213-.222 0-.35-.15-.35-.41v-1.94h-.74v.435h-.065c-.147-.325-.465-.515-.857-.515-.732 0-1.23.604-1.23 1.494 0 .93.505 1.544 1.267 1.544.425 0 .725-.19.88-.56h.065c.08.352.414.57.872.57.886 0 1.44-.728 1.44-1.892C10.55 10.106 9.348 9 7.594 9z"})));Zo.metadata={width:24,height:24};var er=Zo;const tr=[{headlineText:v.a.f3a7a80c,subTextLine1:v.a.ge52d1de,subTextLine2:null},{headlineText:v.a.d1a92642,subTextLine1:v.a.ae42ebf0,subTextLine2:v.a.aa350ab2},{headlineText:v.a.j18b2956,subTextLine1:v.a.f6bee896,subTextLine2:v.a.dddd0996},{headlineText:v.a.d02a94fa,subTextLine1:v.a.dddd0996,subTextLine2:null},{headlineText:v.a.i018b746,subTextLine1:v.a.b8d85dfa,subTextLine2:v.a.d5ca11f0}],ar=v.a.h11e5910,nr=v.a.abd845fe,ir=v.a.bea869b4,or=v.a.d96cf7ce,rr=v.a.d3145da8,sr=y.a.create((e=>({itemPadding:{marginVertical:e.spaces.space8},buttonContainer:{paddingHorizontal:e.spaces.space20,width:"100%"},profanityIcon:{backgroundColor:e.colors.primary,color:e.colors.whiteOnColor,width:e.spaces.space48,height:e.spaces.space48,borderRadius:e.borderRadii.infinite},tweetContainer:{borderColor:e.colors.nestedBorderColor,borderWidth:e.borderWidths.small,borderRadius:e.borderRadii.large,width:"100%",textAlign:"left"},tweetContent:{paddingHorizontal:e.spaces.space16,paddingVertical:e.spaces.space12},tweetBody:{flexDirection:"row"},userName:{paddingBottom:e.spaces.space4},mobileButtonContainer:{justifyContent:"space-around",flexDirection:"row",width:"100%",marginTop:e.spaces.space72},thanksContainer:{flexDirection:"row",alignItems:"center"},thanksCheckMark:{color:y.a.theme.colors.primary,marginRight:e.spaces.space8},photos:{borderRadius:e.borderRadii.xLarge,overflow:"hidden",marginRight:e.spaces.space12,flex:"3 1 0%"},textStyle:{flex:"8 1 0%"}})));var lr=({hasSentFeedback:e,media:t,onDeleteTweet:a,onDismiss:n,onEditTweet:i,onSendTweet:o,onWeGotItWrong:s,tweetText:l,userName:c,userProfileImageUrl:d,userScreenName:u})=>{const{featureSwitches:h}=r.a.useContext(dt.a);let p=h.getNumberValue("responsive_web_reply_nudge_copy_version");p=p>=0&&p<=4?p:0;const m=tr[p];return r.a.createElement(ko.a,null,(({windowWidth:h})=>r.a.createElement(Do,{actionButtonType:"close",onActionButtonClick:n,onMaskClick:n,sheetType:"full",showActionButton:h>y.a.theme.breakpoints.medium},r.a.createElement(er,{style:[sr.profanityIcon,sr.itemPadding]}),r.a.createElement($o.a,{size:"title4",style:sr.itemPadding,weight:"heavy"},m.headlineText),r.a.createElement(_.b,{color:"gray700",style:sr.itemPadding},m.subTextLine1),r.a.createElement(_.b,{color:"gray700",style:sr.itemPadding},m.subTextLine2),r.a.createElement(k.a,{style:[sr.tweetContainer,sr.itemPadding]},r.a.createElement(k.a,{style:sr.tweetContent},r.a.createElement(Ko.a,{name:c,profileImageUrl:d,screenName:u,style:sr.userName}),r.a.createElement(k.a,{style:sr.tweetBody},(()=>{if(0===t.length)return null;const e=t.map((e=>{var t,a,n;let i="";if(e.externalMediaDetails)i=e.externalMediaDetails.stillMediaUrl;else if(e.mediaFile instanceof Go.c)i=e.mediaFile.thumbnail;else if(null!=(t=e.mediaFile)&&t.url){var o;i=null==(o=e.mediaFile)?void 0:o.url}return{accessibilityLabel:"",url:i,width:(null==(a=e.mediaFile)?void 0:a.width)||100,height:(null==(n=e.mediaFile)?void 0:n.height)||100,expandedUrl:"",shouldShowAltLabel:!1}}));return r.a.createElement(k.a,{style:sr.photos},r.a.createElement(qo.a,{containerAspectRatio:1,images:e,previewMode:!1,singleImageMaxAspectRatio:1,singleImageMinAspectRatio:1,withCenterCrop:!0,withLink:!1}))})(),r.a.createElement(_.b,{style:sr.textStyle},l)))),e?r.a.createElement(k.a,{style:sr.thanksContainer},r.a.createElement(Jo.a,{style:sr.thanksCheckMark}),r.a.createElement(_.b,{align:"center",style:sr.itemPadding},rr)):r.a.createElement(_.b,{align:"center",onPress:s,style:sr.itemPadding,withUnderline:!0},ar),h>y.a.theme.breakpoints.small?r.a.createElement(k.a,{style:sr.buttonContainer},r.a.createElement(P.a,{onPress:i,style:sr.itemPadding,type:"brandFilled"},nr),r.a.createElement(P.a,{onPress:o,style:sr.itemPadding,type:"brandOutlined"},ir),r.a.createElement(P.a,{onPress:a,style:sr.itemPadding,type:"destructiveText"},or)):(()=>{const e=r.a.createElement(Xo.a,{style:{color:y.a.theme.colors.text}}),t=r.a.createElement(Qo.a,{style:{color:y.a.theme.colors.primary}}),n=r.a.createElement(Yo.a,{style:{color:y.a.theme.colors.red500}});return r.a.createElement(k.a,{style:sr.mobileButtonContainer},r.a.createElement(Wo,{icon:e,label:ir,onPress:o}),r.a.createElement(Wo,{icon:t,label:nr,onPress:i}),r.a.createElement(Wo,{icon:n,label:or,onPress:a}))})())))};var cr=Io((({analytics:e,media:t,nudgeId:a,onDeleteTweet:n,onDismiss:i,onEditTweet:o,onSendTweet:s,tweetText:l,userName:c,userProfileImageUrl:d,userScreenName:u})=>{const[h,p]=r.a.useState(!1),[m,g]=r.a.useState(!1),b=({action:t,element:n,page:i})=>{const o=[{nudge_id:a}];e.scribe({action:t,data:{items:o},element:n,page:i,section:"dialog"})};return h?r.a.createElement(Ho,{onBack:()=>{b({action:"back",element:"action",page:"nudge_more_info"}),p(!1)},onNo:()=>{b({action:"got_it_wrong_no",element:"action",page:"nudge_more_info"}),g(!0),p(!1)},onYes:()=>{b({action:"got_it_wrong_yes",element:"action",page:"nudge_more_info"}),g(!0),p(!1)}}):r.a.createElement(lr,{hasSentFeedback:m,media:t,onDeleteTweet:()=>{b({action:"cancel",element:"action",page:"nudge"}),n()},onDismiss:()=>{b({action:"dismiss",element:"action",page:"nudge"}),i()},onEditTweet:()=>{b({action:"revise",element:"action",page:"nudge"}),o()},onSendTweet:()=>{b({action:"send",element:"action",page:"nudge"}),s()},onWeGotItWrong:()=>{b({action:"more_info",element:"action",page:"nudge"}),b({action:"impression",page:"nudge_more_info"}),p(!0)},tweetText:l,userName:c,userProfileImageUrl:d,userScreenName:u})})),dr=a("aITJ"),ur=a("eb3s"),hr=a("JYMr"),pr=a("sCk0"),mr=a("3A2y"),gr=a("zrOZ"),br=a("s1N3"),_r=a("4FGy"),fr=a("mN6z"),yr=a("eyty"),wr=a("rziq"),vr=a("jTgF");const Cr=v.a.d28215f0,Er=v.a.ec909a55,Tr=v.a.jd53409e,xr={singular:v.a.edae65de,plural:v.a.a859846a,oneOfMultiple:v.a.e90118f6,someOfMultiple:v.a.c211dcb2},Sr={singular:v.a.d7c26bfc,plural:v.a.a75e3ccc},Ir=v.a.dcb7e3a0,kr=({numberOfDescriptionsMissing:e,numberOfImages:t})=>{let a,n;const i=e===t;return 1===e?(n=Sr.singular,a=i?xr.singular:xr.oneOfMultiple):(n=Sr.plural,a=i?xr.plural:xr.someOfMultiple),`${a} ${n} ${Ir}`},Rr=v.a.c1bf53b1,Pr=v.a.bb8170da,Lr=v.a.dad5a4b8,Mr=v.a.e65aed64,Dr=v.a.bc2ceaf2,Ar=v.a.d8222374,Or=v.a.j890123a,Fr=v.a.bb01231c,Br=v.a.d4ab68e2,Nr=v.a.d8af8a4c,Ur=v.a.d09d4c06,jr=v.a.i2209530,Hr=v.a.bf9b89e4,zr=v.a.gb1ac3be,Vr=v.a.e5ace470,Wr=v.a.e839db3a,Gr=v.a.f277e94a,qr=v.a.b551cd23,$r=v.a.f026a7fa,Kr=v.a.a5d4fda0,Xr=v.a.ib067d6a,Qr=c.canUseDOM&&document.documentElement&&"scrollBehavior"in document.documentElement.style,Yr={element:"alt_text_prompt"},Jr={component:"article_nudge"},Zr={viewType:"send_tweet"},es=Object.freeze({Original:"original",Reply:"reply",Quote:"quote",Thread:"thread"});class ts extends r.a.Component{constructor(e,t){var a;super(e,t),this._getParentKey=()=>{const{isInline:e,parentTweetId:t}=this.props;return t||(e?vi.a.homeTimeline:vi.a.modal)},this._updateSingleComposer=(e,t)=>{const{updateSingleComposer:a}=this.props;return a({updates:e,index:t,parentKey:this._getParentKey()})},this._resetDraft=()=>{const{resetDraft:e}=this.props;e({parentKey:this._getParentKey(),isPreview:this.isPreview})},this._fetchAutotaggedLocationIfNeeded=()=>{const{createLocalApiErrorHandler:e,fetchAutotaggedLocationIfNeeded:t}=this.props;return t().catch(e())},this._syncTexts=()=>{const{composerData:e}=this.props,{textMap:t}=this.state;e.forEach(((e,a)=>{const n=t[e.key];"string"==typeof n&&n!==e.text&&this._updateSingleComposer({text:n},a)}))},this._hasGif=e=>e.gifMetadata||e.media.some((e=>e.mediaFile&&e.mediaFile.isGif)),this._hasPhoto=e=>e.media&&e.media.some((e=>e.mediaFile&&e.mediaFile.isImage)),this._hasVideo=e=>e.media&&e.media.some((e=>e.mediaFile&&e.mediaFile.isVideo&&!e.mediaFile.isGif)),this._handleDeletePreviewTweet=()=>{const{deletePreviewTweet:e,previewTweetId:t,removeToast:a}=this.props;t&&(a(),e(t))},this._handleAnimateComplete=()=>{const{activeComposerIndex:e,onHandleAppBarHeight:t}=this.props,a=wo.a.findDOMNode(this._composerRefs[e]);if(a instanceof window.Element){const{bottom:e,top:n}=a.getBoundingClientRect(),i=Math.max(n,window.scrollY);if(i<window.pageYOffset||e>window.innerHeight){const e=t?i-t()-14:i-14,a=Math.max(e,0);window.requestAnimationFrame((()=>{Qr?window.scrollTo({top:a,left:0,behavior:"smooth"}):window.scrollTo(0,a)}))}}},this._handleFetchTweetIfNeeded=()=>{const{createLocalApiErrorHandler:e,fetchTweetIfNeeded:t,inReplyToStatus:a,inReplyToStatusId:n,quotedStatus:i,quotedStatusId:o}=this.props;!a&&n&&t(n).catch(e(po.a)),!i&&o&&t(o).catch(e(po.a))},this._blockHistory=(e,t)=>{const{audienceControlsValue:a,isInline:n}=this.props,i=!n&&/unsent/.test(e.pathname),o=!n&&!/\/compose\/tweet\/?$/.test(e.pathname);return this.shouldShowDiscardConfirmation&&"POP"===t&&o?(this.setState({showDiscardTweetConfirmation:!0}),!1):this._canSaveDraft&&i&&"PUSH"===t?this.shouldShowDiscardConfirmation?(this.setState({showDiscardTweetConfirmation:!0,navigatingToOutbox:i}),!1):(this._resetDraft(),!0):this.shouldShowBackgroundSendConfirmation&&"POP"===t&&o?(this._cancelAllMediaUploads(),!1):!("POP"===t&&o&&this._areComposersEmptyOrUnchanged&&!Object(Nt.a)(a))||(this._resetDraft(),!0)},this._getKeyCommandHandlers=()=>{const{typeaheadActive:e}=this.state;return e?this._keyCommandHandlersForActiveTypeahead:this._keyCommandHandlers},this.handleTweetOrRetweet=()=>{this._scribe({section:"composition",element:"send_tweet",action:"click"});if(this._areComposersValid())return this.shouldShowAltTextPrompt?(this.setState({showAltTextPrompt:!0}),void this._scribe({...Yr,action:"show"})):this._handleTweetOrRetweet()},this._handleTweetOrRetweet=()=>this.isRetweet?this._handleRetweet():this._handleTweet(),this._renderReplyContext=()=>{const{activeUser:e,excludedRecipients:t,inReplyToStatus:a,isInline:n,isSelfThreadReply:i,selectedCommunityName:o}=this.props;if(a&&this._shouldBeExpanded())return r.a.createElement(bi,{communityName:o,excludedRecipients:t,inReplyToStatus:a,key:t.join(),loggedInUserId:e?e.id_str:void 0,onPress:this._handleViewRecipients,shouldDisplayRepliesText:!i,showParentTweet:!n})},this._renderAltTextPrompt=()=>{const{numberOfDescriptionsMissing:e,numberOfImages:t}=this._getAltTextMetadata();return r.a.createElement(ur.a,{Icon:go.a,cancelButtonLabel:Pr,confirmButtonLabel:Rr({numOfDescriptions:e}),headline:Tr,onCancel:this._handleIgnoreAltTextPrompt,onConfirm:this._handleAcceptAltTextPrompt,onMaskClick:this._handleCancelAltTextPrompt,text:kr({numberOfDescriptionsMissing:e,numberOfImages:t})})},this._renderToxicReplyNudge=()=>{const e=this._getSingleComposerDataWithLatestText(this.props.composerData[0]),t=e.text,a=e.media;return r.a.createElement(cr,{media:a,nudgeId:this.state.nudgeId,onDeleteTweet:this._handleReplyNudgeDeleteTweet,onDismiss:this._handleReplyNudgeDismiss,onEditTweet:this._handleReplyNudgeEditTweet,onSendTweet:this._handleReplyNudgeSendTweet,tweetText:t})},this._handleAddComposer=()=>{const{addComposer:e,copyDataFromInlineComposerToModalComposer:t,isInline:a,parentTweetId:n}=this.props;this.isInlineReply?t(n):a&&t(vi.a.homeTimeline),e()},this._makeAddComposerLink=Object(Gt.a)(((e,t,a)=>Object(Ei.d)({isInline:e,isSelfThreadReply:t,parentTweetId:a}))),this._handleReplyNudgeDeleteTweet=()=>{this._hideToxicReplyNudge(),this._handleConfirmDiscardTweet()},this._handleReplyNudgeDismiss=()=>{this._hideToxicReplyNudge()},this._handleReplyNudgeEditTweet=()=>{this._hideToxicReplyNudge()},this._handleReplyNudgeSendTweet=()=>{this._hideToxicReplyNudge(),this._handleSendTweet()},this._setRootRef=e=>{e&&(this._root=e)},this._handleTweet=()=>{const{composerData:e}=this.props,{scheduledFor:t}=e[0];this.setState({errorMessage:void 0}),t?Object(Ut.h)(t)&&this._handleScheduleTweet():this._checkToxicReplyAndSendTweet()},this._handleTweetError=(e,t)=>a=>{const{analytics:n,createLocalApiErrorHandler:i}=this.props;if(Object(vr.d)(a)&&a.code===_o.b.CANCELED)return n.scribeAction(e),Promise.resolve();const o=Object(vr.b)(a);if(o)return this.setState({errorMessage:o}),Promise.resolve();i({...t||Object(uo.a)(void 0,!1)})(a);const r=a instanceof l.a&&(null==t?void 0:t[a.errors[0].code]);this.setState({errorMessage:{text:r?r.toast.text:Kr}})},this._handleScheduleTweet=()=>{const{addToast:e,composerData:t,excludedRecipients:a,inReplyToStatus:n,schedule:i}=this.props,o=this._getSingleComposerDataWithLatestText(t[0]);i({excludedRecipients:a,inReplyToStatus:n,scheduleData:o}).then((a=>{this.setState({tweetsSentOrScheduled:!0});const n=Object(Ut.c)(o.scheduledFor);if(n){const i=Object(Ut.b)(n),o=Object(Ut.i)(n),r=qr({scheduleDate:i,scheduleTime:o});e({text:r,action:{label:Gr,link:{pathname:"/compose/tweet/unsent/scheduled"}}}),this._scribeTweetSent(t[0],{...a,id_str:a.scheduled_id_str},{isScheduled:!0})}this._updateConvoCardState(),this._close()})).catch(this._handleTweetError("schedule_tweet_cancel"))},this._handleDraftTweet=()=>{const{addToast:e,composerData:t,draftTweet:a,excludedRecipients:n,inReplyToStatus:i}=this.props;a({excludedRecipients:n,inReplyToStatus:i,draftData:this._getSingleComposerDataWithLatestText(t[0])}).then((a=>{this.setState({showDiscardTweetConfirmation:!1}),e({text:Hr,action:{label:Gr,link:{pathname:"/compose/tweet/unsent/drafts"}}}),this._scribeTweetSent(t[0],{...a,id_str:a.draft_id_str},{isDraftTweet:!0}),this._updateConvoCardState(),this._close()})).catch(this._handleTweetError("draft_tweet_cancel",Eo.a))},this._checkToxicReply=()=>{const{checkTweetForNudge:e,composerData:t,inReplyToStatus:a,inReplyToStatusId:n,parentTweetId:i}=this.props,o=e(this._getSingleComposerDataWithLatestText(t[0]).text,i||n,null==a?void 0:a.conversation_id_str).then((e=>{var t,a,n,i,o,r,s;if(!this.context.featureSwitches.getArrayValue("responsive_web_reply_nudge_supported_languages").includes(null==(t=e.create_nudge)||null==(a=t.nudge)?void 0:a.proposed_tweet_language))return!1;const l=null==e||null==(n=e.create_nudge)||null==(i=n.nudge)||null==(o=i.nudge_type)?void 0:o.__typename,c=null==e||null==(r=e.create_nudge)||null==(s=r.nudge)?void 0:s.id;return c&&this.setState({nudgeId:c}),!!l})),r=new Promise(((e,t)=>setTimeout(e,1e3,!1)));return Promise.race([o,r])},this._showToxicReplyNudge=()=>{this._scribe({page:"nudge",section:"dialog",action:"impression"},{items:[{nudge_id:this.state.nudgeId}]}),this.setState({showToxicReplyNudge:!0})},this._hideToxicReplyNudge=()=>this.setState({showToxicReplyNudge:!1}),this._checkToxicReplyAndSendTweet=()=>{const{composerData:e,isSelfThreadReply:t}=this.props,{nudgeId:a}=this.state;if(!(!this._getSingleComposerDataWithLatestText(e[0]).scheduledFor&&this.isReply&&!t&&this.context.featureSwitches.isTrue("responsive_web_reply_nudge_enabled")&&!a))return this._handleSendTweet();this._checkToxicReply().then((e=>{if(!e)return this._handleSendTweet();this.context.featureSwitches.isTrue("responsive_web_reply_nudge_show_nudge")&&this._showToxicReplyNudge()}))},this._handleSendTweet=()=>{const{activeUser:e,addToast:t,analytics:a,audienceControlsValue:n,composeSemanticCoreId:i,excludedRecipients:o,hasArticleNudge:r,history:s,inReplyToStatus:l,isSelfThreadReply:c,location:u,previousTweetId:h,promotedContent:p,selectedCommunityName:m,send:g}=this.props,{conversationControlsValue:b,exclusivityControlValue:_,trustedFriendsValue:f,trustedFriendsMemberCount:y}=n,w=this.isPreview,v=this.props.composerData.map((e=>this._getSingleComposerDataWithLatestText(e))),C=Object(Ut.c)(v[0].scheduledFor);if(C){const e=Object(Ut.b)(C),a=Object(Ut.i)(C),n=qr({scheduleDate:e,scheduleTime:a});return t({text:n,action:{label:Gr,link:""}}),void this._close()}if(o.length>0&&a.scribe({element:"mentions",action:"edited"}),f&&a.scribe({action:"send_trusted_friends_tweet",data:{trusted_friends_control_details:{list_member_count:y}}}),this._conversationControlsCreationEnabled)if("community"===b)a.scribe({action:"send_community_tweet"});else if("by_invitation"===b){const e=this._getSingleComposerDataWithLatestText(v[0]).text,t=Object(d.d)(e);a.scribe({action:t?"send_mentioned_tweet_with_mentions":"send_mentioned_tweet_without_mentions"})}else"followers"===b&&a.scribe({action:"send_my_followers_tweet"});const E=(null==l?void 0:l.community_id_str)||n.communityIdValue||void 0,T=E?`8.31.${E}`:"",x=i?E?[i,T].join(","):i:T;g({sendData:v,communityIdValue:E,conversationControlsValue:b,excludedRecipients:o,exclusivityControlValue:_,inReplyToStatus:l,isSelfThreadReply:c,previousTweetId:h,promotedContent:p,composeSemanticCoreId:x,isPreview:w,trustedFriendsValue:f,tweetType:this.tweetType}).then((a=>{w||this.setState({tweetsSentOrScheduled:!0}),a.map(((e,t)=>this._scribeTweetSent(v[t],e,{hasArticleNudge:r}))),a.length>1&&this._scribeThreadSent(v,a,"thread_send_success");let n=a.length>1?Mr:Lr;if(E&&m){const e=m,t=a.length;n=Er({numOfTweets:t,communityName:e})}const i=w&&this.isReply,o={label:Gr,link:void 0,onAction:void 0};if(i||!w){const t=i?a[0].in_reply_to_status_id_str:a[0].id_str;o.link={pathname:`/${e?e.screen_name:"i"}/status/${t||""}`}}else o.onAction=Object(Ei.b)(s,u,E);t({text:w?Dr:n,action:o}),this.isInlineReply&&this.setState({focused:!1}),this._updateConvoCardState(),this._close()})).catch((e=>{var t;const{sentTweets:n=[]}=e,i=Array.isArray(e.errors)&&(null==(t=e.errors[0])?void 0:t.code),o=null==e?void 0:e.url,l=null==e?void 0:e.status,c={message:e.type,event_info:i?`${i}`:void 0,status_code:l,url:o};throw n.map(((e,t)=>this._scribeTweetSent(v[t],e)),{hasArticleNudge:r}),Object(vr.d)(e)&&e.code===_o.b.CANCELED||a.scribe({action:"send_tweet_failure",data:c}),v.length>1&&this._scribeThreadSent(v,n,"thread_send_failure"),n.length&&s.replace({pathname:u.pathname,state:{...Object(mr.a)(u.state||{},"quotedStatus"),inReplyToStatusId:n[n.length-1].id_str,isSelfThreadReply:!0}}),e})).catch(this._handleTweetError("send_tweet_cancel",Eo.a))},this._setActiveParentKey=()=>{const{setActiveParentKey:e}=this.props;e(this._getParentKey())},this._scribeSoftNudgeWithQuoteTweet=(e,t,a)=>{"soft_nudge_with_quote_tweet"===(null==e?void 0:e.limited_actions)&&this._scribe({action:t},a)},this._scribeTweetSent=(e,t,{hasArticleNudge:a=!1,isDraftTweet:n=!1,isScheduled:i=!1}={})=>{var o,r;const{nudgeId:s}=this.state,l=e.scheduledTweetId?"schedule_edit_":"schedule_",c=e.draftTweetId?"draft_edit_":"draft_",d=n?c:i?l:"send_",u={items:[Co.a.getTweetItem(t)]},h=e.pollActive&&e.pollValid,p=e.media.some((e=>{var t;return!(null==(t=e.mediaMetadata)||!t.altText)})),m=e.mediaTags.length,g=Object(gr.a)(e.media.map((e=>{var t;const a=null==(t=e.mediaMetadata)?void 0:t.sensitiveMediaWarning;return a?Array.from(a):void 0})).filter(Boolean).flat()),b=this.props.isInline?"inline_reply":"tweet_box_dialog";if(this._scribe({action:`${d}tweet`},u),n||!e.draftTweetId||e.scheduledTweetId||this._scribe({action:`${d}draft_tweet`},u),e&&(null==(o=this._getSingleComposerDataWithLatestText(e))||null==(r=o.text)?void 0:r.length)>0&&this._scribeSoftNudgeWithQuoteTweet(e.quotedStatus,"soft_nudge_with_qt_retweet_with_comment",u),this.isQuoteTweet&&(this._scribe({action:"retweet_with_comment"},u),a&&this._scribe({...Jr,element:"result",action:"retweet_with_comment"},u)),this.isReply&&this._scribe({component:b,action:`${d}reply`},u),h&&this._scribe({action:`${d}poll_tweet`},u),this._hasPhoto(e)&&(this._scribe({action:`${d}photo_tweet`},u),p&&this._scribe({action:`${d}photo_tweet_with_alt_text`},u),m&&this._scribe({action:`${d}photo_tweet_with_tags`},u)),this._hasVideo(e)&&(this._scribe({action:`${d}video_tweet`},u),m&&this._scribe({action:`${d}video_tweet_with_tags`},u)),g.size){const t=this._hasPhoto(e)?"photo":"video";g.forEach((e=>{this._scribe({action:`${d}${t}_tweet_with_${e}_warning`},u)}))}const _={page:"nudge",section:"dialog",element:"result"};if(s&&this.isReply&&!i&&(n?this._scribe({..._,action:"save"},{items:[{nudge_id:s}]}):this._scribe({..._,action:"sent"},{items:[{nudge_id:s}]})),s||n||!this.isReply||i||this._scribe({..._,action:"sent_no_nudge"}),e.gifMetadata){const a=t.id_str&&Co.a.getGifSearchItemForTweet(t.id_str,e.gifMetadata);this._scribe({element:"remote",action:`${d}gif_tweet`},{items:a?[a]:[]});const n=e.media.some((e=>{var t;return!(null==(t=e.mediaMetadata)||!t.defaultAltText)}));(p||n)&&this._scribe({element:"remote",action:`${d}gif_tweet_with_alt_text`},{event_info:p?"user_entered":"from_provider",items:a?[a]:[]}),m&&this._scribe({action:`${d}gif_tweet_with_tags`},u)}else this._hasGif(e)&&(this._scribe({element:"local",action:`${d}gif_tweet`},u),p&&this._scribe({element:"local",action:`${d}gif_tweet_with_alt_text`},u))},this._scribeThreadSent=(e,t,a)=>{const{inReplyToStatus:n}=this.props,i={items:[Co.a.getSendThreadItem(e,t.length,!!n)]};this._scribe({action:a},i)},this._scribeRetweet=e=>{const{hasArticleNudge:t}=this.props,a={items:[Co.a.getTweetItem(e)]};this._scribeSoftNudgeWithQuoteTweet(e,"soft_nudge_with_qt_retweet",a),this._scribe({action:"retweet"},a),t&&this._scribe({...Jr,element:"result",action:"retweet"},a)},this._handleRetweet=()=>{const{composerData:e,createLocalApiErrorHandler:t,retweet:a}=this.props,n=e[0].quotedStatus;n&&(this._scribeRetweet(n),a(n.id_str,{}).then((e=>{this.setState({tweetsSentOrScheduled:!0}),this._close()}),t(vo.a)))},this.handleDismissComposer=()=>{this.shouldShowDiscardConfirmation?this.setState({showDiscardTweetConfirmation:!0}):this.shouldShowBackgroundSendConfirmation?this._cancelAllMediaUploads():this._close()},this.handleEditTimeLimitExceeded=()=>{this.setState({showEditTimeLimitExceededConfirmation:!0})},this._cancelAllMediaUploads=()=>{this.props.composerData.forEach((e=>e.media.forEach((e=>e.uploading&&e.uploader&&e.uploader.cancel()))))},this._handleConfirmDiscardTweet=()=>{const{analytics:e,hasArticleNudge:t}=this.props,a=this._canSaveDraft?"draft":"send";this.setState({showDiscardTweetConfirmation:!1}),this._close(),e.scribeAction(`${a}_tweet_discard`),t&&this._scribe({...Jr,element:"result",action:"cancel"}),this.state.nudgeId&&this._scribe({page:"nudge",section:"dialog",element:"result",action:"cancel"},{items:[{nudge_id:this.state.nudgeId}]})},this._handleCancelDiscardTweet=()=>{this.setState({showDiscardTweetConfirmation:!1},(()=>{this._restoreFocusToActiveComposer()}))},this._handleAcceptAltTextPrompt=()=>{this.setState({showAltTextPrompt:!1});const{history:e}=this.props,{noDescriptionImageIDs:t}=this._getAltTextMetadata();t[0]&&(this._scribe({...Yr,action:"accepted"}),e.push("/compose/tweet/media",{mediaId:t[0],tab:bo.a.altText,hideTabs:!0,showAllMedia:!0}))},this._handleIgnoreAltTextPrompt=()=>{this._scribe({...Yr,action:"declined"}),this.setState({showAltTextPrompt:!1}),this._handleTweetOrRetweet()},this._handleCancelAltTextPrompt=()=>{this._scribe({...Yr,action:"cancel"}),this.setState({showAltTextPrompt:!1},(()=>{this._restoreFocusToActiveComposer()}))},this._restoreFocusToActiveComposer=()=>{const{activeComposerIndex:e}=this.props;void 0!==e&&this._composerRefs[e]&&this._composerRefs[e].focus()},this._close=()=>{const{history:e,isSending:t,onCloseComposer:a}=this.props;t||this._resetDraft(),this.state.navigatingToOutbox?this._canSaveDraft?e.push("/compose/tweet/unsent/drafts"):e.push("/compose/tweet/unsent/scheduled"):a&&a()},this._handleComposerFocus=e=>{this._composerRefs[e]?this.props.updateActiveComposerIndex(e):setTimeout((()=>{this._restoreFocusToActiveComposer()}),0)},this._handleFocus=()=>{const{focused:e}=this.state;e||(this.isInlineReply&&this._scribe({element:"inline_reply",action:"reply"}),this.setState({focused:!0}))},this._handleTypeaheadStateChange=e=>{this.setState({typeaheadActive:e})},this._handleRemoveComposer=()=>{const{activeComposerIndex:e,composerData:t,history:a,location:n,removeComposer:i}=this.props;0===e&&t[0].quotedStatus&&a.replace({pathname:n.pathname,state:Object(mr.a)(n.state||{},"quotedStatus")}),i(),setTimeout(this._restoreFocusToActiveComposer)},this._handleViewRecipients=()=>{const{excludedRecipients:e,history:t,inReplyToStatus:a}=this.props;this._setActiveParentKey(),t.push({pathname:"/compose/tweet/recipients",state:{excludedRecipients:e,inReplyToStatus:a}})},this._handleTextChange=(e,t)=>{const{textMap:a}=this.state,{activeComposerIndex:n,isInline:i,setValidity:o}=this.props;if(this.setState({textMap:{...a,[t]:e}},(()=>{o&&o(this._areComposersValid())})),this.setState({errorMessage:void 0}),dr.b.isIOS()){const t=i?0:n;this._updateSingleComposer({text:e},t)}},this._handleTextOnBlur=Object(Gt.a)(((e,t)=>()=>{const{textMap:a,tweetsSentOrScheduled:n}=this.state,{composerData:i}=this.props,o=a[e],r=i.some((t=>t.key===e));"string"==typeof o&&!n&&r&&this._updateSingleComposer({text:o},t)})),this._updateAudienceControlsValue=e=>{const{composerData:t,updateAudienceControlsValue:a}=this.props,{errorMessage:n}=this.state;switch(e._type){case"conversation_controls":if(!this._conversationControlsCreationEnabled)return;break;case"community_members":if(!this._isCommunitiesEnabled)return;t[0].pollActive&&!this.context.featureSwitches.isTrue("c9s_poll_creation_enabled")&&(this._updateSingleComposer({pollActive:!1},0),this.setState({errorMessage:{text:Cr}})),(null==n?void 0:n.text)===Cr&&this.setState({errorMessage:void 0})}a(e,this._getParentKey())},this._renderProgressBar=()=>{const{isSending:e,sendingProgress:t}=this.props,a=e?Math.max(t,.02):0;return r.a.createElement(hr.a,{progress:a,style:[as.progressBar,{visibility:a?"visible":"hidden"}]})},this._updateConvoCardState=()=>{const{convoCardData:e,updateConvoCardState:t}=this.props;if(e){const{cardId:a,nextState:n}=e;n&&a&&t(a,{cardState:n})}},this._attachExternalMedia=e=>(t,a=[],n)=>Promise.all(t.map((e=>Object(ho.a)(e)))).then((t=>this._handleAddMediaFiles(e)(t,a,n))),this._handleAddMediaFiles=e=>(t,a=[],n=[])=>{var i,o;const{addMedia:r,addToast:s,composerData:l,dataSaverMode:c,preUploadMedia:d,processMultipleMedia:u,removeMediaUpload:h}=this.props,p=l[e],m=p.pollActive,g=Object(yr.e)(null==this||null==(i=this.context)?void 0:i.userClaims,null==this||null==(o=this.context)?void 0:o.featureSwitches);m||r(t,{location:yr.d.Tweet,canUploadLongVideo:g,uploadIds:a,altTexts:n}).then((t=>{const a=t.map((e=>e.id));if(ts._validateMedia(p,t)){const n=p.media.map((e=>e.id));this._updateSingleComposer({mediaIds:Object(br.a)(n.concat(a))},e),u(t,{onFailure:this._handleMediaRemoveFactory(e)}).then((e=>{c||d(e.map((e=>e.id)))}))}else s({text:Xr}),h(a)}))},this._handleMediaRemoveFactory=e=>t=>this._handleMediaRemove(e,t),this._handleMediaRemove=(e,t)=>{const{composerData:a,removeMediaUpload:n}=this.props,{media:i,mediaTags:o}=a[e],r=((e,...t)=>Object(_r.a)(e,t))(i.map((e=>e.id)),t),s=r.length>0?o:[];this._updateSingleComposer({mediaIds:r,gifMetadata:void 0,mediaTags:s},e),n(t),this.setState({errorMessage:void 0})},this._setComposerRef=e=>t=>{this._composerRefs[e]=t},this._shouldBeExpanded=()=>{const{composerData:e,parentTweetId:t}=this.props,{focused:a}=this.state;if(a)return!0;const n=!Object(Nt.c)(this._getSingleComposerDataWithLatestText(e[0]));return!t||n},this._areComposersValid=()=>{const{audienceControlsValue:{_type:e},composerData:t}=this.props,a=t[0].quotedStatus,n=null==a?void 0:a.community_id_str,i="community_members"===e,o="trusted_friends_tweet"===e;return this.isRetweet&&!n&&!i&&!o||t.every((e=>Object(Nt.e)(this._getSingleComposerDataWithLatestText(e))))},this._areComposersEmptyOrUnchanged=()=>{const{composerData:e,prepopulatedText:t}=this.props;return e.every((e=>Object(Nt.d)(this._getSingleComposerDataWithLatestText(e),t)))},this._getAltTextMetadata=()=>{const{composerData:e}=this.props,t={numberOfDescriptionsMissing:0,numberOfImages:0,noDescriptionImageIDs:[]};return e.forEach((e=>{const a=(e.media||[]).filter((({externalMediaDetails:e,mediaFile:t})=>(null==t?void 0:t.isImage)||(null==t?void 0:t.isGif)||(null==e?void 0:e.mediaType)===mo.a)),n=a.filter((({mediaMetadata:e})=>!(null!=e&&e.altText))).map((e=>e.id));t.numberOfImages+=a.length,t.noDescriptionImageIDs.push(...n)})),t.numberOfDescriptionsMissing=t.noDescriptionImageIDs.length,t},this._getSingleComposerDataWithLatestText=e=>{const{textMap:t}=this.state;return"string"==typeof t[e.key]?{...e,text:t[e.key]}:e};const n=!(null==(a=e.location.state)||!a.focusComposer);this.state={focused:n,showAltTextPrompt:!1,showDiscardTweetConfirmation:!1,showEditTimeLimitExceededConfirmation:!1,showToxicReplyNudge:!1,textMap:{},tweetsSentOrScheduled:!1,typeaheadActive:!1,shouldDisableButton:!1},this._composerRefs={},this._conversationControlsCreationEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),this._throttledSyncTexts=Object(Sa.a)(this._syncTexts,1e3,{leading:!0,trailing:!1}),this._keyCommandHandlers={[wr.b]:this.handleTweetOrRetweet,[wr.a]:this.handleDismissComposer},this._keyCommandHandlersForActiveTypeahead={[wr.b]:this.handleTweetOrRetweet},this._isAltTextNudgeEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("responsive_web_alt_text_nudges_enabled"),this._isCommunitiesEnabled=this.context.featureSwitches.isTrue("c9s_enabled")}UNSAFE_componentWillMount(){const{onRef:e}=this.props;e&&e(this)}componentDidMount(){var e;const{composerData:t,convoCardData:a,externalMedia:n,externalMediaFiles:i,fetchAltTextPromptPreferenceIfNeeded:o,history:r,isInline:s,isIntentRoute:l,location:c,prepopulatedText:d,previousTweetMedia:u,setValidity:h}=this.props,p=(null==(e=t[0].media)?void 0:e.length)>0;if(this._unblockHistory=this.props.history.block(this._blockHistory),n.length>0&&this._attachExternalMedia(0)(n),i.length>0&&this._handleAddMediaFiles(0)(i),!p&&null!=u&&u.length&&this._attachExternalMedia(0)(u.map((({url:e})=>e)),u.map((({uploadId:e})=>e)),u.map((({altText:e})=>e))),this._handleFetchTweetIfNeeded(),this._handleDeletePreviewTweet(),o(),d||a&&a.cardUrl){const e={};d&&(e.text=d),a&&a.cardUrl&&(e.cardUrl=a.cardUrl),this._updateSingleComposer(e)}(d||a&&a.cardUrl||n.length>0||i.length>0)&&!l&&r.replace({query:Object(yi.b)(c.query),search:"",pathname:c.pathname,state:Object(mr.a)(Object(yi.b)(c.state||{}),["defaultText","externalMedia","externalMediaFiles"])}),h&&h(this._areComposersValid()),s||this._setActiveParentKey(),this.isInlineReply&&this.state.focused&&this._scribe({element:"inline_reply",action:"reply"})}componentDidUpdate(e,t){const{addToast:a,composerData:n,copyDataFromInlineComposerToModalComposer:i,externalMedia:o,externalMediaFiles:r,onRef:s,parentTweetId:l,replyPressToggle:c,setValidity:d,windowWidth:u}=this.props;u!==e.windowWidth&&this._throttledSyncTexts(),e.onRef&&e.onRef!==s&&e.onRef(void 0),s&&s!==e.onRef&&s(this),n.length>=25&&e.composerData.length<25&&a({text:$r}),o.length>0&&o!==e.externalMedia?this._attachExternalMedia(0)(o):r.length>0&&r!==e.externalMediaFiles&&this._handleAddMediaFiles(0)(r),d&&!Object(fr.a)(n,e.composerData)&&d&&d(this._areComposersValid()),c!==e.replyPressToggle&&i(l)}componentWillUnmount(){const{onRef:e}=this.props;this._unblockHistory&&this._unblockHistory(),e&&e(void 0),this._syncTexts()}render(){var e,t,a;const{activeUser:n,addToast:o,audienceControlsValue:s,composeHeader:l,composerData:c,customizePropsForSingleComposerItem:d,geoEnabled:u,history:h,inReplyToStatus:p,isInline:m,isModal:g,isSelfThreadReply:b,isSending:_,isSuperFollowsCreator:f,parentTweetId:y,positionCursorAtBeginning:w,previousTweetMedia:v,richTextInputContext:C,scheduledFor:E,typeaheadWrapper:T,userLanguage:x,windowWidth:S}=this.props,{errorMessage:I,focused:R,shouldDisableButton:L,showAltTextPrompt:M,showDiscardTweetConfirmation:D,showEditTimeLimitExceededConfirmation:A,showToxicReplyNudge:O,typeaheadActive:F}=this.state,B=!g&&F,N=m?0:this.props.activeComposerIndex,U=B||m?[c[N]]:c,j=this._areComposersValid(),H=this.hasNonCompliantQuote&&this.isRetweet,z=m?k.a:pr.a,V=m?{}:{onAnimateComplete:g?void 0:this._handleAnimateComplete},W=L||!j||H||this.isCommunityTweetFromProtectedUser,G=m&&To.a.isOneColumnSquishedLayout(S),q=this.isCommunityTweet&&!this.context.featureSwitches.isTrue("c9s_poll_creation_enabled"),$=G||q,K=G||this.isCommunityTweet||this.isExclusiveTweet,X=null==p||null==(e=p.trusted_friends_info)?void 0:e.screen_name;return r.a.createElement(k.a,{ref:this._setRootRef,style:!y&&as.root},m?this._renderProgressBar():null,I&&r.a.createElement(k.a,{style:as.inlineCallout},r.a.createElement(at.a,{action:null!=(t=I.action)&&t.label&&null!=(a=I.action)&&a.link?{label:I.action.label,link:I.action.link}:void 0,text:I.text,type:"danger"})),r.a.createElement(k.a,{onFocus:this._handleFocus,style:[as.content,y&&as.contentInlineReply,g&&as.contentModal]},p?this._renderReplyContext():null,l,r.a.createElement(z,V,U.map(((e,t)=>{var a;const l=Object(Ut.h)(e.scheduledFor),I=c.indexOf(e),L=d(e,t,U),M=g||m?r.a.createElement(P.a,{behavioralEventContext:Zr,disabled:W,onPress:this.handleTweetOrRetweet,size:"medium",style:as.inlineSendButton,testID:g?xo:So,type:"brandFilled"},Object(Ei.c)({inReplyToStatus:!!p,isSelfThreadReply:!!b,isQuoteTweet:!!this.isQuoteTweet,isRetweet:!!this.isRetweet,isScheduled:!!l,isThread:this.isThread,isEdit:!!this.isEdit})):null,D=this._getSingleComposerDataWithLatestText(e);return r.a.createElement(k.a,{key:e.key},r.a.createElement(ni,i()({addComposerLink:this._makeAddComposerLink(m,b,y),addToast:o,additionalToolbarContent:M,audienceControlsValue:s,autoFocus:this.isInlineReply&&R,data:D,disableAddTweet:c.length>=25,editable:!_&&!!n,fetchAutotaggedLocationIfNeeded:this._fetchAutotaggedLocationIfNeeded,geoEnabled:u,hidePoll:$,hideScheduling:K,history:h,index:I,isAccountProtected:null==(a=this.props.activeUser)?void 0:a.protected,isActive:I===N&&!_,isCommunityTweetFromProtectedUser:this.isCommunityTweetFromProtectedUser,isEdit:!!this.isEdit,isExpanded:0!==t||this._shouldBeExpanded(),isInline:m,isInlineReply:this.isInlineReply,isLast:m||I===c.length-1,isReply:!!p||this.isInlineReply,isSelfThreadReply:!!b,isSuperFollowsCreator:f,keyCommandHandlers:this._getKeyCommandHandlers(),loggedInUser:n,onAddComposer:this._handleAddComposer,onFilesAdded:this._handleAddMediaFiles(I),onFocus:this._handleComposerFocus,onRemoveComposer:this._handleRemoveComposer,onRemoveMedia:this._handleMediaRemove,onTextChange:this._handleTextChange,onTextInputBlur:this._handleTextOnBlur(D.key,t),onTypeaheadStateChange:this._handleTypeaheadStateChange,positionCursorAtBeginning:!!w,previousMedia:v,ref:this._setComposerRef(I),richTextInputContext:C,scheduledFor:E,setActiveParentKey:this._setActiveParentKey,trustedFriendsTweetAuthorScreenName:X,twitterTextConfigurationVersion:"version3",typeaheadActive:F,typeaheadWrapper:T,updateAudienceControlsValue:this._updateAudienceControlsValue,updateSingleComposer:this._updateSingleComposer,userLanguage:x,windowWidth:S},L)))}))),D?this._canSaveDraft?r.a.createElement(ur.a,{cancelButtonLabel:Br,confirmButtonLabel:jr,headline:Nr,onCancel:this._handleConfirmDiscardTweet,onConfirm:this._handleDraftTweet,onMaskClick:this._handleCancelDiscardTweet,text:Ur}):r.a.createElement(ur.a,{confirmButtonLabel:Br,confirmButtonType:"destructiveFilled",headline:this.isThread?Or:Ar,onCancel:this._handleCancelDiscardTweet,onConfirm:this._handleConfirmDiscardTweet,text:Fr}):null,A?r.a.createElement(ur.a,{confirmButtonLabel:Wr,headline:zr,onConfirm:this._handleConfirmDiscardTweet,text:Vr,withCancelButton:!1}):null,M?this._renderAltTextPrompt():null,O?this._renderToxicReplyNudge():null,r.a.createElement(k.a,{style:_&&as.mask})))}_scribe(e,t){const{analytics:a}=this.props;a.scribe({...e,data:t})}get isEdit(){const{previousTweetId:e}=this.props;return!!e}get isInlineReply(){const{parentTweetId:e}=this.props;return!!e}get isThread(){return this.props.composerData.length>1}get isRetweet(){const{composerData:e}=this.props,t=0===e[0].media.length,a=this._getSingleComposerDataWithLatestText(e[0]).text;return!this.isThread&&e[0].quotedStatus&&""===a&&t}get isQuoteTweet(){const{composerData:e}=this.props,t=this._getSingleComposerDataWithLatestText(e[0]).text;return!this.isThread&&e[0].quotedStatus&&t.length>0}get hasNonCompliantQuote(){var e;const{composerData:t}=this.props;return"non_compliant"===(null==(e=t[0].quotedStatus)?void 0:e.limited_actions)}get shouldShowDiscardConfirmation(){const{composerData:e,isSending:t}=this.props,{scheduledTweetId:a}=e[0],{showDiscardTweetConfirmation:n}=this.state,i=this._areComposersEmptyOrUnchanged();return!(t||i||n||a)}get shouldShowBackgroundSendConfirmation(){const{composerData:e,isSending:t}=this.props,a=e.some((e=>e.media.some((e=>e.uploading))));return t&&a}get shouldShowAltTextPrompt(){const{altTextNudgeType:e}=this.props;if(!this.context.featureSwitches.isTrue("responsive_web_alt_text_nudges_enabled")||e!==s.a.prompt)return!1;const{numberOfDescriptionsMissing:t}=this._getAltTextMetadata();return t>0}get _canSaveDraft(){const{composerData:e,isInline:t}=this.props;return!(this.isCommunityTweet||this.isExclusiveTweet||this.isThread||e[0].pollActive||0!==e[0].mediaTags.length||t)}get isCommunityTweet(){const{audienceControlsValue:e,inReplyToStatus:t}=this.props;return!!(null!=t&&t.community_id_str||"community_members"===e._type)}get isCommunityTweetFromProtectedUser(){var e;return!(!this.isCommunityTweet||null==(e=this.props.activeUser)||!e.protected)}get isReply(){return!(!this.props.inReplyToStatus&&!this.props.inReplyToStatusId)}get isExclusiveTweet(){const{audienceControlsValue:e}=this.props;return!!e.exclusivityControlValue}get isTrustedFriendsTweet(){const{audienceControlsValue:e}=this.props;return!!e.trustedFriendsValue}get tweetType(){return this.isQuoteTweet?es.Quote:this.isThread?es.Thread:this.isReply?es.Reply:es.Original}_undoEnabledForTweetType(e){const{undoTweetSettings:t}=this.props;return!t||void 0===t[this.tweetType]||t[e]}get isPreview(){var e,t;const{composerData:a}=this.props,n=null==this||null==(e=this.context)||null==(t=e.userClaims)?void 0:t.isTrueAndEnabled("subscriptions_feature_1003"),i=a[0].pollActive&&a[0].pollValid;return!(!n||this.isEdit)&&(i?this._undoEnabledForTweetType("poll"):this._undoEnabledForTweetType(this.tweetType))}}ts.defaultProps={customizePropsForSingleComposerItem:(e,t,a)=>({}),externalMedia:[],externalMediaFiles:[],isSelfThreadReply:!1,isModal:!1,positionCursorAtBeginning:!1,prepopulatedText:"",setValidity:()=>{},typeaheadWrapper:fo.a},ts.contextType=dt.a,ts._validateMedia=(e,t)=>{const{media:a}=e;return Object(d.c)(a.concat(t))};const as=y.a.create((e=>({root:{paddingBottom:e.spaces.space4},content:{paddingVertical:e.spaces.space4,backgroundColor:e.colors.cellBackground},contentModal:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge},contentInlineReply:{paddingVertical:e.componentDimensions.gutterVertical},mask:{...y.a.absoluteFillObject},inlineSendButton:{marginLeft:e.spaces.space12},progressBar:{position:"absolute",borderTopLeftRadius:e.borderRadii.small,borderTopRightRadius:e.borderRadii.small},inlineCallout:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},hidden:{position:"absolute",visibility:"hidden",width:"100%"}})));t.a=Object(I.a)(co(ts))},hqDb:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),o=(a("kYxP"),a("ERkP")),r=a.n(o),s=a("k49u"),l=a("6xIQ"),c=a("kGix"),d=a("G6rE"),u=a("rxPX"),h=a("0KEI");const p=(e,t)=>t.userIds,m=(e,t)=>{const{userIds:a}=t;return a.filter((t=>!!d.e.select(e,t)))},g=(e,t)=>{const{userIds:a}=t;return a.reduce(((t,a)=>{const n=d.e.selectFetchStatus(e,a);return t[a]=n===c.a.NONE?c.a.LOADING:n,t}),{})};var b=Object(u.a)().propsFromState((()=>({availableUserIds:Object(l.a)(m,(e=>e)),fetchStatus:Object(l.a)(m,g,p,((e,t,a)=>{let n=c.a.LOADED;for(let i=0;i<a.length;i++){const o=a[i];if(-1===e.indexOf(o)){const e=t[o]||c.a.LOADING;n=n===c.a.LOADED?e:n}if(n===c.a.LOADED)break}return n}))}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(h.createLocalApiErrorHandlerWithContextFactory)("USERS_LIST_CONTAINER"),fetchUsersIfNeeded:d.e.fetchManyIfNeeded}))),_=a("v//M"),f=a("3XMw"),y=a.n(f),w=a("pQ3Z"),v=a.n(w),C=a("cFuS"),E=a("Re5t"),T=a("MWbm"),x=a("88ay");const S=({displayMode:e,renderUserCell:t,userIds:a,withFinalItemBorder:n,withItemBorder:i})=>r.a.createElement(T.a,null,a.map(((a,n)=>t?t(a):r.a.createElement(x.b,{decoration:x.e,displayMode:e,key:a,promotedItemType:C.c.USER,userId:a,withFollowsYou:!0}))));S.defaultProps={displayMode:E.a.UserDetailed,withFinalItemBorder:!0,withItemBorder:!1};var I=S;const k=y.a.f5b426c2,R={viewType:"user_list"};class P extends r.a.Component{constructor(...e){super(...e),this.state={allUsersUnavailable:!1},this._renderContent=()=>{const{availableUserIds:e,createLocalApiErrorHandler:t,fetchStatus:a,fetchUsersIfNeeded:n,userIds:o,...s}=this.props;return r.a.createElement(I,i()({},s,{userIds:e}))},this._handleFetch=()=>{this._fetchUsersIfNeeded()}}componentDidMount(){this._fetchUsersIfNeeded()}componentDidUpdate(e){v()(e.userIds,this.props.userIds)||this._fetchUsersIfNeeded()}render(){return r.a.createElement(_.a,{accessibilityLabel:k,behavioralEventContext:R,fetchStatus:this.state.allUsersUnavailable?c.a.LOADED:this.props.fetchStatus,onRequestRetry:this._handleFetch,render:this._renderContent,retryable:!1})}_fetchUsersIfNeeded(){const{availableUserIds:e,createLocalApiErrorHandler:t,fetchUsersIfNeeded:a,userIds:n}=this.props;a(n).then((()=>{this.setState({allUsersUnavailable:!1})}),t({[s.a.AddressBookLookupNotFound]:{customAction:()=>{0===e.length&&this.setState({allUsersUnavailable:!0})}},[s.a.OtherUserSuspended]:{customAction:()=>{0===e.length&&this.setState({allUsersUnavailable:!0})}}}))}}const L=b(P);t.a=L},hxu0:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),o=a("ERkP"),r=a.n(o),s=a("vqbU");t.a=e=>t=>r.a.createElement(s.a.Consumer,null,(a=>r.a.createElement(e,i()({},t,{isInSidebar:a}))))},hyzI:function(e,t,a){var n=a("m5o6"),i=a("d0UJ"),o=a("eask"),r=a("9SKQ"),s=a("e63W");function l(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=r,l.prototype.set=s,e.exports=l},"ii+P":function(e,t,a){"use strict";a.d(t,"b",(function(){return r}));var n=a("ERkP"),i=a.n(n),o=a("wtru");function r(e){const t=Object(o.b)();return[!!t&&!t.flags[e],i.a.useCallback((()=>{null==t||t.addFlag(e)}),[t,e])]}t.a=r},jtO7:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),o=a("ERkP"),r=a.n(o),s=a("t62R"),l=a("I4+6"),c=a("cm6r"),d=a("rHpw"),u=a("MWbm");const h=d.a.create((e=>({container:{backgroundColor:e.colors.cellBackground},root:{justifyContent:"center",minHeight:e.spaces.space48,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16}})));t.a=({align:e="center",color:t,label:a,...n})=>{const o=l.a.generate({backgroundColor:d.a.theme.colors.transparent,color:d.a.theme.colors[t],insetFocusRing:!0});return r.a.createElement(u.a,{style:h.container},r.a.createElement(c.a,i()({},n,{interactiveStyles:o,style:h.root}),r.a.createElement(s.b,{align:e,color:t},a)))}},kG2z:function(e,t){var a=Date.now;e.exports=function(e){var t=0,n=0;return function(){var i=a(),o=16-(i-n);if(n=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},kHoZ:function(e,t){var a=Object.prototype.toString;e.exports=function(e){return a.call(e)}},kIAd:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var n=a("0vv5");const i=500,o={scoper:[{type:"dmUserSearch",regexp:/^[@＠]?(.*)|^$/,srcInputs:["compose_message"],scope:{result_type:"users",count:20}},{type:"username",regexp:/^[@＠](\w{1,20})/,srcInputs:["compose"],scope:{result_type:"users",count:20}},{type:"hashtag",regexp:a.n(n).a,srcInputs:["compose"],scope:{result_type:"topics",count:20}},{type:"topic",regexp:/(.+)/,srcInputs:["search_box"],scope:{result_type:"all"}},{type:"ttt",regexp:/(.+)/,srcInputs:["welcome_flow"],scope:{count:10,result_type:"topics,ttt"}}],WordBoundary:/[!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]|$/,WordEnd:/[^!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]+$/}},krmn:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),o=a("zb92"),r=a("RuTB"),s=a("3XMw"),l=a.n(s);var c=Object(o.a)({loader:()=>l.a.emoji.then((()=>Promise.all([a.e(66),a.e(264)]).then(a.bind(null,"5RdJ")))),renderPlaceholder:(e,t)=>i.a.createElement(r.a,{hasError:e,onRetry:t})}),d=a.p+"twemoji_sprite.6d90d9d7.png",u=a.p+"twemoji_sprite_high_res.0b0faef7.png",h=a("rHpw"),p=a("U+bB"),m=a("kLqS"),g=a("MWbm");const b=h.a.create((e=>({content:{backgroundColor:e.colors.cellBackground},dimensions:{height:"400px",borderRadius:e.borderRadii.xLarge,width:10*e.spacesPx.space32,overflow:"hidden"},hidden:{display:"none"}})));var _=e=>{const{onSelect:t,partialRender:a}=e,n=m.a.get()>1?u:d;return i.a.createElement(i.a.Fragment,null,i.a.createElement(g.a,{style:[b.content,b.dimensions]},i.a.createElement(c,{onSelect:t,partialRender:a,rowSize:9,spriteUrl:n})),i.a.createElement(p.a,{source:n,style:b.hidden}))},f=a("pNJr"),y=a("2ZFc"),w=a("OiMc"),v=a("/yvb");const C=l.a.d4a4842e,E=i.a.createElement(f.a,null),T=l.a.fec16c1c,x={viewType:"emoji_picker"},S=e=>{const{disabled:t,onEmojiSelect:a,onPress:n,size:o,style:r,textInputRef:s}=e,[l,d]=i.a.useState(!0);i.a.useEffect((()=>{const e=setTimeout((()=>{c.preload(),y.a.get("emojiPicker2")}),5e3);return()=>{clearTimeout(e)}}),[]);return i.a.createElement(w.a,{enableEnterKeyToggle:!0,onAnimateComplete:()=>d(!1),onDismiss:()=>d(!0),onHoverCardUnmount:()=>{window.requestAnimationFrame((()=>s&&s.focus()))},renderContent:()=>i.a.createElement(_,{onSelect:a,partialRender:l}),withArrow:!0},i.a.createElement(v.a,{accessibilityHasPopup:"menu",accessibilityLabel:C,behavioralEventContext:x,disabled:t,hoverLabel:{label:T},icon:E,onPress:e=>n&&n(e),size:o,style:r,type:"brandText"}))};S.defaultProps={disabled:!1,size:"xSmall"};t.a=S},kwr2:function(e,t,a){var n=a("6QIk"),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,a=n(t,e);return!(a<0)&&(a==t.length-1?t.pop():i.call(t,a,1),--this.size,!0)}},lsKC:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return h})),a.d(t,"d",(function(){return p})),a.d(t,"a",(function(){return m}));var n=a("H7Rt"),i=a("3XMw"),o=a.n(i);const r=o.a.g34f2c63,s=o.a.f70a36d0,l=o.a.d17df548,c=o.a.h735a98e,d=o.a.h3701ffe,u=e=>{const t=e.inReplyToStatus&&!e.isSelfThreadReply;return e.isScheduled?c:e.isEdit?d:t?l:e.isThread?s:r({verb:""})},h=(e,t,a)=>()=>{if(a){var n,i;(null==(n=t.state)||null==(i=n.previousPath)?void 0:i.includes(a))&&"/compose/tweet"===t.pathname?window.scrollTo(0,0):e.push(`/i/communities/${a}`,{lockScroll:!0})}else{var o,r;const a=(null==(o=t.state)||null==(r=o.previousPath)?void 0:r.includes("/home"))&&"/compose/tweet"===t.pathname;t.pathname.includes("/home")||a?window.scrollTo(0,0):e.push("/home",{lockScroll:!0})}},p=({isInline:e,isSelfThreadReply:t,parentTweetId:a})=>e?{pathname:"/compose/tweet",state:{inReplyToStatusId:a,isSelfThreadReply:t}}:void 0,m=(e,t)=>{var a;return null!=e&&e.exclusivity_info?{_type:"super_followers_exclusive",conversationControlsValue:n.a.super_followers_exclusive,exclusivityControlValue:{}}:null!=e&&e.community_id_str?{_type:"community_members",communityIdValue:e.community_id_str,conversationControlsValue:n.a.community_members}:null!=e&&e.trusted_friends_info&&null!=t&&t.length?{_type:"trusted_friends_tweet",conversationControlsValue:n.a.trusted_friends_tweet,trustedFriendsValue:{trusted_friends_list_id:t[0].rest_id}}:{_type:"conversation_controls",conversationControlsValue:(null==(a=e.conversation_control)?void 0:a.policy)||n.a.all}}},m5o6:function(e,t,a){var n=a("Tv3l"),i=a("+ooz"),o=a("qeCs");e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(o||i),string:new n}}},mUsV:function(e,t,a){var n=a("5pfJ");e.exports=function(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},n1QJ:function(e,t){e.exports=function(e,t,a){for(var n=a-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}},o52z:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("VPAj");const i=Object(n.a)([]);Object(n.a)({})},oEoC:function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return l})),a.d(t,"g",(function(){return c})),a.d(t,"a",(function(){return d})),a.d(t,"d",(function(){return u})),a.d(t,"f",(function(){return p}));a("kYxP");var n=a("zTrU"),i=a("kIAd"),o=a("rHpw");function r(e,t){let a;const n=i.b.scoper.find((n=>{if(-1!==n.srcInputs.indexOf(t))return a=e.match(n.regexp),a}));let o="";return a&&(o=a&&(1===a.length?a[0]:a[1])),n?{...n.scope,src:t,q:o}:null}function s(e,t){const a=t.slice(0,e),n=t.slice(e,t.length),o=a.search(i.b.WordEnd),r=o>=0?a.slice(o):"",s=n.search(i.b.WordBoundary),l=r+n.slice(0,s);return l.trim()?{start:o,end:e+s,word:l}:{start:-1,end:-1,word:""}}function l(){return`typeaheadFocus-${Math.random()}`}function c(e){const{altKey:t,ctrlKey:a,metaKey:n}=e;return!(t||a||n)}function d(e,t){const a=[];e.forEach((e=>{const n=t.find((t=>t.id===e.id));n&&n.data&&n.data.result_context?a.push(n):a.push(e)}));const n=a.map((e=>e.id)),i=t.filter((e=>n.indexOf(e.id)<0));return[...a,...i]}const u=Object(n.a)((e=>({bottom:0,paddingBottom:`calc(2.5 * ${o.a.theme.spaces.space64})`,position:"fixed",top:`calc(${e}px + ${o.a.theme.spaces.space1})`,transform:[{translate3d:"0,0,0"}]})));let h=0;const p=()=>(h+=1,`typeaheadDropdown-${h}`)},"p+r5":function(e,t,a){"use strict";a.d(t,"a",(function(){return k}));var n=a("97Jx"),i=a.n(n),o=a("ERkP"),r=a.n(o),s=a("38/B"),l=a("t62R"),c=a("/yvb"),d=a("piX5"),u=a("3XMw"),h=a.n(u),p=a("tI3i"),m=a.n(p),g=a("zTrU"),b=a("rHpw"),_=a("aITJ"),f=a("MWbm"),y=a("n5fo"),w=a("5emT"),v=a("Oib4"),C=a("WtWS"),E=a("ioan");const T=e=>e.length,x=(e,t=T)=>t(e),S=h.a.de540c32,I=h.a.b4abfdb4;class k extends r.a.Component{constructor(e){super(e),this._blurOnBackspaceKeyUpForKaiOS=!1,this._isLabelLarge=()=>{const{actualCount:e,isFocused:t}=this.state;return!e&&!t},this._getTextInputStyle=Object(g.a)((e=>[R.root,!e&&R.disabled])),this._getTextInputType=()=>{const{showPasswordVisibilityIcon:e,type:t}=this.props,{isPasswordRevealed:a}=this.state;return"password"===t&&e?a?"text":"password":t},this._calculateLength=e=>x(e,this.props.calculateLength),this._shouldRenderDisplayCount=()=>{const{isFocused:e}=this.state,t=this._isFormInvalid();return Boolean((e||t)&&this._getMaxDisplayCount())},this._isInvalidNumber=()=>{var e,t,a,n,i;const{type:o}=this.props,r=null==(e=this._textInput)||null==(t=e.textInputNode)?void 0:t.value,s=null==(a=this._textInput)||null==(n=a.textInputNode)||null==(i=n.validity)?void 0:i.badInput;return"number"===o&&""===r&&!0===s},this._getActualCount=e=>{let t=e.length;return this._isInvalidNumber()&&(t=1),t},this._handleBlur=()=>{var e;const{onBlur:t}=this.props,a=(null==(e=this._textInput)?void 0:e.getValue())||"",n=this._calculateLength(a),i=this._getActualCount(a);this.setState({isFocused:!1,displayCount:n,actualCount:i}),t&&t()},this._handleChange=e=>{const{onChange:t}=this.props,{previousValue:a}=this.state,{value:n}=e.currentTarget,i=this._calculateLength(n),o=this._getActualCount(n),r=this._getAdjustedMaxLength();void 0!==r&&n.length>r&&a.length<n.length?e.currentTarget.value=a:(this.setState({isFocused:!0,displayCount:i,actualCount:o,previousValue:e.currentTarget.value}),t&&t(e))},this._handleFocus=()=>{const{onFocus:e}=this.props;this.setState({isFocused:!0}),e&&e()},this._handleKeyPress=e=>{const{multiline:t,onKeyPress:a,onSubmitEditing:n}=this.props;a&&a(e),e.isDefaultPrevented()||"Enter"!==e.key||e.shiftKey||t||!n||(e.preventDefault(),n(e))},this._handleKeyDown=e=>{const{onKeyDown:t}=this.props,{displayCount:a}=this.state,n=0===a;_.b.isKaiOS()&&"Backspace"===e.key&&n?this._blurOnBackspaceKeyUpForKaiOS=n:t&&t(e)},this._handleKeyUp=e=>{const{onKeyUp:t}=this.props;_.b.isKaiOS()&&"Backspace"===e.key&&this._blurOnBackspaceKeyUpForKaiOS&&(e.preventDefault(),this.blur()),t&&t(e)},this._handlePasswordVisibilityClick=e=>{this.setState((e=>({isPasswordRevealed:!e.isPasswordRevealed})))},this._setTextInputRef=e=>{this._textInput=e},this._checkComponentPropsUsageCorrectness=e=>{const{defaultValue:t,maxLength:a,onChange:n,validLength:i,value:o}=e,r=!!n,s="string"==typeof o,l="string"==typeof t;m()(!(!l&&s&&!r),"A controlled component, a component with a value prop, must have an onChange handler. The value prop cannot be undefined."),m()(!(a&&i&&i>a),"Max length should be equal or greater than valid length."),m()(!(void 0!==a&&a<=0||void 0!==i&&i<=0),"Set editable to false instead of limiting the valid character count to 0.")},this._exceedsValidLength=e=>{const t=this._getMaxDisplayCount();return!!t&&e>t},this._getMaxDisplayCount=()=>this.props.validLength||this.props.maxLength,this._getAdjustedMaxLength=()=>{const{maxLength:e}=this.props,t=this.getValue(),a=this._calculateLength(t);return e?e+t.length-a:void 0},this._checkComponentPropsUsageCorrectness(e);const{defaultValue:t,value:a}=e,n=a||t||"";this.state={displayCount:this._calculateLength(n),actualCount:T(n),isFocused:!1,isPasswordRevealed:!1,previousValue:n}}componentDidUpdate(e){const{maxLength:t,onChange:a,validLength:n,value:i}=this.props,{maxLength:o,onChange:r,validLength:s,value:l}=e;s===n&&t===o&&!!a===!!r&&"string"==typeof i===("string"==typeof l)||this._checkComponentPropsUsageCorrectness(this.props)}static getDerivedStateFromProps(e,t){const{calculateLength:a,value:n}=e,i="string"==typeof n?x(n,a):0;return"string"==typeof n&&i!==t.displayCount?{displayCount:i,actualCount:n.length}:null}render(){const{accessibilityLabel:e,editable:t,errorText:a,helperText:n,style:i}=this.props,{isFocused:o}=this.state,s=this._isFormInvalid();return r.a.createElement(f.a,{style:[P.root,i]},r.a.createElement(f.a,{accessibilityLabel:e,accessibilityRole:"label",style:[d.a.border,P.textInputFormStyle,s&&d.a.invalidBorderColor,o&&s&&d.a.focusedBorderInvalid,o&&!s&&d.a.focusedBorderValid,!t&&d.a.disabled]},r.a.createElement(f.a,{style:P.textInputFormWrapper},r.a.createElement(f.a,{style:P.textInputHeader},this._renderLabel(),this._shouldRenderDisplayCount()?this._renderDisplayCount():null),this._renderTextInput())),r.a.createElement(f.a,{style:[P.sidePadding,P.underTextInputForm]},r.a.createElement(f.a,{style:P.subtextWrapper},n?this._renderHelperText():null,s&&a?this._renderErrorText():null)))}_renderLabel(){const{label:e}=this.props,{isFocused:t}=this.state,a=t?"primary":"gray700",n=this._isFormInvalid()?"red500":a,i=this._isLabelLarge();return r.a.createElement(l.b,{color:i?"gray700":n,numberOfLines:1,size:i?"headline1":"subtext2",style:[P.textInputHeaderItem,i&&P.placeholderText,!s.a.reducedMotionEnabled&&P.transition]},e)}_renderTextInput(){const{Icon:e,accessibilityLabel:t,calculateLength:a,editable:n,errorText:o,helperText:s,invalid:c,label:d,maxLength:u,onBlur:h,onChange:p,onFocus:m,onKeyDown:g,onKeyPress:b,onKeyUp:_,onSubmitEditing:y,showPasswordVisibilityIcon:w,showValidationIcon:v,style:C,type:T,validLength:x,...S}=this.props;return r.a.createElement(f.a,{style:R.container},e&&!this._isLabelLarge()?this._renderIcon():null,r.a.createElement(l.b,{size:"headline1",style:R.wrapper},r.a.createElement(E.a,i()({},S,{editable:n,maxLength:this._getAdjustedMaxLength(),onBlur:this._handleBlur,onChange:this._handleChange,onFocus:this._handleFocus,onKeyDown:this._handleKeyDown,onKeyPress:this._handleKeyPress,onKeyUp:this._handleKeyUp,ref:this._setTextInputRef,style:this._getTextInputStyle(n),type:this._getTextInputType()}))),v&&!this._isLabelLarge()?this._renderValidationIcon():null,this._renderPasswordVisibilityIcon())}_renderPasswordVisibilityIcon(){const{showPasswordVisibilityIcon:e,type:t}=this.props,{isPasswordRevealed:a}=this.state;return"password"===t&&e?r.a.createElement(f.a,{style:P.passwordVisibilityIconContainer},r.a.createElement(c.a,{accessibilityLabel:a?I:S,focusable:!0,hoverLabel:{label:a?I:S},icon:a?r.a.createElement(y.a,null):r.a.createElement(w.a,null),onPress:this._handlePasswordVisibilityClick,size:"smallCompact",type:"primaryText"})):null}_renderHelperText(){return r.a.createElement(f.a,{accessibilityLiveRegion:"polite"},r.a.createElement(l.b,{color:"gray700",size:"subtext2",style:P.subtext},this.props.helperText))}_renderErrorText(){return r.a.createElement(f.a,{accessibilityLiveRegion:"assertive"},r.a.createElement(l.b,{color:"red500",size:"subtext2",style:P.subtext},this.props.errorText))}_renderDisplayCount(){const{displayCount:e}=this.state,t=this._getMaxDisplayCount(),a=this._exceedsValidLength(e),n=t&&h.a.ia24dc8d(t),i=h.a.ia24dc8d(e);return r.a.createElement(f.a,{accessibilityLiveRegion:"polite",style:[P.textInputHeaderItem,P.displayCount]},r.a.createElement(l.b,{color:a?"red500":"gray700",size:"subtext2"},n?`${i} / ${n}`:""))}_renderIcon(){const{Icon:e}=this.props,{isFocused:t}=this.state,a=[P.icon,t&&P.focusedIcon];return e&&r.a.createElement(e,{style:a})}_renderValidationIcon(){return this._isFormInvalid()?r.a.createElement(v.a,{style:[P.validationIcon,d.a.invalidColor]}):r.a.createElement(C.a,{style:[P.validationIcon,d.a.validColor]})}_isFormInvalid(){const{displayCount:e}=this.state;return!!this.props.invalid||this._exceedsValidLength(e)||this._isInvalidNumber()}blur(){this._textInput&&this._textInput.blur()}getValue(){return this._textInput&&this._textInput.getValue()||""}focus(){this._textInput&&this._textInput.focus()}isValidLength(){const e=this.getValue(),t=this._calculateLength(e);return!this._exceedsValidLength(t)}}k.defaultProps={autoComplete:"on",autoCorrect:!0,autoFocus:!1,editable:!0,invalid:!1},k.propTypes={};const R=b.a.create((e=>({container:{flexDirection:"row",flexGrow:1,flexShrink:1,overflow:"hidden",paddingBottom:e.spaces.space8,paddingHorizontal:e.spaces.space8,paddingTop:e.spaces.space12,marginTop:e.spaces.space16},root:{backgroundColor:"transparent",borderRadius:e.borderRadii.none,borderWidth:e.borderWidths.none,boxSizing:"border-box",color:"inherit",fontFamily:"inherit",fontSize:"inherit",textAlign:"inherit",outlineStyle:"none",padding:0},wrapper:{alignItems:"center",display:"flex",fontSize:e.fontSizes.headline2,width:"100%"},disabled:{color:e.colors.gray700}}))),P=b.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},textInputFormStyle:{flexDirection:"row"},textInputFormWrapper:{flexGrow:1,flexShrink:1},textInputHeader:{flexDirection:"row",justifyContent:"space-between",position:"absolute",height:"100%",width:"100%"},textInputHeaderItem:{paddingTop:e.spaces.space8,paddingHorizontal:e.spaces.space8,fontSize:"small"},placeholderText:{paddingTop:e.spaces.space16,fontSize:e.fontSizes.headline2,userSelect:"none"},displayCount:{flexGrow:1,alignItems:"flex-end"},sidePadding:{paddingHorizontal:e.spaces.space8},underTextInputForm:{flexDirection:"row"},subtextWrapper:{flexDirection:"column",flex:1,paddingRight:e.spaces.space20,paddingTop:e.spaces.space2},subtext:{alignSelf:"flex-start"},focusedIcon:{color:e.colors.primary},icon:{alignSelf:"center",color:e.colors.gray700,paddingRight:e.spaces.space4},validationIcon:{alignSelf:"center",paddingLeft:e.spaces.space4},transition:{transition:"transform 150ms cubic-bezier(0.4, 0, 0.2, 1), color 150ms cubic-bezier(0.4, 0, 0.2, 1), font-size 150ms cubic-bezier(0.4, 0, 0.2, 1), padding-top 150ms cubic-bezier(0.4, 0, 0.2, 1)"},passwordVisibilityIconContainer:{alignSelf:"center",paddingLeft:e.spaces.space4},passwordVisibilityIcon:{color:e.colors.gray700}})))},pKoL:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),o=a("HPNB"),r=a("9HgX"),s=a("3XMw"),l=a.n(s),c=a("LCtV"),d=a("eyty"),u=a("zb92"),h=a("RuTB"),p=Object(u.a)({loader:()=>Promise.all([a.e(0),a.e(3),a.e(233)]).then(a.bind(null,"EOJ2")).then((e=>({default:e.__DANGEROUS_IMPORT_VIDEOPLAYER__}))),renderPlaceholder:(e,t)=>i.a.createElement(h.a,{hasError:e,onRetry:t})}),m=a("k/Ka"),g=a("eXeu"),b=a("iOGT");class _ extends i.a.Component{constructor(...e){super(...e),this._setVideoRef=e=>{const{getVideoRef:t}=this.props;t&&t(e)}}render(){const{children:e,dataSaverMode:t,getVideoRef:a,style:n,variants:o,...r}=this.props,s=Object(b.b)(o,t?b.a.MEDIUM:void 0)||[],l=Object(g.f)(s.map((e=>({src:e.url,type:e.content_type}))));return Object(m.a)("video",{...r,children:[l.map((e=>i.a.createElement("source",{key:e.src,src:e.src,type:e.type}))),e],ref:this._setVideoRef,style:n})}}_.defaultProps={dataSaverMode:!1,variants:[]};var f=a("62wY"),y=a("sjK1"),w=a("v6aA"),v=a("cHvH"),C=a("mXq/"),E=a("/yvb"),T=a("a6qo"),x=a("rHpw"),S=a("hOZg"),I=a("GCOQ"),k=a("tuke"),R=a("U+bB"),P=a("MWbm"),L=a("+/sI");const M=l.a.gd80afba,D=l.a.j322caee,A=l.a.abd845fe,O=l.a.df1b0708,F=l.a.cd959e5c,B=l.a.e68b09b4,N=l.a.add55c98;class U extends i.a.Component{constructor(...e){super(...e),this.state={isVideoPaused:!0,playGif:!1},this._handleGifClick=()=>{this.setState({playGif:!this.state.playGif})},this._handleMediaPreviewLayout=e=>{const{mediaItem:t,resizeIfNeeded:a}=this.props,n=t.mediaFile||t.externalMediaDetails;if(!n)return;const{nativeEvent:{layout:{height:i,width:o}}}=e,{height:r,width:s}=n,l=s/r;Math.abs(l-o/i)>.05&&this._mediaContainer&&("width"===a?this._mediaContainer.setNativeProps({style:{width:i*l}}):"height"===a&&this._mediaContainer.setNativeProps({style:{height:o/l}}))},this._handleVideoOnPlay=e=>{this.setState({isVideoPaused:!1})},this._handleVideoOnPause=e=>{this.setState({isVideoPaused:!0})},this._setMediaContainerRef=e=>{this._mediaContainer=e},this._setVideoRef=e=>{this._video=e},this.playVideo=()=>{if(this._video){const e=this._video.play();void 0!==e&&e.then((e=>{this._handleVideoOnPlay()})).catch()}},this.pauseVideo=()=>{this._video&&(this._video.pause(),this._handleVideoOnPause())}}render(){var e;const{accessibilityLabel:t,accessibilityRole:a,enableGif:n,mediaItem:s,onEdit:l,onEditSensitiveWarning:c,onRemove:d,style:u,withAltTextLabel:h,withCloseButton:p,withEditButton:m,withEditIcon:g,withEditSensitiveWarningButton:b}=this.props,{playGif:_}=this.state,f=s.externalMediaDetails&&s.externalMediaDetails.mediaType===r.a,y=f||n&&s.mediaFile&&s.mediaFile.isGif,w=!(null==(e=s.mediaFile)||!e.isVideo);return i.a.createElement(v.a,null,(({windowWidth:e})=>{const n=void 0!==g?g:!o.a.isTwoColumnLayout(e);return i.a.createElement(P.a,{accessibilityLabel:t||N,accessibilityRole:a,onLayout:this._handleMediaPreviewLayout,ref:this._setMediaContainerRef,style:[u,j.cursor,f&&j.gifPlayButton]},this._renderPreview(),f&&!_&&i.a.createElement(C.a,{accessibilityLabel:O,onPress:this._handleGifClick,size:"small"}),p?i.a.createElement(E.a,{accessibilityLabel:F,hoverLabel:{label:B},icon:i.a.createElement(S.a,null),onPress:d,size:"small",style:j.close,type:"onMediaDominantColorFilled"}):null,y?i.a.createElement(L.c,{type:L.a}):null,h&&!w?i.a.createElement(T.a,{align:"left",altLabel:t}):null,m?i.a.createElement(P.a,{style:[j.editMedia,w?j.editVideo:j.editImage]},b?i.a.createElement(E.a,{accessibilityLabel:D,icon:i.a.createElement(I.a,{style:j.editSensitiveWarningIcon}),onPress:c,size:"small",style:j.editSensitiveWarningButton,type:"onMediaDominantColorFilled"}):null,i.a.createElement(E.a,{accessibilityLabel:M,icon:n?i.a.createElement(k.a,null):void 0,onPress:l,size:n?"xSmall":"small",type:"onMediaDominantColorFilled"},n?void 0:A)):null)}))}_renderPreview(){var e;const{mediaItem:t}=this.props;if(t.externalMediaDetails){const e=t.externalMediaDetails.previewUrl,a=t.externalMediaDetails.stillMediaUrl;return this._renderGifPreview(e,a)}return null!=(e=t.mediaFile)&&e.isVideo?this._renderVideoPreview(t.mediaFile.type,t.mediaFile.url,t.id,t.mediaFile):i.a.createElement(P.a,{style:x.a.absoluteFill},this._renderImagePreview())}_renderGifPreview(e,t){const{playGif:a}=this.state,n={uri:a?e:t};return i.a.createElement(P.a,{onClick:this._handleGifClick,style:x.a.absoluteFill},i.a.createElement(R.a,{resizeMode:"cover",source:n,style:j.video}))}_renderImagePreview(){const{borderRadius:e,enableGif:t,imageResizeMode:a,mediaItem:n,onClick:o}=this.props;return i.a.createElement(c.b,{borderRadius:e,enableGif:t,mediaItem:n,onClick:o,resizeMode:a})}_renderVideoPreview(e,t,a,n){var o;this._configurableVideoPlayerEnabled=this.context.featureSwitches.isTrue("responsive_web_composer_configurable_video_player_enabled");const{mediaItem:r}=this.props,s=null==(o=r.mediaMetadata)?void 0:o.subtitles;if(this._configurableVideoPlayerEnabled&&n instanceof y.c){const o=Object(d.h)(n.fileHandle)?[{src:t,type:e}]:[],l=`${a}`;return i.a.createElement(p,{mediaFile:n,mediaId:l,subtitles:s,trimData:null==r?void 0:r.trimData,variants:o})}{var l;const a=Object(d.h)(n.fileHandle)?[{content_type:e,url:t}]:[],o=(null==s||null==(l=s.upload)?void 0:l.mediaFile)instanceof f.b?s.upload.mediaFile.vtt:void 0;return i.a.createElement(_,{autoPlay:!1,controls:!0,getVideoRef:this._setVideoRef,loop:!0,muted:!0,onPause:this._handleVideoOnPause,onPlay:this._handleVideoOnPlay,playsInline:!0,poster:n instanceof y.c?n.thumbnail:"",style:j.video,variants:a},s&&o?i.a.createElement("track",{default:!0,kind:"subtitles",label:s.displayName,src:o,srcLang:s.lang}):null)}}}U.contextType=w.a,U.defaultProps={enableGif:!0,withCloseButton:!0,withAltTextLabel:!1,withEditButton:!1,withEditSensitiveWarningButton:!1};const j=x.a.create((e=>({close:{position:"absolute",left:e.spaces.space4,top:e.spaces.space4},cursor:{cursor:"pointer"},editSensitiveWarningIcon:{color:e.colors.primary},editMedia:{display:"flex",flexDirection:"row",position:"absolute",right:e.spaces.space4},editImage:{bottom:e.spaces.space4},editVideo:{top:e.spaces.space4},editSensitiveWarningButton:{marginRight:e.spaces.space8},gifPlayButton:{alignItems:"center",justifyContent:"center"},video:{height:"100%",width:"100%"}})));t.a=U},pPzx:function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},pcjM:function(e,t,a){"use strict";a.r(t),a.d(t,"Compose",(function(){return De}));a("kYxP"),a("MvUL");var n=a("ERkP"),i=a.n(n),o=a("HPNB"),r=a("h5NW"),s=a("xVN5"),l=a("pidX"),c=a("AspN"),d=a("XOJV"),u=a("G6rE"),h=a("xZGM"),p=a("0KEI"),m=a("hqKg"),g=a("oEGd"),b=a("rU/Q"),_=a("XpKj");const f=e=>(t,a)=>{const n=((e,t)=>t.location.state)(0,a);return n?e(n):void 0},y=Object(m.createSelector)(((e,t)=>t.activeUser),u.e.selectLoggedInUser,((e,t)=>e||t)),w=(e,t)=>{const{location:{query:a}}=t;return a&&"string"==typeof a.in_reply_to?a.in_reply_to:void 0},v=f((e=>e.inReplyToStatusId)),C=(e,t)=>t.location.pathname.indexOf("/intent/")>-1,E=f((e=>e.defaultText)),T=f((e=>e.quotedStatus)),x=({cardUrl:e,mediaIds:t,...a})=>a,S=f((e=>e.isSelfThreadReply)),I=f((e=>e.hideUnsentTweetsButton)),k=f((e=>e.headingSubtitle)),R=f((e=>e.headingTitle)),P=f((e=>!!e.previousTweetId)),L=f((e=>e.editableUntil)),M=f((e=>e.selectedCommunityId)),D=Object(m.createSelector)((e=>s.k(e,"")),((e,t)=>{const a=E(e,t);return Object(l.a)(t.location)||a}),((e,t)=>t.quotedStatus?t.quotedStatus:T(e,t)),c.j,C,((e,t,a,n,i)=>e.map(((e,o)=>({...x(e),media:n.filter((t=>e.mediaIds.some((e=>e===t.id)))),quotedStatus:0===o?a:void 0,text:0===o&&t&&!i?t:e.text}))))),A=Object(m.createStructuredSelector)({activeUser:y,composerData:D,draftTweets:b.e,inReplyToStatus:(e,t)=>{const a=w(0,t)||v(e,t);return a?d.a.selectHydrated(e,a):void 0},inReplyToStatusId:w,isEdit:P,editableUntil:L,isIntentRoute:C,isSelfThreadReply:S,isSending:e=>s.m(e,""),scheduledTweets:_.f,sendingProgress:s.o,composeSemanticCoreId:f((e=>e.composeSemanticCoreId)),hideUnsentTweetsButton:I,subtitle:k,title:R,selectedCommunityIdFromLocationState:M,shouldShowCommunityAudienceEducation:(e,t)=>Object(h.E)(e,h.e)}),O={createDraftTweetApiErrorHandler:Object(p.createLocalApiErrorHandlerWithContextFactory)(b.d),createScheduledTweetApiErrorHandler:Object(p.createLocalApiErrorHandlerWithContextFactory)(_.d),fetchScheduledTweets:_.c,fetchDraftTweets:b.c,addCommunityAudienceEducationFlag:()=>Object(h.A)(h.e),updateAudienceControlsValue:s.t};var F=Object(g.f)(A,O),B=a("MWbm"),N=a("t62R"),U=a("rHpw");const j=e=>{const{editableUntil:t,timeElapsedCallback:a}=e,n=i.a.useRef(t.getTime()),o=i.a.useRef(null);null==o.current&&(o.current=()=>{const e=n.current-(new Date).getTime();return new Date(e<0?0:e).toLocaleString("default",{minute:"numeric",second:"numeric"})});const[r,s]=i.a.useState(o.current);return i.a.useEffect((()=>{const e=setInterval((()=>{if(!o.current)return null;const t=o.current();"00:00"===t&&(clearInterval(e),a()),s(t)}),1e3);return()=>clearInterval(e)}),[a]),i.a.createElement(B.a,{style:H.root},i.a.createElement(N.b,{color:"red500",testID:"displayedCountdown",weight:"medium"},r))},H=U.a.create((e=>({root:{paddingLeft:4,paddingRight:4,paddingTop:6,paddingBottom:6,backgroundColor:e.colors.red0,borderRadius:6}})));var z=a("RgK2"),V=a.n(z),W=a("jHSc"),G=a("lsKC"),q=a("3XMw"),$=a.n(q),K=a("iFPY"),X=a("QbaN"),Q=a("v6aA"),Y=a("rxPX");const J=e=>Object(h.E)(e,h.r);var Z=Object(Y.a)().propsFromState((()=>({shouldShowNewsletterCallout:J}))).propsFromActions((()=>({addFlag:h.A}))),ee=a("Lsrn"),te=a("k/Ka");const ae=(e={})=>Object(te.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[ee.a.root,e.style],viewBox:"0 0 32 32"},i.a.createElement("g",null,i.a.createElement("path",{d:"M18.672 15.25H8.078c-.414 0-.75.336-.75.75s.336.75.75.75h10.594c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm0-5.297H8.078c-.414 0-.75.336-.75.75s.336.75.75.75h10.594c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-4.304 10.594h-6.29c-.414 0-.75.336-.75.75s.336.75.75.75h6.29c.414 0 .75-.336.75-.75s-.336-.75-.75-.75z"}),i.a.createElement("path",{d:"M29.284 15.25h-4.548V5.736C24.736 4.228 23.51 3 22 3H4.75C3.24 3 2.014 4.228 2.014 5.736v20.527C2.014 27.773 3.24 29 4.75 29h21.885c1.874 0 3.4-1.524 3.4-3.398V16c0-.414-.337-.75-.75-.75zM3.514 26.264V5.736c0-.68.554-1.236 1.236-1.236H22c.682 0 1.236.555 1.236 1.236V25.6c0 .704.214 1.357.58 1.9H4.75c-.682 0-1.236-.555-1.236-1.236zm23.12 1.236c-1.046 0-1.897-.852-1.897-1.898V16.75h3.798v8.852c0 1.046-.853 1.898-1.9 1.898z"})));ae.metadata={width:32,height:32};var ne=ae,ie=a("4zmP");const oe=$.a.ed33a3b6,re=$.a.d5bda8b4,se=$.a.i859a9d4,le=U.a.create((e=>({revueCallout:{marginBottom:e.spaces.space4,marginTop:e.spaces.space20}})));var ce=Z((({addFlag:e,shouldShowNewsletterCallout:t})=>{const{featureSwitches:a}=i.a.useContext(Q.a),n=a.isTrue("responsive_web_newsletters_callout_enabled");return t&&n?i.a.createElement(B.a,{style:le.revueCallout},i.a.createElement(ie.a,{Icon:ne,action:{label:se,link:"https://www.getrevue.co?utm_source=twitter-threads&utm_campaign=announcement-callout&utm_content=learn-more"},headline:oe,onClose:()=>{e(h.r)},text:re,withCloseButton:!0})):null})),de=a("7nmT"),ue=a.n(de),he=a("Dtul"),pe=a("zh9S"),me=a("7JQg"),ge="tweetButton",be=a("/yvb"),_e=a("JYMr"),fe=a("cHvH"),ye=a("feu+"),we=a("7N4s"),ve=a("zTrU"),Ce=a("3A2y");const Ee=$.a.b8f0483e,Te=$.a.a133d13e,xe=$.a.a1183238,Se=$.a.da2663f6,Ie=$.a.j24c37b2,ke="compose",Re={page:ke},Pe={page:ke,section:"reply"},Le={context:"compose_intent_logged_in"},Me={viewType:"send_tweet"};class De extends i.a.Component{constructor(...e){super(...e),this.state={isValid:!1,showEditTimer:!1},this._handleDismissCommunityAudienceEducation=()=>{this.props.addCommunityAudienceEducationFlag()},this._handleAppBarHeight=Object(ve.a)((()=>{const e=ue.a.findDOMNode(this._appBarRef);return e&&e instanceof window.Element&&e.getBoundingClientRect().height||50})),this._handleBackClick=()=>{this._composeContainerRef&&this._composeContainerRef.handleDismissComposer()},this._handleCloseComposer=()=>{this._appBarRef&&this._appBarRef.goBack()},this._handleSendTweet=()=>{this._composeContainerRef&&this._composeContainerRef.handleTweetOrRetweet()},this._setValidity=e=>{e!==this.state.isValid&&this.setState({isValid:e})},this._getScribeNamespace=()=>this.props.inReplyToStatus||this.props.inReplyToStatusId?Pe:Re,this._getScribeData=()=>{const{activeUser:e,isIntentRoute:t}=this.props;return t&&e?Le:V.a},this._renderAppBarRightControl=()=>{const{isValid:e}=this.state,{isModal:t}=this.context,{activeUser:a,inReplyToStatus:n,isEdit:o,isSelfThreadReply:r,isSending:s}=this.props,l=!e||s||!a;return t?void 0:i.a.createElement(be.a,{behavioralEventContext:Me,disabled:l,onPress:this._handleSendTweet,size:"small",testID:ge,type:"brandFilled"},Object(G.c)({inReplyToStatus:!!n,isSelfThreadReply:!!r,isQuoteTweet:!!this.isQuoteTweet,isRetweet:!!this.isRetweet,isScheduled:!!this.isScheduled,isThread:this.isThread,isEdit:!!o}))},this._renderHeaderWithProgressBar=e=>{const{isModal:t}=this.context,{isSending:a,sendingProgress:n}=this.props;return i.a.createElement(i.a.Fragment,null,i.a.createElement(_e.a,{progress:a?Math.max(n,.02):0,style:[Ae.progressBar,t&&Ae.progressBarModal]}),e)},this._renderUnsentHeading=()=>{const{draftTweets:e,hideUnsentTweetsButton:t,scheduledTweets:a}=this.props;if(!t&&(a.length>0||e.length>0))return i.a.createElement(B.a,{style:Ae.unsentHeadingContainer},i.a.createElement(be.a,{onPress:this._handleOpenUnsent,size:"small",type:"brandText"},Te))},this._renderCountdownTimer=()=>{const{editableUntil:e}=this.props,t=new Date(parseInt(e,10));return this.state.showEditTimer?i.a.createElement(B.a,{style:Ae.unsentHeadingContainer},i.a.createElement(j,{editableUntil:t,timeElapsedCallback:()=>{this._composeContainerRef&&this._composeContainerRef.handleEditTimeLimitExceeded()}})):null},this._handleOpenUnsent=()=>{const{history:e}=this.props;Object(pe.c)({...this._getScribeNamespace(),element:"unsent_tweets",action:"click"}),e.push("/compose/tweet/unsent/drafts")},this._setAppBarRef=e=>{this._appBarRef=e},this._handleComposeContainerRef=e=>{this._composeContainerRef=e}}componentDidMount(){const{activeUser:e,createDraftTweetApiErrorHandler:t,createScheduledTweetApiErrorHandler:a,editableUntil:n,fetchDraftTweets:i,fetchScheduledTweets:o,history:r,inReplyToStatus:s,isEdit:l,location:c,selectedCommunityIdFromLocationState:d,updateAudienceControlsValue:u}=this.props;if(this._unlockReload=he.a.acquire(),r.setModalRouteBreakpoint(r.location),e&&(o().catch(a()),i().catch(t())),d&&(u({_type:"community_members",communityIdValue:d,conversationControlsValue:"community_members"}),r.replace({pathname:c.pathname,state:Object(Ce.a)(c.state||{},"selectedCommunityId")})),null!=s&&s.exclusivity_info?u({_type:"super_followers_exclusive",conversationControlsValue:"super_followers_exclusive",exclusivityControlValue:{}}):null!=s&&s.community_id_str?u({_type:"community_members",communityIdValue:s.community_id_str,conversationControlsValue:"community_members"}):null!=s&&s.trusted_friends_info&&u({_type:"trusted_friends_tweet",conversationControlsValue:"trusted_friends_tweet",trustedFriendsValue:{trusted_friends_list_id:"1482057446797373440"}}),!this._countdownRef&&l&&n&&!this.state.showEditTimer){const e=new Date(parseInt(n,10)),t=()=>e-new Date<=3e5&&(this.setState({showEditTimer:!0}),this._countdownRef&&clearInterval(this._countdownRef),!0);t()||(this._countdownRef=setInterval((()=>t()),1e3))}}componentWillUnmount(){this._unlockReload(),this._countdownRef&&clearInterval(this._countdownRef)}render(){const{activeUser:e,composeHeader:t,composeSemanticCoreId:a,composerData:n,customizePropsForSingleComposerItem:s,history:l,isEdit:c,isIntentRoute:d,location:u,quotedStatus:h,richTextInputContext:p,subtitle:m,title:g,typeaheadWrapper:b}=this.props,_=d&&!e,{isModal:f}=this.context;return i.a.createElement(me.c,{data:this._getScribeData(),namespace:this._getScribeNamespace()},i.a.createElement(fe.a,null,(({windowWidth:d})=>{const y=o.a.shouldRenderAsModal(d),w=(_||this.showCommunityAudienceEducation)&&y,v=(null==n?void 0:n.length)>1;return i.a.createElement(i.a.Fragment,null,this.showCommunityAudienceEducation?i.a.createElement(ye.a,{actionLabel:Ie,graphicDisplayMode:"none",headline:xe,onAction:this._handleDismissCommunityAudienceEducation,onClose:this._handleDismissCommunityAudienceEducation,subtext:Se,withCloseButton:!1}):null,_&&i.a.createElement(K.a,{history:l,location:u}),!w&&i.a.createElement(i.a.Fragment,null,i.a.createElement(W.b,{appBarRef:this._setAppBarRef,behavioralEventViewType:ke,documentTitle:Ee,hideBackButton:!1,history:l,middleControl:c?this._renderCountdownTimer():this._renderUnsentHeading(),onBackClick:this._handleBackClick,renderHeader:this._renderHeaderWithProgressBar,rightControl:this._renderAppBarRightControl(),subtitle:m,title:g},i.a.createElement(r.a,{activeUser:e,composeHeader:t,composeSemanticCoreId:a,customizePropsForSingleComposerItem:s,history:l,isModal:f,location:u,onCloseComposer:this._handleCloseComposer,onHandleAppBarHeight:this._handleAppBarHeight,onRef:this._handleComposeContainerRef,quotedStatus:h,richTextInputContext:p,setValidity:this._setValidity,typeaheadWrapper:b,windowWidth:d})),v?i.a.createElement(ce,null):null))})))}get showCommunityAudienceEducation(){const{inReplyToStatus:e,selectedCommunityIdFromLocationState:t,shouldShowCommunityAudienceEducation:a}=this.props,n=!!(null!=e&&e.community_id_str||t);return a&&n}get isThread(){return this.props.composerData.length>1}get isRetweet(){const{composerData:e}=this.props,t=0===e[0].media.length;return!this.isThread&&e[0].quotedStatus&&""===e[0].text&&t}get isQuoteTweet(){const{composerData:e}=this.props;return!this.isThread&&!!e[0].quotedStatus}get isScheduled(){const{composerData:e}=this.props;return Object(X.h)(e[0].scheduledFor)}}De.contextType=we.b;const Ae=U.a.create((e=>({progressBar:{position:"fixed",borderTopLeftRadius:e.borderRadii.small,borderTopRightRadius:e.borderRadii.small,zIndex:e.componentZIndices.appBarZIndex+1},progressBarModal:{position:"absolute"},unsentHeadingContainer:{marginLeft:"auto"}})));t.default=F(De)},piX5:function(e,t,a){"use strict";const n=a("rHpw").a.create((e=>({border:{borderRadius:e.borderRadii.small,borderWidth:e.borderWidths.small,borderColor:e.colors.gray200},focusedBorderValid:{boxShadow:`0 0 0 ${e.borderWidths.small} ${e.colors.primary}`,borderColor:e.colors.primary},focusedBorderInvalid:{boxShadow:`0 0 0 ${e.borderWidths.small} ${e.colors.red500}`},invalidBorderColor:{borderColor:e.colors.red500},invalidColor:{color:e.colors.red500},validColor:{color:e.colors.primary},disabled:{cursor:"default",opacity:.5,backgroundColor:e.colors.gray50,borderColor:e.colors.gray50}})));t.a=n},pidX:function(e,t,a){"use strict";a.d(t,"b",(function(){return l}));a("kYxP");var n=a("3XMw"),i=a.n(n),o=a("3A2y");const r=i.a.b2e94283,s=["title","screen_name","text","url","hashtags","via"];t.a=e=>{const t=e.state||{},a=e.query||{},[n,i,o,l,c,d]=s.map((e=>t[e]||a[e])),u=[n,i&&`@${i.toString()}`,o,l,c&&c.toString().split(",").map((e=>`#${e}`)).join(" "),d&&r({viaScreenName:d})].filter(Boolean).join(" ");return u?`${u} `:void 0};const l=e=>Object(o.a)(e,s)},qbku:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),o=a("ERkP"),r=a.n(o),s=a("rxPX"),l=Object(s.a)().withAnalytics({element:"social_proof"}),c=a("aTAq"),d=a("Nqmc"),u=a("x5Pi");const h=l((e=>{const t=r.a.useContext(u.b);if(t&&e.contextType===t)return null;const{analytics:a,link:n,...o}=e,s=n&&!Object(c.a)(n)?{...n,state:{...n.state,referringScribeNamespace:{...a.contextualScribeNamespace,action:"click"}}}:n;return r.a.createElement(d.a,i()({},o,{link:s,onClick:function(){const{analytics:t,onClick:a}=e;t.scribeAction("click"),a&&a()}}))}));t.a=h},qeCs:function(e,t,a){var n=a("vxC8")(a("IBsm"),"Map");e.exports=n},qjF7:function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},rFBM:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),o=a("rHpw"),r=a("k/Ka"),s=a("MWbm");const l=e=>Object(r.a)("div",e);class c extends i.a.Component{constructor(...e){super(...e),this._dragEnterCount=0,this.state={active:!1},this._handleDragDrop=e=>{const{onFilesAdded:t}=this.props;e.preventDefault();t(Array.from(e&&e.dataTransfer.files)),this._updateDragCount(0)},this._handleDragEnter=e=>{const{onDragEnter:t}=this.props;e.preventDefault(),t&&t(),this._updateDragCount(this._dragEnterCount+1)},this._handleDragLeave=e=>{e.preventDefault(),this._updateDragCount(this._dragEnterCount-1)},this._handleDragOver=e=>{e.preventDefault()}}render(){const{allowDragDrop:e,children:t,style:a}=this.props,{active:n}=this.state,o=e?d.dragBorderValid:d.dragBorderInvalid;return i.a.createElement(l,{onDragEnter:this._handleDragEnter,onDragLeave:this._handleDragLeave,onDragOver:this._handleDragOver,onDrop:this._handleDragDrop,style:[d.root,a,n&&o]},i.a.createElement(s.a,{style:d.inner},"function"==typeof t?t(n):t))}_updateDragCount(e){this._dragEnterCount=e,0===this._dragEnterCount?this.setState({active:!1}):this._dragEnterCount>0&&this.setState({active:!0})}}c.defaultProps={allowDragDrop:!0};const d=o.a.create((e=>({root:{display:"flex",flexDirection:"column"},dragBorderValid:{borderStyle:"dashed",borderWidth:e.spaces.space2,borderColor:e.colors.primary},dragBorderInvalid:{borderStyle:"dashed",borderWidth:e.spaces.space2,borderColor:e.colors.magenta500},inner:{flexGrow:1}})));t.a=c},rziq:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));const n="send-tweet",i="dismiss-composer"},"sCL+":function(e,t){e.exports=function(e,t,a){for(var n=-1,i=null==e?0:e.length;++n<i;)if(a(t,e[n]))return!0;return!1}},sCk0:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),o=a("zfvc"),r=a("zrc3");const s=Object.freeze({in:"in",out:"out",static:"static"});class l extends i.a.Component{constructor(...e){super(...e),this.state={isAnimating:!1,renderChildren:i.a.Children.toArray(this.props.children).map((e=>({status:s.static,child:e})))},this._handleEachAnimateComplete=()=>{const{isAnimating:e}=this.state,{children:t,onAnimateComplete:a}=this.props;e&&(a&&a(),this.setState({renderChildren:i.a.Children.toArray(t).map((e=>({status:s.static,child:e}))),isAnimating:!1}))}}static getDerivedStateFromProps(e,t){const a=((e,t)=>{let a=0,n=0;const i=[];for(;n<e.length;){if(a>=t.length){i.push(...e.slice(n).map((e=>({child:e,status:s.out}))));break}const o=t[a],l=e[n];if(o.key===l.key)i.push({child:o,status:s.static}),a+=1;else{const e=Object(r.a)(t,(e=>e.key===l.key));e>=0?(i.push(...t.slice(a,e).map((e=>({child:e,status:s.in}))),{child:t[e],status:s.static}),a=e+1):i.push({child:l,status:s.out})}n+=1}return a<t.length&&i.push(...t.slice(a).map((e=>({child:e,status:s.in})))),i})(t.renderChildren.map((e=>e.child)),i.a.Children.toArray(e.children));return{renderChildren:a,isAnimating:!a.every((e=>e.status===s.static))}}render(){const{renderChildren:e}=this.state;return e.map((({child:e,status:t})=>i.a.createElement(o.a,{animateMount:t!==s.static,key:e.key,onAnimateComplete:this._handleEachAnimateComplete,show:t!==s.out},e)))}}t.a=l},sUoZ:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),o=a("Lsrn"),r=a("k/Ka");const s=(e={})=>Object(r.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M22.18 9.565c-.157-.487-.61-.82-1.126-.82h-5.928l-2.007-5.88c-.164-.476-.612-.8-1.12-.8s-.956.322-1.12.8L8.874 8.743H2.945c-.513 0-.97.332-1.126.82-.158.49.02 1.02.44 1.318l4.735 3.357-2.018 5.908c-.164.484 0 1.02.415 1.324.415.304.97.31 1.39.016L12 17.782l5.22 3.703c.206.146.446.218.686.218.25 0 .497-.08.705-.233.41-.305.577-.84.41-1.324l-2.015-5.906 4.735-3.356c.414-.3.595-.83.44-1.32z"})));s.metadata={width:24,height:24},t.a=s},t0L4:function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},tLQN:function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},tQYX:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},tuke:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),o=a("Lsrn"),r=a("k/Ka");const s=(e={})=>Object(r.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M21.592 5.576c.877-.967.882-2.298.006-3.174-.877-.877-2.208-.87-3.174.006 0 0-.003 0-.004.002l-.006.006-.005.004s-.002 0-.002.002L8.398 11.27c-1.716-.214-3.424.31-4.534 1.42-3.872 3.874-1.523 9.616-1.422 9.858.1.24.32.41.577.45.037.007.075.01.113.01.218 0 .428-.095.57-.265 1.83-2.15 3.043-2.023 4.328-1.89 1.164.122 2.477.258 3.834-1.282.975-1.106 1.302-2.585.922-4.03l8.792-9.948h.002l.004-.006.006-.006.002-.004zm-1.055-2.113c.305.305.28.74-.06 1.11-.003.003-.004.007-.006.01 0 0-.003 0-.004.003l-5.662 6.406-1.796-1.796 6.406-5.662c.002 0 .002-.003.004-.005.002-.003.006-.004.008-.006.37-.34.807-.365 1.11-.06zm-8.62 10.797L9.74 12.084l2.142-1.894 1.927 1.927-1.894 2.143zm-1.178 4.32c-.848.96-1.488.895-2.552.78-1.27-.13-2.808-.293-4.722 1.463-.415-1.673-.784-4.83 1.457-7.072.807-.805 2.086-1.168 3.377-.983l2.977 2.976c.333 1.03.15 2.057-.538 2.836z"})));s.metadata={width:24,height:24},t.a=s},ude7:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("A0bJ"),i=a("hJBK"),o=a("1auM");const r=1,s=2,l=3,c=e=>{if(Object(o.b)(e)){if(e.isGif){const{height:t,img:a,orientation:o,width:r}=e;return Object(i.b)(a,r,t,o).then((e=>Object(i.a)(e)),(e=>{throw new n.a("Gif preview could not be generated",l)}))}{const e=new n.a("The provided image must be a gif",s);return Promise.reject(e)}}{const e=new n.a("The provided file is not a valid image",r);return Promise.reject(e)}}},vOV5:function(e,t,a){"use strict";a.r(t),a.d(t,"PlacePickerScreen",(function(){return $}));a("kYxP");var n=a("ERkP"),i=a.n(n),o=a("a/ea"),r=a("/Rsk"),s=a("P1r1"),l=a("xVN5"),c=a("RqPI"),d=a("rxPX"),u=a("0KEI");var h=Object(d.a)().propsFromState((()=>({autotaggedLocation:r.d,initialResults:r.f,initialFetchStatus:r.e,lastSearchResults:r.h,lastSearchFetchStatus:r.g,position:o.d,taggedLocation:l.p,userCountry:c.A}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(u.createLocalApiErrorHandlerWithContextFactory)("PLACE_PICKER"),loadGeoLocation:o.a,fetchInitialPlacesIfNeeded:r.b,searchPlaces:r.c,updateLastSelectedPlace:r.i,updateSettings:s.M,updateSingleComposer:l.w}))).withAnalytics({page:"compose",section:"place_picker"}),p=a("kGix"),m=a("v//M"),g=a("jHSc"),b=a("M6MT"),_=a("3XMw"),f=a.n(_),y=a("MWbm"),w=a("pjBI"),v=a("t62R"),C=a("CKsB"),E=a("/yvb"),T=a("6OUF"),x=a("cmUU"),S=a("rHpw");class I{constructor(e,t,a){this.formatter=e,this.fallbackFormatter=t,this.fallbackRatio=a}format(e){const t=Math.round(10*e)/10;return t>0?this.formatter({distance:t}):this.fallbackFormatter({distance:Math.round(e*this.fallbackRatio)})}}const k=new I(f.a.b01ed2db,f.a.i83e29e1,5280),R=new I(f.a.d4b7cff7,f.a.b211849f,1e3),P=["lr","mm","uk","us"];var L=a("JFx8"),M=a("VwDm"),D=a("EfHu"),A=a("474o");const O=f.a.b772cd66,F=f.a.e7c766ee,B=f.a.ab68727a,N=f.a.ae4057a2,U=f.a.bf2923a6,j=f.a.d963d1b6,H=f.a.a893d602,z=f.a.e68b09b4,V=f.a.be6cc44e,W=f.a.d8ef3232,G=f.a.cce30dcc,q=f.a.fa9adac1;class $ extends i.a.Component{constructor(e){super(e),this.state={activeResultSet:A.c.initial,geoLocationError:void 0,query:"",selectedLocation:void 0,showSearchForButton:!1},this._appBarRef=i.a.createRef(),this._fetchInitialPlaces=()=>{const{createLocalApiErrorHandler:e,fetchInitialPlacesIfNeeded:t,taggedLocation:a}=this.props;t().then((()=>{const{autotaggedLocation:e}=this.props;a||this.setState({selectedLocation:e})})).catch(e())},this._getActiveResults=()=>{const{initialResults:e,lastSearchResults:t}=this.props,{activeResultSet:a}=this.state;return a===A.c.initial?e:t},this._selectResults=()=>{var e;const{query:t,selectedLocation:a}=this.state;let n=(null==(e=this._getActiveResults())?void 0:e.places)||[];return a&&(n=[a,...n.filter((e=>e.place.id!==a.place.id))]),n.filter((e=>e.place.full_name.toLowerCase().includes(t.toLowerCase())))},this._goBack=()=>{var e;null==(e=this._appBarRef.current)||e.goBack()},this._setTaggedLocation=e=>{const{updateLastSelectedPlace:t,updateSettings:a,updateSingleComposer:n}=this.props;n({updates:{taggedLocation:e}}),t(e),a({shouldAutoTagLocation:!!e})},this._handleBack=()=>this._goBack(),this._handleDone=()=>{const{selectedLocation:e}=this.state;e&&this._setTaggedLocation(e),this._goBack()},this._handleRemove=()=>{this._setTaggedLocation(null),this._goBack()},this._handleRetry=()=>{const{searchPlaces:e}=this.props,{activeResultSet:t,query:a}=this.state;t===A.c.initial?this._fetchInitialPlaces():e(a)},this._handleLocationDisabledPromptDismiss=()=>{const{history:e}=this.props;e.goBack()},this._handleChange=e=>{const{value:t}=e.currentTarget,a=t.length?this.state.activeResultSet:A.c.initial;this.setState({activeResultSet:a,query:t,showSearchForButton:!!t.length})},this._handleClear=()=>{this.setState({activeResultSet:A.c.initial,query:""})},this._handleSubmit=()=>{const{query:e}=this.state,{searchPlaces:t}=this.props;e.length&&(this.setState({activeResultSet:A.c.lastSearch,showSearchForButton:!1}),t(e))},this._handlePlaceClick=e=>()=>{this._setTaggedLocation(e),this._goBack()},this._renderPlaceSubtext=e=>{const{position:t,userCountry:a}=this.props,{place:{attributes:{street_address:n},centroid:o}}=e;if(n&&o&&2===o.length&&t){const e=((e,t)=>{const a=e.lat*(Math.PI/180),n=t.lat*(Math.PI/180),i=n-a,o=(t.long-e.long)*(Math.PI/180);return 7917.6*Math.asin(Math.sqrt(Math.sin(i/2)*Math.sin(i/2)+Math.cos(a)*Math.cos(n)*Math.sin(o/2)*Math.sin(o/2)))})({lat:t.coords.latitude,long:t.coords.longitude},{lat:o[1],long:o[0]});return i.a.createElement(w.a,null,i.a.createElement(v.b,null,n),i.a.createElement(v.b,null,((e,t="us")=>{if(P.find((e=>e===t.toLowerCase())))return k.format(e);{const t=1.609344*e;return R.format(t)}})(e,a)))}},this._renderPlace=e=>{const{selectedLocation:t}=this.state;return i.a.createElement(C.a,{actionSubText:this._renderPlaceSubtext(e),actionText:e.place.full_name,isSelected:e.place.id===(null==t?void 0:t.place.id),key:e.place.id,onClick:this._handlePlaceClick(e),selectable:!0})},this._renderPlaces=e=>e.length?e.map((e=>this._renderPlace(e))):i.a.createElement(v.b,{align:"center",style:K.noPlacesText},j),this._renderAttributionIfNeeded=()=>{const e=this._getActiveResults();return null!=e&&e.attributions.has(A.b.foursquare)?i.a.createElement(L.a,{style:K.foursquareIcon}):null},this._renderResults=()=>{const{query:e,showSearchForButton:t}=this.state,a=this._selectResults();return i.a.createElement(y.a,null,this._renderPlaces(a),t?i.a.createElement(C.a,{actionText:q({query:e}),onClick:this._handleSubmit,textColor:"primary"}):null,this._renderAttributionIfNeeded())},this._renderRightControl=()=>i.a.createElement(y.a,{style:K.actionButtonContainer},i.a.createElement(E.a,{onPress:this._handleRemove,size:"small",style:K.actionButton,type:"primaryText"},z),i.a.createElement(E.a,{onPress:this._handleDone,size:"small",style:K.actionButton,type:"primaryFilled"},O)),this._renderGeoPicker=()=>{const{history:e,initialFetchStatus:t,lastSearchFetchStatus:a}=this.props,{activeResultSet:n}=this.state,o=n===A.c.initial?t:a;return i.a.createElement(g.b,{appBarRef:this._appBarRef,history:e,onBackClick:this._handleBack,rightControl:this._renderRightControl(),title:G},i.a.createElement(T.a,{Icon:M.a,onChange:this._handleChange,onClear:this._handleClear,onSubmitEditing:this._handleSubmit,placeholder:V,style:K.search,withClearButton:!0}),i.a.createElement(m.a,{fetchStatus:o===p.a.NONE?p.a.LOADING:o,onRequestRetry:this._handleRetry,render:this._renderResults,retryMessage:W}))},this._renderLocationDisabledPrompt=()=>{const{geoLocationError:e}=this.state;let t=N,a=U;return e&&e.code===b.a.PERMISSION_DENIED&&(t=F,a=B),i.a.createElement(x.a,{actionLabel:H,graphic:D.a,headline:t,onAction:this._handleLocationDisabledPromptDismiss,onClose:this._handleLocationDisabledPromptDismiss,subtext:a})};const{autotaggedLocation:t,initialResults:a,taggedLocation:n}=e;n?this.state.selectedLocation=n:a&&(this.state.selectedLocation=t)}componentDidMount(){const{loadGeoLocation:e}=this.props;return e().then(this._fetchInitialPlaces,(e=>this.setState({geoLocationError:e})))}render(){const{geoLocationError:e}=this.state;return e?this._renderLocationDisabledPrompt():this._renderGeoPicker()}}const K=S.a.create((e=>({search:{marginHorizontal:e.spaces.space16,flexGrow:0},actionButtonContainer:{flexDirection:"row"},actionButton:{marginLeft:e.spaces.space12},noPlacesText:{marginVertical:e.spaces.space16},foursquareIcon:{marginVertical:e.spaces.space16,fill:e.colors.gray700}}))),X=h($);t.default=X},vxC8:function(e,t,a){var n=a("5nKN"),i=a("4p/L");e.exports=function(e,t){var a=i(e,t);return n(a)?a:void 0}},w3n3:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),o=a("/yvb"),r=a("3XMw"),s=a.n(r),l=a("3rWK"),c=a("Irs7");const d=s.a.a4993fa2,u=i.a.createElement(l.a,null),h=s.a.i0db46e6,p={viewType:"gif_search"};t.a=({dmConversationId:e,enabled:t=!0,gifSearchKeySource:a,history:n,onPress:r,style:s,testID:l})=>{const m=Object(c.b)(),g=i.a.useCallback((()=>{r&&r(),m.scribe({element:"found_media_button",action:"click"}),n.push({pathname:"/i/foundmedia/search",state:{gifSearchKeySource:a,dmConversationId:e}})}),[e,m,a,n,r]);return i.a.createElement(o.a,{accessibilityLabel:d,behavioralEventContext:p,disabled:!t,hoverLabel:{label:h},icon:u,onPress:g,size:"medium",style:s,testID:l,type:"brandText"})}},wpu3:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return h})),a.d(t,"c",(function(){return p})),a.d(t,"d",(function(){return m}));a("kYxP"),a("qd3W");var n=a("oEoC"),i=a("1auM"),o=a("kIAd"),r=a("VAyw"),s=a("/Ikv"),l=a("s1N3"),c=a("lnti");const d=({excludeReplyUser:e,inReplyToStatus:t,loggedInUserId:a})=>{const{retweeted_status:n}=t,{entities:i,unmentioned_user_ids:o,user:s}=n||t,d=n?n.user:{},h=n?t.user:{},p=(null==i?void 0:i.user_mentions)||[],m=r.a.mergeTaggedUsers((null==i?void 0:i.media)||[]),g=u(n||t)||{},b={[d.id_str]:d,[h.id_str]:h,[s.id_str]:s,[g.id_str]:g};p.forEach((e=>{b[e.id_str]=e})),m.forEach((({name:e,screen_name:t,user_id:a})=>{b[a]={id_str:a,name:e,screen_name:t}}));const _=e=>{const t=null==o?void 0:o.includes(e.id_str),a=e.id_str===s.id_str;return!t||a?[e.id_str]:[]},f=Object(l.a)(Object(c.a)([..._(d),..._(h),s.id_str,...p.flatMap((e=>_(e))),...m.map((e=>e.user_id))])).filter((e=>e!==a));let y=a&&s.id_str===a?[a,...f]:f;return e&&(y=y.filter((e=>e!==s.id_str))),y.map((e=>b[e]))},u=({card:e})=>{let t=null;if(e){const a=s.a.getBindingValue(e.binding_values,"site");a&&e.users&&(t=e.users[a.id_str])}return t},h=({maxNumberOfPhotos:e})=>t=>{if(0===t.length)return!0;const a=t.some((e=>!!e.externalMediaDetails)),n=!a&&t.some((e=>e.mediaFile&&e.mediaFile.isGif)),o=t.some((e=>e.mediaFile&&!(e.mediaFile instanceof i.a)&&e.mediaFile.isVideo));if(n||a||o)return 1===t.length;{const a=t.length<=e,n=t.every((e=>e.mediaFile&&e.mediaFile.isImage));return a&&n}},p=h({maxNumberOfPhotos:4}),m=(e,t=!1)=>{const a=e.split(o.b.WordBoundary);return t&&a.pop(),!!a.find((e=>{const t=Object(n.e)(e,"compose");return t&&"users"===t.result_type}))}},yTN1:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),o=a("WOwf"),r=a("3XMw"),s=a.n(r),l=a("k6Ei"),c=a("rHpw"),d=a("+/1j"),u=a("MWbm");const h=s.a.c2fc878d,p=s.a.db11b27f,m=e=>e,g=c.a.create((({colors:e})=>({root:{alignItems:"flex-start",minHeight:30,minWidth:30},center:{alignItems:"center",justifyContent:"center",margin:"auto"},progressCircle:{transitionDuration:"0.2s",transitionProperty:"opacity"},hide:{opacity:0},text:{fontSize:13,lineHeight:.8,minWidth:16,textAlign:"center"},gray700:{color:e.gray700},red500:{color:e.red500}})));t.a=e=>{const{count:t,maxCount:a,formatNumber:n=m,warningCount:r}=e,s=a-t,b=s>=0?p({count:n(s)}):h({count:n(t-a)}),_=t>=r?i.a.createElement(d.a,{accessibilityAtomic:!0,accessibilityLiveRegion:"polite",style:c.a.visuallyHidden},b):null,f=Object(o.a)(s,a),y=t>=a?"red500":t>=r?"yellow500":"primary",w=i.a.createElement(l.a,{color:y,progress:f,size:t>=r?30:20,style:[g.progressCircle,s<=-10&&g.hide]}),v=t>=r?i.a.createElement(d.a,{style:[g.text,s>0?g.gray700:g.red500]},n(s)):null;return i.a.createElement(u.a,{style:[g.root,g.center]},_,w,i.a.createElement(u.a,{style:[c.a.absoluteFill,g.center]},v))}},yZqq:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),o=(a("kYxP"),a("ERkP")),r=a.n(o),s=a("H7Rt"),l=a("3XMw"),c=a.n(l),d=a("MWbm"),u=a("t62R"),h=a("CKsB"),p=a("/yvb"),m=a("rHpw"),g=a("Zg3A"),b=a("Lsrn"),_=a("k/Ka");const f=(e={})=>Object(_.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[b.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M10.43 12.24c-1.37 0-2.89-.15-3.87-1.26-.82-.95-1.09-2.39-.81-4.43C6.13 3.7 7.88 2 10.43 2s4.3 1.7 4.68 4.55c.27 2.04.01 3.49-.81 4.42-.98 1.12-2.51 1.27-3.87 1.27zm0-8.73c-2.39 0-3.03 2.03-3.19 3.24-.21 1.56-.06 2.65.45 3.23.46.53 1.28.75 2.73.75 1.46 0 2.28-.22 2.74-.75.51-.58.66-1.67.45-3.23-.16-1.21-.79-3.24-3.18-3.24zm2.01 18.99H4.22c-.7 0-1.33-.3-1.75-.83-.43-.54-.57-1.26-.4-1.95.88-3.55 4.31-6.03 8.34-6.03.42 0 .75.34.75.75 0 .42-.34.75-.75.75-3.34 0-6.17 2.01-6.88 4.89-.06.25-.02.49.12.66.13.16.32.25.56.25h8.22c.42 0 .75.34.75.75.01.42-.32.76-.74.76zm9.15-10.87l-4.2 8.46c-.01.03-.02.05-.04.07-.02.06-.06.11-.1.15-.05.05-.1.09-.15.13h-.01c-.06.04-.12.06-.19.08-.07.02-.13.03-.2.03-.05 0-.11 0-.17-.02-.06-.01-.11-.03-.16-.06-.06-.03-.12-.07-.18-.12-.01-.01-.03-.02-.04-.03l-3.08-3.27c-.28-.3-.27-.78.04-1.06.3-.29.77-.27 1.06.03l2.34 2.48 3.74-7.53c.18-.37.63-.52 1-.34.37.17.52.63.34 1z"}),r.a.createElement("path",{d:"M17.1 20.44c.05-.04.1-.08.15-.13 0 .01-.02.03-.03.04-.04.04-.08.06-.12.09z"})));f.metadata={width:24,height:24};var y=f,w=a("boUI"),v=a("EweD");const C=c.a.g6185a9e,E=c.a.g2d04222,T=c.a.baffe39a,x=c.a.af293dc2,S=c.a.h1053f7e,I=c.a.bf994ab2,k=c.a.cf7f7e3a,R=c.a.cfd2f35e,P=m.a.create((e=>({root:{flexDirection:"column",paddingTop:e.spaces.space16,paddingBottom:e.spaces.space4,borderRadius:e.borderRadii.xLarge},popover:{maxWidth:5*e.spacesPx.space64},modal:{borderRadius:e.borderRadii.none},title:{flexDirection:"column",paddingHorizontal:e.spaces.space16,marginBottom:e.spaces.space12},menuRow:{flexDirection:"row",paddingTop:e.spaces.space12,paddingBottom:e.spaces.space12,alignItems:"center",borderRadius:e.borderRadii.small},cancelButton:{marginHorizontal:e.spaces.space16,marginVertical:e.spaces.space16}})));var L=e=>{var t,a;const{dismiss:n,isModal:i,midConversationTweet:o,value:l}=e,c=t=>()=>{e.onChange(t),e.dismiss()},m=!!o,b=m&&!(null!=o&&null!=(t=o.entities)&&null!=(a=t.user_mentions)&&a.some((e=>e.id_str!==o.user.id_str)));let _=S;return b?_=I:m&&(_=k),r.a.createElement(d.a,{accessibilityDescribedBy:"conversation-controls-details",accessibilityLabelledBy:"conversation-controls-title",accessibilityRole:"dialog",style:[P.root,i?P.modal:P.popover]},r.a.createElement(d.a,{style:P.title},r.a.createElement(u.b,{nativeID:"conversation-controls-title",weight:"bold"},C),r.a.createElement(u.b,{color:"gray700",nativeID:"conversation-controls-details",size:"body"},E)),r.a.createElement(d.a,null,r.a.createElement(h.a,{Icon:g.a,actionText:T,isSelected:s.a.all===l,onClick:c(s.a.all),selectable:!0,style:P.menuRow,withIconAsThumbnail:!0}),r.a.createElement(h.a,{Icon:y,actionText:x,isSelected:s.a.community===l,onClick:c(s.a.community),selectable:!0,style:P.menuRow,withIconAsThumbnail:!0}),r.a.createElement(h.a,{Icon:b?w.a:v.a,actionText:_,isSelected:s.a.by_invitation===l,onClick:c(s.a.by_invitation),selectable:!0,style:P.menuRow,withIconAsThumbnail:!0}),e.isModal?r.a.createElement(p.a,{key:"button_cancel",onPress:n,size:"large",style:P.cancelButton,type:"primaryOutlined"},R):null))},M=a("OiMc"),D=a("efqG");t.a=e=>{const{children:t,controlled:a=!1,disabled:n}=e,[o,s]=r.a.useState(!1),l=r.a.useCallback((()=>s(!0)),[]),c=r.a.useCallback((()=>s(!1)),[]),d=a?o?M.a.VISIBILITY_BEHAVIOR.forceVisible:M.a.VISIBILITY_BEHAVIOR.forceHidden:void 0,u="function"==typeof t?t({openPopover:l,closePopover:c}):t;return r.a.createElement(D.a,{disabled:n,onDismiss:c,renderContent:(t,a)=>{const{children:n,controlled:o,...s}=e;return r.a.createElement(L,i()({},s,{dismiss:t,isModal:"sheet"===a}))},visibilityBehavior:d},u)}},z9Jh:function(e,t){e.exports=function(e){return e!=e}},zWgn:function(e,t){e.exports=function(e){return e}},zaNA:function(e,t){e.exports=function(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}},zmS9:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),o=a("3XMw"),r=a.n(o),s=a("J0mu"),l=a("t62R"),c=a("rHpw"),d=a("QbaN");const u=r.a.bfb895b1,h=c.a.create((e=>({icon:{fontSize:e.fontSizes.body,paddingRight:e.spaces.space12,textAlignVertical:"middle"}})));t.a=({onPress:e,scheduledFor:t,testID:a})=>{const n=Object(d.c)(t),o=!!n&&(Object(d.h)(t)&&!Object(d.g)(n)&&!Object(d.f)(n)),r=Boolean(e);return n&&o?i.a.createElement(l.b,{color:"gray700",onPress:e,size:"subtext2",testID:a,withInteractiveStyling:r},i.a.createElement(s.a,{style:h.icon}),u({date:Object(d.b)(n),time:Object(d.i)(n)})):null}}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.Compose.d23bc847.js.map